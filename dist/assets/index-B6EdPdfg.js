var hR=Object.defineProperty;var fR=(e,t,r)=>t in e?hR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var wa=(e,t,r)=>fR(e,typeof t!="symbol"?t+"":t,r);function CE(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Ss(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var kE={exports:{}},Nf={},AE={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hc=Symbol.for("react.element"),pR=Symbol.for("react.portal"),gR=Symbol.for("react.fragment"),vR=Symbol.for("react.strict_mode"),yR=Symbol.for("react.profiler"),xR=Symbol.for("react.provider"),bR=Symbol.for("react.context"),wR=Symbol.for("react.forward_ref"),_R=Symbol.for("react.suspense"),jR=Symbol.for("react.memo"),NR=Symbol.for("react.lazy"),_w=Symbol.iterator;function SR(e){return e===null||typeof e!="object"?null:(e=_w&&e[_w]||e["@@iterator"],typeof e=="function"?e:null)}var PE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OE=Object.assign,TE={};function Do(e,t,r){this.props=e,this.context=t,this.refs=TE,this.updater=r||PE}Do.prototype.isReactComponent={};Do.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Do.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function IE(){}IE.prototype=Do.prototype;function Hy(e,t,r){this.props=e,this.context=t,this.refs=TE,this.updater=r||PE}var qy=Hy.prototype=new IE;qy.constructor=Hy;OE(qy,Do.prototype);qy.isPureReactComponent=!0;var jw=Array.isArray,DE=Object.prototype.hasOwnProperty,Vy={current:null},RE={key:!0,ref:!0,__self:!0,__source:!0};function ME(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)DE.call(t,n)&&!RE.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Hc,type:e,key:i,ref:a,props:s,_owner:Vy.current}}function ER(e,t){return{$$typeof:Hc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hc}function CR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Nw=/\/+/g;function np(e,t){return typeof e=="object"&&e!==null&&e.key!=null?CR(""+e.key):t.toString(36)}function bd(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Hc:case pR:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+np(a,0):n,jw(s)?(r="",e!=null&&(r=e.replace(Nw,"$&/")+"/"),bd(s,t,r,"",function(u){return u})):s!=null&&(Gy(s)&&(s=ER(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Nw,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",jw(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+np(i,l);a+=bd(i,t,r,c,s)}else if(c=SR(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+np(i,l++),a+=bd(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Eu(e,t,r){if(e==null)return e;var n=[],s=0;return bd(e,n,"","",function(i){return t.call(r,i,s++)}),n}function kR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fr={current:null},wd={transition:null},AR={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:wd,ReactCurrentOwner:Vy};function LE(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Eu,forEach:function(e,t,r){Eu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Eu(e,function(){t++}),t},toArray:function(e){return Eu(e,function(t){return t})||[]},only:function(e){if(!Gy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=Do;ve.Fragment=gR;ve.Profiler=yR;ve.PureComponent=Hy;ve.StrictMode=vR;ve.Suspense=_R;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AR;ve.act=LE;ve.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=OE({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Vy.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)DE.call(t,c)&&!RE.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Hc,type:e.type,key:s,ref:i,props:n,_owner:a}};ve.createContext=function(e){return e={$$typeof:bR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xR,_context:e},e.Consumer=e};ve.createElement=ME;ve.createFactory=function(e){var t=ME.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:wR,render:e}};ve.isValidElement=Gy;ve.lazy=function(e){return{$$typeof:NR,_payload:{_status:-1,_result:e},_init:kR}};ve.memo=function(e,t){return{$$typeof:jR,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=wd.transition;wd.transition={};try{e()}finally{wd.transition=t}};ve.unstable_act=LE;ve.useCallback=function(e,t){return fr.current.useCallback(e,t)};ve.useContext=function(e){return fr.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return fr.current.useDeferredValue(e)};ve.useEffect=function(e,t){return fr.current.useEffect(e,t)};ve.useId=function(){return fr.current.useId()};ve.useImperativeHandle=function(e,t,r){return fr.current.useImperativeHandle(e,t,r)};ve.useInsertionEffect=function(e,t){return fr.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return fr.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return fr.current.useMemo(e,t)};ve.useReducer=function(e,t,r){return fr.current.useReducer(e,t,r)};ve.useRef=function(e){return fr.current.useRef(e)};ve.useState=function(e){return fr.current.useState(e)};ve.useSyncExternalStore=function(e,t,r){return fr.current.useSyncExternalStore(e,t,r)};ve.useTransition=function(){return fr.current.useTransition()};ve.version="18.3.1";AE.exports=ve;var x=AE.exports;const PR=Ss(x),OR=CE({__proto__:null,default:PR},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR=x,IR=Symbol.for("react.element"),DR=Symbol.for("react.fragment"),RR=Object.prototype.hasOwnProperty,MR=TR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LR={key:!0,ref:!0,__self:!0,__source:!0};function $E(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)RR.call(t,n)&&!LR.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:IR,type:e,key:i,ref:a,props:s,_owner:MR.current}}Nf.Fragment=DR;Nf.jsx=$E;Nf.jsxs=$E;kE.exports=Nf;var o=kE.exports,UE={exports:{}},Hr={},FE={exports:{}},BE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,L){var B=D.length;D.push(L);e:for(;0<B;){var q=B-1>>>1,V=D[q];if(0<s(V,L))D[q]=L,D[B]=V,B=q;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var L=D[0],B=D.pop();if(B!==L){D[0]=B;e:for(var q=0,V=D.length,he=V>>>1;q<he;){var ue=2*(q+1)-1,xe=D[ue],Ae=ue+1,ye=D[Ae];if(0>s(xe,B))Ae<V&&0>s(ye,xe)?(D[q]=ye,D[Ae]=B,q=Ae):(D[q]=xe,D[ue]=B,q=ue);else if(Ae<V&&0>s(ye,B))D[q]=ye,D[Ae]=B,q=Ae;else break e}}return L}function s(D,L){var B=D.sortIndex-L.sortIndex;return B!==0?B:D.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,g=!1,y=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=D)n(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(u)}}function _(D){if(y=!1,w(D),!g)if(r(c)!==null)g=!0,F(j);else{var L=r(u);L!==null&&I(_,L.startTime-D)}}function j(D,L){g=!1,y&&(y=!1,v(T),T=-1),m=!0;var B=f;try{for(w(L),h=r(c);h!==null&&(!(h.expirationTime>L)||D&&!A());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var V=q(h.expirationTime<=L);L=e.unstable_now(),typeof V=="function"?h.callback=V:h===r(c)&&n(c),w(L)}else n(c);h=r(c)}if(h!==null)var he=!0;else{var ue=r(u);ue!==null&&I(_,ue.startTime-L),he=!1}return he}finally{h=null,f=B,m=!1}}var N=!1,k=null,T=-1,P=5,C=-1;function A(){return!(e.unstable_now()-C<P)}function S(){if(k!==null){var D=e.unstable_now();C=D;var L=!0;try{L=k(!0,D)}finally{L?E():(N=!1,k=null)}}else N=!1}var E;if(typeof b=="function")E=function(){b(S)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,R=O.port2;O.port1.onmessage=S,E=function(){R.postMessage(null)}}else E=function(){p(S,0)};function F(D){k=D,N||(N=!0,E())}function I(D,L){T=p(function(){D(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,F(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var B=f;f=L;try{return D()}finally{f=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=f;f=D;try{return L()}finally{f=B}},e.unstable_scheduleCallback=function(D,L,B){var q=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?q+B:q):B=q,D){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=B+V,D={id:d++,callback:L,priorityLevel:D,startTime:B,expirationTime:V,sortIndex:-1},B>q?(D.sortIndex=B,t(u,D),r(c)===null&&D===r(u)&&(y?(v(T),T=-1):y=!0,I(_,B-q))):(D.sortIndex=V,t(c,D),g||m||(g=!0,F(j))),D},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(D){var L=f;return function(){var B=f;f=L;try{return D.apply(this,arguments)}finally{f=B}}}})(BE);FE.exports=BE;var $R=FE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UR=x,Br=$R;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zE=new Set,Yl={};function ha(e,t){co(e,t),co(e+"Capture",t)}function co(e,t){for(Yl[e]=t,e=0;e<t.length;e++)zE.add(t[e])}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_g=Object.prototype.hasOwnProperty,FR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sw={},Ew={};function BR(e){return _g.call(Ew,e)?!0:_g.call(Sw,e)?!1:FR.test(e)?Ew[e]=!0:(Sw[e]=!0,!1)}function zR(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function WR(e,t,r,n){if(t===null||typeof t>"u"||zR(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mr(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qt[e]=new mr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qt[t]=new mr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qt[e]=new mr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qt[e]=new mr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qt[e]=new mr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qt[e]=new mr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qt[e]=new mr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qt[e]=new mr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qt[e]=new mr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ky=/[\-:]([a-z])/g;function Yy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ky,Yy);qt[t]=new mr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ky,Yy);qt[t]=new mr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ky,Yy);qt[t]=new mr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qt[e]=new mr(e,1,!1,e.toLowerCase(),null,!1,!1)});qt.xlinkHref=new mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qt[e]=new mr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xy(e,t,r,n){var s=qt.hasOwnProperty(t)?qt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(WR(t,r,s,n)&&(r=null),n||s===null?BR(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Es=UR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cu=Symbol.for("react.element"),Ra=Symbol.for("react.portal"),Ma=Symbol.for("react.fragment"),Jy=Symbol.for("react.strict_mode"),jg=Symbol.for("react.profiler"),WE=Symbol.for("react.provider"),HE=Symbol.for("react.context"),Qy=Symbol.for("react.forward_ref"),Ng=Symbol.for("react.suspense"),Sg=Symbol.for("react.suspense_list"),Zy=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),qE=Symbol.for("react.offscreen"),Cw=Symbol.iterator;function nl(e){return e===null||typeof e!="object"?null:(e=Cw&&e[Cw]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,sp;function jl(e){if(sp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sp=t&&t[1]||""}return`
`+sp+e}var ip=!1;function ap(e,t){if(!e||ip)return"";ip=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{ip=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?jl(e):""}function HR(e){switch(e.tag){case 5:return jl(e.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return e=ap(e.type,!1),e;case 11:return e=ap(e.type.render,!1),e;case 1:return e=ap(e.type,!0),e;default:return""}}function Eg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ma:return"Fragment";case Ra:return"Portal";case jg:return"Profiler";case Jy:return"StrictMode";case Ng:return"Suspense";case Sg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case HE:return(e.displayName||"Context")+".Consumer";case WE:return(e._context.displayName||"Context")+".Provider";case Qy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zy:return t=e.displayName||null,t!==null?t:Eg(e.type)||"Memo";case Us:t=e._payload,e=e._init;try{return Eg(e(t))}catch{}}return null}function qR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eg(t);case 8:return t===Jy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ci(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function VE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function VR(e){var t=VE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ku(e){e._valueTracker||(e._valueTracker=VR(e))}function GE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=VE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function $d(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Cg(e,t){var r=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function kw(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ci(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function KE(e,t){t=t.checked,t!=null&&Xy(e,"checked",t,!1)}function kg(e,t){KE(e,t);var r=ci(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ag(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ag(e,t.type,ci(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Aw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ag(e,t,r){(t!=="number"||$d(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Nl=Array.isArray;function Ja(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ci(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(W(92));if(Nl(r)){if(1<r.length)throw Error(W(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ci(r)}}function YE(e,t){var r=ci(t.value),n=ci(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ow(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function XE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Og(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?XE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Au,JE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Au=Au||document.createElement("div"),Au.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Au.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GR=["Webkit","ms","Moz","O"];Object.keys(Pl).forEach(function(e){GR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pl[t]=Pl[e]})});function QE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pl.hasOwnProperty(e)&&Pl[e]?(""+t).trim():t+"px"}function ZE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=QE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var KR=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tg(e,t){if(t){if(KR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function Ig(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dg=null;function e0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rg=null,Qa=null,Za=null;function Tw(e){if(e=Gc(e)){if(typeof Rg!="function")throw Error(W(280));var t=e.stateNode;t&&(t=Af(t),Rg(e.stateNode,e.type,t))}}function e2(e){Qa?Za?Za.push(e):Za=[e]:Qa=e}function t2(){if(Qa){var e=Qa,t=Za;if(Za=Qa=null,Tw(e),t)for(e=0;e<t.length;e++)Tw(t[e])}}function r2(e,t){return e(t)}function n2(){}var op=!1;function s2(e,t,r){if(op)return e(t,r);op=!0;try{return r2(e,t,r)}finally{op=!1,(Qa!==null||Za!==null)&&(n2(),t2())}}function Jl(e,t){var r=e.stateNode;if(r===null)return null;var n=Af(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(W(231,t,typeof r));return r}var Mg=!1;if(us)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){Mg=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{Mg=!1}function YR(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ol=!1,Ud=null,Fd=!1,Lg=null,XR={onError:function(e){Ol=!0,Ud=e}};function JR(e,t,r,n,s,i,a,l,c){Ol=!1,Ud=null,YR.apply(XR,arguments)}function QR(e,t,r,n,s,i,a,l,c){if(JR.apply(this,arguments),Ol){if(Ol){var u=Ud;Ol=!1,Ud=null}else throw Error(W(198));Fd||(Fd=!0,Lg=u)}}function fa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function i2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Iw(e){if(fa(e)!==e)throw Error(W(188))}function ZR(e){var t=e.alternate;if(!t){if(t=fa(e),t===null)throw Error(W(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Iw(s),e;if(i===n)return Iw(s),t;i=i.sibling}throw Error(W(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(W(189))}}if(r.alternate!==n)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?e:t}function a2(e){return e=ZR(e),e!==null?o2(e):null}function o2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=o2(e);if(t!==null)return t;e=e.sibling}return null}var l2=Br.unstable_scheduleCallback,Dw=Br.unstable_cancelCallback,e3=Br.unstable_shouldYield,t3=Br.unstable_requestPaint,it=Br.unstable_now,r3=Br.unstable_getCurrentPriorityLevel,t0=Br.unstable_ImmediatePriority,c2=Br.unstable_UserBlockingPriority,Bd=Br.unstable_NormalPriority,n3=Br.unstable_LowPriority,u2=Br.unstable_IdlePriority,Sf=null,Fn=null;function s3(e){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Sf,e,void 0,(e.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:o3,i3=Math.log,a3=Math.LN2;function o3(e){return e>>>=0,e===0?32:31-(i3(e)/a3|0)|0}var Pu=64,Ou=4194304;function Sl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Sl(l):(i&=a,i!==0&&(n=Sl(i)))}else a=r&~s,a!==0?n=Sl(a):i!==0&&(n=Sl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Sn(t),s=1<<r,n|=e[r],t&=~s;return n}function l3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c3(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Sn(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=l3(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function $g(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function d2(){var e=Pu;return Pu<<=1,!(Pu&4194240)&&(Pu=64),e}function lp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sn(t),e[t]=r}function u3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Sn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function r0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Sn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ee=0;function h2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var f2,n0,m2,p2,g2,Ug=!1,Tu=[],Xs=null,Js=null,Qs=null,Ql=new Map,Zl=new Map,Ws=[],d3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rw(e,t){switch(e){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Ql.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(t.pointerId)}}function il(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Gc(t),t!==null&&n0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function h3(e,t,r,n,s){switch(t){case"focusin":return Xs=il(Xs,e,t,r,n,s),!0;case"dragenter":return Js=il(Js,e,t,r,n,s),!0;case"mouseover":return Qs=il(Qs,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ql.set(i,il(Ql.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Zl.set(i,il(Zl.get(i)||null,e,t,r,n,s)),!0}return!1}function v2(e){var t=Di(e.target);if(t!==null){var r=fa(t);if(r!==null){if(t=r.tag,t===13){if(t=i2(r),t!==null){e.blockedOn=t,g2(e.priority,function(){m2(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _d(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Dg=n,r.target.dispatchEvent(n),Dg=null}else return t=Gc(r),t!==null&&n0(t),e.blockedOn=r,!1;t.shift()}return!0}function Mw(e,t,r){_d(e)&&r.delete(t)}function f3(){Ug=!1,Xs!==null&&_d(Xs)&&(Xs=null),Js!==null&&_d(Js)&&(Js=null),Qs!==null&&_d(Qs)&&(Qs=null),Ql.forEach(Mw),Zl.forEach(Mw)}function al(e,t){e.blockedOn===t&&(e.blockedOn=null,Ug||(Ug=!0,Br.unstable_scheduleCallback(Br.unstable_NormalPriority,f3)))}function ec(e){function t(s){return al(s,e)}if(0<Tu.length){al(Tu[0],e);for(var r=1;r<Tu.length;r++){var n=Tu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Xs!==null&&al(Xs,e),Js!==null&&al(Js,e),Qs!==null&&al(Qs,e),Ql.forEach(t),Zl.forEach(t),r=0;r<Ws.length;r++)n=Ws[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ws.length&&(r=Ws[0],r.blockedOn===null);)v2(r),r.blockedOn===null&&Ws.shift()}var eo=Es.ReactCurrentBatchConfig,Wd=!0;function m3(e,t,r,n){var s=Ee,i=eo.transition;eo.transition=null;try{Ee=1,s0(e,t,r,n)}finally{Ee=s,eo.transition=i}}function p3(e,t,r,n){var s=Ee,i=eo.transition;eo.transition=null;try{Ee=4,s0(e,t,r,n)}finally{Ee=s,eo.transition=i}}function s0(e,t,r,n){if(Wd){var s=Fg(e,t,r,n);if(s===null)yp(e,t,n,Hd,r),Rw(e,n);else if(h3(s,e,t,r,n))n.stopPropagation();else if(Rw(e,n),t&4&&-1<d3.indexOf(e)){for(;s!==null;){var i=Gc(s);if(i!==null&&f2(i),i=Fg(e,t,r,n),i===null&&yp(e,t,n,Hd,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else yp(e,t,n,null,r)}}var Hd=null;function Fg(e,t,r,n){if(Hd=null,e=e0(n),e=Di(e),e!==null)if(t=fa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=i2(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hd=e,null}function y2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r3()){case t0:return 1;case c2:return 4;case Bd:case n3:return 16;case u2:return 536870912;default:return 16}default:return 16}}var Gs=null,i0=null,jd=null;function x2(){if(jd)return jd;var e,t=i0,r=t.length,n,s="value"in Gs?Gs.value:Gs.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return jd=s.slice(e,1<n?1-n:void 0)}function Nd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Iu(){return!0}function Lw(){return!1}function qr(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Iu:Lw,this.isPropagationStopped=Lw,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Iu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Iu)},persist:function(){},isPersistent:Iu}),t}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a0=qr(Ro),Vc=Ze({},Ro,{view:0,detail:0}),g3=qr(Vc),cp,up,ol,Ef=Ze({},Vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:o0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ol&&(ol&&e.type==="mousemove"?(cp=e.screenX-ol.screenX,up=e.screenY-ol.screenY):up=cp=0,ol=e),cp)},movementY:function(e){return"movementY"in e?e.movementY:up}}),$w=qr(Ef),v3=Ze({},Ef,{dataTransfer:0}),y3=qr(v3),x3=Ze({},Vc,{relatedTarget:0}),dp=qr(x3),b3=Ze({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),w3=qr(b3),_3=Ze({},Ro,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),j3=qr(_3),N3=Ze({},Ro,{data:0}),Uw=qr(N3),S3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=C3[e])?!!t[e]:!1}function o0(){return k3}var A3=Ze({},Vc,{key:function(e){if(e.key){var t=S3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?E3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:o0,charCode:function(e){return e.type==="keypress"?Nd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),P3=qr(A3),O3=Ze({},Ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fw=qr(O3),T3=Ze({},Vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:o0}),I3=qr(T3),D3=Ze({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),R3=qr(D3),M3=Ze({},Ef,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),L3=qr(M3),$3=[9,13,27,32],l0=us&&"CompositionEvent"in window,Tl=null;us&&"documentMode"in document&&(Tl=document.documentMode);var U3=us&&"TextEvent"in window&&!Tl,b2=us&&(!l0||Tl&&8<Tl&&11>=Tl),Bw=" ",zw=!1;function w2(e,t){switch(e){case"keyup":return $3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var La=!1;function F3(e,t){switch(e){case"compositionend":return _2(t);case"keypress":return t.which!==32?null:(zw=!0,Bw);case"textInput":return e=t.data,e===Bw&&zw?null:e;default:return null}}function B3(e,t){if(La)return e==="compositionend"||!l0&&w2(e,t)?(e=x2(),jd=i0=Gs=null,La=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return b2&&t.locale!=="ko"?null:t.data;default:return null}}var z3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ww(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!z3[e.type]:t==="textarea"}function j2(e,t,r,n){e2(n),t=qd(t,"onChange"),0<t.length&&(r=new a0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Il=null,tc=null;function W3(e){D2(e,0)}function Cf(e){var t=Fa(e);if(GE(t))return e}function H3(e,t){if(e==="change")return t}var N2=!1;if(us){var hp;if(us){var fp="oninput"in document;if(!fp){var Hw=document.createElement("div");Hw.setAttribute("oninput","return;"),fp=typeof Hw.oninput=="function"}hp=fp}else hp=!1;N2=hp&&(!document.documentMode||9<document.documentMode)}function qw(){Il&&(Il.detachEvent("onpropertychange",S2),tc=Il=null)}function S2(e){if(e.propertyName==="value"&&Cf(tc)){var t=[];j2(t,tc,e,e0(e)),s2(W3,t)}}function q3(e,t,r){e==="focusin"?(qw(),Il=t,tc=r,Il.attachEvent("onpropertychange",S2)):e==="focusout"&&qw()}function V3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cf(tc)}function G3(e,t){if(e==="click")return Cf(t)}function K3(e,t){if(e==="input"||e==="change")return Cf(t)}function Y3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var An=typeof Object.is=="function"?Object.is:Y3;function rc(e,t){if(An(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!_g.call(t,s)||!An(e[s],t[s]))return!1}return!0}function Vw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gw(e,t){var r=Vw(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vw(r)}}function E2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?E2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function C2(){for(var e=window,t=$d();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$d(e.document)}return t}function c0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function X3(e){var t=C2(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&E2(r.ownerDocument.documentElement,r)){if(n!==null&&c0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Gw(r,i);var a=Gw(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var J3=us&&"documentMode"in document&&11>=document.documentMode,$a=null,Bg=null,Dl=null,zg=!1;function Kw(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zg||$a==null||$a!==$d(n)||(n=$a,"selectionStart"in n&&c0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Dl&&rc(Dl,n)||(Dl=n,n=qd(Bg,"onSelect"),0<n.length&&(t=new a0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$a)))}function Du(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ua={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionend:Du("Transition","TransitionEnd")},mp={},k2={};us&&(k2=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function kf(e){if(mp[e])return mp[e];if(!Ua[e])return e;var t=Ua[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in k2)return mp[e]=t[r];return e}var A2=kf("animationend"),P2=kf("animationiteration"),O2=kf("animationstart"),T2=kf("transitionend"),I2=new Map,Yw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pi(e,t){I2.set(e,t),ha(t,[e])}for(var pp=0;pp<Yw.length;pp++){var gp=Yw[pp],Q3=gp.toLowerCase(),Z3=gp[0].toUpperCase()+gp.slice(1);pi(Q3,"on"+Z3)}pi(A2,"onAnimationEnd");pi(P2,"onAnimationIteration");pi(O2,"onAnimationStart");pi("dblclick","onDoubleClick");pi("focusin","onFocus");pi("focusout","onBlur");pi(T2,"onTransitionEnd");co("onMouseEnter",["mouseout","mouseover"]);co("onMouseLeave",["mouseout","mouseover"]);co("onPointerEnter",["pointerout","pointerover"]);co("onPointerLeave",["pointerout","pointerover"]);ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eM=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function Xw(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,QR(n,t,void 0,e),e.currentTarget=null}function D2(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Xw(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Xw(s,l,u),i=c}}}if(Fd)throw e=Lg,Fd=!1,Lg=null,e}function Be(e,t){var r=t[Gg];r===void 0&&(r=t[Gg]=new Set);var n=e+"__bubble";r.has(n)||(R2(t,e,2,!1),r.add(n))}function vp(e,t,r){var n=0;t&&(n|=4),R2(r,e,n,t)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function nc(e){if(!e[Ru]){e[Ru]=!0,zE.forEach(function(r){r!=="selectionchange"&&(eM.has(r)||vp(r,!1,e),vp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ru]||(t[Ru]=!0,vp("selectionchange",!1,t))}}function R2(e,t,r,n){switch(y2(t)){case 1:var s=m3;break;case 4:s=p3;break;default:s=s0}r=s.bind(null,t,r,e),s=void 0,!Mg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function yp(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Di(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}s2(function(){var u=i,d=e0(r),h=[];e:{var f=I2.get(e);if(f!==void 0){var m=a0,g=e;switch(e){case"keypress":if(Nd(r)===0)break e;case"keydown":case"keyup":m=P3;break;case"focusin":g="focus",m=dp;break;case"focusout":g="blur",m=dp;break;case"beforeblur":case"afterblur":m=dp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$w;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=y3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=I3;break;case A2:case P2:case O2:m=w3;break;case T2:m=R3;break;case"scroll":m=g3;break;case"wheel":m=L3;break;case"copy":case"cut":case"paste":m=j3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Fw}var y=(t&4)!==0,p=!y&&e==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var b=u,w;b!==null;){w=b;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=Jl(b,v),_!=null&&y.push(sc(b,_,w)))),p)break;b=b.return}0<y.length&&(f=new m(f,g,null,r,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==Dg&&(g=r.relatedTarget||r.fromElement)&&(Di(g)||g[ds]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?Di(g):null,g!==null&&(p=fa(g),g!==p||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=$w,_="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=Fw,_="onPointerLeave",v="onPointerEnter",b="pointer"),p=m==null?f:Fa(m),w=g==null?f:Fa(g),f=new y(_,b+"leave",m,r,d),f.target=p,f.relatedTarget=w,_=null,Di(d)===u&&(y=new y(v,b+"enter",g,r,d),y.target=w,y.relatedTarget=p,_=y),p=_,m&&g)t:{for(y=m,v=g,b=0,w=y;w;w=_a(w))b++;for(w=0,_=v;_;_=_a(_))w++;for(;0<b-w;)y=_a(y),b--;for(;0<w-b;)v=_a(v),w--;for(;b--;){if(y===v||v!==null&&y===v.alternate)break t;y=_a(y),v=_a(v)}y=null}else y=null;m!==null&&Jw(h,f,m,y,!1),g!==null&&p!==null&&Jw(h,p,g,y,!0)}}e:{if(f=u?Fa(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=H3;else if(Ww(f))if(N2)j=K3;else{j=V3;var N=q3}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=G3);if(j&&(j=j(e,u))){j2(h,j,r,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Ag(f,"number",f.value)}switch(N=u?Fa(u):window,e){case"focusin":(Ww(N)||N.contentEditable==="true")&&($a=N,Bg=u,Dl=null);break;case"focusout":Dl=Bg=$a=null;break;case"mousedown":zg=!0;break;case"contextmenu":case"mouseup":case"dragend":zg=!1,Kw(h,r,d);break;case"selectionchange":if(J3)break;case"keydown":case"keyup":Kw(h,r,d)}var k;if(l0)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else La?w2(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(b2&&r.locale!=="ko"&&(La||T!=="onCompositionStart"?T==="onCompositionEnd"&&La&&(k=x2()):(Gs=d,i0="value"in Gs?Gs.value:Gs.textContent,La=!0)),N=qd(u,T),0<N.length&&(T=new Uw(T,e,null,r,d),h.push({event:T,listeners:N}),k?T.data=k:(k=_2(r),k!==null&&(T.data=k)))),(k=U3?F3(e,r):B3(e,r))&&(u=qd(u,"onBeforeInput"),0<u.length&&(d=new Uw("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=k))}D2(h,t)})}function sc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qd(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Jl(e,r),i!=null&&n.unshift(sc(e,i,s)),i=Jl(e,t),i!=null&&n.push(sc(e,i,s))),e=e.return}return n}function _a(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jw(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Jl(r,i),c!=null&&a.unshift(sc(r,c,l))):s||(c=Jl(r,i),c!=null&&a.push(sc(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var tM=/\r\n?/g,rM=/\u0000|\uFFFD/g;function Qw(e){return(typeof e=="string"?e:""+e).replace(tM,`
`).replace(rM,"")}function Mu(e,t,r){if(t=Qw(t),Qw(e)!==t&&r)throw Error(W(425))}function Vd(){}var Wg=null,Hg=null;function qg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vg=typeof setTimeout=="function"?setTimeout:void 0,nM=typeof clearTimeout=="function"?clearTimeout:void 0,Zw=typeof Promise=="function"?Promise:void 0,sM=typeof queueMicrotask=="function"?queueMicrotask:typeof Zw<"u"?function(e){return Zw.resolve(null).then(e).catch(iM)}:Vg;function iM(e){setTimeout(function(){throw e})}function xp(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ec(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ec(t)}function Zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function e_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Mo,ic="__reactProps$"+Mo,ds="__reactContainer$"+Mo,Gg="__reactEvents$"+Mo,aM="__reactListeners$"+Mo,oM="__reactHandles$"+Mo;function Di(e){var t=e[Ln];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ds]||r[Ln]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=e_(e);e!==null;){if(r=e[Ln])return r;e=e_(e)}return t}e=r,r=e.parentNode}return null}function Gc(e){return e=e[Ln]||e[ds],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function Af(e){return e[ic]||null}var Kg=[],Ba=-1;function gi(e){return{current:e}}function He(e){0>Ba||(e.current=Kg[Ba],Kg[Ba]=null,Ba--)}function $e(e,t){Ba++,Kg[Ba]=e.current,e.current=t}var ui={},tr=gi(ui),_r=gi(!1),Xi=ui;function uo(e,t){var r=e.type.contextTypes;if(!r)return ui;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function jr(e){return e=e.childContextTypes,e!=null}function Gd(){He(_r),He(tr)}function t_(e,t,r){if(tr.current!==ui)throw Error(W(168));$e(tr,t),$e(_r,r)}function M2(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(W(108,qR(e)||"Unknown",s));return Ze({},r,n)}function Kd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ui,Xi=tr.current,$e(tr,e),$e(_r,_r.current),!0}function r_(e,t,r){var n=e.stateNode;if(!n)throw Error(W(169));r?(e=M2(e,t,Xi),n.__reactInternalMemoizedMergedChildContext=e,He(_r),He(tr),$e(tr,e)):He(_r),$e(_r,r)}var Jn=null,Pf=!1,bp=!1;function L2(e){Jn===null?Jn=[e]:Jn.push(e)}function lM(e){Pf=!0,L2(e)}function vi(){if(!bp&&Jn!==null){bp=!0;var e=0,t=Ee;try{var r=Jn;for(Ee=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Jn=null,Pf=!1}catch(s){throw Jn!==null&&(Jn=Jn.slice(e+1)),l2(t0,vi),s}finally{Ee=t,bp=!1}}return null}var za=[],Wa=0,Yd=null,Xd=0,Qr=[],Zr=0,Ji=null,ts=1,rs="";function ji(e,t){za[Wa++]=Xd,za[Wa++]=Yd,Yd=e,Xd=t}function $2(e,t,r){Qr[Zr++]=ts,Qr[Zr++]=rs,Qr[Zr++]=Ji,Ji=e;var n=ts;e=rs;var s=32-Sn(n)-1;n&=~(1<<s),r+=1;var i=32-Sn(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,ts=1<<32-Sn(t)+s|r<<s|n,rs=i+e}else ts=1<<i|r<<s|n,rs=e}function u0(e){e.return!==null&&(ji(e,1),$2(e,1,0))}function d0(e){for(;e===Yd;)Yd=za[--Wa],za[Wa]=null,Xd=za[--Wa],za[Wa]=null;for(;e===Ji;)Ji=Qr[--Zr],Qr[Zr]=null,rs=Qr[--Zr],Qr[Zr]=null,ts=Qr[--Zr],Qr[Zr]=null}var Ur=null,Lr=null,Ge=!1,yn=null;function U2(e,t){var r=en(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function n_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ur=e,Lr=Zs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ur=e,Lr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ji!==null?{id:ts,overflow:rs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=en(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ur=e,Lr=null,!0):!1;default:return!1}}function Yg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xg(e){if(Ge){var t=Lr;if(t){var r=t;if(!n_(e,t)){if(Yg(e))throw Error(W(418));t=Zs(r.nextSibling);var n=Ur;t&&n_(e,t)?U2(n,r):(e.flags=e.flags&-4097|2,Ge=!1,Ur=e)}}else{if(Yg(e))throw Error(W(418));e.flags=e.flags&-4097|2,Ge=!1,Ur=e}}}function s_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ur=e}function Lu(e){if(e!==Ur)return!1;if(!Ge)return s_(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qg(e.type,e.memoizedProps)),t&&(t=Lr)){if(Yg(e))throw F2(),Error(W(418));for(;t;)U2(e,t),t=Zs(t.nextSibling)}if(s_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Lr=Zs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Lr=null}}else Lr=Ur?Zs(e.stateNode.nextSibling):null;return!0}function F2(){for(var e=Lr;e;)e=Zs(e.nextSibling)}function ho(){Lr=Ur=null,Ge=!1}function h0(e){yn===null?yn=[e]:yn.push(e)}var cM=Es.ReactCurrentBatchConfig;function ll(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var n=r.stateNode}if(!n)throw Error(W(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,e))}return e}function $u(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function i_(e){var t=e._init;return t(e._payload)}function B2(e){function t(v,b){if(e){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=ni(v,b),v.index=0,v.sibling=null,v}function i(v,b,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,w,_){return b===null||b.tag!==6?(b=Cp(w,v.mode,_),b.return=v,b):(b=s(b,w),b.return=v,b)}function c(v,b,w,_){var j=w.type;return j===Ma?d(v,b,w.props.children,_,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Us&&i_(j)===b.type)?(_=s(b,w.props),_.ref=ll(v,b,w),_.return=v,_):(_=Od(w.type,w.key,w.props,null,v.mode,_),_.ref=ll(v,b,w),_.return=v,_)}function u(v,b,w,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=kp(w,v.mode,_),b.return=v,b):(b=s(b,w.children||[]),b.return=v,b)}function d(v,b,w,_,j){return b===null||b.tag!==7?(b=Vi(w,v.mode,_,j),b.return=v,b):(b=s(b,w),b.return=v,b)}function h(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Cp(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cu:return w=Od(b.type,b.key,b.props,null,v.mode,w),w.ref=ll(v,null,b),w.return=v,w;case Ra:return b=kp(b,v.mode,w),b.return=v,b;case Us:var _=b._init;return h(v,_(b._payload),w)}if(Nl(b)||nl(b))return b=Vi(b,v.mode,w,null),b.return=v,b;$u(v,b)}return null}function f(v,b,w,_){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cu:return w.key===j?c(v,b,w,_):null;case Ra:return w.key===j?u(v,b,w,_):null;case Us:return j=w._init,f(v,b,j(w._payload),_)}if(Nl(w)||nl(w))return j!==null?null:d(v,b,w,_,null);$u(v,w)}return null}function m(v,b,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,l(b,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Cu:return v=v.get(_.key===null?w:_.key)||null,c(b,v,_,j);case Ra:return v=v.get(_.key===null?w:_.key)||null,u(b,v,_,j);case Us:var N=_._init;return m(v,b,w,N(_._payload),j)}if(Nl(_)||nl(_))return v=v.get(w)||null,d(b,v,_,j,null);$u(b,_)}return null}function g(v,b,w,_){for(var j=null,N=null,k=b,T=b=0,P=null;k!==null&&T<w.length;T++){k.index>T?(P=k,k=null):P=k.sibling;var C=f(v,k,w[T],_);if(C===null){k===null&&(k=P);break}e&&k&&C.alternate===null&&t(v,k),b=i(C,b,T),N===null?j=C:N.sibling=C,N=C,k=P}if(T===w.length)return r(v,k),Ge&&ji(v,T),j;if(k===null){for(;T<w.length;T++)k=h(v,w[T],_),k!==null&&(b=i(k,b,T),N===null?j=k:N.sibling=k,N=k);return Ge&&ji(v,T),j}for(k=n(v,k);T<w.length;T++)P=m(k,v,T,w[T],_),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?T:P.key),b=i(P,b,T),N===null?j=P:N.sibling=P,N=P);return e&&k.forEach(function(A){return t(v,A)}),Ge&&ji(v,T),j}function y(v,b,w,_){var j=nl(w);if(typeof j!="function")throw Error(W(150));if(w=j.call(w),w==null)throw Error(W(151));for(var N=j=null,k=b,T=b=0,P=null,C=w.next();k!==null&&!C.done;T++,C=w.next()){k.index>T?(P=k,k=null):P=k.sibling;var A=f(v,k,C.value,_);if(A===null){k===null&&(k=P);break}e&&k&&A.alternate===null&&t(v,k),b=i(A,b,T),N===null?j=A:N.sibling=A,N=A,k=P}if(C.done)return r(v,k),Ge&&ji(v,T),j;if(k===null){for(;!C.done;T++,C=w.next())C=h(v,C.value,_),C!==null&&(b=i(C,b,T),N===null?j=C:N.sibling=C,N=C);return Ge&&ji(v,T),j}for(k=n(v,k);!C.done;T++,C=w.next())C=m(k,v,T,C.value,_),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?T:C.key),b=i(C,b,T),N===null?j=C:N.sibling=C,N=C);return e&&k.forEach(function(S){return t(v,S)}),Ge&&ji(v,T),j}function p(v,b,w,_){if(typeof w=="object"&&w!==null&&w.type===Ma&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Cu:e:{for(var j=w.key,N=b;N!==null;){if(N.key===j){if(j=w.type,j===Ma){if(N.tag===7){r(v,N.sibling),b=s(N,w.props.children),b.return=v,v=b;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Us&&i_(j)===N.type){r(v,N.sibling),b=s(N,w.props),b.ref=ll(v,N,w),b.return=v,v=b;break e}r(v,N);break}else t(v,N);N=N.sibling}w.type===Ma?(b=Vi(w.props.children,v.mode,_,w.key),b.return=v,v=b):(_=Od(w.type,w.key,w.props,null,v.mode,_),_.ref=ll(v,b,w),_.return=v,v=_)}return a(v);case Ra:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(v,b.sibling),b=s(b,w.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=kp(w,v.mode,_),b.return=v,v=b}return a(v);case Us:return N=w._init,p(v,b,N(w._payload),_)}if(Nl(w))return g(v,b,w,_);if(nl(w))return y(v,b,w,_);$u(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(v,b.sibling),b=s(b,w),b.return=v,v=b):(r(v,b),b=Cp(w,v.mode,_),b.return=v,v=b),a(v)):r(v,b)}return p}var fo=B2(!0),z2=B2(!1),Jd=gi(null),Qd=null,Ha=null,f0=null;function m0(){f0=Ha=Qd=null}function p0(e){var t=Jd.current;He(Jd),e._currentValue=t}function Jg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function to(e,t){Qd=e,f0=Ha=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yr=!0),e.firstContext=null)}function sn(e){var t=e._currentValue;if(f0!==e)if(e={context:e,memoizedValue:t,next:null},Ha===null){if(Qd===null)throw Error(W(308));Ha=e,Qd.dependencies={lanes:0,firstContext:e}}else Ha=Ha.next=e;return t}var Ri=null;function g0(e){Ri===null?Ri=[e]:Ri.push(e)}function W2(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,g0(t)):(r.next=s.next,s.next=r),t.interleaved=r,hs(e,n)}function hs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Fs=!1;function v0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function as(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ei(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,hs(e,r)}return s=n.interleaved,s===null?(t.next=t,g0(n)):(t.next=s.next,s.next=t),n.interleaved=t,hs(e,r)}function Sd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,r0(e,r)}}function a_(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Zd(e,t,r,n){var s=e.updateQueue;Fs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,y=l;switch(f=t,m=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=Ze({},h,f);break e;case 2:Fs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Zi|=a,e.lanes=a,e.memoizedState=h}}function o_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(W(191,s));s.call(n)}}}var Kc={},Bn=gi(Kc),ac=gi(Kc),oc=gi(Kc);function Mi(e){if(e===Kc)throw Error(W(174));return e}function y0(e,t){switch($e(oc,t),$e(ac,e),$e(Bn,Kc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Og(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Og(t,e)}He(Bn),$e(Bn,t)}function mo(){He(Bn),He(ac),He(oc)}function q2(e){Mi(oc.current);var t=Mi(Bn.current),r=Og(t,e.type);t!==r&&($e(ac,e),$e(Bn,r))}function x0(e){ac.current===e&&(He(Bn),He(ac))}var Je=gi(0);function eh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wp=[];function b0(){for(var e=0;e<wp.length;e++)wp[e]._workInProgressVersionPrimary=null;wp.length=0}var Ed=Es.ReactCurrentDispatcher,_p=Es.ReactCurrentBatchConfig,Qi=0,Qe=null,gt=null,Pt=null,th=!1,Rl=!1,lc=0,uM=0;function Gt(){throw Error(W(321))}function w0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!An(e[r],t[r]))return!1;return!0}function _0(e,t,r,n,s,i){if(Qi=i,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ed.current=e===null||e.memoizedState===null?mM:pM,e=r(n,s),Rl){i=0;do{if(Rl=!1,lc=0,25<=i)throw Error(W(301));i+=1,Pt=gt=null,t.updateQueue=null,Ed.current=gM,e=r(n,s)}while(Rl)}if(Ed.current=rh,t=gt!==null&&gt.next!==null,Qi=0,Pt=gt=Qe=null,th=!1,t)throw Error(W(300));return e}function j0(){var e=lc!==0;return lc=0,e}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Qe.memoizedState=Pt=e:Pt=Pt.next=e,Pt}function an(){if(gt===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=Pt===null?Qe.memoizedState:Pt.next;if(t!==null)Pt=t,gt=e;else{if(e===null)throw Error(W(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Pt===null?Qe.memoizedState=Pt=e:Pt=Pt.next=e}return Pt}function cc(e,t){return typeof t=="function"?t(e):t}function jp(e){var t=an(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=gt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Qi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,Qe.lanes|=d,Zi|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,An(n,t.memoizedState)||(yr=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Qe.lanes|=i,Zi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Np(e){var t=an(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);An(i,t.memoizedState)||(yr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function V2(){}function G2(e,t){var r=Qe,n=an(),s=t(),i=!An(n.memoizedState,s);if(i&&(n.memoizedState=s,yr=!0),n=n.queue,N0(X2.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Pt!==null&&Pt.memoizedState.tag&1){if(r.flags|=2048,uc(9,Y2.bind(null,r,n,s,t),void 0,null),It===null)throw Error(W(349));Qi&30||K2(r,t,s)}return s}function K2(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Y2(e,t,r,n){t.value=r,t.getSnapshot=n,J2(t)&&Q2(e)}function X2(e,t,r){return r(function(){J2(t)&&Q2(e)})}function J2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!An(e,r)}catch{return!0}}function Q2(e){var t=hs(e,1);t!==null&&En(t,e,1,-1)}function l_(e){var t=Mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:e},t.queue=e,e=e.dispatch=fM.bind(null,Qe,e),[t.memoizedState,e]}function uc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Z2(){return an().memoizedState}function Cd(e,t,r,n){var s=Mn();Qe.flags|=e,s.memoizedState=uc(1|t,r,void 0,n===void 0?null:n)}function Of(e,t,r,n){var s=an();n=n===void 0?null:n;var i=void 0;if(gt!==null){var a=gt.memoizedState;if(i=a.destroy,n!==null&&w0(n,a.deps)){s.memoizedState=uc(t,r,i,n);return}}Qe.flags|=e,s.memoizedState=uc(1|t,r,i,n)}function c_(e,t){return Cd(8390656,8,e,t)}function N0(e,t){return Of(2048,8,e,t)}function eC(e,t){return Of(4,2,e,t)}function tC(e,t){return Of(4,4,e,t)}function rC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nC(e,t,r){return r=r!=null?r.concat([e]):null,Of(4,4,rC.bind(null,t,e),r)}function S0(){}function sC(e,t){var r=an();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&w0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function iC(e,t){var r=an();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&w0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function aC(e,t,r){return Qi&21?(An(r,t)||(r=d2(),Qe.lanes|=r,Zi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yr=!0),e.memoizedState=r)}function dM(e,t){var r=Ee;Ee=r!==0&&4>r?r:4,e(!0);var n=_p.transition;_p.transition={};try{e(!1),t()}finally{Ee=r,_p.transition=n}}function oC(){return an().memoizedState}function hM(e,t,r){var n=ri(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},lC(e))cC(t,r);else if(r=W2(e,t,r,n),r!==null){var s=cr();En(r,e,n,s),uC(r,t,n)}}function fM(e,t,r){var n=ri(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(lC(e))cC(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,An(l,a)){var c=t.interleaved;c===null?(s.next=s,g0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=W2(e,t,s,n),r!==null&&(s=cr(),En(r,e,n,s),uC(r,t,n))}}function lC(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function cC(e,t){Rl=th=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function uC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,r0(e,r)}}var rh={readContext:sn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},mM={readContext:sn,useCallback:function(e,t){return Mn().memoizedState=[e,t===void 0?null:t],e},useContext:sn,useEffect:c_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Cd(4194308,4,rC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Cd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cd(4,2,e,t)},useMemo:function(e,t){var r=Mn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Mn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=hM.bind(null,Qe,e),[n.memoizedState,e]},useRef:function(e){var t=Mn();return e={current:e},t.memoizedState=e},useState:l_,useDebugValue:S0,useDeferredValue:function(e){return Mn().memoizedState=e},useTransition:function(){var e=l_(!1),t=e[0];return e=dM.bind(null,e[1]),Mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Qe,s=Mn();if(Ge){if(r===void 0)throw Error(W(407));r=r()}else{if(r=t(),It===null)throw Error(W(349));Qi&30||K2(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,c_(X2.bind(null,n,i,e),[e]),n.flags|=2048,uc(9,Y2.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Mn(),t=It.identifierPrefix;if(Ge){var r=rs,n=ts;r=(n&~(1<<32-Sn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=lc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=uM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pM={readContext:sn,useCallback:sC,useContext:sn,useEffect:N0,useImperativeHandle:nC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:jp,useRef:Z2,useState:function(){return jp(cc)},useDebugValue:S0,useDeferredValue:function(e){var t=an();return aC(t,gt.memoizedState,e)},useTransition:function(){var e=jp(cc)[0],t=an().memoizedState;return[e,t]},useMutableSource:V2,useSyncExternalStore:G2,useId:oC,unstable_isNewReconciler:!1},gM={readContext:sn,useCallback:sC,useContext:sn,useEffect:N0,useImperativeHandle:nC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:Np,useRef:Z2,useState:function(){return Np(cc)},useDebugValue:S0,useDeferredValue:function(e){var t=an();return gt===null?t.memoizedState=e:aC(t,gt.memoizedState,e)},useTransition:function(){var e=Np(cc)[0],t=an().memoizedState;return[e,t]},useMutableSource:V2,useSyncExternalStore:G2,useId:oC,unstable_isNewReconciler:!1};function pn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Qg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ze({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Tf={isMounted:function(e){return(e=e._reactInternals)?fa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=cr(),s=ri(e),i=as(n,s);i.payload=t,r!=null&&(i.callback=r),t=ei(e,i,s),t!==null&&(En(t,e,s,n),Sd(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=cr(),s=ri(e),i=as(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ei(e,i,s),t!==null&&(En(t,e,s,n),Sd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=cr(),n=ri(e),s=as(r,n);s.tag=2,t!=null&&(s.callback=t),t=ei(e,s,n),t!==null&&(En(t,e,n,r),Sd(t,e,n))}};function u_(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!rc(r,n)||!rc(s,i):!0}function dC(e,t,r){var n=!1,s=ui,i=t.contextType;return typeof i=="object"&&i!==null?i=sn(i):(s=jr(t)?Xi:tr.current,n=t.contextTypes,i=(n=n!=null)?uo(e,s):ui),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function d_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Tf.enqueueReplaceState(t,t.state,null)}function Zg(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},v0(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=sn(i):(i=jr(t)?Xi:tr.current,s.context=uo(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Qg(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Tf.enqueueReplaceState(s,s.state,null),Zd(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function po(e,t){try{var r="",n=t;do r+=HR(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Sp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ev(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var vM=typeof WeakMap=="function"?WeakMap:Map;function hC(e,t,r){r=as(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){sh||(sh=!0,uv=n),ev(e,t)},r}function fC(e,t,r){r=as(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ev(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ev(e,t),typeof n!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function h_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new vM;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=OM.bind(null,e,t,r),t.then(e,e))}function f_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function m_(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=as(-1,1),t.tag=2,ei(r,t,1))),r.lanes|=1),e)}var yM=Es.ReactCurrentOwner,yr=!1;function rr(e,t,r,n){t.child=e===null?z2(t,null,r,n):fo(t,e.child,r,n)}function p_(e,t,r,n,s){r=r.render;var i=t.ref;return to(t,s),n=_0(e,t,r,n,i,s),r=j0(),e!==null&&!yr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fs(e,t,s)):(Ge&&r&&u0(t),t.flags|=1,rr(e,t,n,s),t.child)}function g_(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!I0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,mC(e,t,i,n,s)):(e=Od(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:rc,r(a,n)&&e.ref===t.ref)return fs(e,t,s)}return t.flags|=1,e=ni(i,n),e.ref=t.ref,e.return=t,t.child=e}function mC(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(rc(i,n)&&e.ref===t.ref)if(yr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(yr=!0);else return t.lanes=e.lanes,fs(e,t,s)}return tv(e,t,r,n,s)}function pC(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Va,Tr),Tr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(Va,Tr),Tr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,$e(Va,Tr),Tr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,$e(Va,Tr),Tr|=n;return rr(e,t,s,r),t.child}function gC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function tv(e,t,r,n,s){var i=jr(r)?Xi:tr.current;return i=uo(t,i),to(t,s),r=_0(e,t,r,n,i,s),n=j0(),e!==null&&!yr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fs(e,t,s)):(Ge&&n&&u0(t),t.flags|=1,rr(e,t,r,s),t.child)}function v_(e,t,r,n,s){if(jr(r)){var i=!0;Kd(t)}else i=!1;if(to(t,s),t.stateNode===null)kd(e,t),dC(t,r,n),Zg(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=sn(u):(u=jr(r)?Xi:tr.current,u=uo(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&d_(t,a,n,u),Fs=!1;var f=t.memoizedState;a.state=f,Zd(t,n,a,s),c=t.memoizedState,l!==n||f!==c||_r.current||Fs?(typeof d=="function"&&(Qg(t,r,d,n),c=t.memoizedState),(l=Fs||u_(t,r,l,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,H2(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:pn(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=sn(c):(c=jr(r)?Xi:tr.current,c=uo(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&d_(t,a,n,c),Fs=!1,f=t.memoizedState,a.state=f,Zd(t,n,a,s);var g=t.memoizedState;l!==h||f!==g||_r.current||Fs?(typeof m=="function"&&(Qg(t,r,m,n),g=t.memoizedState),(u=Fs||u_(t,r,u,n,f,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return rv(e,t,r,n,i,s)}function rv(e,t,r,n,s,i){gC(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&r_(t,r,!1),fs(e,t,i);n=t.stateNode,yM.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=fo(t,e.child,null,i),t.child=fo(t,null,l,i)):rr(e,t,l,i),t.memoizedState=n.state,s&&r_(t,r,!0),t.child}function vC(e){var t=e.stateNode;t.pendingContext?t_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&t_(e,t.context,!1),y0(e,t.containerInfo)}function y_(e,t,r,n,s){return ho(),h0(s),t.flags|=256,rr(e,t,r,n),t.child}var nv={dehydrated:null,treeContext:null,retryLane:0};function sv(e){return{baseLanes:e,cachePool:null,transitions:null}}function yC(e,t,r){var n=t.pendingProps,s=Je.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$e(Je,s&1),e===null)return Xg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Rf(a,n,0,null),e=Vi(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sv(r),t.memoizedState=nv,e):E0(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xM(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ni(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ni(l,i):(i=Vi(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?sv(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=nv,n}return i=e.child,e=i.sibling,n=ni(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function E0(e,t){return t=Rf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Uu(e,t,r,n){return n!==null&&h0(n),fo(t,e.child,null,r),e=E0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xM(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=Sp(Error(W(422))),Uu(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Rf({mode:"visible",children:n.children},s,0,null),i=Vi(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&fo(t,e.child,null,a),t.child.memoizedState=sv(a),t.memoizedState=nv,i);if(!(t.mode&1))return Uu(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(W(419)),n=Sp(i,n,void 0),Uu(e,t,a,n)}if(l=(a&e.childLanes)!==0,yr||l){if(n=It,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hs(e,s),En(n,e,s,-1))}return T0(),n=Sp(Error(W(421))),Uu(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=TM.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Lr=Zs(s.nextSibling),Ur=t,Ge=!0,yn=null,e!==null&&(Qr[Zr++]=ts,Qr[Zr++]=rs,Qr[Zr++]=Ji,ts=e.id,rs=e.overflow,Ji=t),t=E0(t,n.children),t.flags|=4096,t)}function x_(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Jg(e.return,t,r)}function Ep(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function xC(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(rr(e,t,n.children,r),n=Je.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&x_(e,r,t);else if(e.tag===19)x_(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if($e(Je,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&eh(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ep(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&eh(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ep(t,!0,r,null,i);break;case"together":Ep(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,r=ni(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ni(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bM(e,t,r){switch(t.tag){case 3:vC(t),ho();break;case 5:q2(t);break;case 1:jr(t.type)&&Kd(t);break;case 4:y0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;$e(Jd,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($e(Je,Je.current&1),t.flags|=128,null):r&t.child.childLanes?yC(e,t,r):($e(Je,Je.current&1),e=fs(e,t,r),e!==null?e.sibling:null);$e(Je,Je.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return xC(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Je,Je.current),n)break;return null;case 22:case 23:return t.lanes=0,pC(e,t,r)}return fs(e,t,r)}var bC,iv,wC,_C;bC=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};iv=function(){};wC=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Mi(Bn.current);var i=null;switch(r){case"input":s=Cg(e,s),n=Cg(e,n),i=[];break;case"select":s=Ze({},s,{value:void 0}),n=Ze({},n,{value:void 0}),i=[];break;case"textarea":s=Pg(e,s),n=Pg(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Vd)}Tg(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Be("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};_C=function(e,t,r,n){r!==n&&(t.flags|=4)};function cl(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function wM(e,t,r){var n=t.pendingProps;switch(d0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(t),null;case 1:return jr(t.type)&&Gd(),Kt(t),null;case 3:return n=t.stateNode,mo(),He(_r),He(tr),b0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Lu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yn!==null&&(fv(yn),yn=null))),iv(e,t),Kt(t),null;case 5:x0(t);var s=Mi(oc.current);if(r=t.type,e!==null&&t.stateNode!=null)wC(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(W(166));return Kt(t),null}if(e=Mi(Bn.current),Lu(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ln]=t,n[ic]=i,e=(t.mode&1)!==0,r){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(s=0;s<El.length;s++)Be(El[s],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":kw(n,i),Be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Be("invalid",n);break;case"textarea":Pw(n,i),Be("invalid",n)}Tg(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Mu(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Mu(n.textContent,l,e),s=["children",""+l]):Yl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Be("scroll",n)}switch(r){case"input":ku(n),Aw(n,i,!0);break;case"textarea":ku(n),Ow(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Vd)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=XE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Ln]=t,e[ic]=n,bC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ig(r,n),r){case"dialog":Be("cancel",e),Be("close",e),s=n;break;case"iframe":case"object":case"embed":Be("load",e),s=n;break;case"video":case"audio":for(s=0;s<El.length;s++)Be(El[s],e);s=n;break;case"source":Be("error",e),s=n;break;case"img":case"image":case"link":Be("error",e),Be("load",e),s=n;break;case"details":Be("toggle",e),s=n;break;case"input":kw(e,n),s=Cg(e,n),Be("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ze({},n,{value:void 0}),Be("invalid",e);break;case"textarea":Pw(e,n),s=Pg(e,n),Be("invalid",e);break;default:s=n}Tg(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ZE(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JE(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Xl(e,c):typeof c=="number"&&Xl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Be("scroll",e):c!=null&&Xy(e,i,c,a))}switch(r){case"input":ku(e),Aw(e,n,!1);break;case"textarea":ku(e),Ow(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ci(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ja(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ja(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Vd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Kt(t),null;case 6:if(e&&t.stateNode!=null)_C(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(W(166));if(r=Mi(oc.current),Mi(Bn.current),Lu(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ln]=t,(i=n.nodeValue!==r)&&(e=Ur,e!==null))switch(e.tag){case 3:Mu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mu(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ln]=t,t.stateNode=n}return Kt(t),null;case 13:if(He(Je),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Lr!==null&&t.mode&1&&!(t.flags&128))F2(),ho(),t.flags|=98560,i=!1;else if(i=Lu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(W(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Ln]=t}else ho(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Kt(t),i=!1}else yn!==null&&(fv(yn),yn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Je.current&1?bt===0&&(bt=3):T0())),t.updateQueue!==null&&(t.flags|=4),Kt(t),null);case 4:return mo(),iv(e,t),e===null&&nc(t.stateNode.containerInfo),Kt(t),null;case 10:return p0(t.type._context),Kt(t),null;case 17:return jr(t.type)&&Gd(),Kt(t),null;case 19:if(He(Je),i=t.memoizedState,i===null)return Kt(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)cl(i,!1);else{if(bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=eh(e),a!==null){for(t.flags|=128,cl(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $e(Je,Je.current&1|2),t.child}e=e.sibling}i.tail!==null&&it()>go&&(t.flags|=128,n=!0,cl(i,!1),t.lanes=4194304)}else{if(!n)if(e=eh(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),cl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ge)return Kt(t),null}else 2*it()-i.renderingStartTime>go&&r!==1073741824&&(t.flags|=128,n=!0,cl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=it(),t.sibling=null,r=Je.current,$e(Je,n?r&1|2:r&1),t):(Kt(t),null);case 22:case 23:return O0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Tr&1073741824&&(Kt(t),t.subtreeFlags&6&&(t.flags|=8192)):Kt(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function _M(e,t){switch(d0(t),t.tag){case 1:return jr(t.type)&&Gd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mo(),He(_r),He(tr),b0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return x0(t),null;case 13:if(He(Je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));ho()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Je),null;case 4:return mo(),null;case 10:return p0(t.type._context),null;case 22:case 23:return O0(),null;case 24:return null;default:return null}}var Fu=!1,Jt=!1,jM=typeof WeakSet=="function"?WeakSet:Set,K=null;function qa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){rt(e,t,n)}else r.current=null}function av(e,t,r){try{r()}catch(n){rt(e,t,n)}}var b_=!1;function NM(e,t){if(Wg=Wd,e=C2(),c0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=a),f===i&&++d===n&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Hg={focusedElem:e,selectionRange:r},Wd=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,p=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:pn(t.type,y),p);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(_){rt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return g=b_,b_=!1,g}function Ml(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&av(t,r,i)}s=s.next}while(s!==n)}}function If(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ov(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jC(e){var t=e.alternate;t!==null&&(e.alternate=null,jC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ln],delete t[ic],delete t[Gg],delete t[aM],delete t[oM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NC(e){return e.tag===5||e.tag===3||e.tag===4}function w_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Vd));else if(n!==4&&(e=e.child,e!==null))for(lv(e,t,r),e=e.sibling;e!==null;)lv(e,t,r),e=e.sibling}function cv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(cv(e,t,r),e=e.sibling;e!==null;)cv(e,t,r),e=e.sibling}var Ut=null,vn=!1;function Ls(e,t,r){for(r=r.child;r!==null;)SC(e,t,r),r=r.sibling}function SC(e,t,r){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Sf,r)}catch{}switch(r.tag){case 5:Jt||qa(r,t);case 6:var n=Ut,s=vn;Ut=null,Ls(e,t,r),Ut=n,vn=s,Ut!==null&&(vn?(e=Ut,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ut.removeChild(r.stateNode));break;case 18:Ut!==null&&(vn?(e=Ut,r=r.stateNode,e.nodeType===8?xp(e.parentNode,r):e.nodeType===1&&xp(e,r),ec(e)):xp(Ut,r.stateNode));break;case 4:n=Ut,s=vn,Ut=r.stateNode.containerInfo,vn=!0,Ls(e,t,r),Ut=n,vn=s;break;case 0:case 11:case 14:case 15:if(!Jt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&av(r,t,a),s=s.next}while(s!==n)}Ls(e,t,r);break;case 1:if(!Jt&&(qa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){rt(r,t,l)}Ls(e,t,r);break;case 21:Ls(e,t,r);break;case 22:r.mode&1?(Jt=(n=Jt)||r.memoizedState!==null,Ls(e,t,r),Jt=n):Ls(e,t,r);break;default:Ls(e,t,r)}}function __(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new jM),t.forEach(function(n){var s=IM.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function fn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ut=l.stateNode,vn=!1;break e;case 3:Ut=l.stateNode.containerInfo,vn=!0;break e;case 4:Ut=l.stateNode.containerInfo,vn=!0;break e}l=l.return}if(Ut===null)throw Error(W(160));SC(i,a,s),Ut=null,vn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){rt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)EC(t,e),t=t.sibling}function EC(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fn(t,e),Dn(e),n&4){try{Ml(3,e,e.return),If(3,e)}catch(y){rt(e,e.return,y)}try{Ml(5,e,e.return)}catch(y){rt(e,e.return,y)}}break;case 1:fn(t,e),Dn(e),n&512&&r!==null&&qa(r,r.return);break;case 5:if(fn(t,e),Dn(e),n&512&&r!==null&&qa(r,r.return),e.flags&32){var s=e.stateNode;try{Xl(s,"")}catch(y){rt(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&KE(s,i),Ig(l,a);var u=Ig(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?ZE(s,h):d==="dangerouslySetInnerHTML"?JE(s,h):d==="children"?Xl(s,h):Xy(s,d,h,u)}switch(l){case"input":kg(s,i);break;case"textarea":YE(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ja(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ja(s,!!i.multiple,i.defaultValue,!0):Ja(s,!!i.multiple,i.multiple?[]:"",!1))}s[ic]=i}catch(y){rt(e,e.return,y)}}break;case 6:if(fn(t,e),Dn(e),n&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){rt(e,e.return,y)}}break;case 3:if(fn(t,e),Dn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ec(t.containerInfo)}catch(y){rt(e,e.return,y)}break;case 4:fn(t,e),Dn(e);break;case 13:fn(t,e),Dn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(A0=it())),n&4&&__(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Jt=(u=Jt)||d,fn(t,e),Jt=u):fn(t,e),Dn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(K=e,d=e.child;d!==null;){for(h=K=d;K!==null;){switch(f=K,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ml(4,f,f.return);break;case 1:qa(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){rt(n,r,y)}}break;case 5:qa(f,f.return);break;case 22:if(f.memoizedState!==null){N_(h);continue}}m!==null?(m.return=f,K=m):N_(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=QE("display",a))}catch(y){rt(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){rt(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fn(t,e),Dn(e),n&4&&__(e);break;case 21:break;default:fn(t,e),Dn(e)}}function Dn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(NC(r)){var n=r;break e}r=r.return}throw Error(W(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Xl(s,""),n.flags&=-33);var i=w_(e);cv(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=w_(e);lv(e,l,a);break;default:throw Error(W(161))}}catch(c){rt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function SM(e,t,r){K=e,CC(e)}function CC(e,t,r){for(var n=(e.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Fu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Jt;l=Fu;var u=Jt;if(Fu=a,(Jt=c)&&!u)for(K=s;K!==null;)a=K,c=a.child,a.tag===22&&a.memoizedState!==null?S_(s):c!==null?(c.return=a,K=c):S_(s);for(;i!==null;)K=i,CC(i),i=i.sibling;K=s,Fu=l,Jt=u}j_(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):j_(e)}}function j_(e){for(;K!==null;){var t=K;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jt||If(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Jt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:pn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&o_(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}o_(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ec(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Jt||t.flags&512&&ov(t)}catch(f){rt(t,t.return,f)}}if(t===e){K=null;break}if(r=t.sibling,r!==null){r.return=t.return,K=r;break}K=t.return}}function N_(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var r=t.sibling;if(r!==null){r.return=t.return,K=r;break}K=t.return}}function S_(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{If(4,t)}catch(c){rt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){rt(t,s,c)}}var i=t.return;try{ov(t)}catch(c){rt(t,i,c)}break;case 5:var a=t.return;try{ov(t)}catch(c){rt(t,a,c)}}}catch(c){rt(t,t.return,c)}if(t===e){K=null;break}var l=t.sibling;if(l!==null){l.return=t.return,K=l;break}K=t.return}}var EM=Math.ceil,nh=Es.ReactCurrentDispatcher,C0=Es.ReactCurrentOwner,nn=Es.ReactCurrentBatchConfig,be=0,It=null,ht=null,Wt=0,Tr=0,Va=gi(0),bt=0,dc=null,Zi=0,Df=0,k0=0,Ll=null,vr=null,A0=0,go=1/0,Yn=null,sh=!1,uv=null,ti=null,Bu=!1,Ks=null,ih=0,$l=0,dv=null,Ad=-1,Pd=0;function cr(){return be&6?it():Ad!==-1?Ad:Ad=it()}function ri(e){return e.mode&1?be&2&&Wt!==0?Wt&-Wt:cM.transition!==null?(Pd===0&&(Pd=d2()),Pd):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:y2(e.type)),e):1}function En(e,t,r,n){if(50<$l)throw $l=0,dv=null,Error(W(185));qc(e,r,n),(!(be&2)||e!==It)&&(e===It&&(!(be&2)&&(Df|=r),bt===4&&Hs(e,Wt)),Nr(e,n),r===1&&be===0&&!(t.mode&1)&&(go=it()+500,Pf&&vi()))}function Nr(e,t){var r=e.callbackNode;c3(e,t);var n=zd(e,e===It?Wt:0);if(n===0)r!==null&&Dw(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Dw(r),t===1)e.tag===0?lM(E_.bind(null,e)):L2(E_.bind(null,e)),sM(function(){!(be&6)&&vi()}),r=null;else{switch(h2(n)){case 1:r=t0;break;case 4:r=c2;break;case 16:r=Bd;break;case 536870912:r=u2;break;default:r=Bd}r=RC(r,kC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kC(e,t){if(Ad=-1,Pd=0,be&6)throw Error(W(327));var r=e.callbackNode;if(ro()&&e.callbackNode!==r)return null;var n=zd(e,e===It?Wt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ah(e,n);else{t=n;var s=be;be|=2;var i=PC();(It!==e||Wt!==t)&&(Yn=null,go=it()+500,qi(e,t));do try{AM();break}catch(l){AC(e,l)}while(!0);m0(),nh.current=i,be=s,ht!==null?t=0:(It=null,Wt=0,t=bt)}if(t!==0){if(t===2&&(s=$g(e),s!==0&&(n=s,t=hv(e,s))),t===1)throw r=dc,qi(e,0),Hs(e,n),Nr(e,it()),r;if(t===6)Hs(e,n);else{if(s=e.current.alternate,!(n&30)&&!CM(s)&&(t=ah(e,n),t===2&&(i=$g(e),i!==0&&(n=i,t=hv(e,i))),t===1))throw r=dc,qi(e,0),Hs(e,n),Nr(e,it()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(W(345));case 2:Ni(e,vr,Yn);break;case 3:if(Hs(e,n),(n&130023424)===n&&(t=A0+500-it(),10<t)){if(zd(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){cr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Vg(Ni.bind(null,e,vr,Yn),t);break}Ni(e,vr,Yn);break;case 4:if(Hs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Sn(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=it()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*EM(n/1960))-n,10<n){e.timeoutHandle=Vg(Ni.bind(null,e,vr,Yn),n);break}Ni(e,vr,Yn);break;case 5:Ni(e,vr,Yn);break;default:throw Error(W(329))}}}return Nr(e,it()),e.callbackNode===r?kC.bind(null,e):null}function hv(e,t){var r=Ll;return e.current.memoizedState.isDehydrated&&(qi(e,t).flags|=256),e=ah(e,t),e!==2&&(t=vr,vr=r,t!==null&&fv(t)),e}function fv(e){vr===null?vr=e:vr.push.apply(vr,e)}function CM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!An(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hs(e,t){for(t&=~k0,t&=~Df,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Sn(t),n=1<<r;e[r]=-1,t&=~n}}function E_(e){if(be&6)throw Error(W(327));ro();var t=zd(e,0);if(!(t&1))return Nr(e,it()),null;var r=ah(e,t);if(e.tag!==0&&r===2){var n=$g(e);n!==0&&(t=n,r=hv(e,n))}if(r===1)throw r=dc,qi(e,0),Hs(e,t),Nr(e,it()),r;if(r===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ni(e,vr,Yn),Nr(e,it()),null}function P0(e,t){var r=be;be|=1;try{return e(t)}finally{be=r,be===0&&(go=it()+500,Pf&&vi())}}function ea(e){Ks!==null&&Ks.tag===0&&!(be&6)&&ro();var t=be;be|=1;var r=nn.transition,n=Ee;try{if(nn.transition=null,Ee=1,e)return e()}finally{Ee=n,nn.transition=r,be=t,!(be&6)&&vi()}}function O0(){Tr=Va.current,He(Va)}function qi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,nM(r)),ht!==null)for(r=ht.return;r!==null;){var n=r;switch(d0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gd();break;case 3:mo(),He(_r),He(tr),b0();break;case 5:x0(n);break;case 4:mo();break;case 13:He(Je);break;case 19:He(Je);break;case 10:p0(n.type._context);break;case 22:case 23:O0()}r=r.return}if(It=e,ht=e=ni(e.current,null),Wt=Tr=t,bt=0,dc=null,k0=Df=Zi=0,vr=Ll=null,Ri!==null){for(t=0;t<Ri.length;t++)if(r=Ri[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Ri=null}return e}function AC(e,t){do{var r=ht;try{if(m0(),Ed.current=rh,th){for(var n=Qe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}th=!1}if(Qi=0,Pt=gt=Qe=null,Rl=!1,lc=0,C0.current=null,r===null||r.return===null){bt=1,dc=t,ht=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=Wt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=f_(a);if(m!==null){m.flags&=-257,m_(m,a,l,i,t),m.mode&1&&h_(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){h_(i,u,t),T0();break e}c=Error(W(426))}}else if(Ge&&l.mode&1){var p=f_(a);if(p!==null){!(p.flags&65536)&&(p.flags|=256),m_(p,a,l,i,t),h0(po(c,l));break e}}i=c=po(c,l),bt!==4&&(bt=2),Ll===null?Ll=[i]:Ll.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=hC(i,c,t);a_(i,v);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ti===null||!ti.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=fC(i,l,t);a_(i,_);break e}}i=i.return}while(i!==null)}TC(r)}catch(j){t=j,ht===r&&r!==null&&(ht=r=r.return);continue}break}while(!0)}function PC(){var e=nh.current;return nh.current=rh,e===null?rh:e}function T0(){(bt===0||bt===3||bt===2)&&(bt=4),It===null||!(Zi&268435455)&&!(Df&268435455)||Hs(It,Wt)}function ah(e,t){var r=be;be|=2;var n=PC();(It!==e||Wt!==t)&&(Yn=null,qi(e,t));do try{kM();break}catch(s){AC(e,s)}while(!0);if(m0(),be=r,nh.current=n,ht!==null)throw Error(W(261));return It=null,Wt=0,bt}function kM(){for(;ht!==null;)OC(ht)}function AM(){for(;ht!==null&&!e3();)OC(ht)}function OC(e){var t=DC(e.alternate,e,Tr);e.memoizedProps=e.pendingProps,t===null?TC(e):ht=t,C0.current=null}function TC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=_M(r,t),r!==null){r.flags&=32767,ht=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bt=6,ht=null;return}}else if(r=wM(r,t,Tr),r!==null){ht=r;return}if(t=t.sibling,t!==null){ht=t;return}ht=t=e}while(t!==null);bt===0&&(bt=5)}function Ni(e,t,r){var n=Ee,s=nn.transition;try{nn.transition=null,Ee=1,PM(e,t,r,n)}finally{nn.transition=s,Ee=n}return null}function PM(e,t,r,n){do ro();while(Ks!==null);if(be&6)throw Error(W(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(u3(e,i),e===It&&(ht=It=null,Wt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Bu||(Bu=!0,RC(Bd,function(){return ro(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=nn.transition,nn.transition=null;var a=Ee;Ee=1;var l=be;be|=4,C0.current=null,NM(e,r),EC(r,e),X3(Hg),Wd=!!Wg,Hg=Wg=null,e.current=r,SM(r),t3(),be=l,Ee=a,nn.transition=i}else e.current=r;if(Bu&&(Bu=!1,Ks=e,ih=s),i=e.pendingLanes,i===0&&(ti=null),s3(r.stateNode),Nr(e,it()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(sh)throw sh=!1,e=uv,uv=null,e;return ih&1&&e.tag!==0&&ro(),i=e.pendingLanes,i&1?e===dv?$l++:($l=0,dv=e):$l=0,vi(),null}function ro(){if(Ks!==null){var e=h2(ih),t=nn.transition,r=Ee;try{if(nn.transition=null,Ee=16>e?16:e,Ks===null)var n=!1;else{if(e=Ks,Ks=null,ih=0,be&6)throw Error(W(331));var s=be;for(be|=4,K=e.current;K!==null;){var i=K,a=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(K=u;K!==null;){var d=K;switch(d.tag){case 0:case 11:case 15:Ml(8,d,i)}var h=d.child;if(h!==null)h.return=d,K=h;else for(;K!==null;){d=K;var f=d.sibling,m=d.return;if(jC(d),d===u){K=null;break}if(f!==null){f.return=m,K=f;break}K=m}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var p=y.sibling;y.sibling=null,y=p}while(y!==null)}}K=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,K=a;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ml(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,K=v;break e}K=i.return}}var b=e.current;for(K=b;K!==null;){a=K;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,K=w;else e:for(a=b;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:If(9,l)}}catch(j){rt(l,l.return,j)}if(l===a){K=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,K=_;break e}K=l.return}}if(be=s,vi(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Sf,e)}catch{}n=!0}return n}finally{Ee=r,nn.transition=t}}return!1}function C_(e,t,r){t=po(r,t),t=hC(e,t,1),e=ei(e,t,1),t=cr(),e!==null&&(qc(e,1,t),Nr(e,t))}function rt(e,t,r){if(e.tag===3)C_(e,e,r);else for(;t!==null;){if(t.tag===3){C_(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ti===null||!ti.has(n))){e=po(r,e),e=fC(t,e,1),t=ei(t,e,1),e=cr(),t!==null&&(qc(t,1,e),Nr(t,e));break}}t=t.return}}function OM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=cr(),e.pingedLanes|=e.suspendedLanes&r,It===e&&(Wt&r)===r&&(bt===4||bt===3&&(Wt&130023424)===Wt&&500>it()-A0?qi(e,0):k0|=r),Nr(e,t)}function IC(e,t){t===0&&(e.mode&1?(t=Ou,Ou<<=1,!(Ou&130023424)&&(Ou=4194304)):t=1);var r=cr();e=hs(e,t),e!==null&&(qc(e,t,r),Nr(e,r))}function TM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),IC(e,r)}function IM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(W(314))}n!==null&&n.delete(t),IC(e,r)}var DC;DC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||_r.current)yr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return yr=!1,bM(e,t,r);yr=!!(e.flags&131072)}else yr=!1,Ge&&t.flags&1048576&&$2(t,Xd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;kd(e,t),e=t.pendingProps;var s=uo(t,tr.current);to(t,r),s=_0(null,t,n,e,s,r);var i=j0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jr(n)?(i=!0,Kd(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,v0(t),s.updater=Tf,t.stateNode=s,s._reactInternals=t,Zg(t,n,e,r),t=rv(null,t,n,!0,i,r)):(t.tag=0,Ge&&i&&u0(t),rr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(kd(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=RM(n),e=pn(n,e),s){case 0:t=tv(null,t,n,e,r);break e;case 1:t=v_(null,t,n,e,r);break e;case 11:t=p_(null,t,n,e,r);break e;case 14:t=g_(null,t,n,pn(n.type,e),r);break e}throw Error(W(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:pn(n,s),tv(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:pn(n,s),v_(e,t,n,s,r);case 3:e:{if(vC(t),e===null)throw Error(W(387));n=t.pendingProps,i=t.memoizedState,s=i.element,H2(e,t),Zd(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=po(Error(W(423)),t),t=y_(e,t,n,r,s);break e}else if(n!==s){s=po(Error(W(424)),t),t=y_(e,t,n,r,s);break e}else for(Lr=Zs(t.stateNode.containerInfo.firstChild),Ur=t,Ge=!0,yn=null,r=z2(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ho(),n===s){t=fs(e,t,r);break e}rr(e,t,n,r)}t=t.child}return t;case 5:return q2(t),e===null&&Xg(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,qg(n,s)?a=null:i!==null&&qg(n,i)&&(t.flags|=32),gC(e,t),rr(e,t,a,r),t.child;case 6:return e===null&&Xg(t),null;case 13:return yC(e,t,r);case 4:return y0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=fo(t,null,n,r):rr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:pn(n,s),p_(e,t,n,s,r);case 7:return rr(e,t,t.pendingProps,r),t.child;case 8:return rr(e,t,t.pendingProps.children,r),t.child;case 12:return rr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,$e(Jd,n._currentValue),n._currentValue=a,i!==null)if(An(i.value,a)){if(i.children===s.children&&!_r.current){t=fs(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=as(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Jg(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(W(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Jg(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}rr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,to(t,r),s=sn(s),n=n(s),t.flags|=1,rr(e,t,n,r),t.child;case 14:return n=t.type,s=pn(n,t.pendingProps),s=pn(n.type,s),g_(e,t,n,s,r);case 15:return mC(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:pn(n,s),kd(e,t),t.tag=1,jr(n)?(e=!0,Kd(t)):e=!1,to(t,r),dC(t,n,s),Zg(t,n,s,r),rv(null,t,n,!0,e,r);case 19:return xC(e,t,r);case 22:return pC(e,t,r)}throw Error(W(156,t.tag))};function RC(e,t){return l2(e,t)}function DM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,r,n){return new DM(e,t,r,n)}function I0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RM(e){if(typeof e=="function")return I0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Qy)return 11;if(e===Zy)return 14}return 2}function ni(e,t){var r=e.alternate;return r===null?(r=en(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Od(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")I0(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ma:return Vi(r.children,s,i,t);case Jy:a=8,s|=8;break;case jg:return e=en(12,r,t,s|2),e.elementType=jg,e.lanes=i,e;case Ng:return e=en(13,r,t,s),e.elementType=Ng,e.lanes=i,e;case Sg:return e=en(19,r,t,s),e.elementType=Sg,e.lanes=i,e;case qE:return Rf(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case WE:a=10;break e;case HE:a=9;break e;case Qy:a=11;break e;case Zy:a=14;break e;case Us:a=16,n=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=en(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Vi(e,t,r,n){return e=en(7,e,n,t),e.lanes=r,e}function Rf(e,t,r,n){return e=en(22,e,n,t),e.elementType=qE,e.lanes=r,e.stateNode={isHidden:!1},e}function Cp(e,t,r){return e=en(6,e,null,t),e.lanes=r,e}function kp(e,t,r){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MM(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lp(0),this.expirationTimes=lp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function D0(e,t,r,n,s,i,a,l,c){return e=new MM(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=en(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},v0(i),e}function LM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function MC(e){if(!e)return ui;e=e._reactInternals;e:{if(fa(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var r=e.type;if(jr(r))return M2(e,r,t)}return t}function LC(e,t,r,n,s,i,a,l,c){return e=D0(r,n,!0,e,s,i,a,l,c),e.context=MC(null),r=e.current,n=cr(),s=ri(r),i=as(n,s),i.callback=t??null,ei(r,i,s),e.current.lanes=s,qc(e,s,n),Nr(e,n),e}function Mf(e,t,r,n){var s=t.current,i=cr(),a=ri(s);return r=MC(r),t.context===null?t.context=r:t.pendingContext=r,t=as(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ei(s,t,a),e!==null&&(En(e,s,a,i),Sd(e,s,a)),a}function oh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function k_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function R0(e,t){k_(e,t),(e=e.alternate)&&k_(e,t)}function $M(){return null}var $C=typeof reportError=="function"?reportError:function(e){console.error(e)};function M0(e){this._internalRoot=e}Lf.prototype.render=M0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));Mf(e,t,null,null)};Lf.prototype.unmount=M0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ea(function(){Mf(null,e,null,null)}),t[ds]=null}};function Lf(e){this._internalRoot=e}Lf.prototype.unstable_scheduleHydration=function(e){if(e){var t=p2();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ws.length&&t!==0&&t<Ws[r].priority;r++);Ws.splice(r,0,e),r===0&&v2(e)}};function L0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function A_(){}function UM(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=oh(a);i.call(u)}}var a=LC(t,n,e,0,null,!1,!1,"",A_);return e._reactRootContainer=a,e[ds]=a.current,nc(e.nodeType===8?e.parentNode:e),ea(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=oh(c);l.call(u)}}var c=D0(e,0,!1,null,null,!1,!1,"",A_);return e._reactRootContainer=c,e[ds]=c.current,nc(e.nodeType===8?e.parentNode:e),ea(function(){Mf(t,c,r,n)}),c}function Uf(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=oh(a);l.call(c)}}Mf(t,a,e,s)}else a=UM(r,t,e,s,n);return oh(a)}f2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Sl(t.pendingLanes);r!==0&&(r0(t,r|1),Nr(t,it()),!(be&6)&&(go=it()+500,vi()))}break;case 13:ea(function(){var n=hs(e,1);if(n!==null){var s=cr();En(n,e,1,s)}}),R0(e,1)}};n0=function(e){if(e.tag===13){var t=hs(e,134217728);if(t!==null){var r=cr();En(t,e,134217728,r)}R0(e,134217728)}};m2=function(e){if(e.tag===13){var t=ri(e),r=hs(e,t);if(r!==null){var n=cr();En(r,e,t,n)}R0(e,t)}};p2=function(){return Ee};g2=function(e,t){var r=Ee;try{return Ee=e,t()}finally{Ee=r}};Rg=function(e,t,r){switch(t){case"input":if(kg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Af(n);if(!s)throw Error(W(90));GE(n),kg(n,s)}}}break;case"textarea":YE(e,r);break;case"select":t=r.value,t!=null&&Ja(e,!!r.multiple,t,!1)}};r2=P0;n2=ea;var FM={usingClientEntryPoint:!1,Events:[Gc,Fa,Af,e2,t2,P0]},ul={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BM={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=a2(e),e===null?null:e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||$M,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{Sf=zu.inject(BM),Fn=zu}catch{}}Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FM;Hr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!L0(t))throw Error(W(200));return LM(e,t,null,r)};Hr.createRoot=function(e,t){if(!L0(e))throw Error(W(299));var r=!1,n="",s=$C;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=D0(e,1,!1,null,null,r,!1,n,s),e[ds]=t.current,nc(e.nodeType===8?e.parentNode:e),new M0(t)};Hr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=a2(t),e=e===null?null:e.stateNode,e};Hr.flushSync=function(e){return ea(e)};Hr.hydrate=function(e,t,r){if(!$f(t))throw Error(W(200));return Uf(null,e,t,!0,r)};Hr.hydrateRoot=function(e,t,r){if(!L0(e))throw Error(W(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=$C;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=LC(t,null,e,1,r??null,s,!1,i,a),e[ds]=t.current,nc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Lf(t)};Hr.render=function(e,t,r){if(!$f(t))throw Error(W(200));return Uf(null,e,t,!1,r)};Hr.unmountComponentAtNode=function(e){if(!$f(e))throw Error(W(40));return e._reactRootContainer?(ea(function(){Uf(null,null,e,!1,function(){e._reactRootContainer=null,e[ds]=null})}),!0):!1};Hr.unstable_batchedUpdates=P0;Hr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$f(r))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return Uf(e,t,r,!1,n)};Hr.version="18.3.1-next-f1338f8080-20240426";function UC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UC)}catch(e){console.error(e)}}UC(),UE.exports=Hr;var $0=UE.exports,FC,P_=$0;FC=P_.createRoot,P_.hydrateRoot;const zM=()=>{const[e,t]=x.useState("desktop");return x.useEffect(()=>{const r=()=>{const n=window.innerWidth,s=navigator.userAgent,i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s);n<768||i?t("mobile"):n<1200?t("tablet"):t("desktop")};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=()=>{};var O_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H=function(e,t){if(!e)throw Lo(t)},Lo=function(e){return new Error("Firebase Database ("+BC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t},HM=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const s=e[r++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[r++];t[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[r++],a=e[r++],l=e[r++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const i=e[r++],a=e[r++];t[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},U0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,u=c?e[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,a||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(zC(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):HM(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<e.length;){const i=r[e.charAt(s++)],l=s<e.length?r[e.charAt(s)]:0;++s;const u=s<e.length?r[e.charAt(s)]:64;++s;const h=s<e.length?r[e.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new qM;const f=i<<2|l>>4;if(n.push(f),u!==64){const m=l<<4&240|u>>2;if(n.push(m),h!==64){const g=u<<6&192|h;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WC=function(e){const t=zC(e);return U0.encodeByteArray(t,!0)},lh=function(e){return WC(e).replace(/\./g,"")},mv=function(e){try{return U0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(e){return HC(void 0,e)}function HC(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!GM(r)||(e[r]=HC(e[r],t[r]));return e}function GM(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=()=>KM().__FIREBASE_DEFAULTS__,XM=()=>{if(typeof process>"u"||typeof O_>"u")return;const e=O_.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},JM=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mv(e[1]);return t&&JSON.parse(t)},qC=()=>{try{return WM()||YM()||XM()||JM()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},QM=e=>{var t,r;return(r=(t=qC())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},ZM=e=>{const t=QM(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},VC=()=>{var e;return(e=qC())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e5(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[lh(JSON.stringify(r)),lh(JSON.stringify(a)),""].join(".")}const Ul={};function r5(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ul))Ul[t]?e.emulator.push(t):e.prod.push(t);return e}function n5(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let T_=!1;function s5(e,t){if(typeof window>"u"||typeof document>"u"||!F0(window.location.host)||Ul[e]===t||Ul[e]||T_)return;Ul[e]=t;function r(f){return`__firebase__banner__${f}`}const n="__firebase__banner",i=r5().prod.length>0;function a(){const f=document.getElementById(n);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{T_=!0,a()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=n5(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),y=r("learnmore"),p=document.getElementById(y)||document.createElement("a"),v=r("preprendIcon"),b=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;l(w),d(p,y);const _=u();c(b,v),w.append(b,g,p,_),document.body.appendChild(w)}i?(g.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(i5())}function a5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o5(){return BC.NODE_ADMIN===!0}function l5(){try{return typeof indexedDB=="object"}catch{return!1}}function c5(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;t(((i=s.error)==null?void 0:i.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="FirebaseError";class Yc extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=u5,Object.setPrototypeOf(this,Yc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,KC.prototype.create)}}class KC{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?d5(i,n):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Yc(s,l,n)}}function d5(e,t){return e.replace(h5,(r,n)=>{const s=t[n];return s!=null?String(s):`<${n}?>`})}const h5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(e){return JSON.parse(e)}function yt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=function(e){let t={},r={},n={},s="";try{const i=e.split(".");t=hc(mv(i[0])||""),r=hc(mv(i[1])||""),s=i[2],n=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:n,signature:s}},f5=function(e){const t=YC(e),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},m5=function(e){const t=YC(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function vo(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function I_(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ch(e,t,r){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=t.call(r,e[s],s,e));return n}function uh(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const s of r){if(!n.includes(s))return!1;const i=e[s],a=t[s];if(D_(i)&&D_(a)){if(!uh(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function D_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(s=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const n=this.W_;if(typeof t=="string")for(let h=0;h<16;h++)n[h]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let h=0;h<16;h++)n[h]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let h=16;h<80;h++){const f=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=l^i&(a^l),d=1518500249):(u=i^a^l,d=1859775393):h<60?(u=i&a|l&(i|a),d=2400959708):(u=i^a^l,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+n[h]&4294967295;c=l,l=a,a=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const n=r-this.blockSize;let s=0;const i=this.buf_;let a=this.inbuf_;for(;s<r;){if(a===0)for(;s<=n;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<r;)if(i[a]=t.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(i),a=0;break}}else for(;s<r;)if(i[a]=t[s],++a,++s,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)t[n]=this.chain_[s]>>i&255,++n;return t}}function B0(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s>=55296&&s<=56319){const i=s-55296;n++,H(n<e.length,"Surrogate pair missing trail surrogate.");const a=e.charCodeAt(n)-56320;s=65536+(i<<10)+a}s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):s<65536?(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t},Bf=function(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,r++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(e){return e&&e._delegate?e._delegate:e}class fc{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y5=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new Ff;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(b5(t))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(t=Si){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Si){return this.instances.has(t)}getOptions(t=Si){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&a.resolve(s)}return s}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(t),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&t(i,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:x5(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Si){return this.component?this.component.multipleInstances?t:Si:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function x5(e){return e===Si?void 0:e}function b5(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new y5(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Me||(Me={}));const _5={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},j5=Me.INFO,N5={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},S5=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),s=N5[t];if(s)console[s](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class XC{constructor(t){this.name=t,this._logLevel=j5,this._logHandler=S5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_5[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...t),this._logHandler(this,Me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...t),this._logHandler(this,Me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...t),this._logHandler(this,Me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...t),this._logHandler(this,Me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...t),this._logHandler(this,Me.ERROR,...t)}}const E5=(e,t)=>t.some(r=>e instanceof r);let R_,M_;function C5(){return R_||(R_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k5(){return M_||(M_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JC=new WeakMap,pv=new WeakMap,QC=new WeakMap,Ap=new WeakMap,z0=new WeakMap;function A5(e){const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{r(si(e.result)),s()},a=()=>{n(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(r=>{r instanceof IDBCursor&&JC.set(r,e)}).catch(()=>{}),z0.set(t,e),t}function P5(e){if(pv.has(e))return;const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});pv.set(e,t)}let gv={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return pv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||QC.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return si(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function O5(e){gv=e(gv)}function T5(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Pp(this),t,...r);return QC.set(n,t.sort?t.sort():[t]),si(n)}:k5().includes(e)?function(...t){return e.apply(Pp(this),t),si(JC.get(this))}:function(...t){return si(e.apply(Pp(this),t))}}function I5(e){return typeof e=="function"?T5(e):(e instanceof IDBTransaction&&P5(e),E5(e,C5())?new Proxy(e,gv):e)}function si(e){if(e instanceof IDBRequest)return A5(e);if(Ap.has(e))return Ap.get(e);const t=I5(e);return t!==e&&(Ap.set(e,t),z0.set(t,e)),t}const Pp=e=>z0.get(e);function D5(e,t,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=si(a);return n&&a.addEventListener("upgradeneeded",c=>{n(si(a.result),c.oldVersion,c.newVersion,si(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const R5=["get","getKey","getAll","getAllKeys","count"],M5=["put","add","delete","clear"],Op=new Map;function L_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Op.get(t))return Op.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,s=M5.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||R5.includes(r)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return Op.set(t,i),i}O5(e=>({...e,get:(t,r,n)=>L_(t,r)||e.get(t,r,n),has:(t,r)=>!!L_(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if($5(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function $5(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const vv="@firebase/app",$_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new XC("@firebase/app"),U5="@firebase/app-compat",F5="@firebase/analytics-compat",B5="@firebase/analytics",z5="@firebase/app-check-compat",W5="@firebase/app-check",H5="@firebase/auth",q5="@firebase/auth-compat",V5="@firebase/database",G5="@firebase/data-connect",K5="@firebase/database-compat",Y5="@firebase/functions",X5="@firebase/functions-compat",J5="@firebase/installations",Q5="@firebase/installations-compat",Z5="@firebase/messaging",e6="@firebase/messaging-compat",t6="@firebase/performance",r6="@firebase/performance-compat",n6="@firebase/remote-config",s6="@firebase/remote-config-compat",i6="@firebase/storage",a6="@firebase/storage-compat",o6="@firebase/firestore",l6="@firebase/ai",c6="@firebase/firestore-compat",u6="firebase",d6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="[DEFAULT]",h6={[vv]:"fire-core",[U5]:"fire-core-compat",[B5]:"fire-analytics",[F5]:"fire-analytics-compat",[W5]:"fire-app-check",[z5]:"fire-app-check-compat",[H5]:"fire-auth",[q5]:"fire-auth-compat",[V5]:"fire-rtdb",[G5]:"fire-data-connect",[K5]:"fire-rtdb-compat",[Y5]:"fire-fn",[X5]:"fire-fn-compat",[J5]:"fire-iid",[Q5]:"fire-iid-compat",[Z5]:"fire-fcm",[e6]:"fire-fcm-compat",[t6]:"fire-perf",[r6]:"fire-perf-compat",[n6]:"fire-rc",[s6]:"fire-rc-compat",[i6]:"fire-gcs",[a6]:"fire-gcs-compat",[o6]:"fire-fst",[c6]:"fire-fst-compat",[l6]:"fire-vertex","fire-js":"fire-js",[u6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,f6=new Map,xv=new Map;function U_(e,t){try{e.container.addComponent(t)}catch(r){ms.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function hh(e){const t=e.name;if(xv.has(t))return ms.debug(`There were multiple attempts to register component ${t}.`),!1;xv.set(t,e);for(const r of dh.values())U_(r,e);for(const r of f6.values())U_(r,e);return!0}function m6(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function p6(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new KC("app","Firebase",g6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=d6;function ZC(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:yv,automaticDataCollectionEnabled:!0,...t},s=n.name;if(typeof s!="string"||!s)throw ii.create("bad-app-name",{appName:String(s)});if(r||(r=VC()),!r)throw ii.create("no-options");const i=dh.get(s);if(i){if(uh(r,i.options)&&uh(n,i.config))return i;throw ii.create("duplicate-app",{appName:s})}const a=new w5(s);for(const c of xv.values())a.addComponent(c);const l=new v6(r,n,a);return dh.set(s,l),l}function x6(e=yv){const t=dh.get(e);if(!t&&e===yv&&VC())return ZC();if(!t)throw ii.create("no-app",{appName:e});return t}function no(e,t,r){let n=h6[e]??e;r&&(n+=`-${r}`);const s=n.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${n}" with version "${t}":`];s&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ms.warn(a.join(" "));return}hh(new fc(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="firebase-heartbeat-database",w6=1,mc="firebase-heartbeat-store";let Tp=null;function ek(){return Tp||(Tp=D5(b6,w6,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(mc)}catch(r){console.warn(r)}}}}).catch(e=>{throw ii.create("idb-open",{originalErrorMessage:e.message})})),Tp}async function _6(e){try{const r=(await ek()).transaction(mc),n=await r.objectStore(mc).get(tk(e));return await r.done,n}catch(t){if(t instanceof Yc)ms.warn(t.message);else{const r=ii.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ms.warn(r.message)}}}async function F_(e,t){try{const n=(await ek()).transaction(mc,"readwrite");await n.objectStore(mc).put(t,tk(e)),await n.done}catch(r){if(r instanceof Yc)ms.warn(r.message);else{const n=ii.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ms.warn(n.message)}}}function tk(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=1024,N6=30;class S6{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new C6(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=B_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>N6){const a=k6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ms.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=B_(),{heartbeatsToSend:n,unsentEntries:s}=E6(this._heartbeatsCache.heartbeats),i=lh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return ms.warn(r),""}}}function B_(){return new Date().toISOString().substring(0,10)}function E6(e,t=j6){const r=[];let n=e.slice();for(const s of e){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),z_(r)>t){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),z_(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class C6{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return l5()?c5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await _6(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return F_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return F_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function z_(e){return lh(JSON.stringify({version:2,heartbeats:e})).length}function k6(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(e){hh(new fc("platform-logger",t=>new L5(t),"PRIVATE")),hh(new fc("heartbeat",t=>new S6(t),"PRIVATE")),no(vv,$_,e),no(vv,$_,"esm2020"),no("fire-js","")}A6("");var P6="firebase",O6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */no(P6,O6,"app");var W_={};const H_="@firebase/database",q_="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rk="";function T6(e){rk=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),yt(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:hc(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return Cs(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new I6(t)}}catch{}return new D6},Li=nk("localStorage"),R6=nk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new XC("@firebase/database"),M6=function(){let e=1;return function(){return e++}}(),sk=function(e){const t=v5(e),r=new g5;r.update(t);const n=r.digest();return U0.encodeByteArray(n)},Xc=function(...e){let t="";for(let r=0;r<e.length;r++){const n=e[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?t+=Xc.apply(null,n):typeof n=="object"?t+=yt(n):t+=n,t+=" "}return t};let Fl=null,V_=!0;const L6=function(e,t){H(!0,"Can't turn on custom loggers persistently."),so.logLevel=Me.VERBOSE,Fl=so.log.bind(so)},Qt=function(...e){if(V_===!0&&(V_=!1,Fl===null&&R6.get("logging_enabled")===!0&&L6()),Fl){const t=Xc.apply(null,e);Fl(t)}},Jc=function(e){return function(...t){Qt(e,...t)}},bv=function(...e){const t="FIREBASE INTERNAL ERROR: "+Xc(...e);so.error(t)},ps=function(...e){const t=`FIREBASE FATAL ERROR: ${Xc(...e)}`;throw so.error(t),new Error(t)},Sr=function(...e){const t="FIREBASE WARNING: "+Xc(...e);so.warn(t)},$6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Sr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ik=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},U6=function(e){if(document.readyState==="complete")e();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},yo="[MIN_NAME]",ta="[MAX_NAME]",Uo=function(e,t){if(e===t)return 0;if(e===yo||t===ta)return-1;if(t===yo||e===ta)return 1;{const r=G_(e),n=G_(t);return r!==null?n!==null?r-n===0?e.length-t.length:r-n:-1:n!==null?1:e<t?-1:1}},F6=function(e,t){return e===t?0:e<t?-1:1},dl=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+yt(t))},W0=function(e){if(typeof e!="object"||e===null)return yt(e);const t=[];for(const n in e)t.push(n);t.sort();let r="{";for(let n=0;n<t.length;n++)n!==0&&(r+=","),r+=yt(t[n]),r+=":",r+=W0(e[t[n]]);return r+="}",r},ak=function(e,t){const r=e.length;if(r<=t)return[e];const n=[];for(let s=0;s<r;s+=t)s+t>r?n.push(e.substring(s,r)):n.push(e.substring(s,s+t));return n};function kr(e,t){for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])}const ok=function(e){H(!ik(e),"Invalid JSON number");const t=11,r=52,n=(1<<t-1)-1;let s,i,a,l,c;e===0?(i=0,a=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-n)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),n),i=l+n,a=Math.round(e*Math.pow(2,r-l)-Math.pow(2,r))):(i=0,a=Math.round(e/Math.pow(2,1-n-r))));const u=[];for(c=r;c;c-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(c=t;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},B6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},z6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function W6(e,t){let r="Unknown Error";e==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?r="Client doesn't have permission to access the desired data.":e==="unavailable"&&(r="The service is unavailable");const n=new Error(e+" at "+t._path.toString()+": "+r);return n.code=e.toUpperCase(),n}const H6=new RegExp("^-?(0*)\\d{1,10}$"),q6=-2147483648,V6=2147483647,G_=function(e){if(H6.test(e)){const t=Number(e);if(t>=q6&&t<=V6)return t}return null},Fo=function(e){try{e()}catch(t){setTimeout(()=>{const r=t.stack||"";throw Sr("Exception was thrown by user callback.",r),t},Math.floor(0))}},G6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bl=function(e,t){const r=setTimeout(e,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(t,r){this.appCheckProvider=r,this.appName=t.name,p6(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,n):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)==null||r.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Sr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(t,r,n){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(Qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,n):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Sr(t)}}class Td{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Td.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="5",lk="v",ck="s",uk="r",dk="f",hk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fk="ls",mk="p",wv="ac",pk="websocket",gk="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(t,r,n,s,i=!1,a="",l=!1,c=!1,u=null){this.secure=r,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Li.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Li.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function X6(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function yk(e,t,r){H(typeof t=="string","typeof type must == string"),H(typeof r=="object","typeof params must == object");let n;if(t===pk)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===gk)n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);X6(e)&&(r.ns=e.namespace);const s=[];return kr(r,(i,a)=>{s.push(i+"="+a)}),n+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(){this.counters_={}}incrementCounter(t,r=1){Cs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return VM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip={},Dp={};function q0(e){const t=e.toString();return Ip[t]||(Ip[t]=new J6),Ip[t]}function Q6(e,t){const r=e.toString();return Dp[r]||(Dp[r]=t()),Dp[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&Fo(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="start",eL="close",tL="pLPCommand",rL="pRTLPCB",xk="id",bk="pw",wk="ser",nL="cb",sL="seg",iL="ts",aL="d",oL="dframe",_k=1870,jk=30,lL=_k-jk,cL=25e3,uL=3e4;class Ga{constructor(t,r,n,s,i,a,l){this.connId=t,this.repoInfo=r,this.applicationId=n,this.appCheckToken=s,this.authToken=i,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jc(t),this.stats_=q0(r),this.urlFn=c=>(this.appCheckToken&&(c[wv]=this.appCheckToken),yk(r,gk,c))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Z6(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uL)),U6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new V0((...i)=>{const[a,l,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===K_)this.id=l,this.password=c;else if(a===eL)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...i)=>{const[a,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const n={};n[K_]="t",n[wk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[nL]=this.scriptTagHolder.uniqueCallbackIdentifier),n[lk]=H0,this.transportSessionId&&(n[ck]=this.transportSessionId),this.lastSessionId&&(n[fk]=this.lastSessionId),this.applicationId&&(n[mk]=this.applicationId),this.appCheckToken&&(n[wv]=this.appCheckToken),typeof location<"u"&&location.hostname&&hk.test(location.hostname)&&(n[uk]=dk);const s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ga.forceAllow_=!0}static forceDisallow(){Ga.forceDisallow_=!0}static isAvailable(){return Ga.forceAllow_?!0:!Ga.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!B6()&&!z6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=yt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=WC(r),s=ak(n,lL);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[oL]="t",n[xk]=t,n[bk]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=yt(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class V0{constructor(t,r,n,s){this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=M6(),window[tL+this.uniqueCallbackIdentifier]=t,window[rL+this.uniqueCallbackIdentifier]=r,this.myIFrame=V0.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){Qt("frame writing exception"),l.stack&&Qt(l.stack),Qt(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Qt("No IE domain setting required")}catch{const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[xk]=this.myID,t[bk]=this.myPW,t[wk]=this.currentSerial;let r=this.urlFn(t),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+jk+n.length<=_k;){const a=this.pendingSegs.shift();n=n+"&"+sL+s+"="+a.seg+"&"+iL+s+"="+a.ts+"&"+aL+s+"="+a.d,s++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,n){this.pendingSegs.push({seg:t,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},s=setTimeout(n,Math.floor(cL)),i=()=>{clearTimeout(s),n()};this.addTag(t,i)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Qt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=16384,hL=45e3;let fh=null;typeof MozWebSocket<"u"?fh=MozWebSocket:typeof WebSocket<"u"&&(fh=WebSocket);class xn{constructor(t,r,n,s,i,a,l){this.connId=t,this.applicationId=n,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jc(this.connId),this.stats_=q0(r),this.connURL=xn.connectionURL_(r,a,l,s,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,n,s,i){const a={};return a[lk]=H0,typeof location<"u"&&location.hostname&&hk.test(location.hostname)&&(a[uk]=dk),r&&(a[ck]=r),n&&(a[fk]=n),s&&(a[wv]=s),i&&(a[mk]=i),yk(t,pk,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Li.set("previous_websocket_failure",!0);try{let n;o5(),this.mySock=new fh(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){xn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&fh!==null&&!xn.forceDisallow_}static previouslyFailed(){return Li.isInMemoryStorage||Li.get("previous_websocket_failure")===!0}markConnectionHealthy(){Li.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=hc(r);this.onMessage(n)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(H(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(t){this.resetKeepAlive();const r=yt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=ak(r,dL);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(hL))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xn.responsesRequiredToBeHealthy=2;xn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{static get ALL_TRANSPORTS(){return[Ga,xn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=xn&&xn.isAvailable();let n=r&&!xn.previouslyFailed();if(t.webSocketOnly&&(r||Sr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[xn];else{const s=this.transports_=[];for(const i of pc.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);pc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}pc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=6e4,mL=5e3,pL=10*1024,gL=100*1024,Rp="t",Y_="d",vL="s",X_="r",yL="e",J_="o",Q_="a",Z_="n",e1="p",xL="h";class bL{constructor(t,r,n,s,i,a,l,c,u,d){this.id=t,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jc("c:"+this.id+":"),this.transportManager_=new pc(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Bl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Rp in t){const r=t[Rp];r===Q_?this.upgradeIfSecondaryHealthy_():r===X_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===J_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=dl("t",t),n=dl("d",t);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:e1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Q_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Z_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=dl("t",t),n=dl("d",t);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=dl(Rp,t);if(Y_ in t){const n=t[Y_];if(r===xL){const s={...n};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(r===Z_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===vL?this.onConnectionShutdown_(n):r===X_?this.onReset_(n):r===yL?bv("Server Error: "+n):r===J_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bv("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,n=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),H0!==n&&Sr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),Bl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fL))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(mL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:e1,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Li.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{put(t,r,n,s){}merge(t,r,n,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,n){}onDisconnectMerge(t,r,n){}onDisconnectCancel(t,r){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sk=class{constructor(t){this.allowedEvents_=t,this.listeners_={},H(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,r)}}on(t,r,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:n});const s=this.getInitialEvent(t);s&&r.apply(n,s)}off(t,r,n){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let i=0;i<s.length;i++)if(s[i].callback===r&&(!n||n===s[i].context)){s.splice(i,1);return}}validateEventType_(t){H(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Sk{static getInstance(){return new mh}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!GC()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return H(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=32,r1=768;let Te=class{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}};function we(){return new Te("")}function me(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function di(e){return e.pieces_.length-e.pieceNum_}function Le(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Te(e.pieces_,t)}function Ek(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function wL(e){let t="";for(let r=e.pieceNum_;r<e.pieces_.length;r++)e.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[r])));return t||"/"}function Ck(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function kk(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let r=e.pieceNum_;r<e.pieces_.length-1;r++)t.push(e.pieces_[r]);return new Te(t,0)}function xt(e,t){const r=[];for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);if(t instanceof Te)for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);else{const n=t.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&r.push(n[s])}return new Te(r,0)}function ge(e){return e.pieceNum_>=e.pieces_.length}function ir(e,t){const r=me(e),n=me(t);if(r===null)return t;if(r===n)return ir(Le(e),Le(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function G0(e,t){if(di(e)!==di(t))return!1;for(let r=e.pieceNum_,n=t.pieceNum_;r<=e.pieces_.length;r++,n++)if(e.pieces_[r]!==t.pieces_[n])return!1;return!0}function jn(e,t){let r=e.pieceNum_,n=t.pieceNum_;if(di(e)>di(t))return!1;for(;r<e.pieces_.length;){if(e.pieces_[r]!==t.pieces_[n])return!1;++r,++n}return!0}class _L{constructor(t,r){this.errorPrefix_=r,this.parts_=Ck(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Bf(this.parts_[n]);Ak(this)}}function jL(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Bf(t),Ak(e)}function NL(e){const t=e.parts_.pop();e.byteLength_-=Bf(t),e.parts_.length>0&&(e.byteLength_-=1)}function Ak(e){if(e.byteLength_>r1)throw new Error(e.errorPrefix_+"has a key path longer than "+r1+" bytes ("+e.byteLength_+").");if(e.parts_.length>t1)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t1+") or object contains a cycle "+Ei(e))}function Ei(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0 extends Sk{static getInstance(){return new K0}constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(t){return H(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=1e3,SL=60*5*1e3,n1=30*1e3,EL=1.3,CL=3e4,kL="server_kill",s1=3;class os extends Nk{constructor(t,r,n,s,i,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=os.nextPersistentConnectionId_++,this.log_=Jc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hl,this.maxReconnectDelay_=SL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");K0.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&mh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,n){const s=++this.requestNumber_,i={r:s,a:t,b:r};this.log_(yt(i)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[s]=n)}get(t){this.initConnection_();const r=new Ff,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),r.promise}listen(t,r,n,s){this.initConnection_();const i=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),H(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:n};this.listens.get(a).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(t){const r=t.query,n=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+n+" for "+s);const i={p:n},a="q";t.tag&&(i.q=r._queryObject,i.t=t.tag),i.h=t.hashFn(),this.sendRequest(a,i,l=>{const c=l.d,u=l.s;os.warnOnListenWarnings_(c,r),(this.listens.get(n)&&this.listens.get(n).get(s))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(n,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Cs(t,"w")){const n=vo(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',i=r._path.toString();Sr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||m5(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=n1)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=f5(t)?"auth":"gauth",n={cred:t};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,s=>{const i=s.s,a=s.d||"error";this.authToken_===t&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,n=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(t,r){const n=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),H(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,t._queryObject,r)}sendUnlisten_(t,r,n,s){this.log_("Unlisten on "+t+" for "+r);const i={p:t},a="n";s&&(i.q=n,i.t=s),this.sendRequest(a,i)}onDisconnectPut(t,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:n})}onDisconnectMerge(t,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:n})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,n,s){const i={p:r,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,n,s){this.putInternal("p",t,r,n,s)}merge(t,r,n,s){this.putInternal("m",t,r,n,s)}putInternal(t,r,n,s,i){this.initConnection_();const a={p:r,d:n};i!==void 0&&(a.h=i),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,n,i=>{this.log_(r+" response",i),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const i=n.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+yt(t));const r=t.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):bv("Unrecognized action received from server: "+yt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>CL&&(this.reconnectDelay_=hl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*EL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+os.nextConnectionId_++,i=this.lastSessionId;let a=!1,l=null;const c=function(){l?l.close():(a=!0,n())},u=function(h){H(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Qt("getToken() completed but was canceled"):(Qt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new bL(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,n,m=>{Sr(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(kL)},i))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Sr(h),c())}}}interrupt(t){Qt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Qt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],I_(this.interruptReasons_)&&(this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let n;r?n=r.map(i=>W0(i)).join("$"):n="default";const s=this.removeListen_(t,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const n=new Te(t).toString();let s;if(this.listens.has(n)){const i=this.listens.get(n);s=i.get(r),i.delete(r),i.size===0&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(t,r){Qt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=s1&&(this.reconnectDelay_=n1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Qt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=s1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+rk.replace(/\./g,"-")]=1,GC()?t["framework.cordova"]=1:a5()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=mh.getInstance().currentlyOnline();return I_(this.interruptReasons_)&&t}}os.nextPersistentConnectionId_=0;os.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new pe(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const n=new pe(yo,t),s=new pe(yo,r);return this.compare(n,s)!==0}minPost(){return pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu;class Pk extends zf{static get __EMPTY_NODE(){return Wu}static set __EMPTY_NODE(t){Wu=t}compare(t,r){return Uo(t.name,r.name)}isDefinedOn(t){throw Lo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return pe.MIN}maxPost(){return new pe(ta,Wu)}makePost(t,r){return H(typeof t=="string","KeyIndex indexValue must always be a string."),new pe(t,Wu)}toString(){return".key"}}const io=new Pk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(t,r,n,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(t=t,a=r?n(t.key,r):1,s&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Ot{constructor(t,r,n,s,i){this.key=t,this.value=r,this.color=n??Ot.RED,this.left=s??xr.EMPTY_NODE,this.right=i??xr.EMPTY_NODE}copy(t,r,n,s,i){return new Ot(t??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let s=this;const i=n(t,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(t,r,n),null):i===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return xr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let n,s;if(n=this,r(t,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(t,n.key)===0){if(n.right.isEmpty())return xr.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Ot.RED=!0;Ot.BLACK=!1;class AL{copy(t,r,n,s,i){return this}insert(t,r,n){return new Ot(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class xr{constructor(t,r=xr.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new xr(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,Ot.BLACK,null,null))}remove(t){return new xr(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ot.BLACK,null,null))}get(t){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(t,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(t){let r,n=this.root_,s=null;for(;!n.isEmpty();)if(r=this.comparator_(t,n.key),r===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Hu(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new Hu(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new Hu(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new Hu(this.root_,null,this.comparator_,!0,t)}}xr.EMPTY_NODE=new AL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(e,t){return Uo(e.name,t.name)}function Y0(e,t){return Uo(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _v;function OL(e){_v=e}const Ok=function(e){return typeof e=="number"?"number:"+ok(e):"string:"+e},Tk=function(e){if(e.isLeafNode()){const t=e.val();H(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Cs(t,".sv"),"Priority must be a string or number.")}else H(e===_v||e.isEmpty(),"priority of unexpected type.");H(e===_v||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i1;class kt{static set __childrenNodeConstructor(t){i1=t}static get __childrenNodeConstructor(){return i1}constructor(t,r=kt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,H(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Tk(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new kt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:kt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ge(t)?this:me(t)===".priority"?this.priorityNode_:kt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:kt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const n=me(t);return n===null?r:r.isEmpty()&&n!==".priority"?this:(H(n!==".priority"||di(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,kt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Le(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ok(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=ok(this.value_):t+=this.value_,this.lazyHash_=sk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===kt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof kt.__childrenNodeConstructor?-1:(H(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,n=typeof this.value_,s=kt.VALUE_TYPE_ORDER.indexOf(r),i=kt.VALUE_TYPE_ORDER.indexOf(n);return H(s>=0,"Unknown leaf type: "+r),H(i>=0,"Unknown leaf type: "+n),s===i?n==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}kt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ik,Dk;function TL(e){Ik=e}function IL(e){Dk=e}class DL extends zf{compare(t,r){const n=t.node.getPriority(),s=r.node.getPriority(),i=n.compareTo(s);return i===0?Uo(t.name,r.name):i}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return pe.MIN}maxPost(){return new pe(ta,new kt("[PRIORITY-POST]",Dk))}makePost(t,r){const n=Ik(t);return new pe(r,new kt("[PRIORITY-POST]",n))}toString(){return".priority"}}const nt=new DL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=Math.log(2);class ML{constructor(t){const r=i=>parseInt(Math.log(i)/RL,10),n=i=>parseInt(Array(i+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const s=n(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const ph=function(e,t,r,n){e.sort(t);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=e[c],f=r?r(h):h,new Ot(f,h.node,Ot.BLACK,null,null);{const m=parseInt(d/2,10)+c,g=s(c,m),y=s(m+1,u);return h=e[m],f=r?r(h):h,new Ot(f,h.node,Ot.BLACK,g,y)}},i=function(c){let u=null,d=null,h=e.length;const f=function(g,y){const p=h-g,v=h;h-=g;const b=s(p+1,v),w=e[p],_=r?r(w):w;m(new Ot(_,w.node,y,null,b))},m=function(g){u?(u.left=g,u=g):(d=g,u=g)};for(let g=0;g<c.count;++g){const y=c.nextBitIsOne(),p=Math.pow(2,c.count-(g+1));y?f(p,Ot.BLACK):(f(p,Ot.BLACK),f(p,Ot.RED))}return d},a=new ML(e.length),l=i(a);return new xr(n||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp;const ja={};class ns{static get Default(){return H(ja&&nt,"ChildrenNode.ts has not been loaded"),Mp=Mp||new ns({".priority":ja},{".priority":nt}),Mp}constructor(t,r){this.indexes_=t,this.indexSet_=r}get(t){const r=vo(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof xr?r:null}hasIndex(t){return Cs(this.indexSet_,t.toString())}addIndex(t,r){H(t!==io,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let s=!1;const i=r.getIterator(pe.Wrap);let a=i.getNext();for(;a;)s=s||t.isDefinedOn(a.node),n.push(a),a=i.getNext();let l;s?l=ph(n,t.getCompare()):l=ja;const c=t.toString(),u={...this.indexSet_};u[c]=t;const d={...this.indexes_};return d[c]=l,new ns(d,u)}addToIndexes(t,r){const n=ch(this.indexes_,(s,i)=>{const a=vo(this.indexSet_,i);if(H(a,"Missing index implementation for "+i),s===ja)if(a.isDefinedOn(t.node)){const l=[],c=r.getIterator(pe.Wrap);let u=c.getNext();for(;u;)u.name!==t.name&&l.push(u),u=c.getNext();return l.push(t),ph(l,a.getCompare())}else return ja;else{const l=r.get(t.name);let c=s;return l&&(c=c.remove(new pe(t.name,l))),c.insert(t,t.node)}});return new ns(n,this.indexSet_)}removeFromIndexes(t,r){const n=ch(this.indexes_,s=>{if(s===ja)return s;{const i=r.get(t.name);return i?s.remove(new pe(t.name,i)):s}});return new ns(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl;class le{static get EMPTY_NODE(){return fl||(fl=new le(new xr(Y0),null,ns.Default))}constructor(t,r,n){this.children_=t,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tk(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fl}updatePriority(t){return this.children_.isEmpty()?this:new le(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?fl:r}}getChild(t){const r=me(t);return r===null?this:this.getImmediateChild(r).getChild(Le(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(H(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const n=new pe(t,r);let s,i;r.isEmpty()?(s=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(t,r),i=this.indexMap_.addToIndexes(n,this.children_));const a=s.isEmpty()?fl:this.priorityNode_;return new le(s,a,i)}}updateChild(t,r){const n=me(t);if(n===null)return r;{H(me(t)!==".priority"||di(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(Le(t),r);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let n=0,s=0,i=!0;if(this.forEachChild(nt,(a,l)=>{r[a]=l.val(t),n++,i&&le.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):i=!1}),!t&&i&&s<2*n){const a=[];for(const l in r)a[l]=r[l];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ok(this.getPriority().val())+":"),this.forEachChild(nt,(r,n)=>{const s=n.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":sk(t)}return this.lazyHash_}getPredecessorChildName(t,r,n){const s=this.resolveIndex_(n);if(s){const i=s.getPredecessorKey(new pe(t,r));return i?i.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new pe(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new pe(r,this.children_.get(r)):null}forEachChild(t,r){const n=this.resolveIndex_(t);return n?n.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,pe.Wrap);let i=s.peek();for(;i!=null&&r.compare(i,t)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,pe.Wrap);let i=s.peek();for(;i!=null&&r.compare(i,t)>0;)s.getNext(),i=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Qc?-1:0}withIndex(t){if(t===io||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new le(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===io||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(nt),s=r.getIterator(nt);let i=n.getNext(),a=s.getNext();for(;i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=s.getNext()}return i===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===io?null:this.indexMap_.get(t.toString())}}le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class LL extends le{constructor(){super(new xr(Y0),le.EMPTY_NODE,ns.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return le.EMPTY_NODE}isEmpty(){return!1}}const Qc=new LL;Object.defineProperties(pe,{MIN:{value:new pe(yo,le.EMPTY_NODE)},MAX:{value:new pe(ta,Qc)}});Pk.__EMPTY_NODE=le.EMPTY_NODE;kt.__childrenNodeConstructor=le;OL(Qc);IL(Qc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=!0;function Tt(e,t=null){if(e===null)return le.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),H(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const r=e;return new kt(r,Tt(t))}if(!(e instanceof Array)&&$L){const r=[];let n=!1;if(kr(e,(a,l)=>{if(a.substring(0,1)!=="."){const c=Tt(l);c.isEmpty()||(n=n||!c.getPriority().isEmpty(),r.push(new pe(a,c)))}}),r.length===0)return le.EMPTY_NODE;const i=ph(r,PL,a=>a.name,Y0);if(n){const a=ph(r,nt.getCompare());return new le(i,Tt(t),new ns({".priority":a},{".priority":nt}))}else return new le(i,Tt(t),ns.Default)}else{let r=le.EMPTY_NODE;return kr(e,(n,s)=>{if(Cs(e,n)&&n.substring(0,1)!=="."){const i=Tt(s);(i.isLeafNode()||!i.isEmpty())&&(r=r.updateImmediateChild(n,i))}}),r.updatePriority(Tt(t))}}TL(Tt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL extends zf{constructor(t){super(),this.indexPath_=t,H(!ge(t)&&me(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const n=this.extractChild(t.node),s=this.extractChild(r.node),i=n.compareTo(s);return i===0?Uo(t.name,r.name):i}makePost(t,r){const n=Tt(t),s=le.EMPTY_NODE.updateChild(this.indexPath_,n);return new pe(r,s)}maxPost(){const t=le.EMPTY_NODE.updateChild(this.indexPath_,Qc);return new pe(ta,t)}toString(){return Ck(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL extends zf{compare(t,r){const n=t.node.compareTo(r.node);return n===0?Uo(t.name,r.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return pe.MIN}maxPost(){return pe.MAX}makePost(t,r){const n=Tt(t);return new pe(r,n)}toString(){return".value"}}const BL=new FL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(e){return{type:"value",snapshotNode:e}}function xo(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function gc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function vc(e,t,r){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:r}}function zL(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t){this.index_=t}updateChild(t,r,n,s,i,a){H(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(r);return l.getChild(s).equals(n.getChild(s))&&l.isEmpty()===n.isEmpty()||(a!=null&&(n.isEmpty()?t.hasChild(r)?a.trackChildChange(gc(r,l)):H(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(xo(r,n)):a.trackChildChange(vc(r,n,l))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(t,r,n){return n!=null&&(t.isLeafNode()||t.forEachChild(nt,(s,i)=>{r.hasChild(s)||n.trackChildChange(gc(s,i))}),r.isLeafNode()||r.forEachChild(nt,(s,i)=>{if(t.hasChild(s)){const a=t.getImmediateChild(s);a.equals(i)||n.trackChildChange(vc(s,i,a))}else n.trackChildChange(xo(s,i))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?le.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t){this.indexedFilter_=new X0(t.getIndex()),this.index_=t.getIndex(),this.startPost_=yc.getStartPost_(t),this.endPost_=yc.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,n=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&n}updateChild(t,r,n,s,i,a){return this.matches(new pe(r,n))||(n=le.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,n,s,i,a)}updateFullNode(t,r,n){r.isLeafNode()&&(r=le.EMPTY_NODE);let s=r.withIndex(this.index_);s=s.updatePriority(le.EMPTY_NODE);const i=this;return r.forEachChild(nt,(a,l)=>{i.matches(new pe(a,l))||(s=s.updateImmediateChild(a,le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,n)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new yc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,n,s,i,a){return this.rangedFilter_.matches(new pe(r,n))||(n=le.EMPTY_NODE),t.getImmediateChild(r).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,n,s,i,a):this.fullLimitUpdateChild_(t,r,n,i,a)}updateFullNode(t,r,n){let s;if(r.isLeafNode()||r.isEmpty())s=le.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){s=le.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;i.hasNext()&&a<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),a++;else break;else continue}}else{s=r.withIndex(this.index_),s=s.updatePriority(le.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let a=0;for(;i.hasNext();){const l=i.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:s=s.updateImmediateChild(l.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,n)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,n,s,i){let a;if(this.reverse_){const h=this.index_.getCompare();a=(f,m)=>h(m,f)}else a=this.index_.getCompare();const l=t;H(l.numChildren()===this.limit_,"");const c=new pe(r,n),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(l.hasChild(r)){const h=l.getImmediateChild(r);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===r||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:a(f,c);if(d&&!n.isEmpty()&&m>=0)return i!=null&&i.trackChildChange(vc(r,n,h)),l.updateImmediateChild(r,n);{i!=null&&i.trackChildChange(gc(r,h));const y=l.updateImmediateChild(r,le.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(xo(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return n.isEmpty()?t:d&&a(u,c)>=0?(i!=null&&(i.trackChildChange(gc(u.name,u.node)),i.trackChildChange(xo(r,n))),l.updateImmediateChild(r,n).updateImmediateChild(u.name,le.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return H(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yo}hasEnd(){return this.endSet_}getIndexEndValue(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return H(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ta}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const t=new J0;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function HL(e){return e.loadsAllData()?new X0(e.getIndex()):e.hasLimit()?new WL(e):new yc(e)}function a1(e){const t={};if(e.isDefault())return t;let r;if(e.index_===nt?r="$priority":e.index_===BL?r="$value":e.index_===io?r="$key":(H(e.index_ instanceof UL,"Unrecognized index type!"),r=e.index_.toString()),t.orderBy=yt(r),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=yt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+yt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=yt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+yt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function o1(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let r=e.viewFrom_;r===""&&(e.isViewFromLeft()?r="l":r="r"),t.vf=r}return e.index_!==nt&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Nk{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(H(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,r,n,s){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=Jc("p:rest:"),this.listens_={}}listen(t,r,n,s){const i=t._path.toString();this.log_("Listen called for "+i+" "+t._queryIdentifier);const a=gh.getListenId_(t,n),l={};this.listens_[a]=l;const c=a1(t._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,n),vo(this.listens_,a)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(t,r){const n=gh.getListenId_(t,r);delete this.listens_[n]}get(t){const r=a1(t._queryParams),n=t._path.toString(),s=new Ff;return this.restRequest_(n+".json",r,(i,a)=>{let l=a;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(n,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(t){}restRequest_(t,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(r.auth=s.accessToken),i&&i.token&&(r.ac=i.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+p5(r);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=hc(l.responseText)}catch{Sr("Failed to parse JSON response for "+a+": "+l.responseText)}n(null,c)}else l.status!==401&&l.status!==404&&Sr("Got unsuccessful REST response for "+a+" Status: "+l.status),n(l.status);n=null}},l.open("GET",a,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this.rootNode_=le.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(){return{value:null,children:new Map}}function Mk(e,t,r){if(ge(t))e.value=r,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,r);else{const n=me(t);e.children.has(n)||e.children.set(n,vh());const s=e.children.get(n);t=Le(t),Mk(s,t,r)}}function jv(e,t,r){e.value!==null?r(t,e.value):VL(e,(n,s)=>{const i=new Te(t.toString()+"/"+n);jv(s,i,r)})}function VL(e,t){e.children.forEach((r,n)=>{t(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r={...t};return this.last_&&kr(this.last_,(n,s)=>{r[n]=r[n]-s}),this.last_=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=10*1e3,KL=30*1e3,YL=5*60*1e3;class XL{constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new GL(t);const n=l1+(KL-l1)*Math.random();Bl(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),r={};let n=!1;kr(t,(s,i)=>{i>0&&Cs(this.statsToReport_,s)&&(r[s]=i,n=!0)}),n&&this.server_.reportStats(r),Bl(this.reportStats_.bind(this),Math.floor(Math.random()*2*YL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Nn||(Nn={}));function Lk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Q0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Z0(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,r,n){this.path=t,this.affectedTree=r,this.revert=n,this.type=Nn.ACK_USER_WRITE,this.source=Lk()}operationForChild(t){if(ge(this.path)){if(this.affectedTree.value!=null)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Te(t));return new yh(we(),r,this.revert)}}else return H(me(this.path)===t,"operationForChild called for unrelated child."),new yh(Le(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,r){this.source=t,this.path=r,this.type=Nn.LISTEN_COMPLETE}operationForChild(t){return ge(this.path)?new xc(this.source,we()):new xc(this.source,Le(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,r,n){this.source=t,this.path=r,this.snap=n,this.type=Nn.OVERWRITE}operationForChild(t){return ge(this.path)?new ra(this.source,we(),this.snap.getImmediateChild(t)):new ra(this.source,Le(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(t,r,n){this.source=t,this.path=r,this.children=n,this.type=Nn.MERGE}operationForChild(t){if(ge(this.path)){const r=this.children.subtree(new Te(t));return r.isEmpty()?null:r.value?new ra(this.source,we(),r.value):new bc(this.source,we(),r)}else return H(me(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new bc(this.source,Le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t,r,n){this.node_=t,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ge(t))return this.isFullyInitialized()&&!this.filtered_;const r=me(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function QL(e,t,r,n){const s=[],i=[];return t.forEach(a=>{a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&i.push(zL(a.childName,a.snapshotNode))}),ml(e,s,"child_removed",t,n,r),ml(e,s,"child_added",t,n,r),ml(e,s,"child_moved",i,n,r),ml(e,s,"child_changed",t,n,r),ml(e,s,"value",t,n,r),s}function ml(e,t,r,n,s,i){const a=n.filter(l=>l.type===r);a.sort((l,c)=>e$(e,l,c)),a.forEach(l=>{const c=ZL(e,l,i);s.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(c,e.query_))})})}function ZL(e,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function e$(e,t,r){if(t.childName==null||r.childName==null)throw Lo("Should only compare child_ events.");const n=new pe(t.childName,t.snapshotNode),s=new pe(r.childName,r.snapshotNode);return e.index_.compare(n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(e,t){return{eventCache:e,serverCache:t}}function zl(e,t,r,n){return Wf(new hi(t,r,n),e.serverCache)}function $k(e,t,r,n){return Wf(e.eventCache,new hi(t,r,n))}function xh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function na(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp;const t$=()=>(Lp||(Lp=new xr(F6)),Lp);class ze{static fromObject(t){let r=new ze(null);return kr(t,(n,s)=>{r=r.set(new Te(n),s)}),r}constructor(t,r=t$()){this.value=t,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:we(),value:this.value};if(ge(t))return null;{const n=me(t),s=this.children.get(n);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Le(t),r);return i!=null?{path:xt(new Te(n),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ge(t))return this;{const r=me(t),n=this.children.get(r);return n!==null?n.subtree(Le(t)):new ze(null)}}set(t,r){if(ge(t))return new ze(r,this.children);{const n=me(t),i=(this.children.get(n)||new ze(null)).set(Le(t),r),a=this.children.insert(n,i);return new ze(this.value,a)}}remove(t){if(ge(t))return this.children.isEmpty()?new ze(null):new ze(null,this.children);{const r=me(t),n=this.children.get(r);if(n){const s=n.remove(Le(t));let i;return s.isEmpty()?i=this.children.remove(r):i=this.children.insert(r,s),this.value===null&&i.isEmpty()?new ze(null):new ze(this.value,i)}else return this}}get(t){if(ge(t))return this.value;{const r=me(t),n=this.children.get(r);return n?n.get(Le(t)):null}}setTree(t,r){if(ge(t))return r;{const n=me(t),i=(this.children.get(n)||new ze(null)).setTree(Le(t),r);let a;return i.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,i),new ze(this.value,a)}}fold(t){return this.fold_(we(),t)}fold_(t,r){const n={};return this.children.inorderTraversal((s,i)=>{n[s]=i.fold_(xt(t,s),r)}),r(t,this.value,n)}findOnPath(t,r){return this.findOnPath_(t,we(),r)}findOnPath_(t,r,n){const s=this.value?n(r,this.value):!1;if(s)return s;if(ge(t))return null;{const i=me(t),a=this.children.get(i);return a?a.findOnPath_(Le(t),xt(r,i),n):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,we(),r)}foreachOnPath_(t,r,n){if(ge(t))return this;{this.value&&n(r,this.value);const s=me(t),i=this.children.get(s);return i?i.foreachOnPath_(Le(t),xt(r,s),n):new ze(null)}}foreach(t){this.foreach_(we(),t)}foreach_(t,r){this.children.inorderTraversal((n,s)=>{s.foreach_(xt(t,n),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,n)=>{n.value&&t(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.writeTree_=t}static empty(){return new Cn(new ze(null))}}function Wl(e,t,r){if(ge(t))return new Cn(new ze(r));{const n=e.writeTree_.findRootMostValueAndPath(t);if(n!=null){const s=n.path;let i=n.value;const a=ir(s,t);return i=i.updateChild(a,r),new Cn(e.writeTree_.set(s,i))}else{const s=new ze(r),i=e.writeTree_.setTree(t,s);return new Cn(i)}}}function c1(e,t,r){let n=e;return kr(r,(s,i)=>{n=Wl(n,xt(t,s),i)}),n}function u1(e,t){if(ge(t))return Cn.empty();{const r=e.writeTree_.setTree(t,new ze(null));return new Cn(r)}}function Nv(e,t){return ma(e,t)!=null}function ma(e,t){const r=e.writeTree_.findRootMostValueAndPath(t);return r!=null?e.writeTree_.get(r.path).getChild(ir(r.path,t)):null}function d1(e){const t=[],r=e.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(nt,(n,s)=>{t.push(new pe(n,s))}):e.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&t.push(new pe(n,s.value))}),t}function ai(e,t){if(ge(t))return e;{const r=ma(e,t);return r!=null?new Cn(new ze(r)):new Cn(e.writeTree_.subtree(t))}}function Sv(e){return e.writeTree_.isEmpty()}function bo(e,t){return Uk(we(),e.writeTree_,t)}function Uk(e,t,r){if(t.value!=null)return r.updateChild(e,t.value);{let n=null;return t.children.inorderTraversal((s,i)=>{s===".priority"?(H(i.value!==null,"Priority writes must always be leaf nodes"),n=i.value):r=Uk(xt(e,s),i,r)}),!r.getChild(e).isEmpty()&&n!==null&&(r=r.updateChild(xt(e,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(e,t){return Wk(t,e)}function r$(e,t,r,n,s){H(n>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:r,writeId:n,visible:s}),s&&(e.visibleWrites=Wl(e.visibleWrites,t,r)),e.lastWriteId=n}function n$(e,t){for(let r=0;r<e.allWrites.length;r++){const n=e.allWrites[r];if(n.writeId===t)return n}return null}function s$(e,t){const r=e.allWrites.findIndex(l=>l.writeId===t);H(r>=0,"removeWrite called with nonexistent writeId.");const n=e.allWrites[r];e.allWrites.splice(r,1);let s=n.visible,i=!1,a=e.allWrites.length-1;for(;s&&a>=0;){const l=e.allWrites[a];l.visible&&(a>=r&&i$(l,n.path)?s=!1:jn(n.path,l.path)&&(i=!0)),a--}if(s){if(i)return a$(e),!0;if(n.snap)e.visibleWrites=u1(e.visibleWrites,n.path);else{const l=n.children;kr(l,c=>{e.visibleWrites=u1(e.visibleWrites,xt(n.path,c))})}return!0}else return!1}function i$(e,t){if(e.snap)return jn(e.path,t);for(const r in e.children)if(e.children.hasOwnProperty(r)&&jn(xt(e.path,r),t))return!0;return!1}function a$(e){e.visibleWrites=Fk(e.allWrites,o$,we()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function o$(e){return e.visible}function Fk(e,t,r){let n=Cn.empty();for(let s=0;s<e.length;++s){const i=e[s];if(t(i)){const a=i.path;let l;if(i.snap)jn(r,a)?(l=ir(r,a),n=Wl(n,l,i.snap)):jn(a,r)&&(l=ir(a,r),n=Wl(n,we(),i.snap.getChild(l)));else if(i.children){if(jn(r,a))l=ir(r,a),n=c1(n,l,i.children);else if(jn(a,r))if(l=ir(a,r),ge(l))n=c1(n,we(),i.children);else{const c=vo(i.children,me(l));if(c){const u=c.getChild(Le(l));n=Wl(n,we(),u)}}}else throw Lo("WriteRecord should have .snap or .children")}}return n}function Bk(e,t,r,n,s){if(!n&&!s){const i=ma(e.visibleWrites,t);if(i!=null)return i;{const a=ai(e.visibleWrites,t);if(Sv(a))return r;if(r==null&&!Nv(a,we()))return null;{const l=r||le.EMPTY_NODE;return bo(a,l)}}}else{const i=ai(e.visibleWrites,t);if(!s&&Sv(i))return r;if(!s&&r==null&&!Nv(i,we()))return null;{const a=function(u){return(u.visible||s)&&(!n||!~n.indexOf(u.writeId))&&(jn(u.path,t)||jn(t,u.path))},l=Fk(e.allWrites,a,t),c=r||le.EMPTY_NODE;return bo(l,c)}}}function l$(e,t,r){let n=le.EMPTY_NODE;const s=ma(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(nt,(i,a)=>{n=n.updateImmediateChild(i,a)}),n;if(r){const i=ai(e.visibleWrites,t);return r.forEachChild(nt,(a,l)=>{const c=bo(ai(i,new Te(a)),l);n=n.updateImmediateChild(a,c)}),d1(i).forEach(a=>{n=n.updateImmediateChild(a.name,a.node)}),n}else{const i=ai(e.visibleWrites,t);return d1(i).forEach(a=>{n=n.updateImmediateChild(a.name,a.node)}),n}}function c$(e,t,r,n,s){H(n||s,"Either existingEventSnap or existingServerSnap must exist");const i=xt(t,r);if(Nv(e.visibleWrites,i))return null;{const a=ai(e.visibleWrites,i);return Sv(a)?s.getChild(r):bo(a,s.getChild(r))}}function u$(e,t,r,n){const s=xt(t,r),i=ma(e.visibleWrites,s);if(i!=null)return i;if(n.isCompleteForChild(r)){const a=ai(e.visibleWrites,s);return bo(a,n.getNode().getImmediateChild(r))}else return null}function d$(e,t){return ma(e.visibleWrites,t)}function h$(e,t,r,n,s,i,a){let l;const c=ai(e.visibleWrites,t),u=ma(c,we());if(u!=null)l=u;else if(r!=null)l=bo(c,r);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const d=[],h=a.getCompare(),f=i?l.getReverseIteratorFrom(n,a):l.getIteratorFrom(n,a);let m=f.getNext();for(;m&&d.length<s;)h(m,n)!==0&&d.push(m),m=f.getNext();return d}else return[]}function f$(){return{visibleWrites:Cn.empty(),allWrites:[],lastWriteId:-1}}function bh(e,t,r,n){return Bk(e.writeTree,e.treePath,t,r,n)}function ex(e,t){return l$(e.writeTree,e.treePath,t)}function h1(e,t,r,n){return c$(e.writeTree,e.treePath,t,r,n)}function wh(e,t){return d$(e.writeTree,xt(e.treePath,t))}function m$(e,t,r,n,s,i){return h$(e.writeTree,e.treePath,t,r,n,s,i)}function tx(e,t,r){return u$(e.writeTree,e.treePath,t,r)}function zk(e,t){return Wk(xt(e.treePath,t),e.writeTree)}function Wk(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,n=t.childName;H(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),H(n!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(n);if(s){const i=s.type;if(r==="child_added"&&i==="child_removed")this.changeMap.set(n,vc(n,t.snapshotNode,s.snapshotNode));else if(r==="child_removed"&&i==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&i==="child_changed")this.changeMap.set(n,gc(n,s.oldSnap));else if(r==="child_changed"&&i==="child_added")this.changeMap.set(n,xo(n,t.snapshotNode));else if(r==="child_changed"&&i==="child_changed")this.changeMap.set(n,vc(n,t.snapshotNode,s.oldSnap));else throw Lo("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${getCompleteChild(t){return null}getChildAfterChild(t,r,n){return null}}const Hk=new g$;class rx{constructor(t,r,n=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const n=this.optCompleteServerCache_!=null?new hi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tx(this.writes_,t,n)}}getChildAfterChild(t,r,n){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:na(this.viewCache_),i=m$(this.writes_,s,r,1,n,t);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(e){return{filter:e}}function y$(e,t){H(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),H(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function x$(e,t,r,n,s){const i=new p$;let a,l;if(r.type===Nn.OVERWRITE){const u=r;u.source.fromUser?a=Ev(e,t,u.path,u.snap,n,s,i):(H(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!ge(u.path),a=_h(e,t,u.path,u.snap,n,s,l,i))}else if(r.type===Nn.MERGE){const u=r;u.source.fromUser?a=w$(e,t,u.path,u.children,n,s,i):(H(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),a=Cv(e,t,u.path,u.children,n,s,l,i))}else if(r.type===Nn.ACK_USER_WRITE){const u=r;u.revert?a=N$(e,t,u.path,n,s,i):a=_$(e,t,u.path,u.affectedTree,n,s,i)}else if(r.type===Nn.LISTEN_COMPLETE)a=j$(e,t,r.path,n,i);else throw Lo("Unknown operation type: "+r.type);const c=i.getChanges();return b$(t,a,c),{viewCache:a,changes:c}}function b$(e,t,r){const n=t.eventCache;if(n.isFullyInitialized()){const s=n.getNode().isLeafNode()||n.getNode().isEmpty(),i=xh(e);(r.length>0||!e.eventCache.isFullyInitialized()||s&&!n.getNode().equals(i)||!n.getNode().getPriority().equals(i.getPriority()))&&r.push(Rk(xh(t)))}}function qk(e,t,r,n,s,i){const a=t.eventCache;if(wh(n,r)!=null)return t;{let l,c;if(ge(r))if(H(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=na(t),d=u instanceof le?u:le.EMPTY_NODE,h=ex(n,d);l=e.filter.updateFullNode(t.eventCache.getNode(),h,i)}else{const u=bh(n,na(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,i)}else{const u=me(r);if(u===".priority"){H(di(r)===1,"Can't have a priority with additional path components");const d=a.getNode();c=t.serverCache.getNode();const h=h1(n,r,d,c);h!=null?l=e.filter.updatePriority(d,h):l=a.getNode()}else{const d=Le(r);let h;if(a.isCompleteForChild(u)){c=t.serverCache.getNode();const f=h1(n,r,a.getNode(),c);f!=null?h=a.getNode().getImmediateChild(u).updateChild(d,f):h=a.getNode().getImmediateChild(u)}else h=tx(n,u,t.serverCache);h!=null?l=e.filter.updateChild(a.getNode(),u,h,d,s,i):l=a.getNode()}}return zl(t,l,a.isFullyInitialized()||ge(r),e.filter.filtersNodes())}}function _h(e,t,r,n,s,i,a,l){const c=t.serverCache;let u;const d=a?e.filter:e.filter.getIndexedFilter();if(ge(r))u=d.updateFullNode(c.getNode(),n,null);else if(d.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(r,n);u=d.updateFullNode(c.getNode(),m,null)}else{const m=me(r);if(!c.isCompleteForPath(r)&&di(r)>1)return t;const g=Le(r),p=c.getNode().getImmediateChild(m).updateChild(g,n);m===".priority"?u=d.updatePriority(c.getNode(),p):u=d.updateChild(c.getNode(),m,p,g,Hk,null)}const h=$k(t,u,c.isFullyInitialized()||ge(r),d.filtersNodes()),f=new rx(s,h,i);return qk(e,h,r,s,f,l)}function Ev(e,t,r,n,s,i,a){const l=t.eventCache;let c,u;const d=new rx(s,t,i);if(ge(r))u=e.filter.updateFullNode(t.eventCache.getNode(),n,a),c=zl(t,u,!0,e.filter.filtersNodes());else{const h=me(r);if(h===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),n),c=zl(t,u,l.isFullyInitialized(),l.isFiltered());else{const f=Le(r),m=l.getNode().getImmediateChild(h);let g;if(ge(f))g=n;else{const y=d.getCompleteChild(h);y!=null?Ek(f)===".priority"&&y.getChild(kk(f)).isEmpty()?g=y:g=y.updateChild(f,n):g=le.EMPTY_NODE}if(m.equals(g))c=t;else{const y=e.filter.updateChild(l.getNode(),h,g,f,d,a);c=zl(t,y,l.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function f1(e,t){return e.eventCache.isCompleteForChild(t)}function w$(e,t,r,n,s,i,a){let l=t;return n.foreach((c,u)=>{const d=xt(r,c);f1(t,me(d))&&(l=Ev(e,l,d,u,s,i,a))}),n.foreach((c,u)=>{const d=xt(r,c);f1(t,me(d))||(l=Ev(e,l,d,u,s,i,a))}),l}function m1(e,t,r){return r.foreach((n,s)=>{t=t.updateChild(n,s)}),t}function Cv(e,t,r,n,s,i,a,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,u;ge(r)?u=n:u=new ze(null).setTree(r,n);const d=t.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const m=t.serverCache.getNode().getImmediateChild(h),g=m1(e,m,f);c=_h(e,c,new Te(h),g,s,i,a,l)}}),u.children.inorderTraversal((h,f)=>{const m=!t.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!m){const g=t.serverCache.getNode().getImmediateChild(h),y=m1(e,g,f);c=_h(e,c,new Te(h),y,s,i,a,l)}}),c}function _$(e,t,r,n,s,i,a){if(wh(s,r)!=null)return t;const l=t.serverCache.isFiltered(),c=t.serverCache;if(n.value!=null){if(ge(r)&&c.isFullyInitialized()||c.isCompleteForPath(r))return _h(e,t,r,c.getNode().getChild(r),s,i,l,a);if(ge(r)){let u=new ze(null);return c.getNode().forEachChild(io,(d,h)=>{u=u.set(new Te(d),h)}),Cv(e,t,r,u,s,i,l,a)}else return t}else{let u=new ze(null);return n.foreach((d,h)=>{const f=xt(r,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),Cv(e,t,r,u,s,i,l,a)}}function j$(e,t,r,n,s){const i=t.serverCache,a=$k(t,i.getNode(),i.isFullyInitialized()||ge(r),i.isFiltered());return qk(e,a,r,n,Hk,s)}function N$(e,t,r,n,s,i){let a;if(wh(n,r)!=null)return t;{const l=new rx(n,t,s),c=t.eventCache.getNode();let u;if(ge(r)||me(r)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=bh(n,na(t));else{const h=t.serverCache.getNode();H(h instanceof le,"serverChildren would be complete if leaf node"),d=ex(n,h)}d=d,u=e.filter.updateFullNode(c,d,i)}else{const d=me(r);let h=tx(n,d,t.serverCache);h==null&&t.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=e.filter.updateChild(c,d,h,Le(r),l,i):t.eventCache.getNode().hasChild(d)?u=e.filter.updateChild(c,d,le.EMPTY_NODE,Le(r),l,i):u=c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=bh(n,na(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,i)))}return a=t.serverCache.isFullyInitialized()||wh(n,we())!=null,zl(t,u,a,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(t,r){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,s=new X0(n.getIndex()),i=HL(n);this.processor_=v$(i);const a=r.serverCache,l=r.eventCache,c=s.updateFullNode(le.EMPTY_NODE,a.getNode(),null),u=i.updateFullNode(le.EMPTY_NODE,l.getNode(),null),d=new hi(c,a.isFullyInitialized(),s.filtersNodes()),h=new hi(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=Wf(h,d),this.eventGenerator_=new JL(this.query_)}get query(){return this.query_}}function E$(e){return e.viewCache_.serverCache.getNode()}function C$(e){return xh(e.viewCache_)}function k$(e,t){const r=na(e.viewCache_);return r&&(e.query._queryParams.loadsAllData()||!ge(t)&&!r.getImmediateChild(me(t)).isEmpty())?r.getChild(t):null}function p1(e){return e.eventRegistrations_.length===0}function A$(e,t){e.eventRegistrations_.push(t)}function g1(e,t,r){const n=[];if(r){H(t==null,"A cancel should cancel all event registrations.");const s=e.query._path;e.eventRegistrations_.forEach(i=>{const a=i.createCancelEvent(r,s);a&&n.push(a)})}if(t){let s=[];for(let i=0;i<e.eventRegistrations_.length;++i){const a=e.eventRegistrations_[i];if(!a.matches(t))s.push(a);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(i+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return n}function v1(e,t,r,n){t.type===Nn.MERGE&&t.source.queryId!==null&&(H(na(e.viewCache_),"We should always have a full cache before handling merges"),H(xh(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,i=x$(e.processor_,s,t,r,n);return y$(e.processor_,i.viewCache),H(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=i.viewCache,Vk(e,i.changes,i.viewCache.eventCache.getNode(),null)}function P$(e,t){const r=e.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(nt,(i,a)=>{n.push(xo(i,a))}),r.isFullyInitialized()&&n.push(Rk(r.getNode())),Vk(e,n,r.getNode(),t)}function Vk(e,t,r,n){const s=n?[n]:e.eventRegistrations_;return QL(e.eventGenerator_,t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh;class Gk{constructor(){this.views=new Map}}function O$(e){H(!jh,"__referenceConstructor has already been defined"),jh=e}function T$(){return H(jh,"Reference.ts has not been loaded"),jh}function I$(e){return e.views.size===0}function nx(e,t,r,n){const s=t.source.queryId;if(s!==null){const i=e.views.get(s);return H(i!=null,"SyncTree gave us an op for an invalid query."),v1(i,t,r,n)}else{let i=[];for(const a of e.views.values())i=i.concat(v1(a,t,r,n));return i}}function Kk(e,t,r,n,s){const i=t._queryIdentifier,a=e.views.get(i);if(!a){let l=bh(r,s?n:null),c=!1;l?c=!0:n instanceof le?(l=ex(r,n),c=!1):(l=le.EMPTY_NODE,c=!1);const u=Wf(new hi(l,c,!1),new hi(n,s,!1));return new S$(t,u)}return a}function D$(e,t,r,n,s,i){const a=Kk(e,t,n,s,i);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),A$(a,r),P$(a,r)}function R$(e,t,r,n){const s=t._queryIdentifier,i=[];let a=[];const l=fi(e);if(s==="default")for(const[c,u]of e.views.entries())a=a.concat(g1(u,r,n)),p1(u)&&(e.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=e.views.get(s);c&&(a=a.concat(g1(c,r,n)),p1(c)&&(e.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!fi(e)&&i.push(new(T$())(t._repo,t._path)),{removed:i,events:a}}function Yk(e){const t=[];for(const r of e.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function oi(e,t){let r=null;for(const n of e.views.values())r=r||k$(n,t);return r}function Xk(e,t){if(t._queryParams.loadsAllData())return qf(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Jk(e,t){return Xk(e,t)!=null}function fi(e){return qf(e)!=null}function qf(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;function M$(e){H(!Nh,"__referenceConstructor has already been defined"),Nh=e}function L$(){return H(Nh,"Reference.ts has not been loaded"),Nh}let $$=1;class y1{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ze(null),this.pendingWriteTree_=f$(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qk(e,t,r,n,s){return r$(e.pendingWriteTree_,t,r,n,s),s?eu(e,new ra(Lk(),t,r)):[]}function $i(e,t,r=!1){const n=n$(e.pendingWriteTree_,t);if(s$(e.pendingWriteTree_,t)){let i=new ze(null);return n.snap!=null?i=i.set(we(),!0):kr(n.children,a=>{i=i.set(new Te(a),!0)}),eu(e,new yh(n.path,i,r))}else return[]}function Zc(e,t,r){return eu(e,new ra(Q0(),t,r))}function U$(e,t,r){const n=ze.fromObject(r);return eu(e,new bc(Q0(),t,n))}function F$(e,t){return eu(e,new xc(Q0(),t))}function B$(e,t,r){const n=ix(e,r);if(n){const s=ax(n),i=s.path,a=s.queryId,l=ir(i,t),c=new xc(Z0(a),l);return ox(e,i,c)}else return[]}function Sh(e,t,r,n,s=!1){const i=t._path,a=e.syncPointTree_.get(i);let l=[];if(a&&(t._queryIdentifier==="default"||Jk(a,t))){const c=R$(a,t,r,n);I$(a)&&(e.syncPointTree_=e.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=e.syncPointTree_.findOnPath(i,(f,m)=>fi(m));if(d&&!h){const f=e.syncPointTree_.subtree(i);if(!f.isEmpty()){const m=H$(f);for(let g=0;g<m.length;++g){const y=m[g],p=y.query,v=rA(e,y);e.listenProvider_.startListening(Hl(p),wc(e,p),v.hashFn,v.onComplete)}}}!h&&u.length>0&&!n&&(d?e.listenProvider_.stopListening(Hl(t),null):u.forEach(f=>{const m=e.queryToTagMap.get(Vf(f));e.listenProvider_.stopListening(Hl(f),m)}))}q$(e,u)}return l}function Zk(e,t,r,n){const s=ix(e,n);if(s!=null){const i=ax(s),a=i.path,l=i.queryId,c=ir(a,t),u=new ra(Z0(l),c,r);return ox(e,a,u)}else return[]}function z$(e,t,r,n){const s=ix(e,n);if(s){const i=ax(s),a=i.path,l=i.queryId,c=ir(a,t),u=ze.fromObject(r),d=new bc(Z0(l),c,u);return ox(e,a,d)}else return[]}function kv(e,t,r,n=!1){const s=t._path;let i=null,a=!1;e.syncPointTree_.foreachOnPath(s,(f,m)=>{const g=ir(f,s);i=i||oi(m,g),a=a||fi(m)});let l=e.syncPointTree_.get(s);l?(a=a||fi(l),i=i||oi(l,we())):(l=new Gk,e.syncPointTree_=e.syncPointTree_.set(s,l));let c;i!=null?c=!0:(c=!1,i=le.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((m,g)=>{const y=oi(g,we());y&&(i=i.updateImmediateChild(m,y))}));const u=Jk(l,t);if(!u&&!t._queryParams.loadsAllData()){const f=Vf(t);H(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=V$();e.queryToTagMap.set(f,m),e.tagToQueryMap.set(m,f)}const d=Hf(e.pendingWriteTree_,s);let h=D$(l,t,r,d,i,c);if(!u&&!a&&!n){const f=Xk(l,t);h=h.concat(G$(e,t,f))}return h}function sx(e,t,r){const s=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(a,l)=>{const c=ir(a,t),u=oi(l,c);if(u)return u});return Bk(s,t,i,r,!0)}function W$(e,t){const r=t._path;let n=null;e.syncPointTree_.foreachOnPath(r,(u,d)=>{const h=ir(u,r);n=n||oi(d,h)});let s=e.syncPointTree_.get(r);s?n=n||oi(s,we()):(s=new Gk,e.syncPointTree_=e.syncPointTree_.set(r,s));const i=n!=null,a=i?new hi(n,!0,!1):null,l=Hf(e.pendingWriteTree_,t._path),c=Kk(s,t,l,i?a.getNode():le.EMPTY_NODE,i);return C$(c)}function eu(e,t){return eA(t,e.syncPointTree_,null,Hf(e.pendingWriteTree_,we()))}function eA(e,t,r,n){if(ge(e.path))return tA(e,t,r,n);{const s=t.get(we());r==null&&s!=null&&(r=oi(s,we()));let i=[];const a=me(e.path),l=e.operationForChild(a),c=t.children.get(a);if(c&&l){const u=r?r.getImmediateChild(a):null,d=zk(n,a);i=i.concat(eA(l,c,u,d))}return s&&(i=i.concat(nx(s,e,n,r))),i}}function tA(e,t,r,n){const s=t.get(we());r==null&&s!=null&&(r=oi(s,we()));let i=[];return t.children.inorderTraversal((a,l)=>{const c=r?r.getImmediateChild(a):null,u=zk(n,a),d=e.operationForChild(a);d&&(i=i.concat(tA(d,l,c,u)))}),s&&(i=i.concat(nx(s,e,n,r))),i}function rA(e,t){const r=t.query,n=wc(e,r);return{hashFn:()=>(E$(t)||le.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return n?B$(e,r._path,n):F$(e,r._path);{const i=W6(s,r);return Sh(e,r,null,i)}}}}function wc(e,t){const r=Vf(t);return e.queryToTagMap.get(r)}function Vf(e){return e._path.toString()+"$"+e._queryIdentifier}function ix(e,t){return e.tagToQueryMap.get(t)}function ax(e){const t=e.indexOf("$");return H(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Te(e.substr(0,t))}}function ox(e,t,r){const n=e.syncPointTree_.get(t);H(n,"Missing sync point for query tag that we're tracking");const s=Hf(e.pendingWriteTree_,t);return nx(n,r,s,null)}function H$(e){return e.fold((t,r,n)=>{if(r&&fi(r))return[qf(r)];{let s=[];return r&&(s=Yk(r)),kr(n,(i,a)=>{s=s.concat(a)}),s}})}function Hl(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(L$())(e._repo,e._path):e}function q$(e,t){for(let r=0;r<t.length;++r){const n=t[r];if(!n._queryParams.loadsAllData()){const s=Vf(n),i=e.queryToTagMap.get(s);e.queryToTagMap.delete(s),e.tagToQueryMap.delete(i)}}}function V$(){return $$++}function G$(e,t,r){const n=t._path,s=wc(e,t),i=rA(e,r),a=e.listenProvider_.startListening(Hl(t),s,i.hashFn,i.onComplete),l=e.syncPointTree_.subtree(n);if(s)H(!fi(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,d,h)=>{if(!ge(u)&&d&&fi(d))return[qf(d).query];{let f=[];return d&&(f=f.concat(Yk(d).map(m=>m.query))),kr(h,(m,g)=>{f=f.concat(g)}),f}});for(let u=0;u<c.length;++u){const d=c[u];e.listenProvider_.stopListening(Hl(d),wc(e,d))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new lx(r)}node(){return this.node_}}class cx{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=xt(this.path_,t);return new cx(this.syncTree_,r)}node(){return sx(this.syncTree_,this.path_)}}const K$=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},x1=function(e,t,r){if(!e||typeof e!="object")return e;if(H(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Y$(e[".sv"],t,r);if(typeof e[".sv"]=="object")return X$(e[".sv"],t);H(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Y$=function(e,t,r){switch(e){case"timestamp":return r.timestamp;default:H(!1,"Unexpected server value: "+e)}},X$=function(e,t,r){e.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const n=e.increment;typeof n!="number"&&H(!1,"Unexpected increment value: "+n);const s=t.node();if(H(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;const a=s.getValue();return typeof a!="number"?n:a+n},J$=function(e,t,r,n){return ux(t,new cx(r,e),n)},nA=function(e,t,r){return ux(e,new lx(t),r)};function ux(e,t,r){const n=e.getPriority().val(),s=x1(n,t.getImmediateChild(".priority"),r);let i;if(e.isLeafNode()){const a=e,l=x1(a.getValue(),t,r);return l!==a.getValue()||s!==a.getPriority().val()?new kt(l,Tt(s)):e}else{const a=e;return i=a,s!==a.getPriority().val()&&(i=i.updatePriority(new kt(s))),a.forEachChild(nt,(l,c)=>{const u=ux(c,t.getImmediateChild(l),r);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(t="",r=null,n={children:{},childCount:0}){this.name=t,this.parent=r,this.node=n}}function hx(e,t){let r=t instanceof Te?t:new Te(t),n=e,s=me(r);for(;s!==null;){const i=vo(n.node.children,s)||{children:{},childCount:0};n=new dx(s,n,i),r=Le(r),s=me(r)}return n}function Bo(e){return e.node.value}function sA(e,t){e.node.value=t,Av(e)}function iA(e){return e.node.childCount>0}function Q$(e){return Bo(e)===void 0&&!iA(e)}function Gf(e,t){kr(e.node.children,(r,n)=>{t(new dx(r,e,n))})}function aA(e,t,r,n){r&&t(e),Gf(e,s=>{aA(s,t,!0)})}function Z$(e,t,r){let n=e.parent;for(;n!==null;){if(t(n))return!0;n=n.parent}return!1}function tu(e){return new Te(e.parent===null?e.name:tu(e.parent)+"/"+e.name)}function Av(e){e.parent!==null&&eU(e.parent,e.name,e)}function eU(e,t,r){const n=Q$(r),s=Cs(e.node.children,t);n&&s?(delete e.node.children[t],e.node.childCount--,Av(e)):!n&&!s&&(e.node.children[t]=r.node,e.node.childCount++,Av(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=/[\[\].#$\/\u0000-\u001F\u007F]/,rU=/[\[\].#$\u0000-\u001F\u007F]/,$p=10*1024*1024,oA=function(e){return typeof e=="string"&&e.length!==0&&!tU.test(e)},lA=function(e){return typeof e=="string"&&e.length!==0&&!rU.test(e)},nU=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),lA(e)},sU=function(e,t,r,n){fx(B0(e,"value"),t,r)},fx=function(e,t,r){const n=r instanceof Te?new _L(r,e):r;if(t===void 0)throw new Error(e+"contains undefined "+Ei(n));if(typeof t=="function")throw new Error(e+"contains a function "+Ei(n)+" with contents = "+t.toString());if(ik(t))throw new Error(e+"contains "+t.toString()+" "+Ei(n));if(typeof t=="string"&&t.length>$p/3&&Bf(t)>$p)throw new Error(e+"contains a string greater than "+$p+" utf8 bytes "+Ei(n)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,i=!1;if(kr(t,(a,l)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(i=!0,!oA(a)))throw new Error(e+" contains an invalid key ("+a+") "+Ei(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jL(n,a),fx(e,l,n),NL(n)}),s&&i)throw new Error(e+' contains ".value" child '+Ei(n)+" in addition to actual children.")}},cA=function(e,t,r,n){if(!lA(r))throw new Error(B0(e,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},iU=function(e,t,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),cA(e,t,r)},uA=function(e,t){if(me(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},aU=function(e,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!oA(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!nU(r))throw new Error(B0(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mx(e,t){let r=null;for(let n=0;n<t.length;n++){const s=t[n],i=s.getPath();r!==null&&!G0(i,r.path)&&(e.eventLists_.push(r),r=null),r===null&&(r={events:[],path:i}),r.events.push(s)}r&&e.eventLists_.push(r)}function dA(e,t,r){mx(e,r),hA(e,n=>G0(n,t))}function Hn(e,t,r){mx(e,r),hA(e,n=>jn(n,t)||jn(t,n))}function hA(e,t){e.recursionDepth_++;let r=!0;for(let n=0;n<e.eventLists_.length;n++){const s=e.eventLists_[n];if(s){const i=s.path;t(i)?(lU(e.eventLists_[n]),e.eventLists_[n]=null):r=!1}}r&&(e.eventLists_=[]),e.recursionDepth_--}function lU(e){for(let t=0;t<e.events.length;t++){const r=e.events[t];if(r!==null){e.events[t]=null;const n=r.getEventRunner();Fl&&Qt("event: "+r.toString()),Fo(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU="repo_interrupt",uU=25;class dU{constructor(t,r,n,s){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vh(),this.transactionQueueTree_=new dx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hU(e,t,r){if(e.stats_=q0(e.repoInfo_),e.forceRestClient_||G6())e.server_=new gh(e.repoInfo_,(n,s,i,a)=>{b1(e,n,s,i,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>w1(e,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yt(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new os(e.repoInfo_,t,(n,s,i,a)=>{b1(e,n,s,i,a)},n=>{w1(e,n)},n=>{mU(e,n)},e.authTokenProvider_,e.appCheckProvider_,r),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(n=>{e.server_.refreshAuthToken(n)}),e.appCheckProvider_.addTokenChangeListener(n=>{e.server_.refreshAppCheckToken(n.token)}),e.statsReporter_=Q6(e.repoInfo_,()=>new XL(e.stats_,e.server_)),e.infoData_=new qL,e.infoSyncTree_=new y1({startListening:(n,s,i,a)=>{let l=[];const c=e.infoData_.getNode(n._path);return c.isEmpty()||(l=Zc(e.infoSyncTree_,n._path,c),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),gx(e,"connected",!1),e.serverSyncTree_=new y1({startListening:(n,s,i,a)=>(e.server_.listen(n,i,s,(l,c)=>{const u=a(l,c);Hn(e.eventQueue_,n._path,u)}),[]),stopListening:(n,s)=>{e.server_.unlisten(n,s)}})}function fU(e){const r=e.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function px(e){return K$({timestamp:fU(e)})}function b1(e,t,r,n,s){e.dataUpdateCount++;const i=new Te(t);r=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,r):r;let a=[];if(s)if(n){const c=ch(r,u=>Tt(u));a=z$(e.serverSyncTree_,i,c,s)}else{const c=Tt(r);a=Zk(e.serverSyncTree_,i,c,s)}else if(n){const c=ch(r,u=>Tt(u));a=U$(e.serverSyncTree_,i,c)}else{const c=Tt(r);a=Zc(e.serverSyncTree_,i,c)}let l=i;a.length>0&&(l=Yf(e,i)),Hn(e.eventQueue_,l,a)}function w1(e,t){gx(e,"connected",t),t===!1&&vU(e)}function mU(e,t){kr(t,(r,n)=>{gx(e,r,n)})}function gx(e,t,r){const n=new Te("/.info/"+t),s=Tt(r);e.infoData_.updateSnapshot(n,s);const i=Zc(e.infoSyncTree_,n,s);Hn(e.eventQueue_,n,i)}function fA(e){return e.nextWriteId_++}function pU(e,t,r){const n=W$(e.serverSyncTree_,t);return n!=null?Promise.resolve(n):e.server_.get(t).then(s=>{const i=Tt(s).withIndex(t._queryParams.getIndex());kv(e.serverSyncTree_,t,r,!0);let a;if(t._queryParams.loadsAllData())a=Zc(e.serverSyncTree_,t._path,i);else{const l=wc(e.serverSyncTree_,t);a=Zk(e.serverSyncTree_,t._path,i,l)}return Hn(e.eventQueue_,t._path,a),Sh(e.serverSyncTree_,t,r,null,!0),i},s=>(Kf(e,"get for query "+yt(t)+" failed: "+s),Promise.reject(new Error(s))))}function gU(e,t,r,n,s){Kf(e,"set",{path:t.toString(),value:r,priority:n});const i=px(e),a=Tt(r,n),l=sx(e.serverSyncTree_,t),c=nA(a,l,i),u=fA(e),d=Qk(e.serverSyncTree_,t,c,u,!0);mx(e.eventQueue_,d),e.server_.put(t.toString(),a.val(!0),(f,m)=>{const g=f==="ok";g||Sr("set at "+t+" failed: "+f);const y=$i(e.serverSyncTree_,u,!g);Hn(e.eventQueue_,t,y),bU(e,s,f,m)});const h=yA(e,t);Yf(e,h),Hn(e.eventQueue_,h,[])}function vU(e){Kf(e,"onDisconnectEvents");const t=px(e),r=vh();jv(e.onDisconnect_,we(),(s,i)=>{const a=J$(s,i,e.serverSyncTree_,t);Mk(r,s,a)});let n=[];jv(r,we(),(s,i)=>{n=n.concat(Zc(e.serverSyncTree_,s,i));const a=yA(e,s);Yf(e,a)}),e.onDisconnect_=vh(),Hn(e.eventQueue_,we(),n)}function yU(e,t,r){let n;me(t._path)===".info"?n=kv(e.infoSyncTree_,t,r):n=kv(e.serverSyncTree_,t,r),dA(e.eventQueue_,t._path,n)}function _1(e,t,r){let n;me(t._path)===".info"?n=Sh(e.infoSyncTree_,t,r):n=Sh(e.serverSyncTree_,t,r),dA(e.eventQueue_,t._path,n)}function xU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cU)}function Kf(e,...t){let r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),Qt(r,...t)}function bU(e,t,r,n){t&&Fo(()=>{if(r==="ok")t(null);else{const s=(r||"error").toUpperCase();let i=s;n&&(i+=": "+n);const a=new Error(i);a.code=s,t(a)}})}function mA(e,t,r){return sx(e.serverSyncTree_,t,r)||le.EMPTY_NODE}function vx(e,t=e.transactionQueueTree_){if(t||Xf(e,t),Bo(t)){const r=gA(e,t);H(r.length>0,"Sending zero length transaction queue"),r.every(s=>s.status===0)&&wU(e,tu(t),r)}else iA(t)&&Gf(t,r=>{vx(e,r)})}function wU(e,t,r){const n=r.map(u=>u.currentWriteId),s=mA(e,t,n);let i=s;const a=s.hash();for(let u=0;u<r.length;u++){const d=r[u];H(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=ir(t,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const l=i.val(!0),c=t;e.server_.put(c.toString(),l,u=>{Kf(e,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<r.length;f++)r[f].status=2,d=d.concat($i(e.serverSyncTree_,r[f].currentWriteId)),r[f].onComplete&&h.push(()=>r[f].onComplete(null,!0,r[f].currentOutputSnapshotResolved)),r[f].unwatcher();Xf(e,hx(e.transactionQueueTree_,t)),vx(e,e.transactionQueueTree_),Hn(e.eventQueue_,t,d);for(let f=0;f<h.length;f++)Fo(h[f])}else{if(u==="datastale")for(let h=0;h<r.length;h++)r[h].status===3?r[h].status=4:r[h].status=0;else{Sr("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<r.length;h++)r[h].status=4,r[h].abortReason=u}Yf(e,t)}},a)}function Yf(e,t){const r=pA(e,t),n=tu(r),s=gA(e,r);return _U(e,s,n),n}function _U(e,t,r){if(t.length===0)return;const n=[];let s=[];const a=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const c=t[l],u=ir(r,c.path);let d=!1,h;if(H(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat($i(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=uU)d=!0,h="maxretry",s=s.concat($i(e.serverSyncTree_,c.currentWriteId,!0));else{const f=mA(e,c.path,a);c.currentInputSnapshot=f;const m=t[l].update(f.val());if(m!==void 0){fx("transaction failed: Data returned ",m,c.path);let g=Tt(m);typeof m=="object"&&m!=null&&Cs(m,".priority")||(g=g.updatePriority(f.getPriority()));const p=c.currentWriteId,v=px(e),b=nA(g,f,v);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=b,c.currentWriteId=fA(e),a.splice(a.indexOf(p),1),s=s.concat(Qk(e.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat($i(e.serverSyncTree_,p,!0))}else d=!0,h="nodata",s=s.concat($i(e.serverSyncTree_,c.currentWriteId,!0))}Hn(e.eventQueue_,r,s),s=[],d&&(t[l].status=2,function(f){setTimeout(f,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(h==="nodata"?n.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):n.push(()=>t[l].onComplete(new Error(h),!1,null))))}Xf(e,e.transactionQueueTree_);for(let l=0;l<n.length;l++)Fo(n[l]);vx(e,e.transactionQueueTree_)}function pA(e,t){let r,n=e.transactionQueueTree_;for(r=me(t);r!==null&&Bo(n)===void 0;)n=hx(n,r),t=Le(t),r=me(t);return n}function gA(e,t){const r=[];return vA(e,t,r),r.sort((n,s)=>n.order-s.order),r}function vA(e,t,r){const n=Bo(t);if(n)for(let s=0;s<n.length;s++)r.push(n[s]);Gf(t,s=>{vA(e,s,r)})}function Xf(e,t){const r=Bo(t);if(r){let n=0;for(let s=0;s<r.length;s++)r[s].status!==2&&(r[n]=r[s],n++);r.length=n,sA(t,r.length>0?r:void 0)}Gf(t,n=>{Xf(e,n)})}function yA(e,t){const r=tu(pA(e,t)),n=hx(e.transactionQueueTree_,t);return Z$(n,s=>{Up(e,s)}),Up(e,n),aA(n,s=>{Up(e,s)}),r}function Up(e,t){const r=Bo(t);if(r){const n=[];let s=[],i=-1;for(let a=0;a<r.length;a++)r[a].status===3||(r[a].status===1?(H(i===a-1,"All SENT items should be at beginning of queue."),i=a,r[a].status=3,r[a].abortReason="set"):(H(r[a].status===0,"Unexpected transaction status in abort"),r[a].unwatcher(),s=s.concat($i(e.serverSyncTree_,r[a].currentWriteId,!0)),r[a].onComplete&&n.push(r[a].onComplete.bind(null,new Error("set"),!1,null))));i===-1?sA(t,void 0):r.length=i+1,Hn(e.eventQueue_,tu(t),s);for(let a=0;a<n.length;a++)Fo(n[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(e){let t="";const r=e.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let s=r[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function NU(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const r of e.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Sr(`Invalid query segment '${r}' in query '${e}'`)}return t}const j1=function(e,t){const r=SU(e),n=r.namespace;r.domain==="firebase.com"&&ps(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&ps("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||$6();const s=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new vk(r.host,r.secure,n,s,t,"",n!==r.subdomain),path:new Te(r.pathString)}},SU=function(e){let t="",r="",n="",s="",i="",a=!0,l="https",c=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let d=e.indexOf("/");d===-1&&(d=e.length);let h=e.indexOf("?");h===-1&&(h=e.length),t=e.substring(0,Math.min(d,h)),d<h&&(s=jU(e.substring(d,h)));const f=NU(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(a=l==="https"||l==="wss",c=parseInt(t.substring(u+1),10)):u=t.length;const m=t.slice(0,u);if(m.toLowerCase()==="localhost")r="localhost";else if(m.split(".").length<=2)r=m;else{const g=t.indexOf(".");n=t.substring(0,g).toLowerCase(),r=t.substring(g+1),i=n}"ns"in f&&(i=f.ns)}return{host:t,port:c,domain:r,subdomain:n,secure:a,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(t,r,n,s){this.eventType=t,this.eventRegistration=r,this.snapshot=n,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+yt(this.snapshot.exportVal())}}class CU{constructor(t,r,n){this.eventRegistration=t,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return H(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(t,r,n,s){this._repo=t,this._path=r,this._queryParams=n,this._orderByCalled=s}get key(){return ge(this._path)?null:Ek(this._path)}get ref(){return new ks(this._repo,this._path)}get _queryIdentifier(){const t=o1(this._queryParams),r=W0(t);return r==="{}"?"default":r}get _queryObject(){return o1(this._queryParams)}isEqual(t){if(t=$o(t),!(t instanceof yx))return!1;const r=this._repo===t._repo,n=G0(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return r&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+wL(this._path)}}class ks extends yx{constructor(t,r){super(t,r,new J0,!1)}get parent(){const t=kk(this._path);return t===null?null:new ks(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class _c{constructor(t,r,n){this._node=t,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new Te(t),n=Ui(this.ref,t);return new _c(this._node.getChild(r),n,nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>t(new _c(s,Ui(this.ref,n),nt)))}hasChild(t){const r=new Te(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function se(e,t){return e=$o(e),e._checkNotDeleted("ref"),t!==void 0?Ui(e._root,t):e._root}function Ui(e,t){return e=$o(e),me(e._path)===null?iU("child","path",t):cA("child","path",t),new ks(e._repo,xt(e._path,t))}function jc(e){return uA("remove",e._path),ot(e,null)}function ot(e,t){e=$o(e),uA("set",e._path),sU("set",t,e._path);const r=new Ff;return gU(e._repo,e._path,t,null,r.wrapCallback(()=>{})),r.promise}function Pe(e){e=$o(e);const t=new xA(()=>{}),r=new Jf(t);return pU(e._repo,e,r).then(n=>new _c(n,new ks(e._repo,e._path),e._queryParams.getIndex()))}class Jf{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const n=r._queryParams.getIndex();return new EU("value",this,new _c(t.snapshotNode,new ks(r._repo,r._path),n))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new CU(this,t,r):null}matches(t){return t instanceof Jf?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function kU(e,t,r,n,s){let i;if(typeof n=="object"&&(i=void 0,s=n),typeof n=="function"&&(i=n),s&&s.onlyOnce){const c=r,u=(d,h)=>{_1(e._repo,e,l),c(d,h)};u.userCallback=r.userCallback,u.context=r.context,r=u}const a=new xA(r,i||void 0),l=new Jf(a);return yU(e._repo,e,l),()=>_1(e._repo,e,l)}function Xr(e,t,r,n){return kU(e,"value",t,r,n)}O$(ks);M$(ks);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU="FIREBASE_DATABASE_EMULATOR_HOST",Pv={};let PU=!1;function OU(e,t,r,n){const s=t.lastIndexOf(":"),i=t.substring(0,s),a=F0(i);e.repoInfo_=new vk(t,a,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,r),n&&(e.authTokenProvider_=n)}function TU(e,t,r,n,s){let i=n||e.options.databaseURL;i===void 0&&(e.options.projectId||ps("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qt("Using default host for project ",e.options.projectId),i=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a=j1(i,s),l=a.repoInfo,c;typeof process<"u"&&W_&&(c=W_[AU]),c?(i=`http://${c}?ns=${l.namespace}`,a=j1(i,s),l=a.repoInfo):a.repoInfo.secure;const u=new Y6(e.name,e.options,t);aU("Invalid Firebase Database URL",a),ge(a.path)||ps("Database URL must point to the root of a Firebase Database (not including a child path).");const d=DU(l,e,u,new K6(e,r));return new RU(d,e)}function IU(e,t){const r=Pv[t];(!r||r[e.key]!==e)&&ps(`Database ${t}(${e.repoInfo_}) has already been deleted.`),xU(e),delete r[e.key]}function DU(e,t,r,n){let s=Pv[t.name];s||(s={},Pv[t.name]=s);let i=s[e.toURLString()];return i&&ps("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new dU(e,PU,r,n),s[e.toURLString()]=i,i}class RU{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(hU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ks(this._repo,we())),this._rootInternal}_delete(){return this._rootInternal!==null&&(IU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&ps("Cannot call "+t+" on a deleted database.")}}function MU(e=x6(),t){const r=m6(e,"database").getImmediate({identifier:t});if(!r._instanceStarted){const n=ZM("database");n&&LU(r,...n)}return r}function LU(e,t,r,n={}){e=$o(e),e._checkNotDeleted("useEmulator");const s=`${t}:${r}`,i=e._repoInternal;if(e._instanceStarted){if(s===e._repoInternal.repoInfo_.host&&uh(n,i.repoInfo_.emulatorOptions))return;ps("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(i.repoInfo_.nodeAdmin)n.mockUserToken&&ps('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Td(Td.OWNER);else if(n.mockUserToken){const l=typeof n.mockUserToken=="string"?n.mockUserToken:t5(n.mockUserToken,e.app.options.projectId);a=new Td(l)}F0(t)&&(e5(t),s5("Database",!0)),OU(i,s,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(e){T6(y6),hh(new fc("database",(t,{instanceIdentifier:r})=>{const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return TU(n,s,i,r)},"PUBLIC").setMultipleInstances(!0)),no(H_,q_,e),no(H_,q_,"esm2020")}os.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};os.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};$U();const bA={apiKey:"AIzaSyBqJNXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",authDomain:"educare-b132a.firebaseapp.com",databaseURL:"https://educare-b132a-default-rtdb.firebaseio.com",projectId:"educare-b132a",storageBucket:"educare-b132a.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdefghijklmnop"};console.log("Firebase config:",bA);let wA;try{wA=ZC(bA),console.log("Firebase app initialized successfully")}catch(e){throw console.error("Firebase initialization error:",e),e}let te;try{te=MU(wA),console.log("Firebase database initialized successfully")}catch(e){throw console.error("Firebase database initialization error:",e),e}class UU{constructor(){wa(this,"USER_KEY","educare_user")}storeUser(t){try{localStorage.setItem(this.USER_KEY,JSON.stringify(t)),console.log("User stored successfully:",t)}catch(r){console.error("Failed to store user:",r)}}getStoredUser(){try{const t=localStorage.getItem(this.USER_KEY);if(t){const r=JSON.parse(t);return console.log("Retrieved stored user:",r),r}return null}catch(t){return console.error("Failed to retrieve user:",t),null}}getCurrentUser(){return this.getStoredUser()}clearUser(){try{localStorage.removeItem(this.USER_KEY),console.log("User data cleared")}catch(t){console.error("Failed to clear user:",t)}}hasStoredUser(){return localStorage.getItem(this.USER_KEY)!==null}}const Ue=new UU;class FU{extractUsername(t){return t.split("@")[0].toLowerCase()}async authenticateUser(t){try{const{email:r,password:n}=t,s=this.extractUsername(r);console.log("Attempting to authenticate:",s);const i=se(te),a=await Pe(Ui(i,"Schoolss"));if(!a.exists())return console.log("No schools found in database"),{success:!1,error:"NETWORK_ERROR",message:"Database connection error. Please try again."};const l=a.val();console.log("Found schools:",Object.keys(l));let c=!1,u=!1,d=null,h=null;console.log("=== STEP 1: Checking all schools ===");for(const[f,m]of Object.entries(l))if(console.log(`Searching in school: ${f}`),m&&typeof m=="object"&&"users"in m){const g=m.users;if(g&&s in g){c=!0;const y=g[s];if(console.log(`Found user ${s} in ${f}:`,y),y.Password===n){console.log("Password verified successfully for student");const p=y.Name||y.name||"Student";let v;try{const _=await Pe(Ui(i,`Schoolss/${f}/Individual average/Students`));if(_.exists()){const j=_.val();if(j&&p in j){const N=j[p];v=typeof N=="string"?parseFloat(N):N,console.log(`Found average grade for ${p}:`,v)}}}catch(_){console.error("Error fetching student average:",_)}let b={};try{const _=await Pe(Ui(i,`Schoolss/${f}/Marks`));if(_.exists()){const j=_.val();for(const[N,k]of Object.entries(j))if(k&&typeof k=="object"&&s in k){const T=k[s];if(T&&T.Rating&&T.Rating["sub rating"]){const P=T.Rating["sub rating"],C=typeof P=="string"?parseFloat(P):P;b[N]=C}}}}catch(_){console.error("Error fetching subject grades:",_)}const w={username:s,name:p,grade:y.Grade||"Unknown",role:y.Role||"Student",school:f,averageGrade:v,subjectGrades:b};Ue.storeUser(w),d={success:!0,user:{username:s,name:p,grade:y.Grade||"Unknown",role:y.Role||"Student",school:f,averageGrade:v,subjectGrades:b}};break}else console.log("Password mismatch for student - will continue checking counselors")}}if(d)return console.log("=== Returning successful school login ==="),d;console.log("=== STEP 2: Checking University Counsellors ==="),console.log(`Comparing FULL email: "${r}" (NOT stripped username: "${s}")`);try{const f=await Pe(Ui(i,"University Data/University Counsellors "));if(f.exists()){const m=f.val();console.log("Found counselors:",Object.keys(m));for(const[g,y]of Object.entries(m))if(console.log(`Checking counselor: ${g}`),y&&typeof y=="object"){const p=y,v=p.email||p.Email;console.log(`Counselor email: "${v}", User entered: "${r}"`),console.log("Counselor data structure:",JSON.stringify(p,null,2));const b=r.toLowerCase(),w=v?v.toLowerCase():"";if(console.log(`Email comparison: "${w}" === "${b}" ? ${w===b}`),v&&w===b)if(console.log(` Found matching email for counselor: ${g}`),u=!0,console.log(`Password comparison: "${p.Password}" === "${n}" ? ${p.Password===n}`),p.Password===n){console.log(" Password verified for counselor");let _="counselor";p.Role==="Pool Management"?_="pool_management":p.Role==="Essay"&&(_="essay");const j={username:r,name:p.Name||g,grade:"Counselor",role:_,school:"University Counsellor"};Ue.storeUser(j),h={success:!0,user:{username:r,name:p.Name||g,grade:"Counselor",role:_,school:"University Counsellor"}};break}else console.log("Password mismatch for counselor")}}else console.log("University Counsellors node does not exist")}catch(f){console.error("Error checking University Counsellors:",f)}return h?(console.log("=== Returning successful counselor login ==="),h):(console.log("=== STEP 3: Determining error ==="),console.log(`Found in schools: ${c}, Found in counselors: ${u}`),c||u?(console.log("User found but password incorrect"),{success:!1,error:"WRONG_PASSWORD",message:"The password you entered is incorrect. Please try again."}):(console.log("Email not found in either Schoolss or University Counsellors"),{success:!1,error:"USER_NOT_FOUND",message:"This email address is not in our database. Please check your email or contact your administrator."}))}catch(r){return console.error("Authentication error:",r),{success:!1,error:"NETWORK_ERROR",message:"Network error. Please check your connection and try again."}}}}const BU=()=>{Ue.clearUser()},_A=new FU;var Ov=function(e,t){return Ov=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Ov(e,t)};function jA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ov(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Eh=function(){return Eh=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Eh.apply(this,arguments)};function zo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function NA(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function SA(e,t){return function(r,n){t(r,n,e)}}function EA(e,t,r,n,s,i){function a(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,f=!1,m=r.length-1;m>=0;m--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(v||null))};var p=(0,r[m])(l==="accessor"?{get:d.get,set:d.set}:d[c],g);if(l==="accessor"){if(p===void 0)continue;if(p===null||typeof p!="object")throw new TypeError("Object expected");(h=a(p.get))&&(d.get=h),(h=a(p.set))&&(d.set=h),(h=a(p.init))&&s.unshift(h)}else(h=a(p))&&(l==="field"?s.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),f=!0}function CA(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function kA(e){return typeof e=="symbol"?e:"".concat(e)}function AA(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function PA(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function J(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function OA(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Qf=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function TA(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Qf(t,e,r)}function Ch(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xx(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],a;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function IA(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xx(arguments[t]));return e}function DA(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],a=0,l=i.length;a<l;a++,s++)n[s]=i[a];return n}function RA(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function wo(e){return this instanceof wo?(this.v=e,this):new wo(e)}function MA(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(m){return function(g){return Promise.resolve(g).then(m,h)}}function l(m,g){n[m]&&(s[m]=function(y){return new Promise(function(p,v){i.push([m,y,p,v])>1||c(m,y)})},g&&(s[m]=g(s[m])))}function c(m,g){try{u(n[m](g))}catch(y){f(i[0][3],y)}}function u(m){m.value instanceof wo?Promise.resolve(m.value.v).then(d,h):f(i[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function f(m,g){m(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function LA(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(a){return(r=!r)?{value:wo(e[s](a)),done:!1}:i?i(a):a}:i}}function $A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ch=="function"?Ch(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(l,c){a=e[i](a),s(l,c,a.done,a.value)})}}function s(i,a,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},a)}}function UA(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var zU=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Tv=function(e){return Tv=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Tv(e)};function FA(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Tv(e),n=0;n<r.length;n++)r[n]!=="default"&&Qf(t,e,r[n]);return zU(t,e),t}function BA(e){return e&&e.__esModule?e:{default:e}}function zA(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function WA(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function HA(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function qA(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var WU=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function VA(e){function t(i){e.error=e.hasError?new WU(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(a){return t(a),s()})}else n|=1}catch(a){t(a)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function GA(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,a){return n?t?".jsx":".js":s&&(!i||!a)?r:s+i+"."+a.toLowerCase()+"js"}):e}const HU={__extends:jA,__assign:Eh,__rest:zo,__decorate:NA,__param:SA,__esDecorate:EA,__runInitializers:CA,__propKey:kA,__setFunctionName:AA,__metadata:PA,__awaiter:J,__generator:OA,__createBinding:Qf,__exportStar:TA,__values:Ch,__read:xx,__spread:IA,__spreadArrays:DA,__spreadArray:RA,__await:wo,__asyncGenerator:MA,__asyncDelegator:LA,__asyncValues:$A,__makeTemplateObject:UA,__importStar:FA,__importDefault:BA,__classPrivateFieldGet:zA,__classPrivateFieldSet:WA,__classPrivateFieldIn:HA,__addDisposableResource:qA,__disposeResources:VA,__rewriteRelativeImportExtension:GA},qU=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:qA,get __assign(){return Eh},__asyncDelegator:LA,__asyncGenerator:MA,__asyncValues:$A,__await:wo,__awaiter:J,__classPrivateFieldGet:zA,__classPrivateFieldIn:HA,__classPrivateFieldSet:WA,__createBinding:Qf,__decorate:NA,__disposeResources:VA,__esDecorate:EA,__exportStar:TA,__extends:jA,__generator:OA,__importDefault:BA,__importStar:FA,__makeTemplateObject:UA,__metadata:PA,__param:SA,__propKey:kA,__read:xx,__rest:zo,__rewriteRelativeImportExtension:GA,__runInitializers:CA,__setFunctionName:AA,__spread:IA,__spreadArray:RA,__spreadArrays:DA,__values:Ch,default:HU},Symbol.toStringTag,{value:"Module"})),VU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class bx extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class GU extends bx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class N1 extends bx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class S1 extends bx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Iv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Iv||(Iv={}));class KU{constructor(t,{headers:r={},customFetch:n,region:s=Iv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=VU(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return J(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let p=d;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),d?(p=a.signal,d.addEventListener("abort",()=>a.abort())):p=a.signal);const v=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:y,signal:p}).catch(j=>{throw new GU(j)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new N1(v);if(!v.ok)throw new S1(v);let w=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield v.json():w==="application/octet-stream"||w==="application/pdf"?_=yield v.blob():w==="text/event-stream"?_=v:w==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof S1||l instanceof N1?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var nr={};const Wo=mR(qU);var qu={},Vu={},Gu={},Ku={},Yu={},Xu={},E1;function KA(){if(E1)return Xu;E1=1,Object.defineProperty(Xu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Xu.default=e,Xu}var C1;function YA(){if(C1)return Yu;C1=1,Object.defineProperty(Yu,"__esModule",{value:!0});const t=Wo.__importDefault(KA());class r{constructor(s){var i,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h,f;let m=null,g=null,y=null,p=c.status,v=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,p=406,v="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const w=await c.text();try{m=JSON.parse(w),Array.isArray(m)&&c.status===404&&(g=[],m=null,p=200,v="OK")}catch{c.status===404&&w===""?(p=204,v="No Content"):m={message:w}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,p=200,v="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:y,status:p,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h,f,m,g;let y="";const p=c==null?void 0:c.cause;if(p){const v=(u=p==null?void 0:p.message)!==null&&u!==void 0?u:"",b=(d=p==null?void 0:p.code)!==null&&d!==void 0?d:"";y=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(f=p==null?void 0:p.name)!==null&&f!==void 0?f:"Error"}: ${v}`,b&&(y+=` (${b})`),p!=null&&p.stack&&(y+=`
${p.stack}`)}else y=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,i)}returns(){return this}overrideTypes(){return this}}return Yu.default=r,Yu}var k1;function XA(){if(k1)return Ku;k1=1,Object.defineProperty(Ku,"__esModule",{value:!0});const t=Wo.__importDefault(YA());class r extends t.default{select(s){let i=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,a?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Ku.default=r,Ku}var A1;function wx(){if(A1)return Gu;A1=1,Object.defineProperty(Gu,"__esModule",{value:!0});const t=Wo.__importDefault(XA()),r=new RegExp("[,()]");class n extends t.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const l=Array.from(new Set(a)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${a}`),this}match(i){return Object.entries(i).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(i,a,l){return this.url.searchParams.append(i,`not.${a}.${l}`),this}or(i,{foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,a,l){return this.url.searchParams.append(i,`${a}.${l}`),this}}return Gu.default=n,Gu}var P1;function JA(){if(P1)return Vu;P1=1,Object.defineProperty(Vu,"__esModule",{value:!0});const t=Wo.__importDefault(wx());class r{constructor(s,{headers:i={},schema:a,fetch:l}){this.url=s,this.headers=new Headers(i),this.schema=a,this.fetch=l}select(s,i){const{head:a=!1,count:l}=i??{},c=a?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:a=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:i}={}){var a;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var i;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Vu.default=r,Vu}var O1;function YU(){if(O1)return qu;O1=1,Object.defineProperty(qu,"__esModule",{value:!0});const e=Wo,t=e.__importDefault(JA()),r=e.__importDefault(wx());class n{constructor(i,{headers:a={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(a),this.schemaName=l,this.fetch=c}from(i){const a=new URL(`${this.url}/${i}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let m;l||c?(h=l?"HEAD":"GET",Object.entries(a).filter(([y,p])=>p!==void 0).map(([y,p])=>[y,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([y,p])=>{f.searchParams.append(y,p)})):(h="POST",m=a);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:h,url:f,headers:g,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return qu.default=n,qu}Object.defineProperty(nr,"__esModule",{value:!0});var QA=nr.PostgrestError=lP=nr.PostgrestBuilder=aP=nr.PostgrestTransformBuilder=sP=nr.PostgrestFilterBuilder=rP=nr.PostgrestQueryBuilder=eP=nr.PostgrestClient=void 0;const Ho=Wo,ZA=Ho.__importDefault(YU());var eP=nr.PostgrestClient=ZA.default;const tP=Ho.__importDefault(JA());var rP=nr.PostgrestQueryBuilder=tP.default;const nP=Ho.__importDefault(wx());var sP=nr.PostgrestFilterBuilder=nP.default;const iP=Ho.__importDefault(XA());var aP=nr.PostgrestTransformBuilder=iP.default;const oP=Ho.__importDefault(YA());var lP=nr.PostgrestBuilder=oP.default;const cP=Ho.__importDefault(KA());QA=nr.PostgrestError=cP.default;var uP=nr.default={PostgrestClient:ZA.default,PostgrestQueryBuilder:tP.default,PostgrestFilterBuilder:nP.default,PostgrestTransformBuilder:iP.default,PostgrestBuilder:oP.default,PostgrestError:cP.default};const XU=CE({__proto__:null,get PostgrestBuilder(){return lP},get PostgrestClient(){return eP},get PostgrestError(){return QA},get PostgrestFilterBuilder(){return sP},get PostgrestQueryBuilder(){return rP},get PostgrestTransformBuilder(){return aP},default:uP},[nr]),{PostgrestClient:JU,PostgrestQueryBuilder:$ne,PostgrestFilterBuilder:Une,PostgrestTransformBuilder:Fne,PostgrestBuilder:Bne,PostgrestError:zne}=uP||XU;class QU{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const ZU="2.83.0",eF=`realtime-js/${ZU}`,dP="1.0.0",tF="2.0.0",T1=dP,Dv=1e4,rF=1e3,nF=100;var Oi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Oi||(Oi={}));var pt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pt||(pt={}));var Jr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Jr||(Jr={}));var Rv;(function(e){e.websocket="websocket"})(Rv||(Rv={}));var Ti;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ti||(Ti={}));class sF{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){var r,n;const{event:s,topic:i,payload:a}=t,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=this.META_LENGTH+c.length+l.length+i.length+s.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let h=new DataView(d),f=0;h.setUint8(f++,this.KINDS.push),h.setUint8(f++,c.length),h.setUint8(f++,l.length),h.setUint8(f++,i.length),h.setUint8(f++,s.length),Array.from(c,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(l,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(i,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(s,g=>h.setUint8(f++,g.charCodeAt(0)));var m=new Uint8Array(d.byteLength+a.byteLength);return m.set(new Uint8Array(d),0),m.set(new Uint8Array(a),d.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,s,i;const a=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+u.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(f),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,c.length),m.setUint8(g++,l.length),m.setUint8(g++,a.length),m.setUint8(g++,u.length),m.setUint8(g++,this.BINARY_ENCODING),Array.from(c,p=>m.setUint8(g++,p.charCodeAt(0))),Array.from(l,p=>m.setUint8(g++,p.charCodeAt(0))),Array.from(a,p=>m.setUint8(g++,p.charCodeAt(0))),Array.from(u,p=>m.setUint8(g++,p.charCodeAt(0)));var y=new Uint8Array(f.byteLength+d.byteLength);return y.set(new Uint8Array(f),0),y.set(new Uint8Array(d),f.byteLength),y.buffer}_encodeJsonUserBroadcastPush(t){var r,n,s,i;const a=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+u.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(g),p=0;y.setUint8(p++,this.KINDS.userBroadcastPush),y.setUint8(p++,c.length),y.setUint8(p++,l.length),y.setUint8(p++,a.length),y.setUint8(p++,u.length),y.setUint8(p++,this.JSON_ENCODING),Array.from(c,b=>y.setUint8(p++,b.charCodeAt(0))),Array.from(l,b=>y.setUint8(p++,b.charCodeAt(0))),Array.from(a,b=>y.setUint8(p++,b.charCodeAt(0))),Array.from(u,b=>y.setUint8(p++,b.charCodeAt(0)));var v=new Uint8Array(g.byteLength+f.byteLength);return v.set(new Uint8Array(g),0),v.set(new Uint8Array(f),g.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,a,l,c]=n;return r({join_ref:s,ref:i,topic:a,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,s);case this.KINDS.reply:return this._decodeReply(t,r,s);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodePush(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(l,l+s));l=l+s;const u=n.decode(t.slice(l,l+i));l=l+i;const d=n.decode(t.slice(l,l+a));l=l+a;const h=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:d,payload:h}}_decodeReply(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+a));c=c+a;const f=n.decode(t.slice(c,c+l));c=c+l;const m=JSON.parse(n.decode(t.slice(c,t.byteLength))),g={status:f,response:m};return{join_ref:u,ref:d,topic:h,event:Jr.reply,payload:g}}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:u}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+a));c=c+a;const f=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,g={type:this.BROADCAST,event:d,payload:m};return a>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class hP{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(De||(De={}));const I1=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=iF(a,e,t,s),i),{}):{}},iF=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?fP(i,a):Mv(a)},fP=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return cF(t,r)}switch(e){case De.bool:return aF(t);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return oF(t);case De.json:case De.jsonb:return lF(t);case De.timestamp:return uF(t);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Mv(t);default:return Mv(t)}},Mv=e=>e,aF=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},oF=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},lF=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},cF=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>fP(t,l))}return e},uF=e=>typeof e=="string"?e.replace(" ","T"):e,mP=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Fp{constructor(t,r,n={},s=Dv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var D1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(D1||(D1={}));class ql{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ql.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=ql.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ql.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(p=>p.presence_ref),m=h.map(p=>p.presence_ref),g=d.filter(p=>m.indexOf(p.presence_ref)<0),y=h.filter(p=>f.indexOf(p.presence_ref)<0);g.length>0&&(l[u]=g),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var R1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(R1||(R1={}));var Vl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vl||(Vl={}));var Xn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xn||(Xn={}));class _x{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fp(this,Jr.join,this.params,this.timeout),this.rejoinTimer=new hP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new ql(this),this.broadcastEndpointURL=mP(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Vl.PRESENCE]&&this.bindings[Vl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Xn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Xn.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(Xn.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,p=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,v=[];for(let b=0;b<p;b++){const w=y[b],{filter:{event:_,schema:j,table:N,filter:k}}=w,T=m&&m[b];if(T&&T.event===_&&T.schema===j&&T.table===N&&T.filter===k)v.push(Object.assign(Object.assign({},w),{id:T.id}));else{this.unsubscribe(),this.state=pt.errored,t==null||t(Xn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Xn.SUBSCRIBED);return}}).receive("error",m=>{this.state=pt.errored,t==null||t(Xn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===pt.joined&&t===Vl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Fp(this,Jr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fp(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>nF){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Jr;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var g,y,p;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(y=m.filter)===null||y===void 0?void 0:y.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var g,y,p,v,b,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const _=(b=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:y,table:p,commit_timestamp:v,type:b,errors:w}=g;f=Object.assign(Object.assign({},{schema:y,table:p,commit_timestamp:v,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(f,n)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&_x.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Jr.close,{},t)}_onError(t){this._on(Jr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=I1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=I1(t.columns,t.old_record)),r}}const Bp=()=>{},Ju={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dF=[1e3,2e3,5e3,1e4],hF=1e4,fF=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mF{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dv,this.transport=null,this.heartbeatIntervalMs=Ju.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bp,this.ref=0,this.reconnectTimer=null,this.vsn=T1,this.logger=Bp,this.conn=null,this.sendBuffer=[],this.serializer=new sF,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Rv.websocket}`,this.httpEndpoint=mP(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=QU.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Oi.connecting:return Ti.Connecting;case Oi.open:return Ti.Open;case Oi.closing:return Ti.Closing;default:return Ti.Closed}}isConnected(){return this.connectionState()===Ti.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new _x(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(rF,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ju.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Oi.open||this.conn.readyState===Oi.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Jr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([fF],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:eF};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Jr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new hP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ju.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,a,l,c,u,d,h,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Dv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ju.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Bp,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:T1,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>dF[g-1]||hF,this.vsn){case dP:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,y)=>y(JSON.stringify(g)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(g,y)=>y(JSON.parse(g));break;case tF:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class jx extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Xe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class pF extends jx{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Lv extends jx{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Nx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),gF=()=>Response,$v=e=>{if(Array.isArray(e))return e.map(r=>$v(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=$v(n)}),t},vF=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},yF=(e,t,r)=>J(void 0,void 0,void 0,function*(){const n=yield gF();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new pF(zp(s),i,a))}).catch(s=>{t(new Lv(zp(s),s))}):t(new Lv(zp(e),e))}),xF=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(vF(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function ru(e,t,r,n,s,i){return J(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,xF(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>yF(c,l,n))})})}function Nc(e,t,r,n){return J(this,void 0,void 0,function*(){return ru(e,"GET",t,r,n)})}function gn(e,t,r,n,s){return J(this,void 0,void 0,function*(){return ru(e,"POST",t,n,s,r)})}function Uv(e,t,r,n,s){return J(this,void 0,void 0,function*(){return ru(e,"PUT",t,n,s,r)})}function bF(e,t,r,n){return J(this,void 0,void 0,function*(){return ru(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Sx(e,t,r,n,s){return J(this,void 0,void 0,function*(){return ru(e,"DELETE",t,n,s,r)})}class wF{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return J(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}})}}var pP;class _F{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[pP]="BlobDownloadBuilder",this.promise=null}asStream(){return new wF(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return J(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}})}}pP=Symbol.toStringTag;const jF={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},M1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class NF{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Nx(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return J(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},M1),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?Uv:gn)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}})}upload(t,r,n){return J(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return J(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:M1.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Uv(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return J(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield gn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new jx("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}update(t,r,n){return J(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return J(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}copy(t,r,n){return J(this,void 0,void 0,function*(){try{return{data:{path:(yield gn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return J(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield gn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return J(this,void 0,void 0,function*(){try{const s=yield gn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Nc(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new _F(c,this.shouldThrowOnError)}info(t){return J(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Nc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:$v(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}exists(t){return J(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield bF(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n)&&n instanceof Lv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return J(this,void 0,void 0,function*(){try{return{data:yield Sx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}list(t,r,n){return J(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},jF),r),{prefix:t||""});return{data:yield gn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}listV2(t,r){return J(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield gn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const gP="2.83.0",vP={"X-Client-Info":`storage-js/${gP}`};class SF{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vP),r),this.fetch=Nx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return J(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Nc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}getBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}createBucket(t){return J(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return J(this,void 0,void 0,function*(){try{return{data:yield Uv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield Sx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class EF{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vP),r),this.fetch=Nx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}listBuckets(t){return J(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Nc(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield Sx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}}const Ex={"X-Client-Info":`storage-js/${gP}`,"Content-Type":"application/json"};class yP extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Dr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Wp extends yP{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class CF extends yP{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var L1;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(L1||(L1={}));const Cx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kF=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},$1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),AF=(e,t,r)=>J(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,i=e;if(typeof i.json=="function")i.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";t(new Wp($1(a),s,l))}).catch(()=>{const a=s+"",l=i.statusText||`HTTP ${s} error`;t(new Wp(l,s,a))});else{const a=s+"",l=i.statusText||`HTTP ${s} error`;t(new Wp(l,s,a))}}else t(new CF($1(e),e))}),PF=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(kF(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function OF(e,t,r,n,s,i){return J(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,PF(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>AF(c,l,n))})})}function Rr(e,t,r,n,s){return J(this,void 0,void 0,function*(){return OF(e,"POST",t,n,s,r)})}class TF{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ex),r),this.fetch=Cx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return J(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return J(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}listIndexes(t){return J(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return J(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}}class IF{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ex),r),this.fetch=Cx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return J(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Rr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}getVectors(t){return J(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}listVectors(t){return J(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Rr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}queryVectors(t){return J(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return J(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Rr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}}class DF{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ex),r),this.fetch=Cx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return J(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}getBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}listBuckets(){return J(this,arguments,void 0,function*(t={}){try{return{data:yield Rr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return J(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}}class RF extends DF{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new MF(this.url,this.headers,t,this.fetch)}}class MF extends TF{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return J(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return J(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return J(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return J(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new LF(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class LF extends IF{constructor(t,r,n,s,i){super(t,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return J(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return J(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return J(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return J(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return J(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class $F extends SF{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new NF(this.url,this.headers,t,this.fetch)}get vectors(){return new RF(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new EF(this.url+"/iceberg",this.headers,this.fetch)}}const UF="2.83.0";let Cl="";typeof Deno<"u"?Cl="deno":typeof document<"u"?Cl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cl="react-native":Cl="node";const FF={"X-Client-Info":`supabase-js-${Cl}/${UF}`},BF={headers:FF},zF={schema:"public"},WF={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HF={},qF=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),VF=()=>Headers,GF=(e,t,r)=>{const n=qF(r),s=VF();return async(i,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:u}))}};function KF(e){return e.endsWith("/")?e:e+"/"}function YF(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function XF(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(KF(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const xP="2.83.0",Ta=30*1e3,Fv=3,Hp=Fv*Ta,JF="http://localhost:9999",QF="supabase.auth.token",ZF={"X-Client-Info":`gotrue-js/${xP}`},Bv="X-Supabase-Api-Version",bP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},e8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,t8=10*60*1e3;class Sc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ee(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class r8 extends Sc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function n8(e){return ee(e)&&e.name==="AuthApiError"}class Ii extends Sc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class yi extends Sc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Or extends yi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function s8(e){return ee(e)&&e.name==="AuthSessionMissingError"}class Na extends yi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qu extends yi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zu extends yi{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i8(e){return ee(e)&&e.name==="AuthImplicitGrantRedirectError"}class U1 extends yi{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zv extends yi{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function qp(e){return ee(e)&&e.name==="AuthRetryableFetchError"}class F1 extends yi{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Wv extends yi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const kh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),B1=` 	
\r=`.split(""),a8=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<B1.length;t+=1)e[B1[t].charCodeAt(0)]=-2;for(let t=0;t<kh.length;t+=1)e[kh[t].charCodeAt(0)]=t;return e})();function z1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(kh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(kh[n]),t.queuedBits-=6}}function wP(e,t,r){const n=a8[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function W1(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{c8(a,n,r)};for(let a=0;a<e.length;a+=1)wP(e.charCodeAt(a),s,i);return t.join("")}function o8(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function l8(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}o8(n,t)}}function c8(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ao(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)wP(e.charCodeAt(s),r,n);return new Uint8Array(t)}function u8(e){const t=[];return l8(e,r=>t.push(r)),new Uint8Array(t)}function Fi(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>z1(s,r,n)),z1(null,r,n),t.join("")}function d8(e){return Math.round(Date.now()/1e3)+e}function h8(){return Symbol("auth-callback")}const Lt=()=>typeof window<"u"&&typeof document<"u",wi={tested:!1,writable:!1},_P=()=>{if(!Lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wi.tested)return wi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),wi.tested=!0,wi.writable=!0}catch{wi.tested=!0,wi.writable=!1}return wi.writable};function f8(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const jP=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),m8=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ia=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},_i=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},$s=async(e,t)=>{await e.removeItem(t)};class Zf{constructor(){this.promise=new Zf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Zf.promiseConstructor=Promise;function Vp(e){const t=e.split(".");if(t.length!==3)throw new Wv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!e8.test(t[n]))throw new Wv("JWT not in base64url format");return{header:JSON.parse(W1(t[0])),payload:JSON.parse(W1(t[1])),signature:ao(t[2]),raw:{header:t[0],payload:t[1]}}}async function p8(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function g8(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function v8(e){return("0"+e.toString(16)).substr(-2)}function y8(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,v8).join("")}async function x8(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function b8(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await x8(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(e,t,r=!1){const n=y8();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ia(e,`${t}-code-verifier`,s);const i=await b8(n);return[i,n===i?"plain":"s256"]}const w8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _8(e){const t=e.headers.get(Bv);if(!t||!t.match(w8))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function j8(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function N8(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const S8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ea(e){if(!S8.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gp(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function E8(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function H1(e){return JSON.parse(JSON.stringify(e))}const Ci=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),C8=[502,503,504];async function q1(e){var t;if(!m8(e))throw new zv(Ci(e),0);if(C8.includes(e.status))throw new zv(Ci(e),e.status);let r;try{r=await e.json()}catch(i){throw new Ii(Ci(i),i)}let n;const s=_8(e);if(s&&s.getTime()>=bP["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new F1(Ci(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Or}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new F1(Ci(r),e.status,r.weak_password.reasons);throw new r8(Ci(r),e.status||500,n)}const k8=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function oe(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Bv]||(i[Bv]=bP["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await A8(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function A8(e,t,r,n,s,i){const a=k8(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new zv(Ci(c),0)}if(l.ok||await q1(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await q1(c)}}function mn(e){var t;let r=null;T8(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=d8(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function V1(e){const t=mn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function P8(e){return{data:e,error:null}}function O8(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=zo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function G1(e){return e}function T8(e){return e.access_token&&e.refresh_token&&e.expires_in}const Kp=["global","local","others"];class I8{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=jP(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Kp[0]){if(Kp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kp.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:qs})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=zo(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:O8,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ee(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qs})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:G1});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);u[`${p}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ee(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ea(t);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qs})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ea(t);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:qs})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ea(t);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:qs})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ea(t.userId);try{const{data:r,error:n}=await oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ea(t.userId),Ea(t.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:G1});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);u[`${p}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ee(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}}function K1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ca={debug:!!(globalThis&&_P()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class NP extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class D8 extends NP{}async function R8(e,t,r){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new D8(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ca.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function M8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function SP(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function L8(e){return parseInt(e,16)}function $8(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function U8(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=SP(e.address),g=d?`${d}://${n}`:n,y=e.statement?`${e.statement}
`:"",p=`${g} wants you to sign in with your Ethereum account:
${m}

${y}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}v+=b}return`${p}
${v}`}class ct extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ah extends ct{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function F8({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(EP(a)){if(i.rp.id!==a)return new ct({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function B8({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(EP(n)){if(r.rpId!==n)return new ct({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class z8{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const W8=new z8;function H8(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=zo(e,["challenge","user","excludeCredentials"]),i=ao(t).buffer,a=Object.assign(Object.assign({},r),{id:ao(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ao(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function q8(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=zo(e,["challenge","allowCredentials"]),s=ao(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:ao(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function V8(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Fi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Fi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function G8(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Fi(new Uint8Array(s.authenticatorData)),clientDataJSON:Fi(new Uint8Array(s.clientDataJSON)),signature:Fi(new Uint8Array(s.signature)),userHandle:s.userHandle?Fi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function EP(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Y1(){var e,t;return!!(Lt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function K8(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ah("Browser returned unexpected credential type",t)}:{data:null,error:new Ah("Empty credential response",t)}}catch(t){return{data:null,error:F8({error:t,options:e})}}}async function Y8(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ah("Browser returned unexpected credential type",t)}:{data:null,error:new Ah("Empty credential response",t)}}catch(t){return{data:null,error:B8({error:t,options:e})}}}const X8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},J8={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ph(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(t(a)){const l=n[i];t(l)?n[i]=Ph(l,a):n[i]=Ph(a)}else n[i]=a}return n}function Q8(e,t){return Ph(X8,e,t||{})}function Z8(e,t){return Ph(J8,e,t||{})}class eB{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!a)return{data:null,error:l};const c=s??W8.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=Q8(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await K8({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=Z8(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Y8(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return ee(a)?{data:null,error:a}:{data:null,error:new Ii("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Sc("rpId is required for WebAuthn authentication")};try{if(!Y1())return{data:null,error:new Ii("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return ee(a)?{data:null,error:a}:{data:null,error:new Ii("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Sc("rpId is required for WebAuthn registration")};try{if(!Y1())return{data:null,error:new Ii("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return ee(a)?{data:null,error:a}:{data:null,error:new Ii("Unexpected error in register",a)}}}}M8();const tB={url:JF,storageKey:QF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ZF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function X1(e,t,r){return await r()}const ka={};class Ec{get jwks(){var t,r;return(r=(t=ka[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ka[this.storageKey]=Object.assign(Object.assign({},ka[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ka[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ka[this.storageKey]=Object.assign(Object.assign({},ka[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},tB),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Ec.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ec.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Lt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new I8({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=jP(i.fetch),this.lock=i.lock||X1,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Lt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=R8:this.lock=X1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new eB(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:_P()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=K1(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=K1(this.memoryStorage)),Lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xP}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Lt()&&(r=f8(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Lt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),i8(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ee(r)?this._returnResult({error:r}):this._returnResult({error:new Ii("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:mn}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ee(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Sa(this.storage,this.storageKey)),i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:g},xform:mn})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:mn})}else throw new Qu("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ee(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:V1})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:V1})}else throw new Qu("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Na;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,a,l,c,u,d,h,f;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:y,wallet:p,statement:v,options:b}=t;let w;if(Lt())if(typeof p=="object")w=p;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")w=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=SP(j[0]);let k=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const P=await w.request({method:"eth_chainId"});k=L8(P)}const T={domain:_.host,address:N,statement:v,uri:_.href,version:"1",chainId:k,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=U8(T),g=await w.request({method:"personal_sign",params:[$8(m),N]})}try{const{data:y,error:p}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:mn});if(p)throw p;if(!y||!y.session||!y.user){const v=new Na;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:p})}catch(y){if(ee(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,s,i,a,l,c,u,d,h,f,m;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:p,wallet:v,statement:b,options:w}=t;let _;if(Lt())if(typeof v=="object")_=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)g=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),y=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:p,error:v}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Fi(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:mn});if(v)throw v;if(!p||!p.session||!p.user){const b=new Na;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(ee(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(t){const r=await _i(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:mn});if(await $s(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new Na;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(ee(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:mn}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Na;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sa(this.storage,this.storageKey));const{error:h}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Qu("You must provide either an email or phone number.")}catch(l){if(ee(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:mn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(ee(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Sa(this.storage,this.storageKey));const u=await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:P8});return!((i=u.data)===null||i===void 0)&&i.url&&Lt()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(ee(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Or;const{error:s}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(ee(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new Qu("You must provide either an email or phone number and a type")}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await _i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Hp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await _i(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Gp()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=E8(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qs}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Or}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:qs})})}catch(r){if(ee(r))return s8(r)&&(await this._removeSession(),await $s(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Or;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Sa(this.storage,this.storageKey));const{data:u,error:d}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:qs});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(ee(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Or;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Vp(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(ee(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Or;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Lt())throw new Zu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new U1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new U1("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Zu("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Ta&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:y,error:p}=await this._getUser(i);if(p)throw p;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(ee(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await _i(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(n8(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await $s(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=h8(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Sa(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ee(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Lt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ee(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=t,h=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:mn}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Na}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(ee(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await g8(async s=>(s>0&&await p8(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:mn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&qp(i)&&Date.now()+a-n<Ta})}catch(n){if(this._debug(r,"error",n),ee(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Lt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await _i(this.storage,this.storageKey);if(s&&this.userStorage){let a=await _i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Ia(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Gp()}else if(s&&!s.user&&!s.user){const a=await _i(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await $s(this.storage,this.storageKey+"-user"),await Ia(this.storage,this.storageKey,s)):s.user=Gp()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Hp;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Hp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),qp(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Zf;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Or;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ee(i)){const a={data:null,error:i};return qp(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ia(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=H1(s);await Ia(this.storage,this.storageKey,i)}else{const s=H1(r);await Ia(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await $s(this.storage,this.storageKey),await $s(this.storage,this.storageKey+"-code-verifier"),await $s(this.storage,this.storageKey+"-user"),this.userStorage&&await $s(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Lt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ta);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ta);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ta}ms, refresh threshold is ${Fv} ticks`),s<=Fv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof NP)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Sa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?V8(t.webauthn.credential_response):G8(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:H8(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:q8(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Vp(n.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Or})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Or});const a=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Lt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Or});const a=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Lt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Or})})}catch(t){if(ee(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Or})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+t8>s)return n;const{data:i,error:a}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Vp(n);r!=null&&r.allowExpired||j8(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const d=N8(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,u8(`${l}.${c}`)))throw new Wv("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}}Ec.nextInstanceID={};const rB=Ec;class nB extends rB{constructor(t){super(t)}}class sB{constructor(t,r,n){var s,i,a;this.supabaseUrl=t,this.supabaseKey=r;const l=XF(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:zF,realtime:HF,auth:Object.assign(Object.assign({},WF),{storageKey:c}),global:BF},d=YF(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=GF(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new JU(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new $F(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new KU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:u,throwOnError:d},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nB({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new mF(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iB=(e,t,r)=>new sB(e,t,r);function aB(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}aB()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oB="https://nagpednvxncbezrspism.supabase.co",lB="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5hZ3BlZG52eG5jYmV6cnNwaXNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwNTM1NzIsImV4cCI6MjA4MjYyOTU3Mn0.k5Q5mAxMnPtjRmU4Veb4KoboN9GPUL6twaT_7vqlao0",dt=iB(oB,lB),J1={login:async(e,t)=>{const{data:r,error:n}=await dt.from("counselors").select("id, email, name, password_hash, role").eq("email",e).maybeSingle();if(n||!r)throw new Error("Invalid credentials");if(r.password_hash!==`demo_hash_${t}`)throw new Error("Invalid credentials");const s={id:r.id,email:r.email,name:r.name,role:r.role};return localStorage.setItem("counselor",JSON.stringify(s)),s},logout:()=>{localStorage.removeItem("counselor")},getCurrentCounselor:()=>{const e=localStorage.getItem("counselor");return e?JSON.parse(e):null},isAuthenticated:()=>!!localStorage.getItem("counselor")};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(e,t)=>{const r=x.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>x.createElement("svg",{ref:d,...cB,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${uB(e)}`,l].join(" "),...u},[...t.map(([h,f])=>x.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=X("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=X("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=X("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=X("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=X("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=X("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=X("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=X("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=X("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=X("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=X("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=X("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=X("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=X("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=X("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=X("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=X("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=X("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=X("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=X("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=X("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=X("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=X("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=X("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=X("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=X("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=X("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=X("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=X("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=X("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=X("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=X("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=X("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=X("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=X("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),PB=({onLogin:e,onCounselorLogin:t})=>{const[r,n]=x.useState(""),[s,i]=x.useState(""),[a,l]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),p=async v=>{v.preventDefault(),h(""),m(""),y(""),u(!0);try{const b=await _A.authenticateUser({email:r,password:s});if(b.success&&b.user)if(console.log("Login successful:",b.user),b.user.role==="pool_management"||b.user.role==="essay"){console.log("Routing to counselor dashboard");const w={id:b.user.username,email:b.user.username,name:b.user.name,role:b.user.role};t(w)}else console.log("Routing to student dashboard"),e(b.user);else switch(b.error){case"USER_NOT_FOUND":h(b.message||"Email not found");break;case"WRONG_PASSWORD":m(b.message||"Incorrect password");break;case"NETWORK_ERROR":default:y(b.message||"Login failed. Please try again.");break}}catch(b){console.error("Login error:",b),y("Login failed. Please try again.")}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:o.jsxs("div",{className:"max-w-md w-full mx-auto",children:[o.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 sm:p-8 border border-blue-100 animate-fade-in",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("img",{src:"/white_logo.png",alt:"EduCare Logo",className:"w-12 h-12 object-contain opacity-90"})}),o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"EduCare"}),o.jsx("p",{className:"text-base sm:text-lg text-[#04adee] font-semibold",children:"University Guidance"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-2 mb-6",children:"Empowering your academic journey"})]}),g&&o.jsx("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 rounded-lg",children:o.jsx("p",{className:"text-red-600 text-sm",children:g})}),o.jsxs("form",{onSubmit:p,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(nu,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"email",id:"email",value:r,onChange:v=>n(v.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent transition-all duration-200 text-sm sm:text-base ${d?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your email",required:!0})]}),d&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),o.jsxs("div",{className:"relative",children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(DP,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),o.jsx("input",{type:a?"text":"password",id:"password",value:s,onChange:v=>i(v.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent transition-all duration-200 text-sm sm:text-base ${f?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your password",required:!0}),o.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 transition-colors",children:a?o.jsx(AP,{className:"w-5 h-5"}):o.jsx(PP,{className:"w-5 h-5"})})]}),f&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]})]}),o.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#04adee] text-white py-3 px-4 rounded-lg hover:bg-blue-600 focus:ring-2 focus:ring-[#04adee] focus:ring-offset-2 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:c?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign in to EduCare"})]})]}),o.jsx("div",{className:"text-center mt-6 text-xs sm:text-sm text-gray-500",children:" 2025 EduCare. Enhancing education through efficiency."})]})})},OB=({currentPage:e,setCurrentPage:t,onLogout:r,isOpen:n,onClose:s,isCollapsed:i=!1,onToggleCollapse:a})=>{const l=[{id:"profile",label:"My Profile",icon:sa},{id:"admit-profiles",label:"Admission Stories",icon:er},{id:"scholarships",label:"Scholarships",icon:dr},{id:"applications",label:"Applications",icon:ke},{id:"essay-editor",label:"Essay Editor",icon:jB},{id:"resources",label:"Resources",icon:Er},{id:"counselors",label:"Counselors",icon:kc},{id:"chat",label:"Inbox",icon:$n}],c=u=>{t(u),s()};return o.jsxs("div",{className:`
      fixed lg:static inset-y-0 left-0 z-40 bg-white shadow-lg border-r border-gray-200 flex flex-col
      transform transition-all duration-300 ease-in-out
      ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      ${i?"w-20":"w-64"}
    `,children:[o.jsx("div",{className:"p-4 lg:p-6 border-b border-gray-200 mt-16 lg:mt-0 flex-shrink-0",children:o.jsxs("div",{className:`flex items-center ${i?"justify-center":""}`,children:[o.jsx("img",{src:"/white_logo.png",alt:"EduCare Logo",className:"w-8 h-8 lg:w-10 lg:h-10 object-contain"}),!i&&o.jsxs("div",{className:"ml-3",children:[o.jsx("h2",{className:"text-lg lg:text-xl font-bold text-gray-900",children:"EduCare"}),o.jsx("p",{className:"text-xs lg:text-sm text-[#04adee]",children:"University Guidance"})]})]})}),a&&o.jsx("button",{onClick:a,className:"hidden lg:flex absolute -right-3 top-24 bg-white border border-gray-200 rounded-full p-1.5 shadow-md hover:bg-gray-50 transition-colors z-50",title:i?"Expand sidebar":"Collapse sidebar",children:i?o.jsx(kP,{className:"w-4 h-4 text-gray-600"}):o.jsx(CP,{className:"w-4 h-4 text-gray-600"})}),o.jsx("nav",{className:"flex-1 py-4 lg:py-6 overflow-y-auto",children:o.jsx("ul",{className:`space-y-2 ${i?"px-2":"px-3 lg:px-4"}`,children:l.map(u=>{const d=u.icon,h=e===u.id;return o.jsx("li",{children:o.jsxs("button",{onClick:()=>c(u.id),className:`w-full flex items-center rounded-lg transition-all duration-200 ${i?"justify-center p-3":"px-4 py-3"} ${h?"bg-[#04adee] bg-opacity-10 text-[#04adee] border border-[#04adee] border-opacity-20 shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,title:i?u.label:void 0,children:[o.jsx(d,{className:`w-4 h-4 lg:w-5 lg:h-5 ${i?"":"mr-3"} ${h?"text-[#04adee]":"text-gray-500"}`}),!i&&o.jsx("span",{className:"font-medium text-sm lg:text-base",children:u.label})]})},u.id)})})}),o.jsx("div",{className:`border-t border-gray-200 flex-shrink-0 ${i?"p-2":"p-3 lg:p-4"}`,children:o.jsxs("button",{onClick:r,className:`w-full flex items-center text-gray-700 hover:bg-red-50 hover:text-red-600 rounded-lg transition-all duration-200 touch-manipulation ${i?"justify-center p-3":"px-4 py-3"}`,title:i?"Logout":void 0,children:[o.jsx(Hv,{className:`w-4 h-4 lg:w-5 lg:h-5 ${i?"":"mr-3"}`}),!i&&o.jsx("span",{className:"font-medium text-sm lg:text-base",children:"Logout"})]})})]})},ed=(e,t=2e3)=>{const[r,n]=x.useState(0);return x.useEffect(()=>{let s,i;const a=l=>{s||(s=l);const c=Math.min((l-s)/t,1);n(Math.floor(c*e)),c<1&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>cancelAnimationFrame(i)},[e,t]),r},TB=({percentage:e,className:t="bg-[#04adee]"})=>{const[r,n]=x.useState(0);return x.useEffect(()=>{const s=setTimeout(()=>n(e),100);return()=>clearTimeout(s)},[e]),o.jsx("div",{className:"w-24 sm:w-32 bg-gray-200 rounded-full h-2 mr-3",children:o.jsx("div",{className:`${t} h-2 rounded-full transition-all duration-1000 ease-out`,style:{width:`${r}%`}})})},tj=({user:e})=>{const[t,r]=x.useState(!1),[n,s]=x.useState(!1),i=()=>{if(e!=null&&e.name)return e.name;const C=Ue.getStoredUser();return C!=null&&C.name?(console.log("Using stored user name:",C.name),C.name):"Student"},a=()=>{if((e==null?void 0:e.averageGrade)!==void 0)return console.log("Using average grade from user prop:",e.averageGrade),e.averageGrade;const C=Ue.getStoredUser();return(C==null?void 0:C.averageGrade)!==void 0?(console.log("Using stored average grade:",C.averageGrade),C.averageGrade):(console.log("No average grade found, using default"),89)},l=()=>{if(e!=null&&e.subjectGrades)return console.log("Using subject grades from user prop:",e.subjectGrades),e.subjectGrades;const C=Ue.getStoredUser();return C!=null&&C.subjectGrades?(console.log("Using stored subject grades:",C.subjectGrades),C.subjectGrades):(console.log("No subject grades found, using defaults"),{Mathematics:88,English:92,Science:85,History:90,"Foreign Language":87})},[c,u]=x.useState({studentName:i(),currentGPA:a(),subjects:l(),classRank:15,totalStudents:320,satScore:1450,careerInterests:["Science","Technology","Engineering"],age:17,nationality:"United States",personalStatement:"Passionate about technology and innovation, I aim to pursue computer science to create solutions that impact society positively. My journey began when I first encountered programming in high school, and since then, I have been fascinated by the endless possibilities that technology offers to solve real-world problems.",activities:["Debate Club President","Varsity Soccer","Math Olympiad","Volunteer Tutor"],specialCircumstances:"First-generation college student, overcame family financial hardship",financialBudget:5e4}),[d,h]=x.useState(c),f=ed(c.currentGPA),m=ed(c.classRank),g=ed(c.totalStudents),y=ed(c.satScore),p=()=>{r(!0),h(c)},v=async()=>{s(!0);try{const C=Ue.getStoredUser(),A=(C==null?void 0:C.school)||(e==null?void 0:e.school),S=(C==null?void 0:C.username)||(e==null?void 0:e.username);if(!A||!S){console.error("Missing school or username information"),alert("Error: Missing user information. Please log in again."),s(!1);return}console.log("Saving profile data for:",S,"in school:",A);const E={Activities:{},Age:d.age.toString(),Nationality:d.nationality,SAT:d.satScore.toString(),"Career Interests":{},"Special Circumstances":d.specialCircumstances,"Personal Statement":d.personalStatement,Budget:d.financialBudget.toString()};d.activities.forEach((R,F)=>{R.trim()&&(E.Activities[R.trim()]="true")}),d.careerInterests.forEach((R,F)=>{R.trim()&&(E["Career Interests"][R.trim()]="true")});const O=se(te,`Schoolss/${A}/University Profiles/${S}`);await ot(O,E),console.log("Profile data saved successfully to Firebase!"),u(d),r(!1),alert("Profile saved successfully!")}catch(C){console.error("Error saving profile data:",C),alert("Error saving profile. Please try again.")}finally{s(!1)}},b=()=>{h(c),r(!1)},w=(C,A)=>{h(S=>({...S,[C]:A}))},_=()=>{d.activities.length<10&&h(C=>({...C,activities:[...C.activities,""]}))},j=C=>{h(A=>({...A,activities:A.activities.filter((S,E)=>E!==C)}))},N=(C,A)=>{h(S=>({...S,activities:S.activities.map((E,O)=>O===C?A:E)}))},k=()=>{d.careerInterests.length<10&&h(C=>({...C,careerInterests:[...C.careerInterests,""]}))},T=C=>{h(A=>({...A,careerInterests:A.careerInterests.filter((S,E)=>E!==C)}))},P=(C,A)=>{h(S=>({...S,careerInterests:S.careerInterests.map((E,O)=>O===C?A:E)}))};return o.jsxs("div",{className:"p-4 sm:p-6 max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 sm:mb-8 gap-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:["Welcome, ",i()]}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Track your academic journey and university readiness"})]}),o.jsx("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:t?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:v,disabled:n,className:"flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm sm:text-base",children:n?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(em,{className:"w-4 h-4 mr-2"}),"Save Changes"]})}),o.jsxs("button",{onClick:b,className:"flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm sm:text-base",children:[o.jsx(at,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}):o.jsxs("button",{onClick:p,className:"flex items-center justify-center px-4 py-2 bg-[#04adee] text-white rounded-lg hover:bg-blue-600 transition-colors text-sm sm:text-base",children:[o.jsx(Ax,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[o.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[o.jsx(tn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#04adee] mr-2"}),"Academic Performance (Auto-Generated)"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6",children:[o.jsxs("div",{className:"bg-[#04adee] bg-opacity-10 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-[#04adee]",children:[f,"%"]}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Average Grade"})]}),o.jsxs("div",{className:"bg-green-100 rounded-lg p-3 sm:p-4 text-center",children:[o.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:["#",m]}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Class Rank"})]}),o.jsxs("div",{className:"bg-purple-100 rounded-lg p-3 sm:p-4 text-center",children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:g}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Students"})]})]}),o.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-3",children:"Subject Grades"}),o.jsx("div",{className:"space-y-3",children:Object.entries(c.subjects).map(([C,A])=>o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[o.jsx("span",{className:"font-medium text-sm sm:text-base text-gray-700",children:C}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(TB,{percentage:A}),o.jsxs("span",{className:"text-sm sm:text-lg font-semibold text-gray-900 w-8 sm:w-10",children:[A,"%"]})]})]},C))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[o.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[o.jsx(pa,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#04adee] mr-2"}),"University Application Profile"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"SAT Score"}),t?o.jsx("input",{type:"number",value:d.satScore,onChange:C=>w("satScore",parseInt(C.target.value)),className:"w-full px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"}):o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg font-semibold text-sm sm:text-base text-[#04adee]",children:y})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Age"}),t?o.jsx("input",{type:"number",value:d.age,onChange:C=>w("age",parseInt(C.target.value)),className:"w-full px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"}):o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm sm:text-base",children:[c.age," years old"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Nationality"}),t?o.jsx("input",{type:"text",value:d.nationality,onChange:C=>w("nationality",C.target.value),className:"w-full px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"}):o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-sm sm:text-base",children:c.nationality})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Financial Budget"}),t?o.jsx("input",{type:"number",value:d.financialBudget,onChange:C=>w("financialBudget",parseInt(C.target.value)),className:"w-full px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"}):o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm sm:text-base",children:["$",c.financialBudget.toLocaleString()]})]})]}),o.jsxs("div",{className:"mt-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Career Interests"}),t?o.jsxs("div",{className:"space-y-2",children:[d.careerInterests.map((C,A)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:C,onChange:S=>P(A,S.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"Enter career interest"}),o.jsx("button",{type:"button",onClick:()=>T(A),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:o.jsx(on,{className:"w-4 h-4"})})]},A)),d.careerInterests.length<10&&o.jsxs("button",{type:"button",onClick:k,className:"flex items-center text-[#04adee] hover:bg-blue-50 px-3 py-2 rounded-lg text-sm",children:[o.jsx(ur,{className:"w-4 h-4 mr-2"}),"Add Career Interest"]})]}):o.jsx("div",{className:"flex flex-wrap gap-2",children:c.careerInterests.map((C,A)=>o.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm",children:C},A))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Personal Statement"}),t?o.jsxs("div",{children:[o.jsx("textarea",{value:d.personalStatement,onChange:C=>w("personalStatement",C.target.value),className:"w-full px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent h-32 sm:h-40",maxLength:650}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[d.personalStatement.length,"/650 words"]})]}):o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-sm sm:text-base",children:c.personalStatement})]})]})]})]}),o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[o.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[o.jsx(dr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#04adee] mr-2"}),"Extracurricular Activities"]}),t?o.jsxs("div",{className:"space-y-2",children:[d.activities.map((C,A)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:C,onChange:S=>N(A,S.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"Enter activity"}),o.jsx("button",{type:"button",onClick:()=>j(A),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:o.jsx(on,{className:"w-4 h-4"})})]},A)),d.activities.length<10&&o.jsxs("button",{type:"button",onClick:_,className:"flex items-center text-[#04adee] hover:bg-blue-50 px-3 py-2 rounded-lg text-sm",children:[o.jsx(ur,{className:"w-4 h-4 mr-2"}),"Add Activity (Max 10)"]})]}):o.jsx("ul",{className:"space-y-2",children:c.activities.map((C,A)=>o.jsxs("li",{className:"flex items-center",children:[o.jsx("div",{className:"w-2 h-2 bg-[#04adee] rounded-full mr-3"}),o.jsx("span",{className:"text-sm sm:text-base text-gray-700",children:C})]},A))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[o.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Special Circumstances"}),t?o.jsx("textarea",{value:d.specialCircumstances,onChange:C=>w("specialCircumstances",C.target.value),className:"w-full px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent h-20 sm:h-24"}):o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-xs sm:text-sm",children:c.specialCircumstances})]})]})]})]})},IB="Soofia International School",DB="Admission Stories",Ox=async()=>{try{const e=se(te,`Schoolss/${IB}/${DB}`),t=await Pe(e);if(!t.exists())return console.log("No admission stories found"),[];const r=t.val(),n=[];return Object.keys(r).forEach(s=>{const i=r[s],a=[];i["Extra Curricular Activities"]&&Object.keys(i["Extra Curricular Activities"]).forEach(c=>{i["Extra Curricular Activities"][c]&&a.push(c)});const l={id:s.replace(/\s+/g,"-").toLowerCase(),name:i.Name||s,country:i.Country||"",profile_image_url:i["Profile Picture"]||"",current_university:i["Accepted to"]||"",university_location:i["Uni Location"]||"",application_round:i["Application round"]||"",graduation_year:i["Graduation Class"]||"",extracurricular_activities:a,personal_statement:i["Personal Statement"]||"",university_experience:i["Uni Experience"]||"",financial_aid_received:i["Financial Aid"]||"N/A",first_generation:i["First gen"]==="Yes",linkedin_handle:i.Linkedin!=="N/A"?i.Linkedin:void 0,instagram_handle:i.Instagram!=="N/A"?i.Instagram:void 0,current_major:i.Major||"",overall_percentage:i["Overall Average"]?parseFloat(i["Overall Average"].replace("%","")):void 0,sat_score:i["SAT score"]||void 0,act_score:i["ACT score"]||void 0,university_image_url:i["background picture"]||void 0,high_school_gpa_history:i["Highschool History"]||{},subject_grades:i["Latest Transcripts Submitted"]||{}};n.push(l)}),n}catch(e){throw console.error("Error fetching Firebase admission stories:",e),e}},$P=async e=>{try{return(await Ox()).find(r=>r.id===e)||null}catch(t){throw console.error("Error fetching Firebase admit profile by ID:",t),t}},tm=e=>`https://flagcdn.com/w40/${({Lesotho:"LS","South Africa":"ZA",Botswana:"BW",Zimbabwe:"ZW",Namibia:"NA",Zambia:"ZM",Malawi:"MW",Kenya:"KE",Nigeria:"NG",Ghana:"GH",Tanzania:"TZ",Uganda:"UG",Rwanda:"RW",Ethiopia:"ET",Mozambique:"MZ",Eswatini:"SZ",Swaziland:"SZ","United States":"US","United Kingdom":"GB",Canada:"CA",Australia:"AU",India:"IN",China:"CN",Japan:"JP",Germany:"DE",France:"FR",Brazil:"BR",Mexico:"MX",Argentina:"AR"}[e]||"UN").toLowerCase()}.png`;function RB({onViewProfile:e}){const[t,r]=x.useState([]),[n,s]=x.useState([]),[i,a]=x.useState(!0),[l,c]=x.useState(""),[u,d]=x.useState(""),[h,f]=x.useState("");x.useEffect(()=>{m()},[]),x.useEffect(()=>{g()},[l,u,h,t]);const m=async()=>{try{a(!0);const v=await Ox();r(v),s(v)}catch(v){console.error("Error loading admit profiles:",v)}finally{a(!1)}},g=()=>{let v=t;l&&(v=v.filter(b=>b.name.toLowerCase().includes(l.toLowerCase())||b.current_university.toLowerCase().includes(l.toLowerCase())||b.country.toLowerCase().includes(l.toLowerCase())||b.current_major.toLowerCase().includes(l.toLowerCase()))),u&&(v=v.filter(b=>b.country===u)),h&&(v=v.filter(b=>b.current_major===h)),s(v)},y=Array.from(new Set(t.map(v=>v.country))).sort(),p=Array.from(new Set(t.map(v=>v.current_major))).sort();return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admit Profiles"}),o.jsx("p",{className:"text-gray-600",children:"Explore profiles of students who were successfully admitted to top universities"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:o.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"Search by name, university, country...",value:l,onChange:v=>c(v.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"All Countries"}),y.map(v=>o.jsx("option",{value:v,children:v},v))]}),o.jsxs("select",{value:h,onChange:v=>f(v.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"All Majors"}),p.map(v=>o.jsx("option",{value:v,children:v},v))]})]})}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:n.map(v=>o.jsxs("div",{onClick:()=>e(v.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all cursor-pointer group",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:v.profile_image_url,alt:v.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"})}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-bold text-gray-900 text-sm mb-2 line-clamp-1",children:v.name}),o.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[o.jsx("img",{src:tm(v.country),alt:v.country,className:"w-5 h-3 mr-1.5 flex-shrink-0 object-cover rounded-sm"}),o.jsx("span",{className:"line-clamp-1",children:v.country})]}),o.jsxs("div",{className:"flex items-start text-xs text-gray-700 mb-2",children:[o.jsx(er,{className:"w-3 h-3 mr-1 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"line-clamp-2 font-medium",children:v.current_university})]}),o.jsxs("div",{className:"text-xs text-green-600 font-semibold",children:["Accepted ",v.application_round]})]})]},v.id))}),n.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500",children:"No admit profiles found matching your search."})})]})})}function Ye({end:e,duration:t=2e3,decimals:r=0,suffix:n="",className:s=""}){const[i,a]=x.useState(0),l=x.useRef(0),[c,u]=x.useState(!1),d=x.useRef(null);return x.useEffect(()=>{const h=new IntersectionObserver(([f])=>{f.isIntersecting&&u(!0)},{threshold:.1});return d.current&&h.observe(d.current),()=>{d.current&&h.unobserve(d.current)}},[]),x.useEffect(()=>{if(!c)return;const h=Date.now(),f=0,m=()=>{const p=Date.now()-h,v=Math.min(p/t,1),b=1-Math.pow(1-v,4),w=f+(e-f)*b;l.current=w,a(w),v<1?requestAnimationFrame(m):a(e)},g=requestAnimationFrame(m);return()=>{cancelAnimationFrame(g)}},[e,t,c]),o.jsxs("span",{ref:d,className:s,children:[i.toFixed(r),n]})}function MB({profileId:e,onBack:t}){const[r,n]=x.useState(null),[s,i]=x.useState(!0),[a,l]=x.useState(null),[c,u]=x.useState(!1);x.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0);const h=await $P(e);n(h),l(null)}catch(h){l("Failed to load admit profile"),console.error(h)}finally{i(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a||!r?o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("p",{className:"text-red-800",children:a||"Profile not found"}),o.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Go Back"})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[o.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-6 group",children:[o.jsx(Kn,{className:"w-5 h-5 mr-2 group-hover:-translate-x-1 transition-transform"}),o.jsx("span",{className:"font-medium",children:"Back to Admit Profiles"})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"relative h-48 bg-gradient-to-r from-green-500 to-blue-600",children:[r.university_image_url&&o.jsx("img",{src:r.university_image_url,alt:`${r.current_university} campus`,className:"absolute inset-0 w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-black/20"}),o.jsx("div",{className:"absolute -bottom-16 left-8 z-10",children:o.jsx("img",{src:r.profile_image_url,alt:r.name,className:"w-32 h-32 rounded-2xl border-4 border-white object-cover shadow-xl"})})]}),o.jsxs("div",{className:"pt-20 px-8 pb-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:"flex items-center gap-3 mb-2",children:o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.name})}),o.jsx("p",{className:"text-lg text-gray-600 mb-3",children:r.current_major}),o.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:tm(r.country),alt:`${r.country} flag`,className:"w-5 h-4 object-cover rounded-sm"}),o.jsx("span",{children:r.country})]})})]}),(r.linkedin_handle||r.instagram_handle)&&o.jsxs("div",{className:"flex gap-3 mb-8",children:[r.linkedin_handle&&o.jsxs("a",{href:r.linkedin_handle,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-all text-sm font-medium",children:[o.jsx(IP,{className:"w-4 h-4"}),"LinkedIn"]}),r.instagram_handle&&o.jsxs("a",{href:`https://instagram.com/${r.instagram_handle.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-pink-50 text-pink-600 rounded-lg hover:bg-pink-100 transition-all text-sm font-medium",children:[o.jsx(TP,{className:"w-4 h-4"}),"Instagram"]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-6 mb-4 border-2 border-blue-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(er,{className:"w-5 h-5 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Accepted To:"})]}),o.jsx("p",{className:"text-2xl font-bold text-blue-600 mb-1",children:r.current_university}),o.jsx("p",{className:"text-gray-600",children:r.university_location}),r.graduation_year&&o.jsxs("p",{className:"text-sm text-gray-600 mt-2 font-medium",children:["Class of ",r.graduation_year]})]}),o.jsx("div",{className:"mb-8",children:o.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Application submitted to ",r.current_university]})}),o.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(pa,{className:"w-4 h-4 text-blue-600 mr-2"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Overall Average"})]}),o.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r.overall_percentage?o.jsxs(o.Fragment,{children:[o.jsx(Ye,{end:r.overall_percentage,decimals:1}),o.jsx("span",{children:"%"})]}):"N/A"}),o.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Aggregate Percentage"})]}),r.sat_score&&o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 border border-purple-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(dr,{className:"w-4 h-4 text-purple-600 mr-2"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"SAT Score"})]}),o.jsx("p",{className:"text-3xl font-bold text-purple-600",children:o.jsx(Ye,{end:r.sat_score})})]}),r.act_score&&o.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-5 border border-orange-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(dr,{className:"w-4 h-4 text-orange-600 mr-2"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"ACT Score"})]}),o.jsx("p",{className:"text-3xl font-bold text-orange-600",children:o.jsx(Ye,{end:r.act_score})})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(er,{className:"w-4 h-4 text-green-600 mr-2"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Application Round"})]}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.application_round})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-5 border border-yellow-100",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(zn,{className:"w-4 h-4 text-yellow-600 mr-2"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"First Generation Student"})]}),o.jsx("p",{className:"text-gray-700 text-sm",children:r.first_generation?"Yes":"No"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(qo,{className:"w-4 h-4 text-green-600 mr-2"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Financial Aid Received"})]}),o.jsx("p",{className:"text-gray-700 text-sm",children:r.financial_aid_received})]})]}),o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(ke,{className:"w-5 h-5 text-blue-600 mr-2"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-sm line-clamp-4",children:r.personal_statement}),o.jsx("button",{onClick:()=>u(!0),className:"mt-3 text-blue-600 hover:text-blue-700 font-medium text-sm underline",children:"Read Full Statement"})]})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:()=>u(!1),children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ke,{className:"w-5 h-5 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),o.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100",children:""})]}),o.jsx("div",{className:"px-6 py-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:o.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:r.personal_statement})})]})}),r.subject_grades&&Object.keys(r.subject_grades).length>0&&o.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(er,{className:"w-5 h-5 text-purple-600 mr-2"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Latest Transcript Submitted"})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:Object.entries(r.subject_grades).map(([h,f],m)=>o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("div",{children:o.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:h})}),o.jsx("span",{className:"text-2xl font-bold text-purple-600",children:f})]})},m))})]}),r.high_school_gpa_history&&Object.keys(r.high_school_gpa_history).length>0&&o.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(tn,{className:"w-5 h-5 text-green-600 mr-2"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"High School Performance History"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 italic",children:"Overall grade percentages by year"}),o.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:Object.entries(r.high_school_gpa_history).map(([h,f],m)=>o.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg p-4 border border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:h}),o.jsx("span",{className:"text-xl font-bold text-blue-600",children:f})]})},m))})]}),o.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(ia,{className:"w-5 h-5 text-orange-600 mr-2"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Extracurricular Activities"})]}),o.jsx("ul",{className:"space-y-2",children:r.extracurricular_activities.map((h,f)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-orange-600 rounded-full mt-1.5 mr-3 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700 text-sm",children:h})]},f))})]}),r.university_experience&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-xl p-6 border border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(zn,{className:"w-5 h-5 text-blue-600 mr-2"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Their Journey: University Experience"})]}),o.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-sm italic",children:r.university_experience})]})]})]})]})]})})}class LB{constructor(){wa(this,"SCHOOL_NAME","Soofia International School")}async fetchScholarshipsFromFirebase(){try{console.log("=== FETCHING SCHOLARSHIPS FROM FIREBASE ===");const t=se(te,`Schoolss/${this.SCHOOL_NAME}/Scholarships`),r=await Pe(t);if(!r.exists())return console.log("No Scholarships node found for",this.SCHOOL_NAME),[];const n=r.val();console.log("Found scholarships data:",n);const s=[];return Object.entries(n).forEach(([i,a])=>{if(a&&typeof a=="object"){const l=a,c=[];l["Eligibility Criteria"]&&Object.values(l["Eligibility Criteria"]).forEach(d=>{d&&c.push(d)});const u=[];l.Requirements&&Object.values(l.Requirements).forEach(d=>{d&&u.push(d)}),s.push({id:i.replace(/\s+/g,"-").toLowerCase(),name:i,amount:l["Award amount"]||"",deadline:l.Deadline||"",description:l.Description||"",link:l.Link||"",iconUrl:l["Icon link"],eligibility:c,requirements:u}),console.log(`Extracted scholarship: ${i}`,{amount:l["Award amount"],deadline:l.Deadline,iconUrl:l["Icon link"],eligibilityCriteria:c.length,requirements:u.length})}}),console.log(` Successfully fetched ${s.length} scholarships`),s}catch(t){return console.error(" Error fetching scholarships from Firebase:",t),[]}}}const $B=new LB,UB=()=>{const[e,t]=x.useState(""),[r,n]=x.useState([]),[s,i]=x.useState(!0);x.useEffect(()=>{(async()=>{i(!0);const c=await $B.fetchScholarshipsFromFirebase();n(c),i(!1)})()},[]);const a=r.filter(l=>l.name.toLowerCase().includes(e.toLowerCase())||l.description.toLowerCase().includes(e.toLowerCase()));return s?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx(bB,{className:"w-12 h-12 text-[#04adee] animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading scholarships..."})]})})}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Scholarship Opportunities"}),o.jsx("p",{className:"text-gray-600",children:"Discover scholarships that match your profile and financial needs"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search scholarships...",value:e,onChange:l=>t(l.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(l=>o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-300",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.iconUrl&&o.jsx("img",{src:l.iconUrl,alt:`${l.name} logo`,className:"w-16 h-16 object-contain rounded-lg flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l.name}),o.jsx("p",{className:"text-gray-700 text-sm",children:l.description})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"text-center p-4 bg-[#04adee] bg-opacity-10 rounded-lg",children:[o.jsx(qo,{className:"w-6 h-6 text-[#04adee] mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.amount}),o.jsx("div",{className:"text-sm text-gray-600",children:"Award Amount"})]}),o.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[o.jsx(wt,{className:"w-6 h-6 text-gray-600 mx-auto mb-1"}),o.jsx("div",{className:"text-sm font-bold text-gray-900",children:l.deadline}),o.jsx("div",{className:"text-sm text-gray-600",children:"Deadline"})]})]}),l.eligibility.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Eligibility Criteria:"}),o.jsx("ul",{className:"space-y-1",children:l.eligibility.map((c,u)=>o.jsxs("li",{className:"flex items-center text-sm text-gray-700",children:[o.jsx("div",{className:"w-2 h-2 bg-[#04adee] rounded-full mr-2"}),c]},u))})]}),l.requirements.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Requirements:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:l.requirements.map((c,u)=>o.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full",children:c},u))})]}),o.jsx("div",{className:"pt-4 border-t border-gray-200",children:o.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium w-full",children:["Learn More & Apply",o.jsx(Vo,{className:"w-4 h-4 ml-2"})]})})]},l.id))}),a.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(dr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No scholarships found"}),o.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]})]})},UP=[".","#","$","/","[","]"],FB=e=>UP.filter(t=>e.includes(t)),BB=e=>{if(!e||typeof e!="string")return"";let t=e.trim();return UP.forEach(r=>{t=t.replace(new RegExp(`\\${r}`,"g"),"_")}),t=t.replace(/_+/g,"_"),t=t.replace(/^_+|_+$/g,""),t||"requirement"},qv=e=>{if(!e||e.trim()==="")return"Requirement name cannot be empty";const t=FB(e);return t.length>0?`Cannot contain these characters: ${t.join(", ")}`:null};class zB{async calculateStudentProgress(t,r){try{console.log(`=== CALCULATING PROGRESS FOR ${r} IN ${t} ===`);const n=se(te,`Schoolss/${t}/Applications/${r}`),s=await Pe(n);if(!s.exists())return console.log("No applications found for student"),0;const i=s.val();console.log("Applications data:",i);let a=0,l=0;Object.entries(i).forEach(([u,d])=>{console.log(`Processing university: ${u}`),d&&typeof d=="object"&&Object.entries(d).forEach(([h,f])=>{a++,f&&l++,console.log(`  Requirement: ${h} = ${f}`)})});const c=a>0?Math.round(l/a*100):0;return console.log(`Total requirements: ${a}, Completed: ${l}`),console.log(`Calculated completion percentage: ${c}%`),c}catch(n){return console.error("Error calculating student progress:",n),0}}async updateStudentProgress(t,r){try{console.log(`=== UPDATING APPLICATION PROGRESS FOR ${r} ===`);const n=await this.calculateStudentProgress(t,r),s=se(te,`Schoolss/${t}/Application Progress/${r}`);await ot(s,n),console.log(` Updated Application Progress for ${r}: ${n}%`)}catch(n){throw console.error(" Error updating student progress:",n),n}}async updateCurrentUserProgress(){try{const t=Ue.getCurrentUser();if(!t||!t.name||!t.school){console.log("No user data found, cannot update progress");return}await this.updateStudentProgress(t.school,t.name)}catch(t){throw console.error("Error updating current user progress:",t),t}}async getStudentProgress(t,r){try{const n=se(te,`Schoolss/${t}/Application Progress/${r}`),s=await Pe(n);if(s.exists())return s.val();const i=await this.calculateStudentProgress(t,r);return await this.updateStudentProgress(t,r),i}catch(n){return console.error("Error getting student progress:",n),0}}async getCurrentUserProgress(){try{const t=Ue.getCurrentUser();return!t||!t.name||!t.school?(console.log("No user data found, cannot get progress"),0):await this.getStudentProgress(t.school,t.name)}catch(t){return console.error("Error getting current user progress:",t),0}}}const Th=new zB,WB=()=>{const[e,t]=x.useState([]),[r,n]=x.useState({}),[s,i]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]});x.useEffect(()=>{p()},[]);const p=async()=>{try{console.log("=== LOADING APPLICATIONS FROM FIREBASE (Desktop) ===");const A=Ue.getCurrentUser();if(!A||!A.name||!A.school){console.log("No user data found, cannot load applications:",A);return}console.log("Loading applications for user:",A.name,"in school:",A.school);const S=se(te,`Schoolss/${A.school}/Applications/${A.name}`);console.log("Firebase path:",`Schoolss/${A.school}/Applications/${A.name}`);const E=await Pe(S);if(E.exists()){const O=E.val();console.log("Found applications data:",O);const R=[];Object.entries(O).forEach(([F,I],D)=>{if(console.log(`Processing university: ${F}`,I),I&&typeof I=="object"){const L=[];Object.entries(I).forEach(([V,he],ue)=>{console.log(`  Requirement: ${V} = ${he}`),L.push({id:Date.now()+D*100+ue,name:V,completed:he})});const B=L.filter(V=>V.completed).length,q=Math.round(B/L.length*100);console.log(`  University: ${F}, Completion: ${q}%`),R.push({id:Date.now()+D,universityName:F,program:"Program Name",deadline:"2025-05-01",priority:"Medium",status:q===100?"Submitted":"In Progress",completionPercentage:q,requirements:L,notes:""})}}),console.log("Loaded applications:",R),t(R)}else console.log("No applications found in Firebase"),t([])}catch(A){console.error("Error loading applications from Firebase:",A),t([])}},v=async A=>{try{const S=A.split("@")[0].toLowerCase();console.log("Looking for username:",S);const E=se(te,"Schoolss"),O=await Pe(E);if(!O.exists())return console.log("No Schoolss node found"),null;const R=O.val();console.log("Found schools:",Object.keys(R));for(const[F,I]of Object.entries(R))if(console.log(`Checking school: ${F}`),I&&typeof I=="object"&&"users"in I){const D=I.users;if(D&&S in D)return console.log(`Found user ${S} in school: ${F}`),F}return console.log("User not found in any school"),null}catch(S){return console.error("Error finding user school:",S),null}},b=(A,S)=>{t(E=>E.map(O=>{if(O.id===A){const R=O.requirements.map(L=>L.id===S?{...L,completed:!L.completed}:L),F=R.filter(L=>L.completed).length,I=Math.round(F/R.length*100),D=O.requirements.find(L=>L.id===S);return D&&w(O.universityName,D.name,!D.completed),{...O,requirements:R,completionPercentage:I}}return O}))},w=async(A,S,E)=>{try{const O=Ue.getCurrentUser();if(O&&O.name&&O.school){const R=se(te,`Schoolss/${O.school}/Applications/${O.name}/${A}/${S}`);await ot(R,E),console.log(`Updated requirement ${S} to ${E} for ${A}`),await Th.updateCurrentUserProgress(),console.log("Application Progress updated after requirement change")}}catch(O){console.error("Error updating requirement in Firebase:",O)}},_=async A=>{try{console.log("=== STARTING FIREBASE SAVE (Desktop) ==="),console.log("Application data:",A);const S=Ue.getCurrentUser();if(console.log("Current stored user:",S),!S)throw new Error("No user data found in storage. Please log in again.");const E=`${S.username}@gmail.com`;console.log("Reconstructed email:",E);const O=await v(E);if(console.log("Found school:",O),!O)throw new Error("Could not find your school in the database. Please contact support.");const R=se(te,`Schoolss/${O}/users/${S.username}`),F=await Pe(R);if(!F.exists())throw new Error("User data not found in school database.");const I=F.val(),D=I.Name||I.name||S.name;console.log("Using user name for Applications:",D);const L=`Schoolss/${O}/Applications/${D}/${A.universityName}`;console.log("Firebase application path:",L);const B={};if(A.requirements.forEach(V=>{V.trim()&&(B[V.trim()]=!1)}),console.log("Requirements data to save:",B),Object.keys(B).length===0)throw new Error("No valid requirements to save");console.log("Attempting to save to Firebase...");const q=se(te,L);return await ot(q,B),console.log(" Application saved successfully to Firebase!"),!0}catch(S){throw console.error(" Error saving application to Firebase:",S),S instanceof Error&&console.error("Error message:",S.message),new Error(`Failed to save application: ${S instanceof Error?S.message:"Unknown error"}`)}},j=async()=>{if(g.universityName&&g.program&&g.requirements.length>0){u(!0);try{await _(g);const A=g.requirements.map((E,O)=>({id:Date.now()+O,name:E,completed:!1})),S={id:Date.now(),universityName:g.universityName,program:g.program,deadline:"2025-05-01",priority:"Medium",status:"In Progress",completionPercentage:0,notes:"",requirements:A};t(E=>[...E,S]),y({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]}),l(!1),h("Application has been added to tracker successfully!"),setTimeout(()=>h(""),3e3),await Th.updateCurrentUserProgress(),console.log("Application Progress updated after adding new application"),await p()}catch(A){console.error("Error adding application:",A),m(`Error adding application: ${A instanceof Error?A.message:"Please try again."}`),setTimeout(()=>m(""),5e3)}finally{u(!1)}}},N=()=>{g.requirements.length<15&&y(A=>({...A,requirements:[...A.requirements,""]}))},k=A=>{y(S=>({...S,requirements:S.requirements.filter((E,O)=>O!==A)}))},T=(A,S)=>{const E=qv(S);n(O=>{const R={...O};return E?R[A]=E:delete R[A],R}),y(O=>({...O,requirements:O.requirements.map((R,F)=>F===A?S:R)}))},P=A=>{switch(A){case"Submitted":return"text-green-600 bg-green-100";case"Under Review":return"text-blue-600 bg-blue-100";case"Decision Pending":return"text-purple-600 bg-purple-100";default:return"text-yellow-600 bg-yellow-100"}},C={avgCompletion:Math.round(e.reduce((A,S)=>A+S.completionPercentage,0)/e.length)||0,total:e.length,inProgress:e.filter(A=>A.status==="In Progress").length,submitted:e.filter(A=>A.status==="Submitted").length};return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[d&&o.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ar,{className:"w-5 h-5 mr-2"}),d]})}),f&&o.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(at,{className:"w-5 h-5 mr-2"}),f]})}),o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Application Tracker"}),o.jsx("p",{className:"text-gray-600",children:"Monitor your university application progress and deadlines"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[o.jsx(ur,{className:"w-5 h-5 mr-2"}),"Add Application"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(tn,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[C.avgCompletion,"%"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Completion"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:o.jsx(ke,{className:"w-6 h-6 text-[#04adee]"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.total}),o.jsx("div",{className:"text-sm text-gray-600",children:"Total Applications"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:o.jsx(Cr,{className:"w-6 h-6 text-yellow-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.inProgress}),o.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(ar,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.submitted}),o.jsx("div",{className:"text-sm text-gray-600",children:"Submitted"})]})]})})]}),o.jsx("div",{className:"space-y-6",children:e.map(A=>{const S=A.requirements.filter(O=>O.completed).length,E=Math.ceil((new Date(A.deadline).getTime()-new Date().getTime())/(1e3*60*60*24));return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-6",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:A.universityName}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P(A.status)}`,children:A.status})]}),o.jsx("p",{className:"text-gray-600 mb-2",children:A.program}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(wt,{className:"w-4 h-4 mr-1"}),"Deadline: ",new Date(A.deadline).toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Cr,{className:"w-4 h-4 mr-1"}),E>0?`${E} days left`:"Overdue"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-[#04adee]",children:[A.completionPercentage,"%"]}),o.jsx(pa,{className:"w-5 h-5 text-[#04adee]"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[S," of ",A.requirements.length," completed"]})]})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${A.completionPercentage}%`}})})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Requirements Checklist:"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:A.requirements.map(O=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:()=>b(A.id,O.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${O.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:O.completed&&o.jsx(ar,{className:"w-3 h-3"})}),o.jsx("span",{className:`flex-1 ${O.completed?"line-through text-gray-500":"text-gray-700"}`,children:O.name}),O.dueDate&&o.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(O.dueDate).toLocaleDateString()]})]},O.id))})]}),A.notes&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Notes:"}),o.jsx("p",{className:"text-gray-700 text-sm",children:A.notes})]})]},A.id)})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Add New Application"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),o.jsx("input",{type:"text",value:g.universityName,onChange:A=>y(S=>({...S,universityName:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Stanford University"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program"}),o.jsx("input",{type:"text",value:g.program,onChange:A=>y(S=>({...S,program:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),o.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.requirements.map((A,S)=>o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:A,onChange:E=>T(S,E.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${r[S]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),o.jsx("button",{onClick:()=>k(S),className:"p-2 text-red-500 hover:text-red-700",children:o.jsx(on,{className:"w-4 h-4"})})]}),r[S]&&o.jsx("p",{className:"text-red-600 text-xs ml-3",children:r[S]})]},S))})]})]}),o.jsxs("div",{className:"flex space-x-3 mt-6",children:[o.jsx("button",{onClick:j,disabled:c||!g.universityName||!g.program||Object.keys(r).length>0,className:"flex-1 bg-[#04adee] text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:c?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),o.jsx("button",{onClick:()=>i(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors font-medium",children:"Cancel"})]})]})}),e.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ke,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications yet"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Start tracking your university applications to stay organized."}),o.jsx("button",{onClick:()=>l(!0),className:"bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Add Your First Application"})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Application"}),o.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(at,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),o.jsx("input",{type:"text",value:g.universityName,onChange:A=>y(S=>({...S,universityName:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., University of Chicago"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program Name"}),o.jsx("input",{type:"text",value:g.program,onChange:A=>y(S=>({...S,program:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),o.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.requirements.map((A,S)=>o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:A,onChange:E=>T(S,E.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${r[S]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),o.jsx("button",{onClick:()=>k(S),className:"p-2 text-red-500 hover:text-red-700",children:o.jsx(on,{className:"w-4 h-4"})})]}),r[S]&&o.jsx("p",{className:"text-red-600 text-xs ml-3",children:r[S]})]},S))})]})]}),o.jsxs("div",{className:"flex space-x-3 mt-6",children:[o.jsx("button",{onClick:j,disabled:c||!g.universityName.trim()||!g.program.trim()||Object.keys(r).length>0,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:c?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),o.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})})]})};class HB{constructor(){wa(this,"SCHOOL_NAME","Soofia International School")}async fetchResourcesFromFirebase(){try{console.log("=== FETCHING RESOURCES FROM FIREBASE ===");const t=se(te,`Schoolss/${this.SCHOOL_NAME}/Resources`),r=await Pe(t);if(!r.exists())return console.log("No Resources node found for",this.SCHOOL_NAME),[];const n=r.val();console.log("Found resources data:",n);const s=[];return Object.entries(n).forEach(([i,a])=>{if(a&&typeof a=="object"){const l=a,c=[];l["Key Words"]&&Object.keys(l["Key Words"]).forEach(u=>{l["Key Words"][u]&&c.push(u)}),s.push({id:i.replace(/\s+/g,"-").toLowerCase(),title:i,type:l["Resource Type"]||"Article",author:l.Owner||"Unknown",description:l.Description||"",url:l.Link||"",category:l["Helps with"]||"General",duration:l.Duration,keywords:c}),console.log(`Extracted resource: ${i}`,{type:l["Resource Type"],author:l.Owner,category:l["Helps with"],keywords:c})}}),console.log(` Successfully fetched ${s.length} resources`),s}catch(t){return console.error(" Error fetching resources from Firebase:",t),[]}}}const qB=new HB,VB=()=>{const[e,t]=x.useState(""),[r,n]=x.useState(""),[s,i]=x.useState(""),[a,l]=x.useState([]),[c,u]=x.useState(!0);x.useEffect(()=>{d()},[]);const d=async()=>{u(!0);try{const p=await qB.fetchResourcesFromFirebase();l(p)}catch(p){console.error("Error loading resources:",p)}finally{u(!1)}},h=["Essays","Applications","Financial Aid","University Selection","Test Prep","General"],f=["Article","Video","Guide","Template","Webinar"],m=a.filter(p=>{const v=p.title.toLowerCase().includes(e.toLowerCase())||p.description.toLowerCase().includes(e.toLowerCase())||p.author.toLowerCase().includes(e.toLowerCase())||p.keywords.some(_=>_.toLowerCase().includes(e.toLowerCase())),b=r===""||p.category===r,w=s===""||p.type===s;return v&&b&&w}),g=p=>{switch(p){case"Video":return Go;case"Article":return ke;case"Guide":return Er;case"Template":return kx;case"Webinar":return ia;default:return ke}},y=p=>({Article:"bg-blue-100 text-blue-800",Video:"bg-red-100 text-red-800",Guide:"bg-green-100 text-green-800",Template:"bg-purple-100 text-purple-800",Webinar:"bg-orange-100 text-orange-800"})[p]||"bg-gray-100 text-gray-800";return c?o.jsx("div",{className:"p-6 max-w-7xl mx-auto flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-[#04adee] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading resources..."})]})}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Resources & Guides"}),o.jsx("p",{className:"text-gray-600",children:"Comprehensive resources to help you succeed in your university applications"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search resources, authors, or topics...",value:e,onChange:p=>t(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(vB,{className:"w-5 h-5 text-gray-500 mr-2"}),o.jsxs("select",{value:r,onChange:p=>n(p.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[o.jsx("option",{value:"",children:"All Categories"}),h.map(p=>o.jsx("option",{value:p,children:p},p))]})]}),o.jsx("div",{children:o.jsxs("select",{value:s,onChange:p=>i(p.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[o.jsx("option",{value:"",children:"All Types"}),f.map(p=>o.jsx("option",{value:p,children:p},p))]})})]})]})}),o.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-xl p-4 mb-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(zn,{className:"w-6 h-6 text-[#04adee] mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-[#04adee]",children:"Curated Resources"}),o.jsx("p",{className:"text-sm text-gray-700",children:"Hand-picked resources from successful students and admissions experts."})]})]})}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:m.map(p=>{const v=g(p.type);return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-300",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:o.jsx(v,{className:"w-5 h-5 text-[#04adee]"})}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y(p.type)}`,children:p.type})]}),o.jsx("div",{className:"text-xs text-gray-600 bg-gray-50 px-3 py-1 rounded-full font-medium",children:p.category})]}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:p.title}),o.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",p.author]}),o.jsx("p",{className:"text-gray-700 mb-3",children:p.description}),p.keywords.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"Key Topics:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:p.keywords.map(b=>o.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-3 py-1 rounded-full font-medium border border-[#04adee] border-opacity-20",children:b},b))})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:p.duration&&o.jsx("span",{children:p.duration})}),o.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:["Access Resource",o.jsx(Vo,{className:"w-4 h-4 ml-2"})]})]})]},p.id)})}),m.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Er,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No resources found"}),o.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]})]})},Tx=({counselorEmail:e,counselorName:t,counselorUniversity:r,counselorImage:n,onBack:s})=>{const[i,a]=x.useState([]),[l,c]=x.useState(null),[u,d]=x.useState(""),[h,f]=x.useState(!0),[m,g]=x.useState(!1),[y,p]=x.useState(null),[v,b]=x.useState(!1);x.useEffect(()=>{w()},[t]);const w=async()=>{try{f(!0),p(null);const k=`University Data/Timeslots/${t}`,T=se(te,k),P=await Pe(T);if(P.exists()){const C=P.val(),A=[];Object.entries(C).forEach(([S,E])=>{const[O,R]=S.split("_");A.push({id:S,date:O,timeRange:R,isAvailable:E===!1,rawKey:S})}),A.sort((S,E)=>{const O=S.date.localeCompare(E.date);return O!==0?O:S.timeRange.localeCompare(E.timeRange)}),a(A)}else a([]),p("No timeslots available for this counselor")}catch(k){console.error("Error loading timeslots:",k),p(`Failed to load timeslots: ${k instanceof Error?k.message:"Unknown error"}`),a([])}finally{f(!1)}},_=async()=>{if(!l||!u.trim()){p("Please select a time slot and provide an agenda");return}try{g(!0),p(null);const k=Ue.getStoredUser();if(!k||!k.name){p("Unable to identify logged-in student"),g(!1);return}const T=k.name,P=new Date().toISOString(),A=`https://meet.jit.si/educare-meeting-${`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}`,S=`University Data/Timeslots/${t}/${l.rawKey}`,E=se(te,S);await ot(E,!0);const O=`Upcoming meetings/${t}/${T}/${l.rawKey}`,R=se(te,O);await ot(R,{agenda:u.trim(),requestedAt:P,meetingLink:A,studentEmail:k.email||"",counselorName:t}),g(!1),b(!0),setTimeout(()=>{s()},2500)}catch(k){console.error("Error creating meeting request:",k),p("Failed to submit meeting request"),g(!1)}},j=k=>new Date(k).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=()=>{const k={};return i.forEach(T=>{k[T.date]||(k[T.date]=[]),k[T.date].push(T)}),k};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 text-white shadow-lg",children:o.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-6",children:[o.jsxs("button",{onClick:s,className:"flex items-center text-white hover:bg-white hover:bg-opacity-20 rounded-lg px-4 py-2 transition-colors mb-4",children:[o.jsx(Kn,{className:"w-5 h-5 mr-2"}),"Back to Counselors"]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:n,alt:t,className:"w-20 h-20 rounded-full object-cover mr-5 border-4 border-white shadow-lg",onError:k=>{k.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Book a Meeting"}),o.jsx("p",{className:"text-xl text-blue-100",children:t}),o.jsx("p",{className:"text-blue-100",children:r})]})]})]})}),o.jsx("div",{className:"max-w-5xl mx-auto px-6 py-6",children:v?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsx("div",{className:"bg-green-50 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:o.jsx(ar,{className:"w-10 h-10 text-green-500"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Meeting Request Sent!"}),o.jsx("p",{className:"text-gray-600 text-base mb-2",children:"Your counselor will review your request and respond soon."}),o.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-4 inline-block",children:o.jsx("p",{className:"text-[#04adee] font-medium text-sm",children:"Check your meetings page for updates"})})]}):h?o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(Oh,{className:"w-12 h-12 animate-spin text-[#04adee] mb-3"}),o.jsx("span",{className:"text-lg text-gray-600 font-medium",children:"Loading available time slots..."}),o.jsx("span",{className:"text-sm text-gray-500 mt-1",children:"Please wait a moment"})]})}):i.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsx("div",{className:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:o.jsx(wt,{className:"w-10 h-10 text-gray-400"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Available Slots"}),o.jsx("p",{className:"text-gray-600 mb-1 text-sm",children:"This counselor has no available time slots at the moment."}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Please check back later or contact them via email."}),o.jsx("button",{onClick:s,className:"mt-6 px-6 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors text-sm",children:"Go Back"})]}):o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"bg-[#04adee] bg-opacity-10 rounded-full p-2 mr-3",children:o.jsx(wt,{className:"w-5 h-5 text-[#04adee]"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Choose Your Time"})]}),o.jsx("div",{className:"space-y-6",children:Object.entries(N()).map(([k,T])=>o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[o.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-4 flex items-center",children:[o.jsx("div",{className:"w-1 h-6 bg-[#04adee] rounded mr-3"}),j(k)]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:T.map(P=>o.jsx("button",{onClick:()=>P.isAvailable&&c(P),disabled:!P.isAvailable,className:`px-3 py-3 rounded-lg border-2 transition-all ${P.isAvailable?(l==null?void 0:l.id)===P.id?"border-[#04adee] bg-[#04adee] text-white shadow-lg scale-105":"border-gray-300 bg-white hover:border-[#04adee] hover:shadow-md transform hover:scale-105":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Cr,{className:`w-4 h-4 mb-1.5 ${P.isAvailable?(l==null?void 0:l.id)===P.id?"text-white":"text-[#04adee]":"text-gray-400"}`}),o.jsx("span",{className:"text-sm font-bold",children:P.timeRange}),!P.isAvailable&&o.jsx("span",{className:"text-xs mt-1 text-gray-500",children:"Booked"})]})},P.id))})]},k))})]}),o.jsxs("div",{className:"mb-6 bg-gray-50 rounded-xl p-4 border border-gray-200",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("div",{className:"bg-[#04adee] bg-opacity-10 rounded-full p-2 mr-3",children:o.jsx(Cc,{className:"w-5 h-5 text-[#04adee]"})}),o.jsx("label",{className:"text-base font-bold text-gray-900",children:"Meeting Agenda"})]}),o.jsx("textarea",{value:u,onChange:k=>d(k.target.value),placeholder:"What would you like to discuss? (e.g., college application strategy, essay review, major selection...)",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-[#04adee] resize-none bg-white transition-all text-sm"}),o.jsxs("p",{className:"text-xs text-gray-600 mt-3 flex items-start",children:[o.jsx("span",{className:"text-[#04adee] mr-2",children:""}),"A clear agenda helps your counselor prepare and makes the meeting more productive"]})]}),y&&o.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[o.jsx(Cc,{className:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-red-800",children:"Error"}),o.jsx("p",{className:"text-xs text-red-600 mt-0.5",children:y})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[o.jsx("button",{onClick:_,disabled:!l||!u.trim()||m,className:"flex-1 bg-gradient-to-r from-[#04adee] to-blue-600 text-white px-6 py-3 rounded-lg font-semibold text-base hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transform hover:scale-105 disabled:hover:scale-100",children:m?o.jsxs(o.Fragment,{children:[o.jsx(Oh,{className:"w-5 h-5 animate-spin mr-2"}),"Sending Request..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ar,{className:"w-5 h-5 mr-2"}),"Request Meeting"]})}),o.jsx("button",{onClick:s,disabled:m,className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold text-base hover:bg-gray-50 transition-all disabled:opacity-50 text-gray-700 hover:border-gray-400",children:"Cancel"})]})]})})]})},GB=({onBookMeeting:e})=>{const[t,r]=x.useState("counselors"),[n,s]=x.useState([]),[i,a]=x.useState([]),[l,c]=x.useState(!0),[u,d]=x.useState(null),[h,f]=x.useState(!1),[m,g]=x.useState(null);x.useEffect(()=>{y(),p()},[]);const y=async()=>{try{c(!0),d(null);const w=Ue.getStoredUser();if(!w||!w.name){d("Unable to identify logged-in student"),s([]),c(!1);return}const _=w.name,N=se(te,"University Data/Caseloads"),k=await Pe(N),T=new Set;if(k.exists()){const S=k.val();Object.entries(S).forEach(([E,O])=>{O&&typeof O=="object"&&O[_]===!0&&T.add(E)})}const C=se(te,"University Data/University Counsellors /"),A=await Pe(C);if(A.exists()){const S=A.val(),E=[];Object.entries(S).forEach(([O,R])=>{if(R&&typeof R=="object"){const F=R,I=F.Name||O;if(T.has(I)){const D=[];F.Languages&&typeof F.Languages=="object"&&Object.entries(F.Languages).forEach(([q,V])=>{V===!0&&D.push(q)});const L=[];F.Specialties&&typeof F.Specialties=="object"&&Object.entries(F.Specialties).forEach(([q,V])=>{V===!0&&L.push(q)});const B={id:O,name:I,email:F.Email||F.email||"",university:F.University||"",year:F.Year||"",location:F.Location||"",profilePicture:F["Profile Picture"]||"https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150",bookingLink:F["Booking Link"]||F["booking link"]||"",languages:D,specialties:L,bio:`Expert counselor specializing in ${L.join(", ")}. Passionate about helping students achieve their academic dreams and navigate the university application process.`,experience:"3+ years guiding students",availability:"Mon-Fri: 9AM-5PM"};E.push(B)}}}),s(E)}else s([])}catch(w){console.error("Error loading counselors:",w),d(`Failed to load counselors: ${w instanceof Error?w.message:"Unknown error"}`),s([])}finally{c(!1)}},p=async()=>{try{const w=Ue.getStoredUser();if(!w||!w.name){a([]);return}const _=w.name,N=se(te,"Upcoming meetings"),k=await Pe(N);if(!k.exists()){a([]);return}const T=k.val(),P=[];Object.entries(T).forEach(([C,A])=>{if(A&&typeof A=="object"&&A[_]){const S=A[_];Object.entries(S).forEach(([E,O])=>{const[R,F]=E.split("_"),[I]=F.split("-"),[D,L,B]=R.split("-").map(Number),[q,V]=I.split(":").map(Number),he=new Date(D,L-1,B,q,V),ue=he.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),Ae=new Date(O.requestedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),ye=se(te,`University Data/University Counsellors /${C}`);Pe(ye).then(mt=>{let z="";mt.exists()&&(z=mt.val().university||""),P.push({id:`${C}-${E}`,counselorName:C,counselorUniversity:z,counselorImage:"",date:ue,time:F.replace("-"," - "),agenda:O.agenda||"",status:"accepted",requestedDate:Ae,meetingDateTime:he,meetingLink:O.meetingLink||void 0}),P.sort((ce,fe)=>ce.meetingDateTime.getTime()-fe.meetingDateTime.getTime()),a([...P])})})}}),P.length===0&&a([])}catch(w){console.error("Error loading upcoming meetings:",w),a([])}},v=w=>{g(w),f(!0)},b=w=>{if(w.email){const _=encodeURIComponent("University Guidance Consultation Request"),j=encodeURIComponent(`Dear ${w.name},

I would like to schedule a consultation regarding university guidance.

Best regards`);window.open(`mailto:${w.email}?subject=${_}&body=${j}`,"_self")}else alert("Email address not available for this counselor.")};return l?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx(Oh,{className:"w-8 h-8 animate-spin text-[#04adee] mr-3"}),o.jsx("span",{className:"text-lg text-gray-600",children:"Loading counselors..."})]})}):u?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[o.jsx("p",{className:"text-red-600 mb-4",children:u}),o.jsx("button",{onClick:y,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):h&&m?o.jsx(Tx,{counselorName:m.name,counselorUniversity:m.university,counselorImage:m.profilePicture,counselorEmail:m.email,onBack:()=>{f(!1),g(null),p()}}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"University Counselors"}),o.jsx("p",{className:"text-gray-600",children:"Connect with expert counselors and manage your meetings"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:o.jsxs("div",{className:"flex border-b border-gray-200",children:[o.jsx("button",{onClick:()=>r("counselors"),className:`flex-1 px-6 py-4 font-medium transition-colors ${t==="counselors"?"text-[#04adee] border-b-2 border-[#04adee]":"text-gray-600 hover:text-gray-900"}`,children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx(sa,{className:"w-5 h-5 mr-2"}),"Counselors"]})}),o.jsx("button",{onClick:()=>r("meetings"),className:`flex-1 px-6 py-4 font-medium transition-colors ${t==="meetings"?"text-[#04adee] border-b-2 border-[#04adee]":"text-gray-600 hover:text-gray-900"}`,children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx(wt,{className:"w-5 h-5 mr-2"}),"Upcoming Meetings"]})})]})}),t==="counselors"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(w=>o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:o.jsxs("div",{className:"px-6 pt-6 pb-6",children:[o.jsxs("div",{className:"flex items-start mb-4",children:[o.jsx("img",{src:w.profilePicture,alt:w.name,className:"w-20 h-20 rounded-full object-cover shadow-md",onError:_=>{_.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),o.jsx("div",{className:"ml-4 mt-1",children:o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:w.name})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(er,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),o.jsx("span",{className:"truncate",children:w.university})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(dr,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),o.jsxs("span",{children:[w.year," Student"]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(RP,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),o.jsx("span",{className:"truncate",children:w.location})]})]}),w.specialties.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Specialties"}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.specialties.map(_=>o.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-3 py-1 rounded-full",children:_},_))})]}),w.languages.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Languages"}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.languages.map(_=>o.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full",children:_},_))})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[o.jsxs("button",{onClick:()=>v(w),className:"flex-1 flex items-center justify-center bg-[#04adee] text-white px-4 py-2.5 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:[o.jsx(wt,{className:"w-4 h-4 mr-2"}),"Book Meeting"]}),o.jsxs("button",{onClick:()=>b(w),className:"flex-1 flex items-center justify-center bg-gray-600 text-white px-4 py-2.5 rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",children:[o.jsx(nu,{className:"w-4 h-4 mr-2"}),"Email"]})]})]})},w.id))}),n.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(kc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors available"}),o.jsx("p",{className:"text-gray-600",children:"Counselors data is not available at the moment."})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-4",children:i.filter(w=>w.meetingDateTime>new Date).map(w=>o.jsx("div",{className:"bg-white rounded-xl shadow-sm border-2 border-green-200 transition-all hover:shadow-md",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:w.counselorName}),o.jsx("p",{className:"text-sm text-gray-600",children:w.counselorUniversity})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[o.jsx(wt,{className:"w-4 h-4 mr-2 text-[#04adee]"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Meeting Date:"}),o.jsx("p",{className:"text-gray-600",children:w.date})]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[o.jsx(Cr,{className:"w-4 h-4 mr-2 text-[#04adee]"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Time Slot:"}),o.jsx("p",{className:"text-gray-600",children:w.time})]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[o.jsx(sa,{className:"w-4 h-4 mr-2 text-[#04adee]"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Requested On:"}),o.jsx("p",{className:"text-gray-600",children:w.requestedDate})]})]})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx($n,{className:"w-4 h-4 mr-2 text-gray-500 mt-1 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Meeting Agenda"}),o.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:w.agenda})]})]})}),o.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex items-start flex-1",children:[o.jsx(ar,{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-sm font-semibold text-green-900 mb-1",children:"Meeting Confirmed!"}),o.jsx("p",{className:"text-sm text-green-800",children:"Your meeting has been confirmed. Click the button below to join the video call at the scheduled time."})]})]})})}),w.meetingLink&&o.jsxs("button",{onClick:()=>window.open(w.meetingLink,"_blank"),className:"w-full bg-gradient-to-r from-[#04adee] to-[#0396d5] text-white px-6 py-3 rounded-lg font-semibold hover:from-[#0396d5] hover:to-[#027fb8] transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 mt-4",children:[o.jsx(Go,{className:"w-5 h-5"}),"Join Video Meeting"]}),!w.meetingLink&&o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-4 mt-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Cc,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-1",children:"Meeting Link Not Available"}),o.jsx("p",{className:"text-sm text-yellow-800",children:"The video meeting link will be available shortly. Please check back closer to the meeting time."})]})]})})]})},w.id))}),i.filter(w=>w.meetingDateTime>new Date).length===0&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[o.jsx(wt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No upcoming meetings"}),o.jsx("p",{className:"text-gray-600",children:"You have no confirmed meetings scheduled at this time."})]})]})]})},FP=({userRole:e="student"})=>{const t=[{id:"1",name:"Dr. Sarah Johnson",avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",role:"counselor",lastMessage:"I reviewed your essay draft. Let's discuss the revisions.",lastMessageTime:new Date(Date.now()-3e5),unreadCount:2,online:!0,typing:!1},{id:"2",name:"Michael Chen",avatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=100",role:"counselor",lastMessage:"Great progress on your Stanford application!",lastMessageTime:new Date(Date.now()-72e5),unreadCount:0,online:!1},{id:"3",name:"Emma Williams",avatar:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=100",role:"counselor",lastMessage:"Don't forget the scholarship deadline tomorrow",lastMessageTime:new Date(Date.now()-864e5),unreadCount:1,online:!0}],r=[{id:"s1",name:"Emma Wilson",avatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"Thank you for the feedback on my essay!",lastMessageTime:new Date(Date.now()-10*6e4),unreadCount:1,online:!0,typing:!1},{id:"s2",name:"Sophie Chen",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"When can we discuss my MIT application?",lastMessageTime:new Date(Date.now()-45*6e4),unreadCount:2,online:!0,typing:!1},{id:"s3",name:"Alex Johnson",avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"I submitted my Stanford application!",lastMessageTime:new Date(Date.now()-3*36e5),unreadCount:0,online:!1},{id:"s4",name:"Maria Garcia",avatar:"https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"Could you review my personal statement?",lastMessageTime:new Date(Date.now()-5*36e5),unreadCount:0,online:!1},{id:"s5",name:"James Kim",avatar:"https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?auto=compress&cs=tinysrgb&w=100",role:"student",lastMessage:"Thanks for helping with the scholarship application",lastMessageTime:new Date(Date.now()-24*36e5),unreadCount:0,online:!0}],[n]=x.useState(e==="counselor"?r:t),[s,i]=x.useState(n[0]),a=[{id:"1",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Hi! I hope you're doing well. I wanted to touch base about your college essays.",timestamp:new Date(Date.now()-36e5),type:"text",status:"read"},{id:"2",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Hi Dr. Johnson! Yes, I've been working on them. I finished my personal statement draft.",timestamp:new Date(Date.now()-35e5),type:"text",status:"read"},{id:"3",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Personal Statement - Draft 1",timestamp:new Date(Date.now()-34e5),type:"document",mediaUrl:"#",fileName:"Personal_Statement_Draft1.pdf",fileSize:"245 KB",status:"read"},{id:"4",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Excellent! I'll review it this evening and provide detailed feedback.",timestamp:new Date(Date.now()-32e5),type:"text",status:"read"},{id:"5",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"I've reviewed your essay. Here are my detailed notes and suggestions.",timestamp:new Date(Date.now()-18e5),type:"text",status:"read"},{id:"6",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Essay Feedback - Detailed Comments",timestamp:new Date(Date.now()-17e5),type:"document",mediaUrl:"#",fileName:"Essay_Feedback_Comments.pdf",fileSize:"892 KB",status:"read"},{id:"7",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Thank you so much! I really appreciate the detailed feedback. I'll work on the revisions this weekend.",timestamp:new Date(Date.now()-3e5),type:"text",status:"delivered"},{id:"8",senderId:"1",senderName:"Dr. Sarah Johnson",senderAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Perfect! Feel free to reach out if you have any questions while you're working on it.",timestamp:new Date(Date.now()-6e4),type:"text",status:"read"}],l=[{id:"1",senderId:"s1",senderName:"Emma Wilson",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Hi Dr. Johnson! I just finished my Stanford supplemental essay. Would you mind taking a look?",timestamp:new Date(Date.now()-72e5),type:"text",status:"read"},{id:"2",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",content:"Of course! Please share it with me and I'll review it today.",timestamp:new Date(Date.now()-7e6),type:"text",status:"read"},{id:"3",senderId:"s1",senderName:"Emma Wilson",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Stanford Supplemental Essay - Draft",timestamp:new Date(Date.now()-68e5),type:"document",mediaUrl:"#",fileName:"Stanford_Supplemental_Essay.pdf",fileSize:"178 KB",status:"read"},{id:"4",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",content:"I've reviewed your essay! Overall, it's a strong piece. I've added some comments for areas that could use more depth.",timestamp:new Date(Date.now()-36e5),type:"text",status:"read"},{id:"5",senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",content:"Stanford Essay - Feedback and Comments",timestamp:new Date(Date.now()-35e5),type:"document",mediaUrl:"#",fileName:"Stanford_Essay_Feedback.pdf",fileSize:"421 KB",status:"read"},{id:"6",senderId:"s1",senderName:"Emma Wilson",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:"Thank you for the feedback on my essay! This is really helpful. I'll work on incorporating your suggestions.",timestamp:new Date(Date.now()-6e5),type:"text",status:"delivered"}],[c,u]=x.useState(e==="counselor"?l:a),[d,h]=x.useState(""),[f,m]=x.useState(!1),[g,y]=x.useState(""),[p,v]=x.useState(!1),[b,w]=x.useState(!0),_=x.useRef(null),j=x.useRef(null),N=()=>{var E;(E=_.current)==null||E.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{N()},[c]);const k=()=>{if(!d.trim())return;const E={id:Date.now().toString(),senderId:"me",senderName:"You",senderAvatar:"https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100",content:d,timestamp:new Date,type:"text",status:"sending"};u([...c,E]),h(""),setTimeout(()=>{u(O=>O.map(R=>R.id===E.id?{...R,status:"sent"}:R))},500),setTimeout(()=>{u(O=>O.map(R=>R.id===E.id?{...R,status:"delivered"}:R))},1e3)},T=E=>{var O;v(!1),(O=j.current)==null||O.click()},P=E=>{const R=new Date().getTime()-E.getTime(),F=Math.floor(R/6e4),I=Math.floor(R/36e5),D=Math.floor(R/864e5);return F<1?"Just now":F<60?`${F}m ago`:I<24?`${I}h ago`:D<7?`${D}d ago`:E.toLocaleDateString()},C=E=>E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),A=E=>{switch(E){case"sent":return o.jsx(Gl,{className:"w-4 h-4 text-gray-400"});case"delivered":return o.jsx(Q1,{className:"w-4 h-4 text-gray-400"});case"read":return o.jsx(Q1,{className:"w-4 h-4 text-blue-500"});default:return o.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse"})}},S=E=>{const O=E.senderId==="me";return o.jsx("div",{className:`flex ${O?"justify-end":"justify-start"} mb-4`,children:o.jsxs("div",{className:`flex ${O?"flex-row-reverse":"flex-row"} items-end max-w-[70%]`,children:[!O&&o.jsx("img",{src:E.senderAvatar,alt:E.senderName,className:"w-8 h-8 rounded-full mr-2"}),o.jsxs("div",{children:[E.type==="text"&&o.jsx("div",{className:`px-4 py-2 rounded-2xl ${O?"bg-blue-600 text-white rounded-br-sm":"bg-gray-100 text-gray-900 rounded-bl-sm"}`,children:o.jsx("p",{className:"text-sm",children:E.content})}),E.type==="document"&&o.jsx("div",{className:`px-4 py-3 rounded-2xl border ${O?"bg-blue-50 border-blue-200 rounded-br-sm":"bg-gray-50 border-gray-200 rounded-bl-sm"}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(ke,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:E.fileName}),o.jsx("p",{className:"text-xs text-gray-500",children:E.fileSize})]}),o.jsx("button",{className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:o.jsx(kx,{className:"w-4 h-4 text-gray-600"})})]})}),E.type==="image"&&o.jsx("div",{className:"rounded-2xl overflow-hidden",children:o.jsx("img",{src:E.mediaUrl,alt:"Shared image",className:"max-w-full h-auto"})}),o.jsxs("div",{className:`flex items-center space-x-1 mt-1 ${O?"justify-end":"justify-start"}`,children:[o.jsx("span",{className:"text-xs text-gray-500",children:C(E.timestamp)}),O&&A(E.status)]})]})]})},E.id)};return o.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o.jsxs("div",{className:`${b?"block":"hidden"} lg:block w-full lg:w-80 bg-white border-r border-gray-200 flex flex-col`,children:[o.jsxs("div",{className:"p-4 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Messages"}),o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search conversations...",value:g,onChange:E=>y(E.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 border-none rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:n.map(E=>o.jsxs("button",{onClick:()=>{i(E),w(!1)},className:`w-full p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors border-b border-gray-100 ${(s==null?void 0:s.id)===E.id?"bg-blue-50":""}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:E.avatar,alt:E.name,className:"w-12 h-12 rounded-full object-cover"}),E.online&&o.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:E.name}),o.jsx("span",{className:"text-xs text-gray-500 ml-2",children:P(E.lastMessageTime)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-gray-600 truncate",children:E.typing?o.jsx("span",{className:"text-blue-600 italic",children:"typing..."}):E.lastMessage}),E.unreadCount>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:E.unreadCount})]}),o.jsx("span",{className:"text-xs text-gray-500 capitalize",children:E.role})]})]},E.id))})]}),s?o.jsxs("div",{className:`${b?"hidden":"flex"} lg:flex flex-1 flex-col`,children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:()=>w(!0),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Kn,{className:"w-5 h-5"})}),o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:s.avatar,alt:s.name,className:"w-10 h-10 rounded-full object-cover"}),s.online&&o.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),o.jsx("p",{className:"text-xs text-gray-500",children:s.online?f?o.jsx("span",{className:"text-blue-600",children:"typing..."}):"Online":"Offline"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(NB,{className:"w-5 h-5 text-gray-600"})}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Go,{className:"w-5 h-5 text-gray-600"})}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(wB,{className:"w-5 h-5 text-gray-600"})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[c.map(S),f&&o.jsxs("div",{className:"flex items-end space-x-2",children:[o.jsx("img",{src:s.avatar,alt:s.name,className:"w-8 h-8 rounded-full"}),o.jsx("div",{className:"bg-gray-100 rounded-2xl rounded-bl-sm px-4 py-3",children:o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),o.jsx("div",{ref:_})]}),o.jsxs("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:[o.jsxs("div",{className:"flex items-end space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>v(!p),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(_B,{className:"w-5 h-5 text-gray-600"})}),p&&o.jsxs("div",{className:"absolute bottom-full mb-2 left-0 bg-white rounded-lg shadow-lg border border-gray-200 py-2 w-48",children:[o.jsxs("button",{onClick:()=>T(),className:"w-full px-4 py-2 flex items-center space-x-3 hover:bg-gray-50 transition-colors text-left",children:[o.jsx(yB,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Upload Image"})]}),o.jsxs("button",{onClick:()=>T(),className:"w-full px-4 py-2 flex items-center space-x-3 hover:bg-gray-50 transition-colors text-left",children:[o.jsx(ke,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Upload Document"})]})]})]}),o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),onKeyPress:E=>E.key==="Enter"&&k(),placeholder:"Type a message...",className:"w-full px-4 py-3 bg-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10"}),o.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 rounded transition-colors",children:o.jsx(EB,{className:"w-5 h-5 text-gray-600"})})]}),o.jsx("button",{onClick:k,disabled:!d.trim(),className:"p-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed rounded-full transition-colors",children:o.jsx(_o,{className:"w-5 h-5 text-white"})})]}),o.jsx("input",{ref:j,type:"file",className:"hidden",accept:"image/*,.pdf,.doc,.docx"})]})]}):o.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(_o,{className:"w-12 h-12 text-gray-400"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select a conversation"}),o.jsx("p",{className:"text-gray-500",children:"Choose a conversation from the list to start messaging"})]})})]})},KB=()=>{var Z,ie;const[e,t]=x.useState([]),[r,n]=x.useState(!1),[s,i]=x.useState(null),[a,l]=x.useState(""),[c,u]=x.useState("personal_statement"),[d,h]=x.useState(""),[f,m]=x.useState(!0),[g,y]=x.useState(!1),[p,v]=x.useState(""),[b,w]=x.useState(null),[_,j]=x.useState(null),[N,k]=x.useState("draft"),[T,P]=x.useState("list"),C=x.useRef(null);x.useRef(null);const A=Ue.getStoredUser(),S=(A==null?void 0:A.name)||"Unknown Student",E=["Arial","Times New Roman","Georgia","Calibri","Verdana","Helvetica","Courier New","Palatino"],O=[12,14,16,18,20,22,24],R=$=>{switch($){case"personal_statement":return"Personal Statement";case"supplement":return"Supplemental Essay";case"activity_list":return"Activity List";default:return $}},F=$=>{switch($){case"personal_statement":return"bg-purple-100 text-purple-700";case"supplement":return"bg-blue-100 text-blue-700";case"activity_list":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},I=$=>{const G=new Date($),re=G.getDate(),de=["th","st","nd","rd"][re%10>3||Math.floor(re/10)===1?0:re%10],Fe=["January","February","March","April","May","June","July","August","September","October","November","December"][G.getMonth()],Ne=G.getFullYear(),Vt=G.getHours(),gr=G.getMinutes().toString().padStart(2,"0"),rl=Vt>=12?"PM":"AM",rp=Vt%12||12;return`${re}${de} ${Fe} ${Ne} at ${rp}:${gr} ${rl}`},D=()=>{const $=e.length,G=e.filter(de=>de.status==="reviewed").length,re=e.filter(de=>de.status==="submitted").length;return{total:$,reviewed:G,submitted:re}},L=()=>e.filter($=>$.status===N),B=$=>new Date($).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),q=$=>{i($),P("editor")},V=()=>{P("list"),i(null)},he=($,G)=>{if(!G||G.length===0)return o.jsx("div",{dangerouslySetInnerHTML:{__html:$}});const re=[...G].sort((Fe,Ne)=>Fe.start_position-Ne.start_position),de=[];let je=0;return re.forEach((Fe,Ne)=>{Fe.start_position>je&&de.push(o.jsx("span",{children:$.substring(je,Fe.start_position)},`text-${Ne}`)),de.push(o.jsx("span",{className:`cursor-pointer transition-colors ${(b==null?void 0:b.id)===Fe.id?"bg-yellow-300 border-b-2 border-yellow-600":"bg-yellow-200 border-b-2 border-yellow-500 hover:bg-yellow-300"}`,onClick:Vt=>{Vt.stopPropagation();const gr=Vt.target.getBoundingClientRect();j({top:gr.bottom+window.scrollY+8,left:gr.left+window.scrollX}),w(Fe)},children:$.substring(Fe.start_position,Fe.end_position)},`comment-${Ne}`)),je=Fe.end_position}),je<$.length&&de.push(o.jsx("span",{children:$.substring(je)},"text-end")),o.jsx("div",{children:de})},ue=$=>$.replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").trim().split(/\s+/).filter(de=>de.length>0).length,xe=$=>{document.execCommand($,!1),C.current&&s&&Ae()},Ae=()=>{if(C.current&&s){const $=C.current.innerHTML,G=ue($);i({...s,content:$,wordCount:G})}};x.useEffect(()=>{const $=se(te,`University Data/Essays/${S}`),G=Xr($,re=>{if(!re.exists()){t([]),m(!1);return}const de=[],je=re.val();Object.keys(je).forEach(Fe=>{const Ne=je[Fe];de.push({id:Fe,title:Fe,type:Ne.essayType||"personal_statement",content:Ne.essayText||"",wordCount:Ne.wordCount||0,status:Ne.status||"draft",createdAt:Ne.createdAt||new Date().toISOString().split("T")[0],lastModified:Ne.lastModified||new Date().toISOString().split("T")[0],submittedAt:Ne.submittedAt||void 0,universityName:Ne.universityName||void 0,fontFamily:Ne.fontFamily||"Arial",fontSize:Ne.fontSize||14,reviewData:Ne.reviewData||void 0})}),de.sort((Fe,Ne)=>new Date(Ne.createdAt).getTime()-new Date(Fe.createdAt).getTime()),t(de),m(!1)});return()=>G()},[S]);const ye=async $=>{const G=se(te,`University Data/Essays/${S}/${$.title}`);await ot(G,{essayTitle:$.title,essayText:$.content,essayType:$.type,status:$.status,wordCount:$.wordCount,createdAt:$.createdAt,lastModified:$.lastModified,submittedAt:$.submittedAt||null,universityName:$.universityName||null,fontFamily:$.fontFamily,fontSize:$.fontSize,reviewData:$.reviewData||null})},mt=async()=>{if(!a.trim())return;if(c==="supplement"&&!d.trim()){alert("Please enter the university name for this supplementary essay");return}const $={id:a,title:a,type:c,content:"",wordCount:0,status:"draft",createdAt:new Date().toISOString().split("T")[0],lastModified:new Date().toISOString().split("T")[0],universityName:c==="supplement"?d:void 0,fontFamily:"Arial",fontSize:14};await ye($),i($),P("editor"),n(!1),l(""),u("personal_statement"),h("")},z=async $=>{if(!s)return;const G={...s,fontFamily:$};i(G),await ye(G)},ce=async $=>{if(!s)return;const G={...s,fontSize:$};i(G),await ye(G)},fe=$=>{v($),y(!0),setTimeout(()=>{y(!1)},3e3)},M=async()=>{if(!s||!C.current)return;const $={...s,lastModified:new Date().toISOString().split("T")[0],status:"draft"};await ye($),i($),fe("Essay saved as draft!")},ne=async()=>{if(!s)return;const $={...s,status:"submitted",lastModified:new Date().toISOString().split("T")[0],submittedAt:new Date().toISOString()};await ye($),i($),fe("Essay submitted for review!")};return x.useEffect(()=>{C.current&&s&&(C.current.innerHTML=s.content)},[s==null?void 0:s.id]),x.useEffect(()=>{const $=G=>{if(b){const re=G.target;!re.closest(".comment-popup")&&!re.closest(".bg-yellow-200")&&!re.closest(".bg-yellow-300")&&(w(null),j(null))}};return document.addEventListener("click",$),()=>document.removeEventListener("click",$)},[b]),f?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})}):o.jsxs("div",{className:"p-4",children:[g&&o.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in fade-in slide-in-from-top-2 duration-300",children:o.jsxs("div",{className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3",children:[o.jsx(ar,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:p})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Essay Editor"}),o.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Write and manage your college application essays"})]}),o.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-1.5 bg-blue-600 text-white px-3 py-1.5 text-sm rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(ur,{className:"w-4 h-4"}),"New Essay"]})]}),r&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Create New Essay"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Essay Title"}),o.jsx("input",{type:"text",value:a,onChange:$=>l($.target.value),placeholder:"e.g., Common App Personal Statement",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Essay Type"}),o.jsxs("select",{value:c,onChange:$=>u($.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"personal_statement",children:"Personal Statement"}),o.jsx("option",{value:"supplement",children:"Supplemental Essay"}),o.jsx("option",{value:"activity_list",children:"Activity List"})]})]}),c==="supplement"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"University Name"}),o.jsx("input",{type:"text",value:d,onChange:$=>h($.target.value),placeholder:"e.g., Harvard University",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:mt,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Essay"}),o.jsx("button",{onClick:()=>{n(!1),l(""),u("personal_statement"),h("")},className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]}),e.length>0&&T==="list"&&o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-blue-600 mb-1",children:"Total Essays"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:D().total})]}),o.jsx("div",{className:"p-2 bg-blue-200 rounded-lg",children:o.jsx(ke,{className:"w-5 h-5 text-blue-700"})})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-green-600 mb-1",children:"Submitted"}),o.jsx("p",{className:"text-2xl font-bold text-green-900",children:D().submitted})]}),o.jsx("div",{className:"p-2 bg-green-200 rounded-lg",children:o.jsx(_o,{className:"w-5 h-5 text-green-700"})})]})}),o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-purple-600 mb-1",children:"Reviewed"}),o.jsx("p",{className:"text-2xl font-bold text-purple-900",children:D().reviewed})]}),o.jsx("div",{className:"p-2 bg-purple-200 rounded-lg",children:o.jsx(ar,{className:"w-5 h-5 text-purple-700"})})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx("button",{onClick:()=>k("draft"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${N==="draft"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Drafts"}),o.jsx("button",{onClick:()=>k("submitted"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${N==="submitted"?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:"Submitted"}),o.jsx("button",{onClick:()=>k("reviewed"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${N==="reviewed"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:"Reviewed"})]}),o.jsx("div",{className:"space-y-3",children:L().length>0?L().map($=>o.jsx("div",{onClick:()=>q($),className:"bg-white border border-gray-200 rounded-xl p-5 cursor-pointer transition-all hover:border-blue-400 hover:shadow-md group",children:o.jsxs("div",{className:"flex items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:$.title}),o.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${F($.type)}`,children:R($.type)}),$.universityName&&o.jsxs("span",{className:"text-xs text-gray-600 italic",children:["for ",$.universityName]})]}),o.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ke,{className:"w-4 h-4"}),o.jsxs("span",{children:[$.wordCount," words"]})]}),$.status==="reviewed"&&$.reviewData?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-gray-500",children:"Reviewed by"}),o.jsx("span",{className:"font-medium text-gray-900",children:$.reviewData.reviewedBy})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-gray-500",children:"on"}),o.jsx("span",{className:"font-medium text-gray-900",children:I($.reviewData.reviewedAt)})]})]}):$.status==="submitted"&&$.submittedAt?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-gray-500",children:"Submitted on"}),o.jsx("span",{className:"font-medium text-gray-900",children:I($.submittedAt)})]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-gray-500",children:"Last modified"}),o.jsx("span",{className:"font-medium text-gray-900",children:B($.lastModified)})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[$.status==="draft"&&o.jsxs("div",{className:"flex items-center gap-2 text-blue-600 bg-blue-50 px-4 py-2 rounded-lg",children:[o.jsx(Px,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Continue editing"})]}),$.status==="submitted"&&o.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-4 py-2 rounded-lg",children:[o.jsx(ar,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Awaiting review"})]}),$.status==="reviewed"&&o.jsxs("div",{className:"flex items-center gap-2 text-purple-600 bg-purple-50 px-4 py-2 rounded-lg",children:[o.jsx($n,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"View feedback"})]})]})]})},$.id)):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ke,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsxs("p",{className:"text-base text-gray-500",children:["No ",N," essays yet"]})]})})]})]}),T==="editor"&&s&&o.jsx("div",{className:"mb-4",children:o.jsxs("button",{onClick:V,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[o.jsx(Kn,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Back to Essays"})]})}),o.jsxs("div",{className:"relative",children:[b&&_&&o.jsx("div",{className:"comment-popup fixed z-50 bg-white rounded-xl shadow-2xl border border-lime-300 max-w-md animate-in fade-in slide-in-from-top-2 duration-200",style:{top:`${_.top}px`,left:`${_.left}px`,maxHeight:"300px",overflowY:"auto"},children:o.jsxs("div",{className:"px-5 py-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 pb-3 border-b border-gray-200",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"p-1.5 bg-lime-100 rounded-lg",children:o.jsx($n,{className:"w-4 h-4 text-lime-600"})}),o.jsx("p",{className:"text-sm font-bold text-gray-900",children:b.counselor_name})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1 ml-9",children:["Reviewed ",b.created_at?I(b.created_at):"recently"]})]}),o.jsx("button",{onClick:()=>{w(null),j(null)},className:"ml-6 p-1.5 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:b.comment_text})]})}),T==="editor"&&s?o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[o.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:s.title}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${F(s.type)}`,children:R(s.type)}),s.universityName&&o.jsxs("span",{className:"text-sm text-gray-600 italic",children:["for ",s.universityName]})]})]}),o.jsx("div",{className:"border-b border-gray-200 p-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>xe("bold"),disabled:s.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Bold",children:o.jsx(mB,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>xe("italic"),disabled:s.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Italic",children:o.jsx(xB,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>xe("underline"),disabled:s.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Underline",children:o.jsx(AB,{className:"w-3.5 h-3.5"})})]}),o.jsx("div",{className:"border-l border-gray-300 h-5"}),o.jsx("select",{value:s.fontFamily,onChange:$=>z($.target.value),disabled:s.status==="submitted",className:"px-2 py-1 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{fontFamily:s.fontFamily},children:E.map($=>o.jsx("option",{value:$,style:{fontFamily:$},children:$},$))}),o.jsx("select",{value:s.fontSize,onChange:$=>ce(Number($.target.value)),disabled:s.status==="submitted",className:"px-2 py-1 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.map($=>o.jsxs("option",{value:$,children:[$,"pt"]},$))}),o.jsx("div",{className:"border-l border-gray-300 h-5"}),o.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[s.wordCount," words"]})]}),s.status!=="reviewed"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:M,disabled:s.status==="submitted",className:"flex items-center gap-1.5 px-3 py-1.5 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(em,{className:"w-3.5 h-3.5"}),"Save Draft"]}),o.jsxs("button",{onClick:ne,disabled:s.status==="submitted"||s.wordCount===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(_o,{className:"w-3.5 h-3.5"}),"Submit for Review"]})]})]})}),s.status==="reviewed"&&((Z=s.reviewData)!=null&&Z.inlineComments)?o.jsx("div",{className:"essay-container p-6 min-h-[500px] relative",style:{fontSize:`${s.fontSize}pt`,lineHeight:"1.6",fontFamily:s.fontFamily,whiteSpace:"pre-wrap"},children:he(s.content,s.reviewData.inlineComments)}):o.jsx("div",{ref:C,contentEditable:s.status!=="submitted"&&s.status!=="reviewed",onInput:Ae,className:`essay-container p-6 min-h-[500px] focus:outline-none ${s.status==="submitted"||s.status==="reviewed"?"bg-gray-50 cursor-not-allowed":""}`,style:{fontSize:`${s.fontSize}pt`,lineHeight:"1.6",fontFamily:s.fontFamily}}),s.status==="submitted"&&o.jsx("div",{className:"border-t border-gray-200 p-3 bg-green-50",children:o.jsxs("p",{className:"text-xs text-green-700 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"This essay has been submitted for review and cannot be edited."]})}),s.status==="reviewed"&&s.reviewData&&o.jsx("div",{className:"border-t border-gray-200 p-3 bg-blue-50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ar,{className:"w-4 h-4 text-blue-600"}),o.jsxs("p",{className:"text-xs font-semibold text-blue-900",children:["Essay Reviewed by ",s.reviewData.reviewedBy]})]}),s.reviewData.reviewedAt&&o.jsxs("p",{className:"text-xs text-blue-700 ml-6",children:["Reviewed ",I(s.reviewData.reviewedAt)]})]}),s.reviewData.inlineComments&&s.reviewData.inlineComments.length>0&&o.jsxs("div",{className:"flex items-center gap-1.5 bg-yellow-100 px-2 py-1 rounded border border-yellow-300",children:[o.jsx($n,{className:"w-3 h-3 text-yellow-700"}),o.jsxs("p",{className:"text-xs text-yellow-700 font-medium",children:[s.reviewData.inlineComments.length," inline comment",s.reviewData.inlineComments.length!==1?"s":""," - click highlights"]})]})]})}),s.status==="reviewed"&&((ie=s.reviewData)==null?void 0:ie.generalComments)&&s.reviewData.generalComments.length>0&&o.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[o.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center gap-2",children:[o.jsx($n,{className:"w-4 h-4 text-blue-600"}),"General Feedback"]}),o.jsx("div",{className:"space-y-3",children:s.reviewData.generalComments.map($=>o.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-3 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("p",{className:"text-xs font-semibold text-gray-700",children:$.counselor_name}),o.jsx("p",{className:"text-xs text-gray-500",children:new Date($.created_at).toLocaleDateString()})]}),o.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:$.comment_text})]},$.id))})]})]}):null]})]})]})},YB=({onLogout:e,user:t})=>{const[r,n]=x.useState("profile"),[s,i]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState(null),[d,h]=x.useState(""),[f,m]=x.useState(""),g=()=>{switch(r){case"profile":return o.jsx(tj,{user:t});case"admit-profiles":return o.jsx(RB,{onViewProfile:y=>{u(y),n("profile-details")}});case"scholarships":return o.jsx(UB,{});case"applications":return o.jsx(WB,{});case"resources":return o.jsx(VB,{});case"counselors":return o.jsx(GB,{onBookMeeting:(y,p)=>{h(y),m(p),n("meeting-booking")}});case"chat":return o.jsx(FP,{userRole:"student"});case"essay-editor":return o.jsx(KB,{});case"profile-details":return c?o.jsx(MB,{profileId:c,onBack:()=>n("admit-profiles")}):null;case"meeting-booking":return o.jsx(Tx,{counselorEmail:d,counselorName:f,onBack:()=>n("counselors")});default:return o.jsx(tj,{user:t})}};return o.jsxs("div",{className:"flex h-screen bg-gray-50 relative overflow-hidden",children:[o.jsx("button",{onClick:()=>i(!s),className:"lg:hidden fixed top-4 left-4 z-50 bg-white p-2 rounded-lg shadow-lg border border-gray-200 touch-manipulation",children:s?o.jsx(at,{className:"w-6 h-6"}):o.jsx(MP,{className:"w-6 h-6"})}),s&&o.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30 touch-manipulation",onClick:()=>i(!1)}),o.jsx(OB,{currentPage:r,setCurrentPage:n,onLogout:e,isOpen:s,onClose:()=>i(!1),isCollapsed:a,onToggleCollapse:()=>l(!a)}),o.jsx("main",{className:"flex-1 overflow-y-auto lg:ml-0 w-full min-w-0",children:g()})]})},XB=({onLogin:e,onCounselorLogin:t})=>{const[r,n]=x.useState(""),[s,i]=x.useState(""),[a,l]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),p=async b=>{b.preventDefault(),h(""),m(""),y(""),u(!0);try{const w=await _A.authenticateUser({email:r,password:s});if(w.success&&w.user)if(console.log("Login successful:",w.user),(w.user.role==="pool_management"||w.user.role==="essay")&&t){console.log("Routing to counselor dashboard");const _={id:w.user.username,email:w.user.username,name:w.user.name,role:w.user.role};t(_)}else console.log("Routing to student dashboard"),e(w.user);else switch(w.error){case"USER_NOT_FOUND":h(w.message||"Email not found");break;case"WRONG_PASSWORD":m(w.message||"Incorrect password");break;case"NETWORK_ERROR":default:y(w.message||"Login failed. Please try again.");break}}catch(w){console.error("Login error:",w),y("Login failed. Please try again.")}finally{u(!1)}},v=()=>{n("kananelobutielliot@gmail.com"),i("12345"),h(""),m(""),y("")};return o.jsxs("div",{className:"min-h-screen bg-[#04adee] flex flex-col",children:[o.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center px-6 py-8",children:[o.jsx("div",{className:"mb-6",children:o.jsx("img",{src:"/blue logo.png",alt:"EduCare Logo",className:"w-20 h-20 object-contain opacity-90"})}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"EduCare"}),o.jsx("p",{className:"text-white text-lg font-medium mb-2",children:"University Guidance"}),o.jsx("p",{className:"text-white text-center text-sm opacity-90",children:"Your academic journey starts here"})]}),o.jsxs("div",{className:"bg-white rounded-t-3xl px-6 py-8 shadow-2xl",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-600",children:"Sign in to continue your journey"})]}),g&&o.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl",children:o.jsx("p",{className:"text-red-600 text-sm",children:g})}),o.jsxs("form",{onSubmit:p,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(nu,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"email",value:r,onChange:b=>n(b.target.value),className:`w-full pl-12 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-base ${d?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your email",required:!0})]}),d&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(DP,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),o.jsx("input",{type:a?"text":"password",value:s,onChange:b=>i(b.target.value),className:`w-full pl-12 pr-12 py-4 border rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-base ${f?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your password",required:!0}),o.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-4 top-4 text-gray-400",children:a?o.jsx(AP,{className:"w-5 h-5"}):o.jsx(PP,{className:"w-5 h-5"})})]}),f&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),o.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#04adee] text-white py-4 rounded-xl font-semibold text-base disabled:opacity-50 shadow-lg",children:c?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"}),o.jsx("button",{type:"button",onClick:v,className:"w-full bg-gray-100 text-gray-700 py-3 rounded-xl font-medium text-sm",children:"Use Demo Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"Demo: kananelobutielliot@gmail.com / 12345"})})]})]})},td=(e,t=2e3)=>{const[r,n]=x.useState(0);return x.useEffect(()=>{let s,i;const a=l=>{s||(s=l);const c=Math.min((l-s)/t,1);n(Math.floor(c*e)),c<1&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>cancelAnimationFrame(i)},[e,t]),r},JB=({percentage:e,className:t="bg-[#04adee]"})=>{const[r,n]=x.useState(0);return x.useEffect(()=>{const s=setTimeout(()=>n(e),100);return()=>clearTimeout(s)},[e]),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:`${t} h-2 rounded-full transition-all duration-1000 ease-out`,style:{width:`${r}%`}})})},rj=({percentage:e,size:t=80,strokeWidth:r=6,color:n="#04adee"})=>{const[s,i]=x.useState(0);x.useEffect(()=>{const u=setTimeout(()=>i(e),100);return()=>clearTimeout(u)},[e]);const a=(t-r)/2,l=a*2*Math.PI,c=l-s/100*l;return o.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[o.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[o.jsx("circle",{cx:t/2,cy:t/2,r:a,stroke:"#e5e7eb",strokeWidth:r,fill:"transparent"}),o.jsx("circle",{cx:t/2,cy:t/2,r:a,stroke:n,strokeWidth:r,fill:"transparent",strokeDasharray:l,strokeDashoffset:c,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(s),"%"]})})]})},nj=({user:e})=>{const[t,r]=x.useState(!1),[n,s]=x.useState(!1),i=()=>{if(e!=null&&e.name)return e.name;const E=Ue.getStoredUser();return E!=null&&E.name?(console.log("Using stored user name:",E.name),E.name):"Student"},a=()=>{if((e==null?void 0:e.averageGrade)!==void 0)return console.log("Using average grade from user prop:",e.averageGrade),e.averageGrade;const E=Ue.getStoredUser();return(E==null?void 0:E.averageGrade)!==void 0?(console.log("Using stored average grade:",E.averageGrade),E.averageGrade):(console.log("No average grade found, using default"),89)},l=()=>{if(e!=null&&e.subjectGrades)return console.log("Using subject grades from user prop:",e.subjectGrades),e.subjectGrades;const E=Ue.getStoredUser();return E!=null&&E.subjectGrades?(console.log("Using stored subject grades:",E.subjectGrades),E.subjectGrades):(console.log("No subject grades found, using defaults"),{Mathematics:88,English:92,Science:85,History:90,"Foreign Language":87})},[c,u]=x.useState({studentName:i(),currentGPA:a(),subjects:l(),classRank:15,totalStudents:320,satScore:1450,careerInterests:["Science","Technology","Engineering"],age:17,nationality:"United States",personalStatement:"Passionate about technology and innovation, I aim to pursue computer science to create solutions that impact society positively. My journey began when I first encountered programming in high school, and since then, I have been fascinated by the endless possibilities that technology offers to solve real-world problems.",activities:["Debate Club President","Varsity Soccer","Math Olympiad","Volunteer Tutor"],specialCircumstances:"First-generation college student, overcame family financial hardship",financialBudget:5e4}),[d,h]=x.useState(c),f=td(c.currentGPA),m=td(c.classRank),g=td(c.totalStudents),y=td(c.satScore),p=()=>{r(!0),h(c)},v=async()=>{s(!0);try{const E=Ue.getStoredUser(),O=(E==null?void 0:E.school)||(e==null?void 0:e.school),R=(E==null?void 0:E.username)||(e==null?void 0:e.username);if(!O||!R){console.error("Missing school or username information"),alert("Error: Missing user information. Please log in again."),s(!1);return}console.log("Saving profile data for:",R,"in school:",O);const F={Activities:{},Age:d.age.toString(),Nationality:d.nationality,SAT:d.satScore.toString(),"Career Interests":{},"Special Circumstances":d.specialCircumstances,"Personal Statement":d.personalStatement,Budget:d.financialBudget.toString()};d.activities.forEach((D,L)=>{D.trim()&&(F.Activities[D.trim()]="true")}),d.careerInterests.forEach((D,L)=>{D.trim()&&(F["Career Interests"][D.trim()]="true")});const I=se(te,`Schoolss/${O}/University Profiles/${R}`);await ot(I,F),console.log("Profile data saved successfully to Firebase!"),u(d),r(!1),alert("Profile saved successfully!")}catch(E){console.error("Error saving profile data:",E),alert("Error saving profile. Please try again.")}finally{s(!1)}},b=()=>{h(c),r(!1)},w=(E,O)=>{h(R=>({...R,[E]:O}))},_=()=>{d.activities.length<10&&h(E=>({...E,activities:[...E.activities,""]}))},j=E=>{h(O=>({...O,activities:O.activities.filter((R,F)=>F!==E)}))},N=(E,O)=>{h(R=>({...R,activities:R.activities.map((F,I)=>I===E?O:F)}))},k=()=>{d.careerInterests.length<10&&h(E=>({...E,careerInterests:[...E.careerInterests,""]}))},T=E=>{h(O=>({...O,careerInterests:O.careerInterests.filter((R,F)=>F!==E)}))},P=(E,O)=>{h(R=>({...R,careerInterests:R.careerInterests.map((F,I)=>I===E?O:F)}))},C=Object.entries(c.subjects);c.currentGPA;const A=C.reduce((E,O)=>E[1]>O[1]?E:O),S=C.reduce((E,O)=>E[1]<O[1]?E:O);return C.filter(([E,O])=>O<85),o.jsxs("div",{className:"min-h-screen bg-gray-100",children:[o.jsx("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 px-4 py-6",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("h1",{className:"text-xl font-bold mb-1",children:"Academic Analytics"}),o.jsx("p",{className:"text-blue-100 text-sm",children:"Performance Overview"})]})}),o.jsxs("div",{className:"px-4 -mt-4 pb-6",children:[o.jsx("div",{className:"mb-4",children:t?o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:v,disabled:n,className:"flex-1 bg-green-500 text-white py-3 rounded-xl font-semibold text-sm active:scale-95 transition-transform",children:n?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(em,{className:"w-4 h-4 mr-2 inline"}),"Save Changes"]})}),o.jsxs("button",{onClick:b,className:"flex-1 bg-gray-500 text-white py-3 rounded-xl font-semibold text-sm active:scale-95 transition-transform",children:[o.jsx(at,{className:"w-4 h-4 mr-2 inline"}),"Cancel"]})]}):o.jsxs("button",{onClick:p,className:"w-full bg-white text-[#04adee] py-3 rounded-xl font-semibold text-sm border border-[#04adee] active:scale-95 transition-transform",children:[o.jsx(Ax,{className:"w-4 h-4 mr-2 inline"}),"Edit Profile"]})}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[o.jsxs("h2",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[o.jsx(hB,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Performance Metrics"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(rj,{percentage:f,color:"#04adee"}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Overall Average"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(rj,{percentage:Math.round(m/g*100),color:"#10b981"}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Class Percentile"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[o.jsxs("div",{className:"text-lg font-bold text-[#04adee]",children:[f,"%"]}),o.jsx("div",{className:"text-xs text-gray-600",children:"GPA"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[o.jsxs("div",{className:"text-lg font-bold text-green-600",children:["#",m]}),o.jsx("div",{className:"text-xs text-gray-600",children:"Rank"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-purple-600",children:y}),o.jsx("div",{className:"text-xs text-gray-600",children:"SAT"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[o.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[o.jsx(SB,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Subject Analysis"]}),o.jsx("div",{className:"space-y-3 mb-4",children:Object.entries(c.subjects).map(([E,O])=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"font-medium text-sm text-gray-700",children:E}),o.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[O,"%"]})]}),o.jsx(JB,{percentage:O})]},E))}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[o.jsx("div",{className:"text-xs text-green-700 font-medium",children:"Strongest Subject"}),o.jsx("div",{className:"text-sm font-bold text-green-800",children:A[0]}),o.jsxs("div",{className:"text-xs text-green-600",children:[A[1],"%"]})]}),o.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[o.jsx("div",{className:"text-xs text-orange-700 font-medium",children:"Focus Area"}),o.jsx("div",{className:"text-sm font-bold text-orange-800",children:S[0]}),o.jsxs("div",{className:"text-xs text-orange-600",children:[S[1],"%"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[o.jsxs("h2",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[o.jsx(pa,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Application Profile"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"SAT Score"}),t?o.jsx("input",{type:"number",value:d.satScore,onChange:E=>w("satScore",parseInt(E.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):o.jsx("div",{className:"bg-gray-50 p-2 rounded-lg text-center",children:o.jsx("div",{className:"text-sm font-bold text-[#04adee]",children:y})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Age"}),t?o.jsx("input",{type:"number",value:d.age,onChange:E=>w("age",parseInt(E.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):o.jsx("div",{className:"bg-gray-50 p-2 rounded-lg text-center",children:o.jsx("div",{className:"text-sm font-medium",children:c.age})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nationality"}),t?o.jsx("input",{type:"text",value:d.nationality,onChange:E=>w("nationality",E.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):o.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:o.jsx("div",{className:"text-sm font-medium",children:c.nationality})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Financial Budget"}),t?o.jsx("input",{type:"number",value:d.financialBudget,onChange:E=>w("financialBudget",parseInt(E.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):o.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:o.jsxs("div",{className:"text-sm font-medium",children:["$",c.financialBudget.toLocaleString()]})})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Career Interests"}),t?o.jsxs("div",{className:"space-y-2",children:[d.careerInterests.map((E,O)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:E,onChange:R=>P(O,R.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white",placeholder:"Enter career interest"}),o.jsx("button",{type:"button",onClick:()=>T(O),className:"p-2 text-red-600 bg-red-50 rounded-lg active:bg-red-100",children:o.jsx(on,{className:"w-4 h-4"})})]},O)),d.careerInterests.length<10&&o.jsxs("button",{type:"button",onClick:k,className:"w-full flex items-center justify-center text-[#04adee] bg-gray-50 py-2 rounded-lg text-sm font-medium active:bg-gray-100",children:[o.jsx(ur,{className:"w-4 h-4 mr-2"}),"Add Career Interest"]})]}):o.jsx("div",{className:"flex flex-wrap gap-2",children:c.careerInterests.map((E,O)=>o.jsx("span",{className:"bg-gray-50 text-[#04adee] px-3 py-1 rounded-full text-sm font-medium border border-gray-200",children:E},O))})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Personal Statement"}),t?o.jsxs("div",{children:[o.jsx("textarea",{value:d.personalStatement,onChange:E=>w("personalStatement",E.target.value),className:"w-full px-3 py-3 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none h-24 bg-white",maxLength:650}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[d.personalStatement.length,"/650 words"]})]}):o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-sm leading-relaxed",children:c.personalStatement})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[o.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[o.jsx(dB,{className:"w-4 h-4 text-[#04adee] mr-2"}),"Activities"]}),t?o.jsxs("div",{className:"space-y-2",children:[d.activities.map((E,O)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:E,onChange:R=>N(O,R.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white",placeholder:"Enter activity"}),o.jsx("button",{type:"button",onClick:()=>j(O),className:"p-2 text-red-600 bg-red-50 rounded-lg active:bg-red-100",children:o.jsx(on,{className:"w-4 h-4"})})]},O)),d.activities.length<10&&o.jsxs("button",{type:"button",onClick:_,className:"w-full flex items-center justify-center text-[#04adee] bg-gray-50 py-2 rounded-lg text-sm font-medium active:bg-gray-100",children:[o.jsx(ur,{className:"w-4 h-4 mr-2"}),"Add Activity (Max 10)"]})]}):o.jsx("div",{className:"space-y-2",children:c.activities.map((E,O)=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center",children:[o.jsx("div",{className:"w-2 h-2 bg-[#04adee] rounded-full mr-3"}),o.jsx("span",{className:"text-sm text-gray-700 font-medium",children:E})]},O))})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mb-6 border border-gray-200",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Special Circumstances"}),t?o.jsx("textarea",{value:d.specialCircumstances,onChange:E=>w("specialCircumstances",E.target.value),className:"w-full px-3 py-3 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none h-20 bg-white"}):o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-sm leading-relaxed",children:c.specialCircumstances})]})]})]})};function QB({onViewProfile:e}){const[t,r]=x.useState([]),[n,s]=x.useState([]),[i,a]=x.useState(!0),[l,c]=x.useState(""),[u,d]=x.useState(""),[h,f]=x.useState("");x.useEffect(()=>{m()},[]),x.useEffect(()=>{g()},[l,u,h,t]);const m=async()=>{try{a(!0);const v=await Ox();r(v),s(v)}catch(v){console.error("Error loading admit profiles:",v)}finally{a(!1)}},g=()=>{let v=t;l&&(v=v.filter(b=>b.name.toLowerCase().includes(l.toLowerCase())||b.current_university.toLowerCase().includes(l.toLowerCase())||b.country.toLowerCase().includes(l.toLowerCase())||b.current_major.toLowerCase().includes(l.toLowerCase()))),u&&(v=v.filter(b=>b.country===u)),h&&(v=v.filter(b=>b.current_major===h)),s(v)},y=Array.from(new Set(t.map(v=>v.country))).sort(),p=Array.from(new Set(t.map(v=>v.current_major))).sort();return i?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):o.jsx("div",{className:"pb-20 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:o.jsxs("div",{className:"px-3 pt-4",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Admit Profiles"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Students admitted to top universities"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search...",value:l,onChange:v=>c(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"All Countries"}),y.map(v=>o.jsx("option",{value:v,children:v},v))]}),o.jsxs("select",{value:h,onChange:v=>f(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"All Majors"}),p.map(v=>o.jsx("option",{value:v,children:v},v))]})]})}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map(v=>o.jsxs("div",{onClick:()=>e(v.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden active:scale-95 transition-transform",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:v.profile_image_url,alt:v.name,className:"w-full h-40 object-cover"})}),o.jsxs("div",{className:"p-3",children:[o.jsx("h3",{className:"font-bold text-gray-900 text-xs mb-1.5 line-clamp-1",children:v.name}),o.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1.5",children:[o.jsx("img",{src:tm(v.country),alt:v.country,className:"w-4 h-3 mr-1.5 flex-shrink-0 object-cover rounded-sm"}),o.jsx("span",{className:"line-clamp-1",children:v.country})]}),o.jsxs("div",{className:"flex items-start text-xs text-gray-700 mb-1.5",children:[o.jsx(er,{className:"w-3 h-3 mr-1 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"line-clamp-2 font-medium",children:v.current_university})]}),o.jsxs("div",{className:"text-xs text-green-600 font-semibold",children:["Accepted ",v.application_round]})]})]},v.id))}),n.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-sm",children:"No profiles found."})})]})})}function ZB({profileId:e,onBack:t}){const[r,n]=x.useState(null),[s,i]=x.useState(!0),[a,l]=x.useState(null),[c,u]=x.useState(!1);x.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0);const h=await $P(e);n(h),l(null)}catch(h){l("Failed to load admit profile"),console.error(h)}finally{i(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):a||!r?o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("p",{className:"text-red-800 text-sm",children:a||"Profile not found"}),o.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Go Back"})]})}):o.jsxs("div",{className:"pb-20 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:[o.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-0 z-10 shadow-sm",children:o.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 active:text-gray-900 group",children:[o.jsx(Kn,{className:"w-4 h-4 mr-2 group-active:-translate-x-1 transition-transform"}),o.jsx("span",{className:"font-medium text-sm",children:"Back to Profiles"})]})}),o.jsxs("div",{className:"bg-white mx-3 mt-3 rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-green-500 to-blue-600",children:[r.university_image_url&&o.jsx("img",{src:r.university_image_url,alt:`${r.current_university} campus`,className:"absolute inset-0 w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-black/20"}),o.jsx("div",{className:"absolute -bottom-12 left-4 z-10",children:o.jsx("img",{src:r.profile_image_url,alt:r.name,className:"w-24 h-24 rounded-xl border-4 border-white object-cover shadow-xl"})})]}),o.jsxs("div",{className:"pt-16 px-4 pb-5",children:[o.jsxs("div",{className:"mb-5",children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:r.name}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:r.current_major}),o.jsx("div",{className:"flex items-center gap-3 text-xs text-gray-600 flex-wrap",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("img",{src:tm(r.country),alt:`${r.country} flag`,className:"w-4 h-3 object-cover rounded-sm"}),o.jsx("span",{children:r.country})]})})]}),(r.linkedin_handle||r.instagram_handle)&&o.jsxs("div",{className:"flex gap-2 mb-5",children:[r.linkedin_handle&&o.jsxs("a",{href:r.linkedin_handle,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg text-sm active:bg-blue-100",children:[o.jsx(IP,{className:"w-4 h-4"}),"LinkedIn"]}),r.instagram_handle&&o.jsxs("a",{href:`https://instagram.com/${r.instagram_handle.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-pink-50 text-pink-600 rounded-lg text-sm active:bg-pink-100",children:[o.jsx(TP,{className:"w-4 h-4"}),"Instagram"]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-4 mb-3 border-2 border-blue-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(er,{className:"w-4 h-4 text-blue-600"}),o.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Accepted To:"})]}),o.jsx("p",{className:"text-lg font-bold text-blue-600 mb-0.5",children:r.current_university}),o.jsx("p",{className:"text-xs text-gray-600",children:r.university_location}),r.graduation_year&&o.jsxs("p",{className:"text-xs text-gray-600 mt-1.5 font-medium",children:["Class of ",r.graduation_year]})]}),o.jsx("div",{className:"mb-5",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Application submitted to ",r.current_university]})})]})]}),o.jsxs("div",{className:"px-3 space-y-3 mt-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-1",children:[o.jsx(pa,{className:"w-3 h-3 text-blue-600 mr-1"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Overall Avg"})]}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.overall_percentage?o.jsxs(o.Fragment,{children:[o.jsx(Ye,{end:r.overall_percentage,decimals:1}),o.jsx("span",{children:"%"})]}):"N/A"}),o.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Aggregate %"})]}),r.sat_score&&o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-3 border border-purple-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-1",children:[o.jsx(dr,{className:"w-3 h-3 text-purple-600 mr-1"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"SAT"})]}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.jsx(Ye,{end:r.sat_score})})]}),r.act_score&&o.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-3 border border-orange-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-1",children:[o.jsx(dr,{className:"w-3 h-3 text-orange-600 mr-1"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"ACT"})]}),o.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.jsx(Ye,{end:r.act_score})})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-3 border border-green-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-1",children:[o.jsx(er,{className:"w-3 h-3 text-green-600 mr-1"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Round"})]}),o.jsx("p",{className:"text-lg font-bold text-green-600",children:r.application_round})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-3 border border-yellow-100",children:[o.jsxs("div",{className:"flex items-center mb-1.5",children:[o.jsx(zn,{className:"w-3 h-3 text-yellow-600 mr-1.5"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"First Gen"})]}),o.jsx("p",{className:"text-gray-700 text-xs",children:r.first_generation?"Yes":"No"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 border border-gray-200",children:[o.jsxs("div",{className:"flex items-center mb-1.5",children:[o.jsx(qo,{className:"w-3 h-3 text-green-600 mr-1.5"}),o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Aid"})]}),o.jsx("p",{className:"text-gray-700 text-xs leading-tight",children:r.financial_aid_received})]})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(ke,{className:"w-4 h-4 text-blue-600 mr-2"}),o.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Personal Statement"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("p",{className:"text-gray-700 text-xs leading-relaxed whitespace-pre-line line-clamp-4",children:r.personal_statement}),o.jsx("button",{onClick:()=>u(!0),className:"mt-2 text-blue-600 active:text-blue-700 font-medium text-xs underline",children:"Read Full Statement"})]})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-end justify-center z-50",onClick:()=>u(!1),children:o.jsxs("div",{className:"bg-white rounded-t-3xl shadow-2xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ke,{className:"w-4 h-4 text-blue-600"}),o.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Personal Statement"})]}),o.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 active:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-lg active:bg-gray-100",children:""})]}),o.jsx("div",{className:"px-4 py-4 overflow-y-auto max-h-[calc(90vh-60px)]",children:o.jsx("p",{className:"text-gray-700 text-sm leading-relaxed whitespace-pre-line",children:r.personal_statement})})]})}),r.subject_grades&&Object.keys(r.subject_grades).length>0&&o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(er,{className:"w-4 h-4 text-purple-600 mr-2"}),o.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Latest Transcript Submitted"})]}),o.jsx("div",{className:"space-y-2",children:Object.entries(r.subject_grades).map(([h,f],m)=>o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-3 border border-purple-200",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("div",{className:"flex-1",children:o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:h})}),o.jsx("span",{className:"text-xl font-bold text-purple-600 ml-2",children:f})]})},m))})]}),r.high_school_gpa_history&&Object.keys(r.high_school_gpa_history).length>0&&o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(tn,{className:"w-4 h-4 text-green-600 mr-2"}),o.jsx("h2",{className:"text-base font-bold text-gray-900",children:"High School Performance History"})]}),o.jsx("p",{className:"text-xs text-gray-600 mb-3 italic",children:"Overall grade percentages by year"}),o.jsx("div",{className:"space-y-2",children:Object.entries(r.high_school_gpa_history).map(([h,f],m)=>o.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg p-3 border border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:h}),o.jsx("span",{className:"text-lg font-bold text-blue-600",children:f})]})},m))})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(ia,{className:"w-4 h-4 text-orange-600 mr-2"}),o.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Extracurriculars"})]}),o.jsx("ul",{className:"space-y-1.5",children:r.extracurricular_activities.map((h,f)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-orange-600 rounded-full mt-1.5 mr-2 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700 text-xs",children:h})]},f))})]}),r.university_experience&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-xl p-4 border border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(zn,{className:"w-4 h-4 text-blue-600 mr-2"}),o.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Their Journey"})]}),o.jsx("p",{className:"text-gray-700 text-xs leading-relaxed whitespace-pre-line italic",children:r.university_experience})]})]})]})}const e7=()=>{const[e,t]=x.useState(""),r=[{id:1,name:"National Merit Scholarship",provider:"National Merit Corp.",amount:25e3,deadline:"2025-03-15",matchScore:95,type:"Merit"},{id:2,name:"Gates Millennium Scholars",provider:"Gates Foundation",amount:5e4,deadline:"2025-01-15",matchScore:88,type:"Need-Based"},{id:3,name:"Google CS Scholarship",provider:"Google Inc.",amount:1e4,deadline:"2025-02-28",matchScore:92,type:"Field-Specific"}],n=s=>s>=90?"text-green-600 bg-green-100":s>=80?"text-blue-600 bg-blue-100":"text-yellow-600 bg-yellow-100";return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search scholarships...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),o.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-2xl p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(dr,{className:"w-5 h-5 text-[#04adee] mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-[#04adee] text-sm",children:"Personalized Matching"}),o.jsx("p",{className:"text-xs text-gray-700",children:"Scholarships ranked by your eligibility"})]})]})}),o.jsx("div",{className:"space-y-4",children:r.map(s=>o.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s.name}),o.jsx("p",{className:"text-sm text-gray-600",children:s.provider})]}),o.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${n(s.matchScore)}`,children:[s.matchScore,"% Match"]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-[#04adee] bg-opacity-10 rounded-xl p-3 text-center",children:[o.jsx(qo,{className:"w-5 h-5 text-[#04adee] mx-auto mb-1"}),o.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["$",(s.amount/1e3).toFixed(0),"k"]}),o.jsx("div",{className:"text-xs text-gray-600",children:"Award"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-center",children:[o.jsx(wt,{className:"w-5 h-5 text-gray-600 mx-auto mb-1"}),o.jsx("div",{className:"text-sm font-bold text-gray-900",children:new Date(s.deadline).toLocaleDateString()}),o.jsx("div",{className:"text-xs text-gray-600",children:"Deadline"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:s.type}),o.jsxs("button",{className:"flex items-center bg-[#04adee] text-white px-3 py-2 rounded-lg text-sm font-medium",children:["Apply",o.jsx(Vo,{className:"w-3 h-3 ml-1"})]})]})]},s.id))})]})},t7=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(null),[s,i]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState({}),[f,m]=x.useState(""),[g,y]=x.useState(""),[p,v]=x.useState({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]});useEffect(()=>{b()},[]);const b=async()=>{try{console.log("=== LOADING APPLICATIONS FROM FIREBASE ===");const I=Ue.getCurrentUser();if(!I||!I.name||!I.school){console.log("No user data found, cannot load applications:",I);return}console.log("Loading applications for user:",I.name,"in school:",I.school);const D=se(te,`Schoolss/${I.school}/Applications/${I.name}`);console.log("Firebase path:",`Schoolss/${I.school}/Applications/${I.name}`);const L=await Pe(D);if(L.exists()){const B=L.val();console.log("Found applications data:",B);const q=[];Object.entries(B).forEach(([V,he],ue)=>{if(console.log(`Processing university: ${V}`,he),he&&typeof he=="object"){const xe=[];Object.entries(he).forEach(([mt,z],ce)=>{console.log(`  Requirement: ${mt} = ${z}`),xe.push({id:Date.now()+ue*100+ce,name:mt,completed:z})});const Ae=xe.filter(mt=>mt.completed).length,ye=Math.round(Ae/xe.length*100);console.log(`  University: ${V}, Completion: ${ye}%`),q.push({id:Date.now()+ue,universityName:V,program:"Program Name",deadline:"2025-05-01",priority:"Medium",status:ye===100?"Submitted":"In Progress",completionPercentage:ye,requirements:xe,notes:""})}}),console.log("Loaded applications:",q),t(q)}else console.log("No applications found in Firebase"),t([])}catch(I){console.error("Error loading applications from Firebase:",I),t([])}},w=async I=>{try{const D=I.split("@")[0].toLowerCase();console.log("Looking for username:",D);const L=se(te,"Schoolss"),B=await Pe(L);if(!B.exists())return console.log("No Schoolss node found"),null;const q=B.val();console.log("Found schools:",Object.keys(q));for(const[V,he]of Object.entries(q))if(console.log(`Checking school: ${V}`),he&&typeof he=="object"&&"users"in he){const ue=he.users;if(ue&&D in ue)return console.log(`Found user ${D} in school: ${V}`),V}return console.log("User not found in any school"),null}catch(D){return console.error("Error finding user school:",D),null}},_=async(I,D,L)=>{try{const B=Ue.getCurrentUser();if(B&&B.name&&B.school){const q=se(te,`Schoolss/${B.school}/Applications/${B.name}/${I}/${D}`);await ot(q,L),console.log(`Updated requirement ${D} to ${L} for ${I}`),await Th.updateCurrentUserProgress(),console.log("Application Progress updated after requirement change")}}catch(B){console.error("Error updating requirement in Firebase:",B)}},j=(I,D)=>{t(L=>L.map(B=>{if(B.id===I){const q=B.requirements.map(xe=>xe.id===D?{...xe,completed:!xe.completed}:xe),V=q.filter(xe=>xe.completed).length,he=Math.round(V/q.length*100),ue=B.requirements.find(xe=>xe.id===D);return ue&&_(B.universityName,ue.name,!ue.completed),{...B,requirements:q,completionPercentage:he}}return B}))},N=()=>{setNewApplication(I=>({...I,requirements:[...I.requirements,""]}))},k=(I,D)=>{setNewApplication(L=>({...L,requirements:L.requirements.map((B,q)=>q===I?D:B)}))},T=I=>{setNewApplication(D=>({...D,requirements:D.requirements.filter((L,B)=>B!==I)}))},P=async I=>{try{console.log("=== STARTING FIREBASE SAVE (MOBILE) ==="),console.log("Application data:",I);const D=Ue.getCurrentUser();if(console.log("Current stored user:",D),!D)throw new Error("No user data found in storage. Please log in again.");const L=`${D.username}@gmail.com`;console.log("Reconstructed email:",L);const B=await w(L);if(console.log("Found school:",B),!B)throw new Error("Could not find your school in the database. Please contact support.");const q=se(te,`Schoolss/${B}/users/${D.username}`),V=await Pe(q);if(!V.exists())throw new Error("User data not found in school database.");const he=V.val(),ue=he.Name||he.name||D.name;console.log("Using user name for Applications:",ue);const xe=`Schoolss/${B}/Applications/${ue}/${I.universityName}`;console.log("Firebase application path:",xe);const Ae={};if(I.requirements.forEach(mt=>{if(mt.trim()){const z=BB(mt.trim());z&&(Ae[z]=!1)}}),console.log("Requirements data to save:",Ae),Object.keys(Ae).length===0)throw new Error("No valid requirements to save");console.log("Attempting to save to Firebase...");const ye=se(te,xe);return await ot(ye,Ae),console.log(" Application saved successfully to Firebase!"),!0}catch(D){throw console.error(" Error saving application to Firebase:",D),D instanceof Error&&console.error("Error message:",D.message),new Error(`Failed to save application: ${D instanceof Error?D.message:"Unknown error"}`)}},C=async()=>{const I={};let D=!1;if(p.requirements.forEach((L,B)=>{if(L.trim()){const q=qv(L.trim());q&&(I[B]=q,D=!0)}}),h(I),D){alert("Please fix the requirement name errors before saving.");return}if(p.universityName&&p.program&&p.requirements.length>0){u(!0);try{await P(p);const L=p.requirements.map((q,V)=>({id:Date.now()+V,name:q,completed:!1})),B={id:Date.now(),universityName:p.universityName,program:p.program,deadline:"2025-05-01",priority:"Medium",status:"In Progress",completionPercentage:0,notes:"",requirements:L};t(q=>[...q,B]),v({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]}),l(!1),m("Application has been added to tracker successfully!"),setTimeout(()=>m(""),3e3),await Th.updateCurrentUserProgress(),console.log("Application Progress updated after adding new application"),await b()}catch(L){console.error("Error adding application:",L),y(`Error adding application: ${L instanceof Error?L.message:"Please try again."}`),setTimeout(()=>y(""),5e3)}finally{u(!1)}}},A=()=>{p.requirements.length<15&&v(I=>({...I,requirements:[...I.requirements,""]}))},S=I=>{v(D=>({...D,requirements:D.requirements.filter((L,B)=>B!==I)}))},E=(I,D)=>{const L=qv(D);h(B=>{const q={...B};return L?q[I]=L:delete q[I],q}),v(B=>({...B,requirements:B.requirements.map((q,V)=>V===I?D:q)}))},O=I=>{switch(I){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},R=I=>{switch(I){case"Submitted":return"text-green-600 bg-green-100";case"Under Review":return"text-blue-600 bg-blue-100";case"Decision Pending":return"text-purple-600 bg-purple-100";default:return"text-yellow-600 bg-yellow-100"}},F={avgCompletion:Math.round(e.reduce((I,D)=>I+D.completionPercentage,0)/e.length)||0,total:e.length,inProgress:e.filter(I=>I.status==="In Progress").length,submitted:e.filter(I=>I.status==="Submitted").length};return r?o.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("button",{onClick:()=>n(null),className:"mr-4 p-2 hover:bg-gray-200 rounded-lg",children:o.jsx(Kn,{className:"w-5 h-5"})}),o.jsx("h1",{className:"text-2xl font-bold",children:r.universityName})]}),o.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Program"}),o.jsx("p",{className:"text-gray-900",children:r.program})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Deadline"}),o.jsx("p",{className:"text-gray-900",children:new Date(r.deadline).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Priority"}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(r.priority)}`,children:r.priority})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Status"}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(r.status)}`,children:r.status})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Progress"}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:o.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${r.completionPercentage}%`}})}),o.jsxs("p",{className:"text-sm text-gray-600",children:[r.completionPercentage,"% Complete"]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Requirements"}),o.jsx("div",{className:"space-y-3",children:r.requirements.map(I=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[o.jsx("button",{onClick:()=>j(r.id,I.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${I.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:I.completed&&o.jsx(ar,{className:"w-3 h-3"})}),I.dueDate&&o.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(I.dueDate).toLocaleDateString()]})]},I.id))})]})]})]})}):s?o.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add New Application"}),o.jsx("button",{onClick:()=>i(!0),className:"bg-[#04adee] text-white p-3 rounded-xl",children:o.jsx(ur,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),o.jsx("input",{type:"text",value:newApplication.universityName,onChange:I=>setNewApplication(D=>({...D,universityName:I.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Stanford University"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program"}),o.jsx("input",{type:"text",value:newApplication.program,onChange:I=>setNewApplication(D=>({...D,program:I.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Deadline"}),o.jsx("input",{type:"date",value:newApplication.deadline,onChange:I=>setNewApplication(D=>({...D,deadline:I.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),o.jsxs("select",{value:newApplication.priority,onChange:I=>setNewApplication(D=>({...D,priority:I.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[o.jsx("option",{value:"Low",children:"Low Priority"}),o.jsx("option",{value:"Medium",children:"Medium Priority"}),o.jsx("option",{value:"High",children:"High Priority"})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),o.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),o.jsx("div",{className:"space-y-2",children:newApplication.requirements.map((I,D)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:I,onChange:L=>k(D,L.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-sm",placeholder:"Enter requirement"}),o.jsx("button",{onClick:()=>T(D),className:"p-2 text-red-500 hover:text-red-700",children:o.jsx(on,{className:"w-4 h-4"})})]},D))})]})]}),o.jsxs("div",{className:"flex space-x-3 mt-8",children:[o.jsx("button",{onClick:addApplication,disabled:c,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm",children:c?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Create Application"}),o.jsx("button",{onClick:()=>i(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f&&o.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ar,{className:"w-5 h-5 mr-2"}),f]})}),g&&o.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(at,{className:"w-5 h-5 mr-2"}),g]})}),o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Application Tracker"}),o.jsx("p",{className:"text-gray-600",children:"Monitor your university application progress and deadlines"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[o.jsx(ur,{className:"w-5 h-5 mr-2"}),"Add Application"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(tn,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[F.avgCompletion,"%"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Completion"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:o.jsx(ke,{className:"w-6 h-6 text-[#04adee]"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:F.total}),o.jsx("div",{className:"text-sm text-gray-600",children:"Total Applications"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:o.jsx(Cr,{className:"w-6 h-6 text-yellow-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:F.inProgress}),o.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(ar,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:F.submitted}),o.jsx("div",{className:"text-sm text-gray-600",children:"Submitted"})]})]})})]}),o.jsx("div",{className:"space-y-6",children:e.map(I=>{const D=I.requirements.filter(B=>B.completed).length,L=Math.ceil((new Date(I.deadline).getTime()-new Date().getTime())/(1e3*60*60*24));return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-6",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:I.universityName}),o.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(I.priority)}`,children:[I.priority," Priority"]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(I.status)}`,children:I.status})]}),o.jsx("p",{className:"text-gray-600 mb-2",children:I.program}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(wt,{className:"w-4 h-4 mr-1"}),"Deadline: ",new Date(I.deadline).toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Cr,{className:"w-4 h-4 mr-1"}),L>0?`${L} days left`:"Overdue"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-[#04adee]",children:[I.completionPercentage,"%"]}),o.jsx(pa,{className:"w-5 h-5 text-[#04adee]"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[D," of ",I.requirements.length," completed"]})]})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${I.completionPercentage}%`}})})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Requirements Checklist:"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:I.requirements.map(B=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:()=>j(I.id,B.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${B.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:B.completed&&o.jsx(ar,{className:"w-3 h-3"})}),o.jsx("span",{className:`flex-1 ${B.completed?"line-through text-gray-500":"text-gray-700"}`,children:B.name}),B.dueDate&&o.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(B.dueDate).toLocaleDateString()]})]},B.id))})]}),I.notes&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Notes:"}),o.jsx("p",{className:"text-gray-700 text-sm",children:I.notes})]})]},I.id)})}),e.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ke,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications yet"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Start tracking your university applications to stay organized."}),o.jsx("button",{onClick:()=>l(!0),className:"bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Add Your First Application"})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Application"}),o.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(at,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),o.jsx("input",{type:"text",value:p.universityName,onChange:I=>v(D=>({...D,universityName:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., University of Chicago"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program Name"}),o.jsx("input",{type:"text",value:p.program,onChange:I=>v(D=>({...D,program:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),o.jsx("button",{onClick:A,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:p.requirements.map((I,D)=>o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:I,onChange:L=>E(D,L.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${d[D]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),o.jsx("button",{onClick:()=>S(D),className:"p-2 text-red-500 hover:text-red-700",children:o.jsx(on,{className:"w-4 h-4"})})]}),d[D]&&o.jsx("p",{className:"text-red-600 text-xs ml-3",children:d[D]})]},D))})]})]}),o.jsxs("div",{className:"flex space-x-3 mt-6",children:[o.jsx("button",{onClick:C,disabled:c||!p.universityName.trim()||!p.program.trim()||Object.keys(d).length>0,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:c?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),o.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})})]})]})},r7=()=>{const[e,t]=x.useState(""),[r,n]=x.useState(""),s=[{id:1,title:"How to Write a Compelling Personal Statement",type:"Article",author:"Dr. Sarah Johnson",rating:4.8,readTime:15,category:"Essays"},{id:2,title:"College Essay Bootcamp",type:"Video",author:"College Prep Academy",rating:4.9,category:"Essays"},{id:3,title:"FAFSA Complete Guide",type:"Guide",author:"Financial Aid Team",rating:4.7,readTime:25,category:"Financial Aid"}],i=l=>{switch(l){case"Video":return Go;case"Article":return ke;case"Guide":return Er;case"Template":return kx;default:return ke}},a=l=>({Article:"bg-blue-100 text-blue-800",Video:"bg-red-100 text-red-800",Guide:"bg-green-100 text-green-800",Template:"bg-purple-100 text-purple-800"})[l]||"bg-gray-100 text-gray-800";return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search resources...",value:e,onChange:l=>t(l.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),o.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-2xl p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(zn,{className:"w-5 h-5 text-[#04adee] mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-[#04adee] text-sm",children:"Curated Resources"}),o.jsx("p",{className:"text-xs text-gray-700",children:"Hand-picked by successful students"})]})]})}),o.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:["All","Essays","Applications","Financial Aid","Test Prep"].map(l=>o.jsx("button",{onClick:()=>n(l==="All"?"":l),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${r===l||l==="All"&&r===""?"bg-[#04adee] text-white":"bg-gray-100 text-gray-700"}`,children:l},l))}),o.jsx("div",{className:"space-y-4",children:s.map(l=>{const c=i(l.type);return o.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-[#04adee] bg-opacity-10 rounded-xl flex items-center justify-center mr-3",children:o.jsx(c,{className:"w-5 h-5 text-[#04adee]"})}),o.jsxs("div",{children:[o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a(l.type)}`,children:l.type}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:l.category})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(zn,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:l.rating})]})]}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:l.title}),o.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["by ",l.author]}),o.jsxs("div",{className:"flex items-center justify-between",children:[l.readTime&&o.jsxs("span",{className:"text-xs text-gray-500",children:[l.readTime," min read"]}),o.jsxs("button",{className:"flex items-center bg-[#04adee] text-white px-3 py-2 rounded-lg text-sm font-medium",children:["Access",o.jsx(Vo,{className:"w-3 h-3 ml-1"})]})]})]},l.id)})})]})},n7=()=>{const[e,t]=x.useState(""),[r,n]=x.useState([]),[s,i]=x.useState(!0),[a,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(null);x.useEffect(()=>{f()},[]);const f=async()=>{try{i(!0),l(null);const p=Ue.getStoredUser();if(!p||!p.name){l("Unable to identify logged-in student"),n([]),i(!1);return}const v=p.name,w=se(te,"University Data/Caseloads"),_=await Pe(w),j=new Set;if(_.exists()){const P=_.val();Object.entries(P).forEach(([C,A])=>{A&&typeof A=="object"&&A[v]===!0&&j.add(C)})}const k=se(te,"University Data/University Counsellors /"),T=await Pe(k);if(T.exists()){const P=T.val(),C=[];Object.entries(P).forEach(([A,S])=>{if(S&&typeof S=="object"){const E=S,O=E.Name||A;if(j.has(O)){const R=[];E.Languages&&typeof E.Languages=="object"&&Object.entries(E.Languages).forEach(([D,L])=>{L===!0&&R.push(D)});const F=[];E.Specialties&&typeof E.Specialties=="object"&&Object.entries(E.Specialties).forEach(([D,L])=>{L===!0&&F.push(D)});const I={id:A,name:O,email:E.Email||E.email||"",university:E.University||"",year:E.Year||"",location:E.Location||"",profilePicture:E["Profile Picture"]||"https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150",bookingLink:E["Booking Link"]||E["booking link"]||"",languages:R,specialties:F};C.push(I)}}}),n(C)}else n([])}catch(p){console.error("Error loading counselors from Firebase:",p),l(`Failed to load counselors: ${p instanceof Error?p.message:"Unknown error"}`),n([])}finally{i(!1)}},m=r.filter(p=>p.name.toLowerCase().includes(e.toLowerCase())||p.university.toLowerCase().includes(e.toLowerCase())||p.specialties.some(v=>v.toLowerCase().includes(e.toLowerCase()))||p.location.toLowerCase().includes(e.toLowerCase())),g=p=>{h(p),u(!0)},y=p=>{if(p.email){const v=encodeURIComponent("University Guidance Consultation Request"),b=encodeURIComponent(`Dear ${p.name},

I would like to schedule a consultation regarding university guidance.

Best regards`);window.open(`mailto:${p.email}?subject=${v}&body=${b}`,"_self")}else alert("Email address not available for this counselor.")};return s?o.jsxs("div",{className:"p-4 flex items-center justify-center py-12",children:[o.jsx(Oh,{className:"w-8 h-8 animate-spin text-[#04adee] mr-3"}),o.jsx("span",{className:"text-lg text-gray-600",children:"Loading counselors..."})]}):a?o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:[o.jsx("p",{className:"text-red-600 mb-4",children:a}),o.jsx("button",{onClick:f,className:"bg-red-600 text-white px-4 py-2 rounded-xl hover:bg-red-700 transition-colors",children:"Try Again"})]})}):c&&d?o.jsx(Tx,{counselorName:d.name,counselorUniversity:d.university,counselorImage:d.profilePicture,counselorEmail:d.email,onBack:()=>{u(!1),h(null)}}):o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search counselors...",value:e,onChange:p=>t(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),o.jsx("div",{className:"space-y-4",children:m.map(p=>o.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-start mb-4",children:[o.jsx("img",{src:p.profilePicture,alt:p.name,className:"w-16 h-16 rounded-2xl object-cover mr-4",onError:v=>{v.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:p.name}),o.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[p.year," Student"]}),o.jsx("p",{className:"text-sm text-[#04adee] mb-2",children:p.university}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(RP,{className:"w-4 h-4 mr-1"}),p.location]})]})]}),p.specialties.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Specialties:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:p.specialties.map(v=>o.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-2 py-1 rounded-full",children:v},v))})]}),p.languages.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Languages:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:p.languages.map(v=>o.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:v},v))})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:()=>g(p),className:"flex-1 flex items-center justify-center bg-[#04adee] text-white px-4 py-2 rounded-xl font-medium",children:[o.jsx(wt,{className:"w-4 h-4 mr-2"}),"Book Meeting"]}),o.jsxs("button",{onClick:()=>y(p),className:"flex-1 flex items-center justify-center bg-gray-600 text-white px-4 py-2 rounded-xl font-medium",children:[o.jsx(nu,{className:"w-4 h-4 mr-2"}),"Email"]})]})]},p.id))}),m.length===0&&!s&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(kc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors found"}),o.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria."})]}),r.length===0&&!s&&!a&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(kc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors available"}),o.jsx("p",{className:"text-gray-600",children:"Counselors data is not available at the moment."})]})]})},s7=({onLogout:e,user:t})=>{var f;const[r,n]=x.useState("profile"),[s,i]=x.useState(!1),[a,l]=x.useState(null),c=[{id:"profile",label:"My Profile",icon:sa,color:"bg-blue-500"},{id:"admit-profiles",label:"Admission Stories",icon:er,color:"bg-purple-500"},{id:"scholarships",label:"Scholarships",icon:dr,color:"bg-green-500"},{id:"applications",label:"Applications",icon:ke,color:"bg-orange-500"},{id:"resources",label:"Resources",icon:Er,color:"bg-red-500"},{id:"counselors",label:"Counselors",icon:kc,color:"bg-indigo-500"}],u=()=>{const m=c.find(g=>g.id===r);return(m==null?void 0:m.label)||"EduCare"},d=m=>{n(m),i(!1)},h=()=>{switch(r){case"profile":return o.jsx(nj,{user:t});case"admit-profiles":return o.jsx(QB,{onViewProfile:m=>{l(m),n("profile-details")}});case"scholarships":return o.jsx(e7,{});case"applications":return o.jsx(t7,{});case"resources":return o.jsx(r7,{});case"counselors":return o.jsx(n7,{});case"profile-details":return a?o.jsx(ZB,{profileId:a,onBack:()=>n("admit-profiles")}):null;default:return o.jsx(nj,{user:t})}};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-40",children:o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-area-top",children:[o.jsx("button",{onClick:()=>i(!0),className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors",children:o.jsx(MP,{className:"w-6 h-6 text-gray-700"})}),o.jsx("div",{className:"flex-1 text-center",children:o.jsx("h1",{className:"text-lg font-bold text-gray-900",children:u()})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors",children:o.jsx(zr,{className:"w-5 h-5 text-gray-700"})}),o.jsxs("button",{className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors relative",children:[o.jsx(fB,{className:"w-5 h-5 text-gray-700"}),o.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs text-white font-bold",children:"3"})})]})]})]})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>i(!1)}),o.jsx("div",{className:`
        fixed top-0 left-0 h-full w-80 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-out
        ${s?"translate-x-0":"-translate-x-full"}
      `,children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 px-6 py-8 safe-area-top",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"/blue logo.png",alt:"EduCare Logo",className:"w-10 h-10 object-contain"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"EduCare"}),o.jsx("p",{className:"text-blue-100 text-sm",children:"University Guidance"})]})]}),o.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-full bg-white bg-opacity-20 active:bg-opacity-30 transition-colors",children:o.jsx(at,{className:"w-6 h-6 text-white"})})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-lg",children:((f=t==null?void 0:t.name)==null?void 0:f.charAt(0))||"S"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-white font-semibold",children:(t==null?void 0:t.name)||"Student"}),o.jsx("p",{className:"text-blue-100 text-sm",children:(t==null?void 0:t.grade)||"Grade 12"})]})]})]}),o.jsx("div",{className:"flex-1 py-4",children:c.map(m=>o.jsxs("button",{onClick:()=>d(m.id),className:`w-full flex items-center px-6 py-4 text-left transition-all duration-200 ${r===m.id?"bg-blue-50 border-r-4 border-[#04adee]":"hover:bg-gray-50 active:bg-gray-100"}`,children:[o.jsx("div",{className:`w-10 h-10 ${m.color} rounded-full flex items-center justify-center mr-4`,children:o.jsx(m.icon,{className:"w-5 h-5 text-white"})}),o.jsx("span",{className:`font-medium text-lg ${r===m.id?"text-[#04adee]":"text-gray-700"}`,children:m.label})]},m.id))}),o.jsx("div",{className:"p-4 border-t border-gray-200 safe-area-bottom",children:o.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center px-6 py-4 bg-red-50 text-red-600 rounded-2xl font-semibold text-lg active:bg-red-100 transition-colors",children:[o.jsx(at,{className:"w-5 h-5 mr-3"}),"Logout"]})})]})}),o.jsx("main",{className:"min-h-screen",children:h()})]})},rd={getAll:async e=>{const{data:t,error:r}=await dt.from("counselor_scholarships").select("*").eq("counselor_id",e).order("deadline",{ascending:!0});if(r)throw r;return(t||[]).map(s=>({...s,eligibility_criteria:typeof s.eligibility_criteria=="string"?JSON.parse(s.eligibility_criteria):s.eligibility_criteria,requirements:typeof s.requirements=="string"?JSON.parse(s.requirements):s.requirements}))},create:async e=>{const{data:t,error:r}=await dt.from("counselor_scholarships").insert(e).select().single();if(r)throw r;try{const n=Array.isArray(e.eligibility_criteria)?e.eligibility_criteria:[e.eligibility_criteria],s=Array.isArray(e.requirements)?e.requirements:[e.requirements],i={};n.forEach((c,u)=>{i[String(u+1)]=c});const a={};s.forEach((c,u)=>{a[String(u+1)]=c});const l=se(te,`University Data/Scholarships/${e.name}`);await ot(l,{"Award amount":e.award_amount,Deadline:e.deadline,Description:e.description,"Icon link":e.logo_url||"",Link:e.application_link,"Eligibility Criteria":i,Requirements:a}),console.log("Scholarship saved to Firebase successfully")}catch(n){console.error("Error saving to Firebase:",n),console.log("Scholarship saved to Supabase, but Firebase sync failed")}return{...t,eligibility_criteria:typeof t.eligibility_criteria=="string"?JSON.parse(t.eligibility_criteria):t.eligibility_criteria,requirements:typeof t.requirements=="string"?JSON.parse(t.requirements):t.requirements}},update:async(e,t)=>{const{data:r,error:n}=await dt.from("counselor_scholarships").select("*").eq("id",e).single();if(n)throw n;const{data:s,error:i}=await dt.from("counselor_scholarships").update(t).eq("id",e).select().single();if(i)throw i;try{const a=r.name,l=t.name||a;if(a!==l){const m=se(te,`University Data/Scholarships/${a}`);await jc(m)}const c=Array.isArray(t.eligibility_criteria)?t.eligibility_criteria:t.eligibility_criteria?[t.eligibility_criteria]:Array.isArray(r.eligibility_criteria)?r.eligibility_criteria:[r.eligibility_criteria],u=Array.isArray(t.requirements)?t.requirements:t.requirements?[t.requirements]:Array.isArray(r.requirements)?r.requirements:[r.requirements],d={};c.forEach((m,g)=>{d[String(g+1)]=m});const h={};u.forEach((m,g)=>{h[String(g+1)]=m});const f=se(te,`University Data/Scholarships/${l}`);await ot(f,{"Award amount":t.award_amount||r.award_amount,Deadline:t.deadline||r.deadline,Description:t.description||r.description,"Icon link":t.logo_url!==void 0?t.logo_url:r.logo_url||"",Link:t.application_link||r.application_link,"Eligibility Criteria":d,Requirements:h}),console.log("Scholarship updated in Firebase successfully")}catch(a){console.error("Error updating Firebase:",a),console.log("Scholarship updated in Supabase, but Firebase sync failed")}return{...s,eligibility_criteria:typeof s.eligibility_criteria=="string"?JSON.parse(s.eligibility_criteria):s.eligibility_criteria,requirements:typeof s.requirements=="string"?JSON.parse(s.requirements):s.requirements}},delete:async e=>{const{data:t,error:r}=await dt.from("counselor_scholarships").select("name").eq("id",e).single();if(r)throw r;const{error:n}=await dt.from("counselor_scholarships").delete().eq("id",e);if(n)throw n;if(t)try{const s=se(te,`University Data/Scholarships/${t.name}`);await jc(s),console.log("Scholarship removed from Firebase successfully")}catch(s){console.error("Error removing from Firebase:",s),console.log("Scholarship deleted from Supabase, but Firebase sync failed")}}};function i7({onBack:e,onLogout:t}){const[r,n]=x.useState([]),[s,i]=x.useState(!0),[a,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(null),[f,m]=x.useState(!1),[g,y]=x.useState(null),[p,v]=x.useState({name:"",logo_url:"",description:"",award_amount:"",deadline:"",eligibility_criteria:[],requirements:[],application_link:""}),[b,w]=x.useState(""),[_,j]=x.useState("");x.useEffect(()=>{N()},[]);const N=async()=>{i(!0),l(null);try{const R=await rd.getAll("203c556b-d13d-48f6-81dc-49a162b5527d");n(R),l(null)}catch(R){console.error("Error loading scholarships:",R),l("Failed to load scholarships. Please try again."),n([])}finally{i(!1)}},k=async R=>{if(R.preventDefault(),p.eligibility_criteria.length===0){l("Please add at least one eligibility criteria");return}if(p.requirements.length===0){l("Please add at least one requirement");return}m(!0),l(null),y(null);try{if(console.log("Submitting scholarship data:",p),d)await rd.update(d,p),y("Scholarship updated successfully!"),console.log("Scholarship updated successfully");else{const F=await rd.create({...p,counselor_id:"203c556b-d13d-48f6-81dc-49a162b5527d"});y("Scholarship created successfully!"),console.log("Scholarship created successfully:",F)}C(),await N()}catch(F){console.error("Error saving scholarship:",F),l(`Failed to save scholarship: ${F instanceof Error?F.message:"Unknown error"}`)}finally{m(!1)}},T=R=>{v({name:R.name,logo_url:R.logo_url||"",description:R.description,award_amount:R.award_amount,deadline:R.deadline,eligibility_criteria:Array.isArray(R.eligibility_criteria)?R.eligibility_criteria:R.eligibility_criteria.split(`
`).filter(F=>F.trim()),requirements:Array.isArray(R.requirements)?R.requirements:R.requirements.split(`
`).filter(F=>F.trim()),application_link:R.application_link}),h(R.id),u(!0)},P=async R=>{if(confirm("Are you sure you want to delete this scholarship?"))try{await rd.delete(R),alert("Scholarship deleted successfully!"),N()}catch(F){console.error("Error deleting scholarship:",F),alert("Failed to delete scholarship. Please try again.")}},C=()=>{v({name:"",logo_url:"",description:"",award_amount:"",deadline:"",eligibility_criteria:[],requirements:[],application_link:""}),w(""),j(""),h(null),u(!1),l(null),y(null)},A=()=>{b.trim()&&(v({...p,eligibility_criteria:[...p.eligibility_criteria,b.trim()]}),w(""))},S=R=>{v({...p,eligibility_criteria:p.eligibility_criteria.filter((F,I)=>I!==R)})},E=()=>{_.trim()&&(v({...p,requirements:[...p.requirements,_.trim()]}),j(""))},O=R=>{v({...p,requirements:p.requirements.filter((F,I)=>I!==R)})};return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Scholarship Management"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Add and manage scholarship opportunities"})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[o.jsx(ur,{className:"w-4 h-4"}),c?"Cancel":"Add Scholarship"]})}),a&&o.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:o.jsx(at,{className:"w-5 h-5 text-red-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-red-900",children:"Error"}),o.jsx("p",{className:"text-sm text-red-700",children:a})]})]}),o.jsx("button",{onClick:()=>l(null),className:"text-red-600 hover:text-red-700",children:o.jsx(at,{className:"w-5 h-5"})})]}),g&&o.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx(dr,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-green-900",children:"Success"}),o.jsx("p",{className:"text-sm text-green-700",children:g})]})]}),o.jsx("button",{onClick:()=>y(null),className:"text-green-600 hover:text-green-700",children:o.jsx(at,{className:"w-5 h-5"})})]}),c&&o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-8",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:d?"Edit Scholarship":"New Scholarship"}),o.jsxs("form",{onSubmit:k,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Scholarship Name *"}),o.jsx("input",{type:"text",value:p.name,onChange:R=>v({...p,name:R.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo URL"}),o.jsx("input",{type:"url",value:p.logo_url,onChange:R=>v({...p,logo_url:R.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description *"}),o.jsx("textarea",{value:p.description,onChange:R=>v({...p,description:R.target.value}),required:!0,rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Award Amount *"}),o.jsx("input",{type:"text",value:p.award_amount,onChange:R=>v({...p,award_amount:R.target.value}),required:!0,placeholder:"e.g., $5,000",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Deadline *"}),o.jsx("input",{type:"date",value:p.deadline,onChange:R=>v({...p,deadline:R.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Eligibility Criteria *"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:b,onChange:R=>w(R.target.value),onKeyPress:R=>{R.key==="Enter"&&(R.preventDefault(),A())},placeholder:"Add eligibility criteria...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),o.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors",children:o.jsx(ur,{className:"w-4 h-4"})})]}),p.eligibility_criteria.length>0&&o.jsx("ul",{className:"space-y-2 mt-2",children:p.eligibility_criteria.map((R,F)=>o.jsxs("li",{className:"flex items-center justify-between bg-slate-50 px-4 py-2 rounded-lg",children:[o.jsx("span",{className:"text-sm text-slate-700",children:R}),o.jsx("button",{type:"button",onClick:()=>S(F),className:"text-red-600 hover:text-red-700 transition-colors",children:o.jsx(at,{className:"w-4 h-4"})})]},F))}),p.eligibility_criteria.length===0&&o.jsx("p",{className:"text-sm text-slate-500 italic",children:"No eligibility criteria added yet"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Requirements *"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:_,onChange:R=>j(R.target.value),onKeyPress:R=>{R.key==="Enter"&&(R.preventDefault(),E())},placeholder:"Add requirement...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),o.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors",children:o.jsx(ur,{className:"w-4 h-4"})})]}),p.requirements.length>0&&o.jsx("ul",{className:"space-y-2 mt-2",children:p.requirements.map((R,F)=>o.jsxs("li",{className:"flex items-center justify-between bg-slate-50 px-4 py-2 rounded-lg",children:[o.jsx("span",{className:"text-sm text-slate-700",children:R}),o.jsx("button",{type:"button",onClick:()=>O(F),className:"text-red-600 hover:text-red-700 transition-colors",children:o.jsx(at,{className:"w-4 h-4"})})]},F))}),p.requirements.length===0&&o.jsx("p",{className:"text-sm text-slate-500 italic",children:"No requirements added yet"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Link *"}),o.jsx("input",{type:"url",value:p.application_link,onChange:R=>v({...p,application_link:R.target.value}),required:!0,placeholder:"https://...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),d?"Updating...":"Creating..."]}):o.jsxs(o.Fragment,{children:[d?"Update":"Create"," Scholarship"]})}),o.jsx("button",{type:"button",onClick:C,disabled:f,className:"px-6 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]}),s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"inline-block w-8 h-8 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),o.jsx("p",{className:"mt-4 text-slate-600",children:"Loading scholarships..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[o.jsx(dr,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600 text-lg",children:"No scholarships yet"}),o.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Create your first scholarship to get started"})]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(R=>o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-shadow duration-300 relative",children:[o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[o.jsx("button",{onClick:()=>T(R),className:"p-2 hover:bg-[#04ADEE]/10 text-[#04ADEE] rounded-lg transition-colors",title:"Edit scholarship",children:o.jsx(Px,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>P(R.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",title:"Delete scholarship",children:o.jsx(on,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-start gap-4 mb-4 pr-20",children:[R.logo_url&&o.jsx("img",{src:R.logo_url,alt:R.name,className:"w-16 h-16 object-contain rounded-lg flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:R.name}),o.jsx("p",{className:"text-slate-700 text-sm",children:R.description})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"text-center p-4 bg-[#04ADEE] bg-opacity-10 rounded-lg",children:[o.jsx(qo,{className:"w-6 h-6 text-[#04ADEE] mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-slate-900",children:R.award_amount}),o.jsx("div",{className:"text-sm text-slate-600",children:"Award Amount"})]}),o.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[o.jsx(wt,{className:"w-6 h-6 text-slate-600 mx-auto mb-1"}),o.jsx("div",{className:"text-sm font-bold text-slate-900",children:new Date(R.deadline).toLocaleDateString()}),o.jsx("div",{className:"text-sm text-slate-600",children:"Deadline"})]})]}),Array.isArray(R.eligibility_criteria)&&R.eligibility_criteria.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Eligibility Criteria:"}),o.jsx("ul",{className:"space-y-1",children:R.eligibility_criteria.map((F,I)=>o.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[o.jsx("div",{className:"w-2 h-2 bg-[#04ADEE] rounded-full mr-2 flex-shrink-0"}),F]},I))})]}),Array.isArray(R.requirements)&&R.requirements.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Requirements:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:R.requirements.map((F,I)=>o.jsx("span",{className:"bg-slate-100 text-slate-700 text-xs px-3 py-1 rounded-full",children:F},I))})]}),o.jsx("div",{className:"pt-4 border-t border-slate-200",children:o.jsxs("a",{href:R.application_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors text-sm font-medium w-full",children:["Learn More & Apply",o.jsx(Vo,{className:"w-4 h-4 ml-2"})]})})]},R.id))})]})}const sj=e=>e.charAt(0).toUpperCase()+e.slice(1),ij=e=>e==="financial_aid"?"Financial Aid":e.charAt(0).toUpperCase()+e.slice(1),Ka={getAll:async e=>{try{const t=se(te,"University Data/Resources"),r=await Pe(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.entries(n).forEach(([i,a])=>{var u;const l=[];a["Key Words"]&&Object.keys(a["Key Words"]).forEach(d=>{l.push(d)});const c={Essays:"essays","Financial Aid":"financial_aid",Applications:"applications",Interviews:"interviews",General:"general"};s.push({id:i,counselor_id:e,resource_type:((u=a["Resource Type"])==null?void 0:u.toLowerCase())||"other",title:a.name||i,creator:a.Owner||"",description:a.Description||"",key_topics:l,time_estimate:a.Duration||"",link:a.Link||"",category:c[a["Helps with"]]||"general",created_at:new Date().toISOString()})}),s}catch(t){throw console.error("Error loading resources from Firebase:",t),t}},getByCategory:async(e,t)=>(await Ka.getAll(e)).filter(n=>n.category===t),create:async e=>{console.log("counselorResourcesService.create called with:",e);try{if(!te)throw new Error("Firebase database is not initialized");const t={};e.key_topics.forEach(a=>{t[a]=!0}),console.log("Key words object:",t);const r=`University Data/Resources/${e.title}`;console.log("Writing to Firebase path:",r);const n=se(te,r),s={name:e.title,"Resource Type":sj(e.resource_type),Owner:e.creator,Description:e.description,"Key Words":t,Duration:e.time_estimate,Link:e.link,"Helps with":ij(e.category)};console.log("Data to write:",s),await ot(n,s),console.log("Resource saved to Firebase successfully at path:",r);const i={id:e.title,...e,created_at:new Date().toISOString()};return console.log("Returning result:",i),i}catch(t){throw console.error("Error saving to Firebase:",t),console.error("Error details:",t instanceof Error?t.message:t),t}},update:async(e,t)=>{var r;try{const n=e,s=t.title||n;if(n!==s){const h=se(te,`University Data/Resources/${n}`);await jc(h)}const i=se(te,`University Data/Resources/${n}`),a=await Pe(i),l=a.exists()?a.val():{},c=t.key_topics||[],u={};c.forEach(h=>{u[h]=!0});const d=se(te,`University Data/Resources/${s}`);return await ot(d,{name:s,"Resource Type":sj(t.resource_type||((r=l["Resource Type"])==null?void 0:r.toLowerCase())||"other"),Owner:t.creator||l.Owner||"",Description:t.description||l.Description||"","Key Words":Object.keys(u).length>0?u:l["Key Words"]||{},Duration:t.time_estimate||l.Duration||"",Link:t.link||l.Link||"","Helps with":ij(t.category||"general")}),console.log("Resource updated in Firebase successfully"),{id:s,counselor_id:"",resource_type:t.resource_type||"other",title:s,creator:t.creator||"",description:t.description||"",key_topics:t.key_topics||[],time_estimate:t.time_estimate||"",link:t.link||"",category:t.category||"general",created_at:new Date().toISOString()}}catch(n){throw console.error("Error updating Firebase:",n),n}},delete:async e=>{try{const t=se(te,`University Data/Resources/${e}`);await jc(t),console.log("Resource removed from Firebase successfully")}catch(t){throw console.error("Error removing from Firebase:",t),t}},search:async(e,t)=>{const r=await Ka.getAll(e),n=t.toLowerCase();return r.filter(s=>s.title.toLowerCase().includes(n)||s.creator.toLowerCase().includes(n)||s.key_topics.some(i=>i.toLowerCase().includes(n)))}};function a7({onBack:e,onLogout:t}){const[r,n]=x.useState([]),[s,i]=x.useState([]),[a,l]=x.useState(!0),[c,u]=x.useState(!1),[d,h]=x.useState(null),[f,m]=x.useState(""),[g,y]=x.useState("all"),[p,v]=x.useState("all"),[b,w]=x.useState({resource_type:"article",title:"",creator:"",description:"",key_topics:"",time_estimate:"",link:"",category:"general"});x.useEffect(()=>{_()},[]),x.useEffect(()=>{j()},[r,f,g,p]);const _=async()=>{l(!0),console.log("Loading resources from Firebase...");try{const S=await Ka.getAll("anonymous");console.log("Resources loaded:",S),n(S)}catch(S){console.error("Error loading resources:",S),n([])}finally{l(!1)}},j=()=>{let S=[...r];f&&(S=S.filter(E=>E.title.toLowerCase().includes(f.toLowerCase())||E.creator.toLowerCase().includes(f.toLowerCase())||E.key_topics.some(O=>O.toLowerCase().includes(f.toLowerCase())))),g!=="all"&&(S=S.filter(E=>E.category===g)),p!=="all"&&(S=S.filter(E=>E.resource_type===p)),i(S)},N=async S=>{S.preventDefault();const E=b.key_topics.split(",").map(O=>O.trim()).filter(O=>O);if(!b.title||!b.creator||!b.link){alert("Please fill in all required fields");return}console.log("Submitting resource:",{...b,key_topics:E});try{if(d)console.log("Updating resource with id:",d),await Ka.update(d,{...b,key_topics:E}),alert("Resource updated successfully!");else{console.log("Creating new resource");const O=await Ka.create({...b,key_topics:E,counselor_id:"anonymous"});console.log("Resource created:",O),alert("Resource created successfully!")}P(),await _()}catch(O){console.error("Error saving resource:",O),alert(`Error saving resource: ${O instanceof Error?O.message:"Unknown error"}`)}},k=S=>{w({resource_type:S.resource_type,title:S.title,creator:S.creator,description:S.description||"",key_topics:S.key_topics.join(", "),time_estimate:S.time_estimate,link:S.link,category:S.category}),h(S.id),u(!0)},T=async S=>{if(confirm("Are you sure you want to delete this resource?"))try{await Ka.delete(S),_()}catch(E){console.error("Error deleting resource:",E)}},P=()=>{w({resource_type:"article",title:"",creator:"",description:"",key_topics:"",time_estimate:"",link:"",category:"general"}),h(null),u(!1)},C=S=>{switch(S){case"video":return o.jsx(Go,{className:"w-4 h-4"});case"article":return o.jsx(ke,{className:"w-4 h-4"});case"guide":return o.jsx(Er,{className:"w-4 h-4"});default:return o.jsx(ke,{className:"w-4 h-4"})}},A=S=>{switch(S){case"essays":return"bg-purple-100 text-purple-700 border-purple-200";case"financial_aid":return"bg-green-100 text-green-700 border-green-200";case"applications":return"bg-blue-100 text-blue-700 border-blue-200";case"interviews":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Resource Management"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Add and manage educational resources"})]}),o.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[o.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[o.jsx(ur,{className:"w-4 h-4"}),c?"Cancel":"Add Resource"]}),o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(zr,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),o.jsx("input",{type:"text",value:f,onChange:S=>m(S.target.value),placeholder:"Search resources...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),f&&o.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:o.jsx(at,{className:"w-5 h-5"})})]}),o.jsxs("select",{value:g,onChange:S=>y(S.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[o.jsx("option",{value:"all",children:"All Categories"}),o.jsx("option",{value:"essays",children:"Essays"}),o.jsx("option",{value:"financial_aid",children:"Financial Aid"}),o.jsx("option",{value:"applications",children:"Applications"}),o.jsx("option",{value:"interviews",children:"Interviews"}),o.jsx("option",{value:"general",children:"General"})]}),o.jsxs("select",{value:p,onChange:S=>v(S.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"video",children:"Videos"}),o.jsx("option",{value:"article",children:"Articles"}),o.jsx("option",{value:"guide",children:"Guides"}),o.jsx("option",{value:"other",children:"Other"})]})]}),c&&o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-8",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:d?"Edit Resource":"New Resource"}),o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Resource Type *"}),o.jsxs("select",{value:b.resource_type,onChange:S=>w({...b,resource_type:S.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[o.jsx("option",{value:"video",children:"Video"}),o.jsx("option",{value:"article",children:"Article"}),o.jsx("option",{value:"guide",children:"Guide"}),o.jsx("option",{value:"other",children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Category *"}),o.jsxs("select",{value:b.category,onChange:S=>w({...b,category:S.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[o.jsx("option",{value:"essays",children:"Essays"}),o.jsx("option",{value:"financial_aid",children:"Financial Aid"}),o.jsx("option",{value:"applications",children:"Applications"}),o.jsx("option",{value:"interviews",children:"Interviews"}),o.jsx("option",{value:"general",children:"General Strategy"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Title *"}),o.jsx("input",{type:"text",value:b.title,onChange:S=>w({...b,title:S.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description *"}),o.jsx("textarea",{value:b.description,onChange:S=>w({...b,description:S.target.value}),required:!0,rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Creator / Author *"}),o.jsx("input",{type:"text",value:b.creator,onChange:S=>w({...b,creator:S.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Time Estimate *"}),o.jsx("input",{type:"text",value:b.time_estimate,onChange:S=>w({...b,time_estimate:S.target.value}),required:!0,placeholder:"e.g., 10 minutes",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Key Topics * (comma-separated)"}),o.jsx("input",{type:"text",value:b.key_topics,onChange:S=>w({...b,key_topics:S.target.value}),required:!0,placeholder:"e.g., Common App, Personal Statement, Brainstorming",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Resource Link *"}),o.jsx("input",{type:"url",value:b.link,onChange:S=>w({...b,link:S.target.value}),required:!0,placeholder:"https://...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{type:"submit",className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[d?"Update":"Create"," Resource"]}),o.jsx("button",{type:"button",onClick:P,className:"px-6 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"})]})]})]}),a?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"inline-block w-8 h-8 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),o.jsx("p",{className:"mt-4 text-slate-600",children:"Loading resources..."})]}):s.length===0?o.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[o.jsx(Er,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600 text-lg",children:"No resources found"}),o.jsx("p",{className:"text-slate-500 text-sm mt-2",children:f||g!=="all"||p!=="all"?"Try adjusting your search or filters":'Click "Add Resource" button above to create your first resource'})]}):o.jsx("div",{className:"grid gap-4",children:s.map(S=>o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"p-2 bg-[#04ADEE]/10 rounded-lg text-[#04ADEE]",children:C(S.resource_type)}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:S.title}),o.jsxs("p",{className:"text-sm text-slate-600",children:["by ",S.creator]})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${A(S.category)}`,children:S.category.replace("_"," ")})]}),S.description&&o.jsx("p",{className:"text-sm text-slate-700 mb-3",children:S.description}),o.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[o.jsx(Cr,{className:"w-4 h-4"}),S.time_estimate]}),o.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:o.jsx("span",{className:"font-medium capitalize",children:S.resource_type})})]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:S.key_topics.map((E,O)=>o.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:E},O))}),o.jsxs("a",{href:S.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] text-sm font-medium",children:[o.jsx(Vo,{className:"w-4 h-4"}),"View Resource"]})]}),o.jsxs("div",{className:"flex gap-2 ml-4",children:[o.jsx("button",{onClick:()=>k(S),className:"p-2 hover:bg-[#04ADEE]/10 text-[#04ADEE] rounded-lg transition-colors",children:o.jsx(Px,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>T(S.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:o.jsx(on,{className:"w-4 h-4"})})]})]})},S.id))})]})}const o7={getActiveStudents:async e=>{const{data:t,error:r}=await dt.from("pool_students").select("*").eq("counselor_id",e).eq("status","active").order("composite_score",{ascending:!1});if(r)throw r;return t||[]},getAssignedStudents:async e=>{const{data:t,error:r}=await dt.from("pool_students").select("*").eq("counselor_id",e).eq("status","assigned").order("updated_at",{ascending:!1});if(r)throw r;return t||[]},getStudentById:async e=>{const{data:t,error:r}=await dt.from("pool_students").select("*").eq("id",e).maybeSingle();if(r)throw r;return t},assignUniversities:async(e,t,r)=>{const n=r.map(a=>({student_id:e,counselor_id:t,university_name:a.name,university_tier:a.tier})),{error:s}=await dt.from("university_assignments").insert(n);if(s)throw s;const{error:i}=await dt.from("pool_students").update({status:"assigned",updated_at:new Date().toISOString()}).eq("id",e);if(i)throw i},getStudentAssignments:async e=>{const{data:t,error:r}=await dt.from("university_assignments").select("*").eq("student_id",e).order("assigned_at",{ascending:!1});if(r)throw r;return t||[]},addStudent:async e=>{const{data:t,error:r}=await dt.from("pool_students").insert(e).select().single();if(r)throw r;return t}},Yt=5,Yp={reach:["Harvard University","Stanford University","MIT","Yale University","Princeton University","Columbia University","Duke University","University of Pennsylvania","Cornell University","Brown University"],mid:["University of Michigan","Boston University","Northwestern University","University of Virginia","University of North Carolina","NYU","University of California Berkeley","UCLA","USC","Georgetown University"],safety:["Penn State University","Ohio State University","Michigan State University","University of Maryland","Rutgers University","Purdue University","University of Wisconsin Madison","University of Florida","Arizona State University"]};function l7({student:e,counselorId:t,onClose:r,onComplete:n}){const[s,i]=x.useState([]),[a,l]=x.useState(""),[c,u]=x.useState("mid"),[d,h]=x.useState(!1),[f,m]=x.useState(""),[g,y]=x.useState(!0),p=()=>{if(!a.trim()){m("Please enter a university name");return}if(s.length>=Yt){m(`Maximum ${Yt} universities allowed`);return}if(s.some(j=>j.name.toLowerCase()===a.toLowerCase())){m("This university is already in the list");return}i([...s,{name:a.trim(),tier:c}]),l(""),m("")},v=j=>{i(s.filter((N,k)=>k!==j)),m("")},b=(j,N)=>{if(s.length>=Yt){m(`Maximum ${Yt} universities allowed`);return}if(s.some(k=>k.name.toLowerCase()===j.toLowerCase())){m("This university is already in the list");return}i([...s,{name:j,tier:N}]),m("")},w=async()=>{if(s.length===0){m("Please add at least one university");return}if(s.length!==Yt){m(`Please assign exactly ${Yt} universities`);return}h(!0),m("");try{await o7.assignUniversities(e.id,t,s),n()}catch(j){m(j instanceof Error?j.message:"Failed to assign universities"),h(!1)}},_=j=>{switch(j){case"reach":return"bg-purple-100 text-purple-700 border-purple-200";case"mid":return"bg-blue-100 text-blue-700 border-blue-200";case"safety":return"bg-green-100 text-green-700 border-green-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Assign Universities"}),o.jsx("p",{className:"text-sm text-slate-600 mt-1",children:e.name})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(at,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:[o.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Composite"}),o.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[e.composite_score.toFixed(1),"%"]})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Academic"}),o.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[e.academic_performance.toFixed(1),"%"]})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[o.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Essay & Activities"}),o.jsxs("p",{className:"text-lg font-bold text-purple-700",children:[e.essay_activities_rating.toFixed(1),"%"]})]}),o.jsxs("div",{className:`${e.academic_trend>=0?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"} rounded-lg p-3 border`,children:[o.jsx("p",{className:`text-xs ${e.academic_trend>=0?"text-green-600":"text-orange-600"} mb-1`,children:"Trend"}),o.jsxs("div",{className:"flex items-center gap-1",children:[e.academic_trend>=0?o.jsx(tn,{className:"w-4 h-4 text-green-600"}):o.jsx(LP,{className:"w-4 h-4 text-orange-600"}),o.jsxs("p",{className:`text-lg font-bold ${e.academic_trend>=0?"text-green-700":"text-orange-700"}`,children:[e.academic_trend>0?"+":"",e.academic_trend.toFixed(1),"%"]})]})]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsx("div",{className:"mb-6 p-4 bg-[#04ADEE]/10 rounded-lg border border-[#04ADEE]/30",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm text-[#04ADEE] font-medium",children:["Assign exactly ",Yt," universities"]}),o.jsxs("p",{className:"text-xs text-[#04ADEE]/80 mt-1",children:["Progress: ",s.length,"/",Yt," universities added"]})]}),o.jsx("div",{className:"flex items-center gap-2 text-xs text-[#04ADEE]",children:o.jsx("div",{className:"w-12 h-2 bg-[#04ADEE]/20 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-[#04ADEE] transition-all",style:{width:`${s.length/Yt*100}%`}})})})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Add University"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:a,onChange:j=>l(j.target.value),onKeyPress:j=>j.key==="Enter"&&p(),placeholder:"University name",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",disabled:s.length>=Yt}),o.jsxs("select",{value:c,onChange:j=>u(j.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",disabled:s.length>=Yt,children:[o.jsx("option",{value:"reach",children:"Reach"}),o.jsx("option",{value:"mid",children:"Mid"}),o.jsx("option",{value:"safety",children:"Safety"})]}),o.jsxs("button",{onClick:p,disabled:s.length>=Yt,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[o.jsx(ur,{className:"w-4 h-4"}),"Add"]})]})]}),f&&o.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:f}),o.jsxs("div",{className:"space-y-2 mb-6",children:[o.jsxs("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:["Selected Universities (",s.length,"/",Yt,")"]}),s.length===0?o.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[o.jsx("p",{className:"text-slate-500",children:"No universities added yet"}),o.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Add universities above or choose from suggestions below"})]}):s.map((j,N)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200 hover:border-slate-300 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[o.jsxs("span",{className:"text-slate-500 font-medium",children:[N+1,"."]}),o.jsx("span",{className:"font-medium text-slate-900",children:j.name}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${_(j.tier)}`,children:j.tier.charAt(0).toUpperCase()+j.tier.slice(1)})]}),o.jsx("button",{onClick:()=>v(N),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:o.jsx(on,{className:"w-4 h-4"})})]},N))]}),s.length<Yt&&g&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(CB,{className:"w-4 h-4 text-[#04ADEE]"}),o.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Quick Add Suggestions"})]}),o.jsx("button",{onClick:()=>y(!1),className:"text-xs text-slate-500 hover:text-slate-700",children:"Hide"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-purple-700 mb-2",children:"Reach Schools"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Yp.reach.slice(0,5).map(j=>o.jsxs("button",{onClick:()=>b(j,"reach"),disabled:s.some(N=>N.name===j),className:"px-3 py-1.5 bg-purple-50 hover:bg-purple-100 text-purple-700 text-xs font-medium rounded-full border border-purple-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",j]},j))})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-blue-700 mb-2",children:"Mid-Tier Schools"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Yp.mid.slice(0,5).map(j=>o.jsxs("button",{onClick:()=>b(j,"mid"),disabled:s.some(N=>N.name===j),className:"px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-medium rounded-full border border-blue-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",j]},j))})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-green-700 mb-2",children:"Safety Schools"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Yp.safety.slice(0,5).map(j=>o.jsxs("button",{onClick:()=>b(j,"safety"),disabled:s.some(N=>N.name===j),className:"px-3 py-1.5 bg-green-50 hover:bg-green-100 text-green-700 text-xs font-medium rounded-full border border-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",j]},j))})]})]})]}),!g&&s.length<Yt&&o.jsx("button",{onClick:()=>y(!0),className:"w-full py-2 text-sm text-[#04ADEE] hover:text-[#0396d5] font-medium",children:"Show Suggestions"})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 flex items-center justify-between bg-slate-50",children:[o.jsx("button",{onClick:r,disabled:d,className:"px-6 py-2 text-slate-700 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),o.jsx("button",{onClick:w,disabled:d||s.length!==Yt,className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Assigning..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Gl,{className:"w-4 h-4"}),"Complete Assignment"]})})]})]})})}const c7=async(e,t)=>{const{data:r,error:n}=await dt.from("pool_students").select("*").eq("id",e).eq("counselor_id",t).maybeSingle();if(n||!r)return console.error("Error fetching student:",n),null;const{data:s,error:i}=await dt.from("university_assignments").select("*").eq("student_id",e).eq("counselor_id",t).order("assigned_at",{ascending:!1});if(i)return console.error("Error fetching assignments:",i),null;const a=await Promise.all((s||[]).map(async l=>{const{data:c}=await dt.from("application_progress").select("*").eq("assignment_id",l.id).maybeSingle();return{...l,progress:c||void 0}}));return{...r,universities:a}},u7=async(e,t,r)=>{const{error:n}=await dt.from("application_progress").update({...t,updated_at:new Date().toISOString()}).eq("id",e).eq("counselor_id",r);return n?(console.error("Error updating progress:",n),!1):!0},d7=async(e,t,r,n)=>{const{data:s,error:i}=await dt.from("application_progress").insert({assignment_id:e,student_id:t,counselor_id:r,...n}).select().single();return i?(console.error("Error creating progress:",i),null):s},h7=async(e,t)=>{const{error:r}=await dt.from("university_assignments").delete().eq("id",e).eq("counselor_id",t);return r?(console.error("Error removing assignment:",r),!1):!0};function f7({studentId:e,counselorId:t,onBack:r}){const[n,s]=x.useState(null),[i,a]=x.useState(!0),[l,c]=x.useState(null),[u,d]=x.useState(null),[h,f]=x.useState({});x.useEffect(()=>{m()},[e]);const m=async()=>{a(!0);const P=await c7(e,t);s(P),a(!1)},g=async(P,C)=>{C?await u7(C,h,t):await d7(P,e,t,h),d(null),f({}),m()},y=async P=>{confirm("Are you sure you want to remove this university assignment?")&&(await h7(P,t),m())},p=P=>{const C={not_started:"bg-gray-100 text-gray-700",in_progress:"bg-blue-100 text-blue-700",submitted:"bg-purple-100 text-purple-700",accepted:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700",deferred:"bg-amber-100 text-amber-700",waitlisted:"bg-orange-100 text-orange-700"};return C[P]||C.not_started},v=P=>({reach:"bg-rose-100 text-rose-700 border-rose-300",mid:"bg-amber-100 text-amber-700 border-amber-300",safety:"bg-emerald-100 text-emerald-700 border-emerald-300"})[P],b=P=>{const C={not_started:"text-gray-400",draft:"text-blue-500",review:"text-amber-500",final:"text-emerald-500"};return C[P]||C.not_started};if(i)return o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})});if(!n)return o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("p",{className:"text-slate-600",children:"Student not found"}),o.jsx("button",{onClick:r,className:"mt-4 text-[#04ADEE] hover:text-[#0390cc] font-medium",children:"Go Back"})]});const w=n.universities.filter(P=>P.university_tier==="reach").length,_=n.universities.filter(P=>P.university_tier==="mid").length,j=n.universities.filter(P=>P.university_tier==="safety").length,N=n.universities.filter(P=>{var C;return((C=P.progress)==null?void 0:C.status)==="submitted"}).length,k=n.universities.filter(P=>{var C;return((C=P.progress)==null?void 0:C.status)==="accepted"}).length,T=n.universities.filter(P=>{var C;return((C=P.progress)==null?void 0:C.status)==="in_progress"}).length;return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-[#04ADEE]/5",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[o.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-slate-600 hover:text-[#04ADEE] transition-colors mb-6",children:[o.jsx(Kn,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#04ADEE] to-emerald-400 flex items-center justify-center text-white text-2xl font-bold",children:n.name.split(" ").map(P=>P[0]).join("")}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:n.name}),o.jsxs("p",{className:"text-slate-600 flex items-center gap-2 mt-1",children:[o.jsx(nu,{className:"w-4 h-4"}),n.email]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-lg border border-emerald-200",children:[o.jsx(dr,{className:"w-5 h-5"}),o.jsxs("span",{className:"font-semibold",children:["Composite: ",n.composite_score.toFixed(1)]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-xl p-4 border border-blue-200",children:[o.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-2",children:[o.jsx(Er,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium",children:"Essays & Activities"})]}),o.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[n.essay_activities_rating.toFixed(1),"%"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100/50 rounded-xl p-4 border border-purple-200",children:[o.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-2",children:[o.jsx(er,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium",children:"Academic Performance"})]}),o.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[n.academic_performance.toFixed(1),"%"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 rounded-xl p-4 border border-emerald-200",children:[o.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 mb-2",children:[n.academic_trend>=0?o.jsx(tn,{className:"w-5 h-5"}):o.jsx(LP,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium",children:"Academic Trend"})]}),o.jsxs("p",{className:"text-2xl font-bold text-emerald-900",children:[n.academic_trend>=0?"+":"",n.academic_trend.toFixed(1),"%"]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-6 gap-4 mb-6",children:[o.jsxs("div",{className:"col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(pa,{className:"w-6 h-6 text-[#04ADEE]"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Universities"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Total Assigned"}),o.jsx("span",{className:"text-2xl font-bold text-slate-900",children:n.universities.length})]}),o.jsx("div",{className:"h-px bg-slate-200"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-rose-600 text-sm",children:"Reach"}),o.jsx("span",{className:"font-semibold text-rose-600",children:w})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-amber-600 text-sm",children:"Mid"}),o.jsx("span",{className:"font-semibold text-amber-600",children:_})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-emerald-600 text-sm",children:"Safety"}),o.jsx("span",{className:"font-semibold text-emerald-600",children:j})]})]})]}),o.jsxs("div",{className:"col-span-4 bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(gB,{className:"w-6 h-6 text-emerald-500"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Application Progress"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[o.jsx("p",{className:"text-sm text-blue-700 font-medium mb-1",children:"In Progress"}),o.jsx("p",{className:"text-3xl font-bold text-blue-900",children:T})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[o.jsx("p",{className:"text-sm text-purple-700 font-medium mb-1",children:"Submitted"}),o.jsx("p",{className:"text-3xl font-bold text-purple-900",children:N})]}),o.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[o.jsx("p",{className:"text-sm text-emerald-700 font-medium mb-1",children:"Accepted"}),o.jsx("p",{className:"text-3xl font-bold text-emerald-900",children:k})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Assigned Universities"}),o.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors",children:[o.jsx(ur,{className:"w-4 h-4"}),"Add University"]})]}),o.jsxs("div",{className:"space-y-4",children:[n.universities.map(P=>{var C,A,S,E,O,R,F;return o.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:shadow-md transition-shadow",children:[o.jsx("div",{className:"p-6 cursor-pointer bg-gradient-to-r from-slate-50 to-white",onClick:()=>c(l===P.id?null:P.id),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#04ADEE] to-emerald-400 flex items-center justify-center",children:o.jsx(er,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:P.university_name}),o.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[o.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full border ${v(P.university_tier)}`,children:P.university_tier.charAt(0).toUpperCase()+P.university_tier.slice(1)}),P.progress&&o.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full ${p(P.progress.status)}`,children:P.progress.status.replace("_"," ").toUpperCase()})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[P.progress&&o.jsxs("div",{className:"flex items-center gap-4 mr-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-slate-500",children:"Essay Status"}),o.jsx("p",{className:`text-sm font-semibold ${b(P.progress.essay_status)}`,children:P.progress.essay_status.charAt(0).toUpperCase()+P.progress.essay_status.slice(1)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-slate-500",children:"Recommendations"}),o.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[P.progress.recommendation_letters,"/",P.progress.recommendation_letters_needed]})]})]}),o.jsx("button",{onClick:I=>{I.stopPropagation(),y(P.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:o.jsx(on,{className:"w-4 h-4"})})]})]})}),l===P.id&&o.jsx("div",{className:"border-t border-slate-200 p-6 bg-white",children:u===P.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Status"}),o.jsxs("select",{value:h.status||((C=P.progress)==null?void 0:C.status)||"not_started",onChange:I=>f({...h,status:I.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[o.jsx("option",{value:"not_started",children:"Not Started"}),o.jsx("option",{value:"in_progress",children:"In Progress"}),o.jsx("option",{value:"submitted",children:"Submitted"}),o.jsx("option",{value:"accepted",children:"Accepted"}),o.jsx("option",{value:"rejected",children:"Rejected"}),o.jsx("option",{value:"deferred",children:"Deferred"}),o.jsx("option",{value:"waitlisted",children:"Waitlisted"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Essay Status"}),o.jsxs("select",{value:h.essay_status||((A=P.progress)==null?void 0:A.essay_status)||"not_started",onChange:I=>f({...h,essay_status:I.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[o.jsx("option",{value:"not_started",children:"Not Started"}),o.jsx("option",{value:"draft",children:"Draft"}),o.jsx("option",{value:"review",children:"Under Review"}),o.jsx("option",{value:"final",children:"Final"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Deadline"}),o.jsx("input",{type:"date",value:h.application_deadline||((S=P.progress)==null?void 0:S.application_deadline)||"",onChange:I=>f({...h,application_deadline:I.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Decision Date"}),o.jsx("input",{type:"date",value:h.decision_date||((E=P.progress)==null?void 0:E.decision_date)||"",onChange:I=>f({...h,decision_date:I.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Recommendation Letters (Completed)"}),o.jsx("input",{type:"number",min:"0",value:h.recommendation_letters??((O=P.progress)==null?void 0:O.recommendation_letters)??0,onChange:I=>f({...h,recommendation_letters:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Recommendation Letters (Required)"}),o.jsx("input",{type:"number",min:"0",value:h.recommendation_letters_needed??((R=P.progress)==null?void 0:R.recommendation_letters_needed)??2,onChange:I=>f({...h,recommendation_letters_needed:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),o.jsx("textarea",{value:h.notes||((F=P.progress)==null?void 0:F.notes)||"",onChange:I=>f({...h,notes:I.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",placeholder:"Add notes about this application..."})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsxs("button",{onClick:()=>{d(null),f({})},className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors flex items-center gap-2",children:[o.jsx(at,{className:"w-4 h-4"}),"Cancel"]}),o.jsxs("button",{onClick:()=>{var I;return g(P.id,(I=P.progress)==null?void 0:I.id)},className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors flex items-center gap-2",children:[o.jsx(em,{className:"w-4 h-4"}),"Save Progress"]})]})]}):o.jsx("div",{children:P.progress?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[o.jsx(wt,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Application Deadline"})]}),o.jsx("p",{className:"text-slate-900 font-semibold",children:P.progress.application_deadline?new Date(P.progress.application_deadline).toLocaleDateString():"Not set"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[o.jsx(Cr,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Decision Date"})]}),o.jsx("p",{className:"text-slate-900 font-semibold",children:P.progress.decision_date?new Date(P.progress.decision_date).toLocaleDateString():"Not set"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[o.jsx(ia,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Recommendation Letters"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2",children:o.jsx("div",{className:"bg-[#04ADEE] h-2 rounded-full transition-all",style:{width:`${P.progress.recommendation_letters/P.progress.recommendation_letters_needed*100}%`}})}),o.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:[P.progress.recommendation_letters,"/",P.progress.recommendation_letters_needed]})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[o.jsx(ke,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Essay Progress"})]}),o.jsx("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-lg text-sm font-medium ${p(P.progress.essay_status)}`,children:P.progress.essay_status.charAt(0).toUpperCase()+P.progress.essay_status.slice(1)})]})]}),P.progress.notes&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[o.jsx(ke,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Notes"})]}),o.jsx("p",{className:"text-slate-700 bg-slate-50 rounded-lg p-4",children:P.progress.notes})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsxs("button",{onClick:()=>{d(P.id),f(P.progress||{})},className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 hover:bg-slate-200 rounded-lg transition-colors",children:[o.jsx(Ax,{className:"w-4 h-4"}),"Edit Progress"]})})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Cc,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-500 mb-4",children:"No progress tracking yet"}),o.jsx("button",{onClick:()=>{d(P.id),f({})},className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors",children:"Start Tracking"})]})})})]},P.id)}),n.universities.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(er,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-500 text-lg mb-2",children:"No universities assigned yet"}),o.jsx("p",{className:"text-slate-400 text-sm",children:"Start by adding universities to this student's list"})]})]})]})]})})}function BP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=BP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function qe(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=BP(e))&&(n&&(n+=" "),n+=t);return n}var m7=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ix(e){if(typeof e!="string")return!1;var t=m7;return t.includes(e)}var p7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g7=new Set(p7);function zP(e){return typeof e!="string"?!1:g7.has(e)}function WP(e){return typeof e=="string"&&e.startsWith("data-")}function gs(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(zP(r)||WP(r))&&(t[r]=e[r]);return t}function Dx(e){if(e==null)return null;if(x.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return gs(t)}return typeof e=="object"&&!Array.isArray(e)?gs(e):null}function ln(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(zP(r)||WP(r)||Ix(r))&&(t[r]=e[r]);return t}var v7=["children","width","height","viewBox","className","style","title","desc"];function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vv.apply(null,arguments)}function y7(e,t){if(e==null)return{};var r,n,s=x7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function x7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HP=x.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:a,style:l,title:c,desc:u}=e,d=y7(e,v7),h=i||{width:n,height:s,x:0,y:0},f=qe("recharts-surface",a);return x.createElement("svg",Vv({},ln(d),{className:f,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),x.createElement("title",null,c),x.createElement("desc",null,u),r)}),b7=["children","className"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function w7(e,t){if(e==null)return{};var r,n,s=_7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vs=x.forwardRef((e,t)=>{var{children:r,className:n}=e,s=w7(e,b7),i=qe("recharts-layer",n);return x.createElement("g",Gv({className:i},ln(s),{ref:t}),r)}),j7=x.createContext(null);function Re(e){return function(){return e}}const qP=Math.cos,Ih=Math.sin,In=Math.sqrt,Dh=Math.PI,rm=2*Dh,Kv=Math.PI,Yv=2*Kv,ki=1e-6,N7=Yv-ki;function VP(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function S7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return VP;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class E7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?VP:S7(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,a){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+a}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,l=this._y1,c=n-t,u=s-r,d=a-t,h=l-r,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>ki)if(!(Math.abs(h*c-u*d)>ki)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-a,g=s-l,y=c*c+u*u,p=m*m+g*g,v=Math.sqrt(y),b=Math.sqrt(f),w=i*Math.tan((Kv-Math.acos((y+f-p)/(2*v*b)))/2),_=w/b,j=w/v;Math.abs(_-1)>ki&&this._append`L${t+_*d},${r+_*h}`,this._append`A${i},${i},0,0,${+(h*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,s,i,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,d=r+c,h=1^a,f=a?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ki||Math.abs(this._y1-d)>ki)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%Yv+Yv),f>N7?this._append`A${n},${n},0,1,${h},${t-l},${r-c}A${n},${n},0,1,${h},${this._x1=u},${this._y1=d}`:f>ki&&this._append`A${n},${n},0,${+(f>=Kv)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Rx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new E7(t)}function Mx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function GP(e){this._context=e}GP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function nm(e){return new GP(e)}function KP(e){return e[0]}function YP(e){return e[1]}function XP(e,t){var r=Re(!0),n=null,s=nm,i=null,a=Rx(l);e=typeof e=="function"?e:e===void 0?KP:Re(e),t=typeof t=="function"?t:t===void 0?YP:Re(t);function l(c){var u,d=(c=Mx(c)).length,h,f=!1,m;for(n==null&&(i=s(m=a())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,u,c),+t(h,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Re(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Re(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Re(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function nd(e,t,r){var n=null,s=Re(!0),i=null,a=nm,l=null,c=Rx(u);e=typeof e=="function"?e:e===void 0?KP:Re(+e),t=typeof t=="function"?t:Re(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?YP:Re(+r);function u(h){var f,m,g,y=(h=Mx(h)).length,p,v=!1,b,w=new Array(y),_=new Array(y);for(i==null&&(l=a(b=c())),f=0;f<=y;++f){if(!(f<y&&s(p=h[f],f,h))===v)if(v=!v)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=f-1;g>=m;--g)l.point(w[g],_[g]);l.lineEnd(),l.areaEnd()}v&&(w[f]=+e(p,f,h),_[f]=+t(p,f,h),l.point(n?+n(p,f,h):w[f],r?+r(p,f,h):_[f]))}if(b)return l=null,b+""||null}function d(){return XP().defined(s).curve(a).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Re(+h),n=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Re(+h),u):e},u.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Re(+h),u):n},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Re(+h),r=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Re(+h),u):t},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Re(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Re(!!h),u):s},u.curve=function(h){return arguments.length?(a=h,i!=null&&(l=a(i)),u):a},u.context=function(h){return arguments.length?(h==null?i=l=null:l=a(i=h),u):i},u}class JP{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function C7(e){return new JP(e,!0)}function k7(e){return new JP(e,!1)}const Lx={draw(e,t){const r=In(t/Dh);e.moveTo(r,0),e.arc(0,0,r,0,rm)}},A7={draw(e,t){const r=In(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},QP=In(1/3),P7=QP*2,O7={draw(e,t){const r=In(t/P7),n=r*QP;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},T7={draw(e,t){const r=In(t),n=-r/2;e.rect(n,n,r,r)}},I7=.8908130915292852,ZP=Ih(Dh/10)/Ih(7*Dh/10),D7=Ih(rm/10)*ZP,R7=-qP(rm/10)*ZP,M7={draw(e,t){const r=In(t*I7),n=D7*r,s=R7*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const a=rm*i/5,l=qP(a),c=Ih(a);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},Xp=In(3),L7={draw(e,t){const r=-In(t/(Xp*3));e.moveTo(0,r*2),e.lineTo(-Xp*r,-r),e.lineTo(Xp*r,-r),e.closePath()}},Gr=-.5,Kr=In(3)/2,Xv=1/In(12),$7=(Xv/2+1)*3,U7={draw(e,t){const r=In(t/$7),n=r/2,s=r*Xv,i=n,a=r*Xv+r,l=-i,c=a;e.moveTo(n,s),e.lineTo(i,a),e.lineTo(l,c),e.lineTo(Gr*n-Kr*s,Kr*n+Gr*s),e.lineTo(Gr*i-Kr*a,Kr*i+Gr*a),e.lineTo(Gr*l-Kr*c,Kr*l+Gr*c),e.lineTo(Gr*n+Kr*s,Gr*s-Kr*n),e.lineTo(Gr*i+Kr*a,Gr*a-Kr*i),e.lineTo(Gr*l+Kr*c,Gr*c-Kr*l),e.closePath()}};function F7(e,t){let r=null,n=Rx(s);e=typeof e=="function"?e:Re(e||Lx),t=typeof t=="function"?t:Re(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Re(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Re(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Rh(){}function Mh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function eO(e){this._context=e}eO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B7(e){return new eO(e)}function tO(e){this._context=e}tO.prototype={areaStart:Rh,areaEnd:Rh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function z7(e){return new tO(e)}function rO(e){this._context=e}rO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Mh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function W7(e){return new rO(e)}function nO(e){this._context=e}nO.prototype={areaStart:Rh,areaEnd:Rh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function H7(e){return new nO(e)}function aj(e){return e<0?-1:1}function oj(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),a=(r-e._y1)/(s||n<0&&-0),l=(i*s+a*n)/(n+s);return(aj(i)+aj(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(l))||0}function lj(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Jp(e,t,r){var n=e._x0,s=e._y0,i=e._x1,a=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,a-l*r,i,a)}function Lh(e){this._context=e}Lh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jp(this,this._t0,lj(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Jp(this,lj(this,r=oj(this,e,t)),r);break;default:Jp(this,this._t0,r=oj(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function sO(e){this._context=new iO(e)}(sO.prototype=Object.create(Lh.prototype)).point=function(e,t){Lh.prototype.point.call(this,t,e)};function iO(e){this._context=e}iO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function q7(e){return new Lh(e)}function V7(e){return new sO(e)}function aO(e){this._context=e}aO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=cj(e),s=cj(t),i=0,a=1;a<r;++i,++a)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[a],t[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function cj(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),a=new Array(r);for(s[0]=0,i[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,a[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,a[t]-=n*a[t-1];for(s[r-1]=a[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(a[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function G7(e){return new aO(e)}function sm(e,t){this._context=e,this._t=t}sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function K7(e){return new sm(e,.5)}function Y7(e){return new sm(e,0)}function X7(e){return new sm(e,1)}function aa(e,t){if((a=e.length)>1)for(var r=1,n,s,i=e[t[0]],a,l=i.length;r<a;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Jv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function J7(e,t){return e[t]}function Q7(e){const t=[];return t.key=e,t}function Z7(){var e=Re([]),t=Jv,r=aa,n=J7;function s(i){var a=Array.from(e.apply(this,arguments),Q7),l,c=a.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(a[l][u]=[0,+n(h,a[l].key,u,i)]).data=h;for(l=0,d=Mx(t(a));l<c;++l)a[d[l]].index=l;return r(a,d),a}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Re(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Re(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Jv:typeof i=="function"?i:Re(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??aa,s):r},s}function ez(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,a;s<i;++s){for(a=r=0;r<n;++r)a+=e[r][s][1]||0;if(a)for(r=0;r<n;++r)e[r][s][1]/=a}aa(e,t)}}function tz(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var a=0,l=0;a<s;++a)l+=e[a][r][1]||0;n[r][1]+=n[r][0]=-l/2}aa(e,t)}}function rz(e,t){if(!(!((a=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,a;n<i;++n){for(var l=0,c=0,u=0;l<a;++l){for(var d=e[t[l]],h=d[n][1]||0,f=d[n-1][1]||0,m=(h-f)/2,g=0;g<l;++g){var y=e[t[g]],p=y[n][1]||0,v=y[n-1][1]||0;m+=p-v}c+=h,u+=m*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,aa(e,t)}}var im={},oO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(oO);var $x={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})($x);var am={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(am);var om={},lO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(lO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lO,r=am;function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],a=s.length;if(a===0)return i;let l=0,c="",u="",d=!1;for(s.charCodeAt(0)===46&&(i.push(""),l++);l<a;){const h=s[l];u?h==="\\"&&l+1<a?(l++,c+=s[l]):h===u?u="":c+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,i.push(c),c=""):c+=h:h==="["?(d=!0,c&&(i.push(c),c="")):h==="."?c&&(i.push(c),c=""):c+=h,l++}return c&&i.push(c),i}e.toPath=n})(om);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oO,r=$x,n=am,s=om;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return a(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function a(l,c,u){if(c.length===0)return u;let d=l;for(let h=0;h<c.length;h++){if(d==null||t.isUnsafeProperty(c[h]))return u;d=d[c[h]]}return d===void 0?u:d}e.get=i})(im);var nz=im.get;const jo=Ss(nz);var sz=4;function Ys(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sz,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function tt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((s,i,a)=>{var l=r[a-1];return typeof l=="string"?s+l+i:l!==void 0?s+Ys(l)+i:s+i},"")}var br=e=>e===0?0:e>0?1:-1,Pn=e=>typeof e=="number"&&e!=+e,ys=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Q=e=>(typeof e=="number"||e instanceof Number)&&!Pn(e),qn=e=>Q(e)||typeof e=="string",iz=0,Ac=e=>{var t=++iz;return"".concat(e||"").concat(t)},On=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Q(t)&&typeof t!="string")return n;var i;if(ys(t)){if(r==null)return n;var a=t.indexOf("%");i=r*parseFloat(t.slice(0,a))/100}else i=+t;return Pn(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},cO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Bt(e,t,r){return Q(e)&&Q(t)?Ys(e+r*(t-e)):t}function az(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):jo(n,t))===r)}var Dt=e=>e===null||typeof e>"u",su=e=>Dt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function oz(e){return e!=null}function iu(){}var lz=["type","size","sizeType"];function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qv.apply(null,arguments)}function uj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uj(Object(r),!0).forEach(function(n){cz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cz(e,t,r){return(t=uz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uz(e){var t=dz(e,"string");return typeof t=="symbol"?t:t+""}function dz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hz(e,t){if(e==null)return{};var r,n,s=fz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uO={symbolCircle:Lx,symbolCross:A7,symbolDiamond:O7,symbolSquare:T7,symbolStar:M7,symbolTriangle:L7,symbolWye:U7},mz=Math.PI/180,pz=e=>{var t="symbol".concat(su(e));return uO[t]||Lx},gz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*mz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},vz=(e,t)=>{uO["symbol".concat(su(e))]=t},dO=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=hz(e,lz),i=dj(dj({},s),{},{type:t,size:r,sizeType:n}),a="circle";typeof t=="string"&&(a=t);var l=()=>{var f=pz(a),m=F7().type(f).size(gz(r,n,a)),g=m();if(g!==null)return g},{className:c,cx:u,cy:d}=i,h=ln(i);return Q(u)&&Q(d)&&Q(r)?x.createElement("path",Qv({},h,{className:qe("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};dO.registerSymbol=vz;var hO=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,yz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(x.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Ix(s)&&(n[s]=i=>r[s](r,i))}),n},xz=(e,t,r)=>n=>(e(t,r,n),null),Ux=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];Ix(s)&&typeof i=="function"&&(n||(n={}),n[s]=xz(i,t,r))}),n};function hj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hj(Object(r),!0).forEach(function(n){wz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wz(e,t,r){return(t=_z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _z(e){var t=jz(e,"string");return typeof t=="symbol"?t:t+""}function jz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vr(e,t){var r=bz({},e),n=t,s=Object.keys(t),i=s.reduce((a,l)=>(a[l]===void 0&&n[l]!==void 0&&(a[l]=n[l]),a),r);return i}var fO={},mO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const a=r[i],l=n(a);s.has(l)||s.set(l,a)}return Array.from(s.values())}e.uniqBy=t})(mO);var Fx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Fx);var pO={},lm={},gO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(gO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gO;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(lm);var vO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(vO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lm,r=vO;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(pO);var yO={},xO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=im;function r(n){return function(s){return t.get(s,n)}}e.property=r})(xO);var bO={},Bx={},wO={},zx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(zx);var Wx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Wx);var Hx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Hx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zx,r=Wx,n=Hx;function s(d,h,f){return typeof f!="function"?s(d,h,()=>{}):i(d,h,function m(g,y,p,v,b,w){const _=f(g,y,p,v,b,w);return _!==void 0?!!_:i(g,y,m,w)},new Map)}function i(d,h,f,m){if(h===d)return!0;switch(typeof h){case"object":return a(d,h,f,m);case"function":return Object.keys(h).length>0?i(d,{...h},f,m):n.eq(d,h);default:return t.isObject(d)?typeof h=="string"?h==="":!0:n.eq(d,h)}}function a(d,h,f,m){if(h==null)return!0;if(Array.isArray(h))return c(d,h,f,m);if(h instanceof Map)return l(d,h,f,m);if(h instanceof Set)return u(d,h,f,m);const g=Object.keys(h);if(d==null||r.isPrimitive(d))return g.length===0;if(g.length===0)return!0;if(m!=null&&m.has(h))return m.get(h)===d;m==null||m.set(h,d);try{for(let y=0;y<g.length;y++){const p=g[y];if(!r.isPrimitive(d)&&!(p in d)||h[p]===void 0&&d[p]!==void 0||h[p]===null&&d[p]!==null||!f(d[p],h[p],p,d,h,m))return!1}return!0}finally{m==null||m.delete(h)}}function l(d,h,f,m){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of h.entries()){const p=d.get(g);if(f(p,y,g,d,h,m)===!1)return!1}return!0}function c(d,h,f,m){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<h.length;y++){const p=h[y];let v=!1;for(let b=0;b<d.length;b++){if(g.has(b))continue;const w=d[b];let _=!1;if(f(w,p,y,d,h,m)&&(_=!0),_){g.add(b),v=!0;break}}if(!v)return!1}return!0}function u(d,h,f,m){return h.size===0?!0:d instanceof Set?c([...d],[...h],f,m):!1}e.isMatchWith=s,e.isSetMatch=u})(wO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wO;function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(Bx);var _O={},qx={},jO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(jO);var Vx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Vx);var Gx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",a="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",g="[object Error]",y="[object DataView]",p="[object Uint8Array]",v="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",T="[object BigInt64Array]",P="[object Float32Array]",C="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=d,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=y,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=P,e.float64ArrayTag=C,e.functionTag=h,e.int16ArrayTag=N,e.int32ArrayTag=k,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=a,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=p,e.uint8ClampedArrayTag=v})(Gx);var NO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(NO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jO,r=Vx,n=Gx,s=Wx,i=NO;function a(d,h){return l(d,void 0,d,new Map,h)}function l(d,h,f,m=new Map,g=void 0){const y=g==null?void 0:g(d,h,f,m);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const p=new Array(d.length);m.set(d,p);for(let v=0;v<d.length;v++)p[v]=l(d[v],v,f,m,g);return Object.hasOwn(d,"index")&&(p.index=d.index),Object.hasOwn(d,"input")&&(p.input=d.input),p}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const p=new RegExp(d.source,d.flags);return p.lastIndex=d.lastIndex,p}if(d instanceof Map){const p=new Map;m.set(d,p);for(const[v,b]of d)p.set(v,l(b,v,f,m,g));return p}if(d instanceof Set){const p=new Set;m.set(d,p);for(const v of d)p.add(l(v,void 0,f,m,g));return p}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const p=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,p);for(let v=0;v<d.length;v++)p[v]=l(d[v],v,f,m,g);return p}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const p=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,p),c(p,d,f,m,g),p}if(typeof File<"u"&&d instanceof File){const p=new File([d],d.name,{type:d.type});return m.set(d,p),c(p,d,f,m,g),p}if(typeof Blob<"u"&&d instanceof Blob){const p=new Blob([d],{type:d.type});return m.set(d,p),c(p,d,f,m,g),p}if(d instanceof Error){const p=new d.constructor;return m.set(d,p),p.message=d.message,p.name=d.name,p.stack=d.stack,p.cause=d.cause,c(p,d,f,m,g),p}if(d instanceof Boolean){const p=new Boolean(d.valueOf());return m.set(d,p),c(p,d,f,m,g),p}if(d instanceof Number){const p=new Number(d.valueOf());return m.set(d,p),c(p,d,f,m,g),p}if(d instanceof String){const p=new String(d.valueOf());return m.set(d,p),c(p,d,f,m,g),p}if(typeof d=="object"&&u(d)){const p=Object.create(Object.getPrototypeOf(d));return m.set(d,p),c(p,d,f,m,g),p}return d}function c(d,h,f=d,m,g){const y=[...Object.keys(h),...t.getSymbols(h)];for(let p=0;p<y.length;p++){const v=y[p],b=Object.getOwnPropertyDescriptor(d,v);(b==null||b.writable)&&(d[v]=l(h[v],v,f,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=a,e.cloneDeepWithImpl=l,e.copyProperties=c})(qx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qx;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(_O);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bx,r=_O;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(bO);var SO={},EO={},CO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qx,r=Gx;function n(s,i){return t.cloneDeepWith(s,(a,l,c,u)=>{const d=i==null?void 0:i(a,l,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(CO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CO;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(EO);var kO={},Kx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Kx);var AO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vx;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(AO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$x,r=Kx,n=AO,s=om;function i(a,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(a==null?void 0:a[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=a;for(let d=0;d<c.length;d++){const h=c[d];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}e.has=i})(kO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bx,r=am,n=EO,s=im,i=kO;function a(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=a})(SO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fx,r=xO,n=bO,s=SO;function i(a){if(a==null)return t.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?s.matchesProperty(a[0],a[1]):n.matches(a);case"string":case"symbol":case"number":return r.property(a)}}e.iteratee=i})(yO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mO,r=Fx,n=pO,s=yO;function i(a,l=r.identity){return n.isArrayLikeObject(a)?t.uniqBy(Array.from(a),s.iteratee(l)):[]}e.uniqBy=i})(fO);var Nz=fO.uniqBy;const fj=Ss(Nz);function Sz(e,t,r){return t===!0?fj(e,r):typeof t=="function"?fj(e,t):e}var PO={exports:{}},OO={},TO={exports:{}},IO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=x;function Ez(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cz=typeof Object.is=="function"?Object.is:Ez,kz=No.useState,Az=No.useEffect,Pz=No.useLayoutEffect,Oz=No.useDebugValue;function Tz(e,t){var r=t(),n=kz({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return Pz(function(){s.value=r,s.getSnapshot=t,Qp(s)&&i({inst:s})},[e,r,t]),Az(function(){return Qp(s)&&i({inst:s}),e(function(){Qp(s)&&i({inst:s})})},[e]),Oz(r),r}function Qp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Cz(e,r)}catch{return!0}}function Iz(e,t){return t()}var Dz=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Iz:Tz;IO.useSyncExternalStore=No.useSyncExternalStore!==void 0?No.useSyncExternalStore:Dz;TO.exports=IO;var Rz=TO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm=x,Mz=Rz;function Lz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $z=typeof Object.is=="function"?Object.is:Lz,Uz=Mz.useSyncExternalStore,Fz=cm.useRef,Bz=cm.useEffect,zz=cm.useMemo,Wz=cm.useDebugValue;OO.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=Fz(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=zz(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&a.hasValue){var g=a.value;if(s(g,m))return h=g}return h=m}if(g=h,$z(d,m))return g;var y=n(m);return s!==void 0&&s(g,y)?(d=m,g):(d=m,h=y)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=Uz(e,i[0],i[1]);return Bz(function(){a.hasValue=!0,a.value=l},[l]),Wz(l),l};PO.exports=OO;var Hz=PO.exports,Yx=x.createContext(null),qz=e=>e,lt=()=>{var e=x.useContext(Yx);return e?e.store.dispatch:qz},Id=()=>{},Vz=()=>Id,Gz=(e,t)=>e===t;function ae(e){var t=x.useContext(Yx);return Hz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Vz,t?t.store.getState:Id,t?t.store.getState:Id,t?e:Id,Gz)}function Kz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Yz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Xz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var mj=e=>Array.isArray(e)?e:[e];function Jz(e){const t=Array.isArray(e[0])?e[0]:e;return Xz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Qz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Zz=class{constructor(e){this.value=e}deref(){return this.value}},e9=typeof WeakRef<"u"?WeakRef:Zz,t9=0,pj=1;function sd(){return{s:t9,v:void 0,o:null,p:null}}function DO(e,t={}){let r=sd();const{resultEqualityCheck:n}=t;let s,i=0;function a(){var h;let l=r;const{length:c}=arguments;for(let f=0,m=c;f<m;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const p=y.get(g);p===void 0?(l=sd(),y.set(g,l)):l=p}else{let y=l.p;y===null&&(l.p=y=new Map);const p=y.get(g);p===void 0?(l=sd(),y.set(g,l)):l=p}}const u=l;let d;if(l.s===pj)d=l.v;else if(d=e.apply(null,arguments),i++,n){const f=((h=s==null?void 0:s.deref)==null?void 0:h.call(s))??s;f!=null&&n(f,d)&&(d=f,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new e9(d):d}return u.s=pj,u.v=d,d}return a.clearCache=()=>{r=sd(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function r9(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,a=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),Kz(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:m=DO,argsMemoizeOptions:g=[]}=d,y=mj(f),p=mj(g),v=Jz(s),b=h(function(){return i++,u.apply(null,arguments)},...y),w=m(function(){a++;const j=Qz(v,arguments);return l=b.apply(null,j),l},...p);return Object.assign(w,{resultFunc:u,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var U=r9(DO),n9=Object.assign((e,t=U)=>{Yz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((a,l,c)=>(a[r[c]]=l,a),{}))},{withTypes:()=>n9}),RO={},MO={},LO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const a=t(n),l=t(s);if(a===l&&a===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-a:a-l}return 0};e.compareValues=r})(LO);var $O={},Xx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Xx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xx,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,a){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||a!=null&&Object.hasOwn(a,i)}e.isKey=s})($O);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LO,r=$O,n=om;function s(i,a,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let y=m;for(let p=0;p<g.length&&y!=null;++p)y=y[g[p]];return y},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,h=a.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:h.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let y=0;y<h.length;y++){const p=t.compareValues(m.criteria[y],g.criteria[y],l[y]);if(p!==0)return p}return 0}).map(m=>m.original)}e.orderBy=s})(MO);var UO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),a=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?a(d,c+1):s.push(d)}};return a(r,0),s}e.flatten=t})(UO);var Jx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kx,r=lm,n=zx,s=Hx;function i(a,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],a):!1}e.isIterateeCall=i})(Jx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MO,r=UO,n=Jx;function s(i,...a){const l=a.length;return l>1&&n.isIterateeCall(i,a[0],a[1])?a=[]:l>2&&n.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),t.orderBy(i,r.flatten(a),["asc"])}e.sortBy=s})(RO);var s9=RO.sortBy;const um=Ss(s9);var FO=e=>e.legend.settings,i9=e=>e.legend.size,a9=e=>e.legend.payload;U([a9,FO],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?um(n,r):n});var id=1;function o9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=x.useState({height:0,left:0,top:0,width:0}),n=x.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),a={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(a.height-t.height)>id||Math.abs(a.left-t.left)>id||Math.abs(a.top-t.top)>id||Math.abs(a.width-t.width)>id)&&r({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function $t(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var l9=typeof Symbol=="function"&&Symbol.observable||"@@observable",gj=l9,Zp=()=>Math.random().toString(36).substring(7).split("").join("."),c9={INIT:`@@redux/INIT${Zp()}`,REPLACE:`@@redux/REPLACE${Zp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Zp()}`},$h=c9;function Qx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function BO(e,t,r){if(typeof e!="function")throw new Error($t(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error($t(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error($t(1));return r(BO)(e,t)}let n=e,s=t,i=new Map,a=i,l=0,c=!1;function u(){a===i&&(a=new Map,i.forEach((p,v)=>{a.set(v,p)}))}function d(){if(c)throw new Error($t(3));return s}function h(p){if(typeof p!="function")throw new Error($t(4));if(c)throw new Error($t(5));let v=!0;u();const b=l++;return a.set(b,p),function(){if(v){if(c)throw new Error($t(6));v=!1,u(),a.delete(b),i=null}}}function f(p){if(!Qx(p))throw new Error($t(7));if(typeof p.type>"u")throw new Error($t(8));if(typeof p.type!="string")throw new Error($t(17));if(c)throw new Error($t(9));try{c=!0,s=n(s,p)}finally{c=!1}return(i=a).forEach(b=>{b()}),p}function m(p){if(typeof p!="function")throw new Error($t(10));n=p,f({type:$h.REPLACE})}function g(){const p=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error($t(11));function b(){const _=v;_.next&&_.next(d())}return b(),{unsubscribe:p(b)}},[gj](){return this}}}return f({type:$h.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[gj]:g}}function u9(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:$h.INIT})>"u")throw new Error($t(12));if(typeof r(void 0,{type:$h.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($t(13))})}function zO(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const a=t[i];typeof e[a]=="function"&&(r[a]=e[a])}const n=Object.keys(r);let s;try{u9(r)}catch(i){s=i}return function(a={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const h=n[d],f=r[h],m=a[h],g=f(m,l);if(typeof g>"u")throw l&&l.type,new Error($t(14));u[h]=g,c=c||g!==m}return c=c||n.length!==Object.keys(a).length,c?u:a}}function Uh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function d9(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error($t(15))};const a={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(a));return i=Uh(...l)(s.dispatch),{...s,dispatch:i}}}function WO(e){return Qx(e)&&"type"in e&&typeof e.type=="string"}var HO=Symbol.for("immer-nothing"),vj=Symbol.for("immer-draftable"),hr=Symbol.for("immer-state");function bn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $r=Object,So=$r.getPrototypeOf,Fh="constructor",dm="prototype",Zv="configurable",Bh="enumerable",Dd="writable",Pc="value",xs=e=>!!e&&!!e[hr];function Tn(e){var t;return e?qO(e)||hm(e)||!!e[vj]||!!((t=e[Fh])!=null&&t[vj])||fm(e)||mm(e):!1}var h9=$r[dm][Fh].toString(),yj=new WeakMap;function qO(e){if(!e||!Zx(e))return!1;const t=So(e);if(t===null||t===$r[dm])return!0;const r=$r.hasOwnProperty.call(t,Fh)&&t[Fh];if(r===Object)return!0;if(!Da(r))return!1;let n=yj.get(r);return n===void 0&&(n=Function.toString.call(r),yj.set(r,n)),n===h9}function au(e,t,r=!0){ou(e)===0?(r?Reflect.ownKeys(e):$r.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function ou(e){const t=e[hr];return t?t.type_:hm(e)?1:fm(e)?2:mm(e)?3:0}var xj=(e,t,r=ou(e))=>r===2?e.has(t):$r[dm].hasOwnProperty.call(e,t),ey=(e,t,r=ou(e))=>r===2?e.get(t):e[t],zh=(e,t,r,n=ou(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function f9(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var hm=Array.isArray,fm=e=>e instanceof Map,mm=e=>e instanceof Set,Zx=e=>typeof e=="object",Da=e=>typeof e=="function",eg=e=>typeof e=="boolean",Qn=e=>e.copy_||e.base_,eb=e=>e.modified_?e.copy_:e.base_;function ty(e,t){if(fm(e))return new Map(e);if(mm(e))return new Set(e);if(hm(e))return Array[dm].slice.call(e);const r=qO(e);if(t===!0||t==="class_only"&&!r){const n=$r.getOwnPropertyDescriptors(e);delete n[hr];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const a=s[i],l=n[a];l[Dd]===!1&&(l[Dd]=!0,l[Zv]=!0),(l.get||l.set)&&(n[a]={[Zv]:!0,[Dd]:!0,[Bh]:l[Bh],[Pc]:e[a]})}return $r.create(So(e),n)}else{const n=So(e);if(n!==null&&r)return{...e};const s=$r.create(n);return $r.assign(s,e)}}function tb(e,t=!1){return pm(e)||xs(e)||!Tn(e)||(ou(e)>1&&$r.defineProperties(e,{set:ad,add:ad,clear:ad,delete:ad}),$r.freeze(e),t&&au(e,(r,n)=>{tb(n,!0)},!1)),e}function m9(){bn(2)}var ad={[Pc]:m9};function pm(e){return e===null||!Zx(e)?!0:$r.isFrozen(e)}var Wh="MapSet",ry="Patches",VO={};function Eo(e){const t=VO[e];return t||bn(0,e),t}var p9=e=>!!VO[e],Oc,GO=()=>Oc,g9=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:p9(Wh)?Eo(Wh):void 0});function bj(e,t){t&&(e.patchPlugin_=Eo(ry),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ny(e){sy(e),e.drafts_.forEach(v9),e.drafts_=null}function sy(e){e===Oc&&(Oc=e.parent_)}var wj=e=>Oc=g9(Oc,e);function v9(e){const t=e[hr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _j(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[hr].modified_&&(ny(t),bn(4)),Tn(e)&&(e=jj(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(r[hr].base_,e,t)}else e=jj(t,r);return y9(t,e,!0),ny(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==HO?e:void 0}function jj(e,t){if(pm(t))return t;const r=t[hr];if(!r)return rb(t,e.handledSet_,e);if(!gm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);XO(r,e)}return r.copy_}function y9(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&tb(t,r)}function KO(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var gm=(e,t)=>e.scope_===t,x9=[];function YO(e,t,r,n){const s=Qn(e),i=e.type_;if(n!==void 0&&ey(s,n,i)===t){zh(s,n,r,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;au(s,(c,u)=>{if(xs(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const a=e.draftLocations_.get(t)??x9;for(const l of a)zh(s,l,r,i)}function b9(e,t,r){e.callbacks_.push(function(s){var l;const i=t;if(!i||!gm(i,s))return;(l=s.mapSetPlugin_)==null||l.fixSetContents(i);const a=eb(i);YO(e,i.draft_??i,a,r),XO(i,s)})}function XO(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:s}=t;if(s){const i=s.getPath(e);i&&s.generatePatches_(e,i,t)}KO(e)}}function w9(e,t,r){const{scope_:n}=e;if(xs(r)){const s=r[hr];gm(s,n)&&s.callbacks_.push(function(){Rd(e);const a=eb(s);YO(e,r,a,t)})}else Tn(r)&&e.callbacks_.push(function(){const i=Qn(e);ey(i,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&rb(ey(e.copy_,t,e.type_),n.handledSet_,n)})}function rb(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||xs(e)||t.has(e)||!Tn(e)||pm(e)||(t.add(e),au(e,(n,s)=>{if(xs(s)){const i=s[hr];if(gm(i,r)){const a=eb(i);zh(e,n,a,e.type_),KO(i)}}else Tn(s)&&rb(s,t,r)})),e}function _9(e,t){const r=hm(e),n={type_:r?1:0,scope_:t?t.scope_:GO(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=n,i=nb;r&&(s=[n],i=Tc);const{revoke:a,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=a,[l,n]}var nb={get(e,t){if(t===hr)return e;const r=Qn(e);if(!xj(r,t,e.type_))return j9(e,r,t);const n=r[t];if(e.finalized_||!Tn(n))return n;if(n===tg(e.base_,t)){Rd(e);const s=e.type_===1?+t:t,i=ay(e.scope_,n,e,s);return e.copy_[s]=i}return n},has(e,t){return t in Qn(e)},ownKeys(e){return Reflect.ownKeys(Qn(e))},set(e,t,r){const n=JO(Qn(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=tg(Qn(e),t),i=s==null?void 0:s[hr];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(f9(r,s)&&(r!==void 0||xj(e.base_,t,e.type_)))return!0;Rd(e),iy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),w9(e,t,r)),!0},deleteProperty(e,t){return Rd(e),tg(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),iy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Qn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Dd]:!0,[Zv]:e.type_!==1||t!=="length",[Bh]:n[Bh],[Pc]:r[t]}},defineProperty(){bn(11)},getPrototypeOf(e){return So(e.base_)},setPrototypeOf(){bn(12)}},Tc={};au(nb,(e,t)=>{Tc[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});Tc.deleteProperty=function(e,t){return Tc.set.call(this,e,t,void 0)};Tc.set=function(e,t,r){return nb.set.call(this,e[0],t,r,e[0])};function tg(e,t){const r=e[hr];return(r?Qn(r):e)[t]}function j9(e,t,r){var s;const n=JO(t,r);return n?Pc in n?n[Pc]:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function JO(e,t){if(!(t in e))return;let r=So(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=So(r)}}function iy(e){e.modified_||(e.modified_=!0,e.parent_&&iy(e.parent_))}function Rd(e){e.copy_||(e.assigned_=new Map,e.copy_=ty(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var N9=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,s)=>{if(Da(r)&&!Da(n)){const a=n;n=r;const l=this;return function(u=a,...d){return l.produce(u,h=>n.call(this,h,...d))}}Da(n)||bn(6),s!==void 0&&!Da(s)&&bn(7);let i;if(Tn(r)){const a=wj(this),l=ay(a,r,void 0);let c=!0;try{i=n(l),c=!1}finally{c?ny(a):sy(a)}return bj(a,s),_j(i,a)}else if(!r||!Zx(r)){if(i=n(r),i===void 0&&(i=r),i===HO&&(i=void 0),this.autoFreeze_&&tb(i,!0),s){const a=[],l=[];Eo(ry).generateReplacementPatches_(r,i,{patches_:a,inversePatches_:l}),s(a,l)}return i}else bn(1,r)},this.produceWithPatches=(r,n)=>{if(Da(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let s,i;return[this.produce(r,n,(l,c)=>{s=l,i=c}),s,i]},eg(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),eg(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),eg(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Tn(t)||bn(8),xs(t)&&(t=kn(t));const r=wj(this),n=ay(r,t,void 0);return n[hr].isManual_=!0,sy(r),n}finishDraft(t,r){const n=t&&t[hr];(!n||!n.isManual_)&&bn(9);const{scope_:s}=n;return bj(s,r),_j(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const i=r[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(r=r.slice(n+1));const s=Eo(ry).applyPatches_;return xs(t)?s(t,r):this.produce(t,i=>s(i,r))}};function ay(e,t,r,n){const[s,i]=fm(t)?Eo(Wh).proxyMap_(t,r):mm(t)?Eo(Wh).proxySet_(t,r):_9(t,r);return((r==null?void 0:r.scope_)??GO()).drafts_.push(s),i.callbacks_=(r==null?void 0:r.callbacks_)??[],i.key_=n,r&&n!==void 0?b9(r,i,n):i.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(i);const{patchPlugin_:u}=c;i.modified_&&u&&u.generatePatches_(i,[],c)}),s}function kn(e){return xs(e)||bn(10,e),QO(e)}function QO(e){if(!Tn(e)||pm(e))return e;const t=e[hr];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ty(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=ty(e,!0);return au(r,(s,i)=>{zh(r,s,QO(i))},n),t&&(t.finalized_=!1),r}var S9=new N9,ZO=S9.produce;function eT(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var E9=eT(),C9=eT,k9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Uh:Uh.apply(null,arguments)};function cn(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Fr(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>WO(n)&&n.type===e,r}var tT=class kl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,kl.prototype)}static get[Symbol.species](){return kl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new kl(...t[0].concat(this)):new kl(...t.concat(this))}};function Nj(e){return Tn(e)?ZO(e,()=>{}):e}function od(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function A9(e){return typeof e=="boolean"}var P9=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let a=new tT;return r&&(A9(r)?a.push(E9):a.push(C9(r.extraArgument))),a},rT="RTK_autoBatch",Ve=()=>e=>({payload:e,meta:{[rT]:!0}}),Sj=e=>t=>{setTimeout(t,e)},nT=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,a=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Sj(10):e.type==="callback"?e.queueNotification:Sj(e.timeout),u=()=>{a=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const h=()=>s&&d(),f=n.subscribe(h);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){var h;try{return s=!((h=d==null?void 0:d.meta)!=null&&h[rT]),i=!s,i&&(a||(a=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},O9=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new tT(e);return n&&s.push(nT(typeof n=="object"?n:void 0)),s};function T9(e){const t=P9(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(Qx(r))l=zO(r);else throw new Error(Fr(1));let c;typeof n=="function"?c=n(t):c=t();let u=Uh;s&&(u=k9({trace:!1,...typeof s=="object"&&s}));const d=d9(...c),h=O9(d);let f=typeof a=="function"?a(h):h();const m=u(...f);return BO(l,i,m)}function sT(e){const t={},r=[];let n;const s={addCase(i,a){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Fr(28));if(l in t)throw new Error(Fr(29));return t[l]=a,s},addAsyncThunk(i,a){return a.pending&&(t[i.pending.type]=a.pending),a.rejected&&(t[i.rejected.type]=a.rejected),a.fulfilled&&(t[i.fulfilled.type]=a.fulfilled),a.settled&&r.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return r.push({matcher:i,reducer:a}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function I9(e){return typeof e=="function"}function D9(e,t){let[r,n,s]=sT(t),i;if(I9(e))i=()=>Nj(e());else{const l=Nj(e);i=()=>l}function a(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,h)=>{if(h)if(xs(d)){const m=h(d,c);return m===void 0?d:m}else{if(Tn(d))return ZO(d,f=>h(f,c));{const f=h(d,c);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},l)}return a.getInitialState=i,a}var R9="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",M9=(e=21)=>{let t="",r=e;for(;r--;)t+=R9[Math.random()*64|0];return t},L9=Symbol.for("rtk-slice-createasyncthunk");function $9(e,t){return`${e}/${t}`}function U9({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[L9];return function(s){const{name:i,reducerPath:a=i}=s;if(!i)throw new Error(Fr(11));const l=(typeof s.reducers=="function"?s.reducers(B9()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const N=typeof _=="string"?_:_.type;if(!N)throw new Error(Fr(12));if(N in u.sliceCaseReducersByType)throw new Error(Fr(13));return u.sliceCaseReducersByType[N]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],N={reducerName:_,type:$9(i,_),createNotation:typeof s.reducers=="function"};W9(j)?q9(N,j,d,t):z9(N,j,d)});function h(){const[_={},j=[],N=void 0]=typeof s.extraReducers=="function"?sT(s.extraReducers):[s.extraReducers],k={..._,...u.sliceCaseReducersByType};return D9(s.initialState,T=>{for(let P in k)T.addCase(P,k[P]);for(let P of u.sliceMatchers)T.addMatcher(P.matcher,P.reducer);for(let P of j)T.addMatcher(P.matcher,P.reducer);N&&T.addDefaultCase(N)})}const f=_=>_,m=new Map,g=new WeakMap;let y;function p(_,j){return y||(y=h()),y(_,j)}function v(){return y||(y=h()),y.getInitialState()}function b(_,j=!1){function N(T){let P=T[_];return typeof P>"u"&&j&&(P=od(g,N,v)),P}function k(T=f){const P=od(m,j,()=>new WeakMap);return od(P,T,()=>{const C={};for(const[A,S]of Object.entries(s.selectors??{}))C[A]=F9(S,T,()=>od(g,T,v),j);return C})}return{reducerPath:_,getSelectors:k,get selectors(){return k(N)},selectSlice:N}}const w={name:i,reducer:p,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...b(a),injectInto(_,{reducerPath:j,...N}={}){const k=j??a;return _.inject({reducerPath:k,reducer:p},N),{...w,...b(k,!0)}}};return w}}function F9(e,t,r,n){function s(i,...a){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...a)}return s.unwrapped=e,s}var Ar=U9();function B9(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function z9({type:e,reducerName:t,createNotation:r},n,s){let i,a;if("reducer"in n){if(r&&!H9(n))throw new Error(Fr(17));i=n.reducer,a=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,a?cn(e,a):cn(e))}function W9(e){return e._reducerDefinitionType==="asyncThunk"}function H9(e){return e._reducerDefinitionType==="reducerWithPrepare"}function q9({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Fr(18));const{payloadCreator:i,fulfilled:a,pending:l,rejected:c,settled:u,options:d}=r,h=s(e,i,d);n.exposeAction(t,h),a&&n.addCase(h.fulfilled,a),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(t,{fulfilled:a||ld,pending:l||ld,rejected:c||ld,settled:u||ld})}function ld(){}var V9="task",iT="listener",aT="completed",sb="cancelled",G9=`task-${sb}`,K9=`task-${aT}`,oy=`${iT}-${sb}`,Y9=`${iT}-${aT}`,vm=class{constructor(e){wa(this,"name","TaskAbortError");wa(this,"message");this.code=e,this.message=`${V9} ${sb} (reason: ${e})`}},ib=(e,t)=>{if(typeof e!="function")throw new TypeError(Fr(32))},Hh=()=>{},oT=(e,t=Hh)=>(e.catch(t),e),lT=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Gi=e=>{if(e.aborted)throw new vm(e.reason)};function cT(e,t){let r=Hh;return new Promise((n,s)=>{const i=()=>s(new vm(e.reason));if(e.aborted){i();return}r=lT(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Hh})}var X9=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof vm?"cancelled":"rejected",error:r}}finally{t==null||t()}},qh=e=>t=>oT(cT(e,t).then(r=>(Gi(e),r))),uT=e=>{const t=qh(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:oo}=Object,Ej={},ym="listenerMiddleware",J9=(e,t)=>{const r=n=>lT(e,()=>n.abort(e.reason));return(n,s)=>{ib(n);const i=new AbortController;r(i);const a=X9(async()=>{Gi(e),Gi(i.signal);const l=await n({pause:qh(i.signal),delay:uT(i.signal),signal:i.signal});return Gi(i.signal),l},()=>i.abort(K9));return s!=null&&s.autoJoin&&t.push(a.catch(Hh)),{result:qh(e)(a),cancel(){i.abort(G9)}}}},Q9=(e,t)=>{const r=async(n,s)=>{Gi(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await cT(t,Promise.race(l));return Gi(t),c}finally{i()}};return(n,s)=>oT(r(n,s))},dT=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=cn(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Fr(21));return ib(i),{predicate:s,type:t,effect:i}},hT=oo(e=>{const{type:t,predicate:r,effect:n}=dT(e);return{id:M9(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Fr(22))}}},{withTypes:()=>hT}),Cj=(e,t)=>{const{type:r,effect:n,predicate:s}=dT(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},ly=e=>{e.pending.forEach(t=>{t.abort(oy)})},Z9=(e,t)=>()=>{for(const r of t.keys())ly(r);e.clear()},kj=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},fT=oo(cn(`${ym}/add`),{withTypes:()=>fT}),eW=cn(`${ym}/removeAll`),mT=oo(cn(`${ym}/remove`),{withTypes:()=>mT}),tW=(...e)=>{console.error(`${ym}/error`,...e)},lu=(e={})=>{const t=new Map,r=new Map,n=m=>{const g=r.get(m)??0;r.set(m,g+1)},s=m=>{const g=r.get(m)??1;g===1?r.delete(m):r.set(m,g-1)},{extra:i,onError:a=tW}=e;ib(a);const l=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&ly(m)}),c=m=>{const g=Cj(t,m)??hT(m);return l(g)};oo(c,{withTypes:()=>c});const u=m=>{const g=Cj(t,m);return g&&(g.unsubscribe(),m.cancelActive&&ly(g)),!!g};oo(u,{withTypes:()=>u});const d=async(m,g,y,p)=>{const v=new AbortController,b=Q9(c,v.signal),w=[];try{m.pending.add(v),n(m),await Promise.resolve(m.effect(g,oo({},y,{getOriginalState:p,condition:(_,j)=>b(_,j).then(Boolean),take:b,delay:uT(v.signal),pause:qh(v.signal),extra:i,signal:v.signal,fork:J9(v.signal,w),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((_,j,N)=>{_!==v&&(_.abort(oy),N.delete(_))})},cancel:()=>{v.abort(oy),m.pending.delete(v)},throwIfCancelled:()=>{Gi(v.signal)}})))}catch(_){_ instanceof vm||kj(a,_,{raisedBy:"effect"})}finally{await Promise.all(w),v.abort(Y9),s(m),m.pending.delete(v)}},h=Z9(t,r);return{middleware:m=>g=>y=>{if(!WO(y))return g(y);if(fT.match(y))return c(y.payload);if(eW.match(y)){h();return}if(mT.match(y))return u(y.payload);let p=m.getState();const v=()=>{if(p===Ej)throw new Error(Fr(23));return p};let b;try{if(b=g(y),t.size>0){const w=m.getState(),_=Array.from(t.values());for(const j of _){let N=!1;try{N=j.predicate(y,w,p)}catch(k){N=!1,kj(a,k,{raisedBy:"predicate"})}N&&d(j,y,m,v)}}}finally{p=Ej}return b},startListening:c,stopListening:u,clearListeners:h}};function Fr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rW={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},pT=Ar({name:"chartLayout",initialState:rW,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:nW,setLayout:sW,setChartSize:iW,setScale:aW}=pT.actions,oW=pT.reducer;function gT(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function et(e){return Number.isFinite(e)}function Vn(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(r),!0).forEach(function(n){lW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lW(e,t,r){return(t=cW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cW(e){var t=uW(e,"string");return typeof t=="symbol"?t:t+""}function uW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ht(e,t,r){return Dt(e)||Dt(t)?r:qn(t)?jo(e,t,r):typeof t=="function"?t(e):r}var dW=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:a,layout:l}=t;if((l==="vertical"||l==="horizontal"&&a==="middle")&&i!=="center"&&Q(e[i]))return Ya(Ya({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&a!=="middle"&&Q(e[a]))return Ya(Ya({},e),{},{[a]:e[a]+(s||0)})}return e},ga=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",vT=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,a=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||a.push(t),i||a.push(r),a},yT=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:a,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:f,axisType:m}=e;if(!a)return null;var g=l==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,y=s==="category"&&a.bandwidth?a.bandwidth()/g:0;if(y=m==="angleAxis"&&i&&i.length>=2?br(i[0]-i[1])*2*y:y,h||f){var p=(h||f||[]).map((v,b)=>{var w=n?n.indexOf(v):v;return{coordinate:a(w)+y,value:v,offset:y,index:b}});return p.filter(v=>!Pn(v.coordinate))}return c&&u?u.map((v,b)=>({coordinate:a(v)+y,value:v,index:b,offset:y})):a.ticks&&d!=null?a.ticks(d).map((v,b)=>({coordinate:a(v)+y,value:v,offset:y,index:b})):a.domain().map((v,b)=>({coordinate:a(v)+y,value:n?n[v]:v,index:b,offset:y}))},Pj=1e-4,hW=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-Pj,i=Math.max(n[0],n[1])+Pj,a=e(t[0]),l=e(t[r-1]);(a<s||a>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},fW=(e,t)=>{if(!t||t.length!==2||!Q(t[0])||!Q(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Q(e[0])||e[0]<r)&&(s[0]=r),(!Q(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},mW=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var s=0;s<n;++s)for(var i=0,a=0,l=0;l<r;++l){var c=e[l],u=c==null?void 0:c[s];if(u!=null){var d=u[1],h=u[0],f=Pn(d)?h:d;f>=0?(u[0]=i,u[1]=i+f,i=d):(u[0]=a,u[1]=a+f,a=d)}}}},pW=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var s=0;s<n;++s)for(var i=0,a=0;a<r;++a){var l=e[a],c=l==null?void 0:l[s];if(c!=null){var u=Pn(c[1])?c[0]:c[1];u>=0?(c[0]=i,c[1]=i+u,i=c[1]):(c[0]=0,c[1]=0)}}}},gW={sign:mW,expand:ez,none:aa,silhouette:tz,wiggle:rz,positive:pW},vW=(e,t,r)=>{var n,s=(n=gW[r])!==null&&n!==void 0?n:aa,i=Z7().keys(t).value((l,c)=>Number(Ht(l,c,0))).order(Jv).offset(s),a=i(e);return a.forEach((l,c)=>{l.forEach((u,d)=>{var h=Ht(e[d],t[c],0);Array.isArray(h)&&h.length===2&&Q(h[0])&&Q(h[1])&&(u[0]=h[0],u[1]=h[1])})}),a};function yW(e){return e==null?void 0:String(e)}var Oj=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:a}=e;if(t.type==="category")return r[a]?r[a].coordinate+n:null;var l=Ht(i,t.dataKey,t.scale.domain()[a]);return Dt(l)?null:t.scale(l)-s/2+n},xW=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},bW=e=>{var t=e.flat(2).filter(Q);return[Math.min(...t),Math.max(...t)]},wW=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],_W=(e,t,r)=>{if(e!=null)return wW(Object.keys(e).reduce((n,s)=>{var i=e[s];if(!i)return n;var{stackedData:a}=i,l=a.reduce((c,u)=>{var d=gT(u,t,r),h=bW(d);return!et(h[0])||!et(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},Tj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ij=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=um(t,d=>d.coordinate),i=1/0,a=1,l=s.length;a<l;a++){var c=s[a],u=s[a-1];i=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),i)}return i===1/0?0:i}return r?void 0:0};function Dj(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Ya(Ya({},t),{},{dataKey:r,payload:n,value:s,name:i})}function xT(e,t){if(e)return String(e);if(typeof t=="string")return t}var jW=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},NW=(e,t)=>t==="centric"?e.angle:e.radius,As=e=>e.layout.width,Ps=e=>e.layout.height,SW=e=>e.layout.scale,bT=e=>e.layout.margin,xm=U(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),bm=U(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),EW="data-recharts-item-index",CW="data-recharts-item-id",cu=60;function Rj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rj(Object(r),!0).forEach(function(n){kW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kW(e,t,r){return(t=AW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AW(e){var t=PW(e,"string");return typeof t=="symbol"?t:t+""}function PW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OW=e=>e.brush.height;function TW(e){var t=bm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:cu;return r+s}return r},0)}function IW(e){var t=bm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:cu;return r+s}return r},0)}function DW(e){var t=xm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function RW(e){var t=xm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Rt=U([As,Ps,bT,OW,TW,IW,DW,RW,FO,i9],(e,t,r,n,s,i,a,l,c,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+i},h={top:(r.top||0)+a,bottom:(r.bottom||0)+l},f=cd(cd({},h),d),m=f.bottom;f.bottom+=n,f=dW(f,c,u);var g=e-f.left-f.right,y=t-f.top-f.bottom;return cd(cd({brushBottom:m},f),{},{width:Math.max(g,0),height:Math.max(y,0)})}),MW=U(Rt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ab=U(As,Ps,(e,t)=>({x:0,y:0,width:e,height:t})),LW=x.createContext(null),Pr=()=>x.useContext(LW)!=null,wm=e=>e.brush,_m=U([wm,Rt,bT],(e,t,r)=>({height:e.height,x:Q(e.x)?e.x:t.left,y:Q(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Q(e.width)?e.width:t.width})),wT={},_T={},jT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let a,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(a,l),a=void 0,l=null)},h=()=>{u&&d(),y()};let f=null;const m=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},g=()=>{f!==null&&(clearTimeout(f),f=null)},y=()=>{g(),a=void 0,l=null},p=()=>{d()},v=function(...b){if(s!=null&&s.aborted)return;a=this,l=b;const w=f==null;m(),c&&w&&d()};return v.schedule=m,v.cancel=y,v.flush=p,s==null||s.addEventListener("abort",y,{once:!0}),v}e.debounce=t})(jT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jT;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:a=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);a&&(u[0]="leading"),l&&(u[1]="trailing");let d,h=null;const f=t.debounce(function(...y){d=n.apply(this,y),h=null},s,{edges:u}),m=function(...y){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(d=n.apply(this,y),h=Date.now(),f.cancel(),f.schedule(),d):(f.apply(this,y),d)},g=()=>(f.flush(),d);return m.cancel=f.cancel,m.flush=g,m}e.debounce=r})(_T);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_T;function r(n,s=0,i={}){const{leading:a=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:a,maxWait:s,trailing:l})}e.throttle=r})(wT);var $W=wT.throttle;const UW=Ss($W);var Gh=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(r.replace(/%s/g,()=>s[a++]))}},NT=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:a}=r,l=ys(n)?e:Number(n),c=ys(s)?t:Number(s);return i&&i>0&&(l?c=l/i:c&&(l=c*i),a&&c!=null&&c>a&&(c=a)),{calculatedWidth:l,calculatedHeight:c}},FW={width:0,height:0,overflow:"visible"},BW={width:0,overflowX:"visible"},zW={height:0,overflowY:"visible"},WW={},HW=e=>{var{width:t,height:r}=e,n=ys(t),s=ys(r);return n&&s?FW:n?BW:s?zW:WW};function qW(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cy.apply(null,arguments)}function Mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mj(Object(r),!0).forEach(function(n){VW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VW(e,t,r){return(t=GW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GW(e){var t=KW(e,"string");return typeof t=="symbol"?t:t+""}function KW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ST=x.createContext({width:-1,height:-1});function YW(e){return Vn(e.width)&&Vn(e.height)}function ET(e){var{children:t,width:r,height:n}=e,s=x.useMemo(()=>({width:r,height:n}),[r,n]);return YW(s)?x.createElement(ST.Provider,{value:s},t):null}var ob=()=>x.useContext(ST),XW=x.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:a=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:f,onResize:m,style:g={}}=e,y=x.useRef(null),p=x.useRef();p.current=m,x.useImperativeHandle(t,()=>y.current);var[v,b]=x.useState({containerWidth:n.width,containerHeight:n.height}),w=x.useCallback((T,P)=>{b(C=>{var A=Math.round(T),S=Math.round(P);return C.containerWidth===A&&C.containerHeight===S?C:{containerWidth:A,containerHeight:S}})},[]);x.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return iu;var T=S=>{var E,{width:O,height:R}=S[0].contentRect;w(O,R),(E=p.current)===null||E===void 0||E.call(p,O,R)};d>0&&(T=UW(T,d,{trailing:!0,leading:!1}));var P=new ResizeObserver(T),{width:C,height:A}=y.current.getBoundingClientRect();return w(C,A),P.observe(y.current),()=>{P.disconnect()}},[w,d]);var{containerWidth:_,containerHeight:j}=v;Gh(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:k}=NT(_,j,{width:s,height:i,aspect:r,maxHeight:c});return Gh(N!=null&&N>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,k,s,i,a,l,r),x.createElement("div",{id:h?"".concat(h):void 0,className:qe("recharts-responsive-container",f),style:Lj(Lj({},g),{},{width:s,height:i,minWidth:a,minHeight:l,maxHeight:c}),ref:y},x.createElement("div",{style:HW({width:s,height:i})},x.createElement(ET,{width:N,height:k},u)))}),JW=x.forwardRef((e,t)=>{var r=ob();if(Vn(r.width)&&Vn(r.height))return e.children;var{width:n,height:s}=qW({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:a}=NT(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Q(i)&&Q(a)?x.createElement(ET,{width:i,height:a},e.children):x.createElement(XW,cy({},e,{width:n,height:s,ref:t}))});function CT(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var jm=()=>{var e,t=Pr(),r=ae(MW),n=ae(_m),s=(e=ae(wm))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},QW={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},kT=()=>{var e;return(e=ae(Rt))!==null&&e!==void 0?e:QW},AT=()=>ae(As),PT=()=>ae(Ps),Ce=e=>e.layout.layoutType,uu=()=>ae(Ce),ZW=()=>{var e=uu();return e!==void 0},Nm=e=>{var t=lt(),r=Pr(),{width:n,height:s}=e,i=ob(),a=n,l=s;return i&&(a=i.width>0?i.width:n,l=i.height>0?i.height:s),x.useEffect(()=>{!r&&Vn(a)&&Vn(l)&&t(iW({width:a,height:l}))},[t,r,a,l]),null},OT=Symbol.for("immer-nothing"),$j=Symbol.for("immer-draftable"),Wr=Symbol.for("immer-state");function wn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ic=Object.getPrototypeOf;function Co(e){return!!e&&!!e[Wr]}function oa(e){var t;return e?TT(e)||Array.isArray(e)||!!e[$j]||!!((t=e.constructor)!=null&&t[$j])||du(e)||Em(e):!1}var eH=Object.prototype.constructor.toString(),Uj=new WeakMap;function TT(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Uj.get(r);return n===void 0&&(n=Function.toString.call(r),Uj.set(r,n)),n===eH}function Kh(e,t,r=!0){Sm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Sm(e){const t=e[Wr];return t?t.type_:Array.isArray(e)?1:du(e)?2:Em(e)?3:0}function uy(e,t){return Sm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function IT(e,t,r){const n=Sm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function tH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function du(e){return e instanceof Map}function Em(e){return e instanceof Set}function Ai(e){return e.copy_||e.base_}function dy(e,t){if(du(e))return new Map(e);if(Em(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=TT(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Wr];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const a=s[i],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[a]})}return Object.create(Ic(e),n)}else{const n=Ic(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function lb(e,t=!1){return Cm(e)||Co(e)||!oa(e)||(Sm(e)>1&&Object.defineProperties(e,{set:ud,add:ud,clear:ud,delete:ud}),Object.freeze(e),t&&Object.values(e).forEach(r=>lb(r,!0))),e}function rH(){wn(2)}var ud={value:rH};function Cm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var nH={};function la(e){const t=nH[e];return t||wn(0,e),t}var Dc;function DT(){return Dc}function sH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Fj(e,t){t&&(la("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function hy(e){fy(e),e.drafts_.forEach(iH),e.drafts_=null}function fy(e){e===Dc&&(Dc=e.parent_)}function Bj(e){return Dc=sH(Dc,e)}function iH(e){const t=e[Wr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function zj(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Wr].modified_&&(hy(t),wn(4)),oa(e)&&(e=Yh(t,e),t.parent_||Xh(t,e)),t.patches_&&la("Patches").generateReplacementPatches_(r[Wr].base_,e,t.patches_,t.inversePatches_)):e=Yh(t,r,[]),hy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==OT?e:void 0}function Yh(e,t,r){if(Cm(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[Wr];if(!s)return Kh(t,(i,a)=>Wj(e,s,t,i,a,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Xh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let a=i,l=!1;s.type_===3&&(a=new Set(i),i.clear(),l=!0),Kh(a,(c,u)=>Wj(e,s,i,c,u,r,l),n),Xh(e,i,!1),r&&e.patches_&&la("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function Wj(e,t,r,n,s,i,a){if(s==null||typeof s!="object"&&!a)return;const l=Cm(s);if(!(l&&!a)){if(Co(s)){const c=i&&t&&t.type_!==3&&!uy(t.assigned_,n)?i.concat(n):void 0,u=Yh(e,s,c);if(IT(r,n,u),Co(u))e.canAutoFreeze_=!1;else return}else a&&r.add(s);if(oa(s)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&l)return;Yh(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(du(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Xh(e,s)}}}function Xh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lb(t,r)}function aH(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:DT(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=cb;r&&(s=[n],i=Rc);const{revoke:a,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=a,l}var cb={get(e,t){if(t===Wr)return e;const r=Ai(e);if(!uy(r,t))return oH(e,r,t);const n=r[t];return e.finalized_||!oa(n)?n:n===rg(e.base_,t)?(ng(e),e.copy_[t]=py(n,e)):n},has(e,t){return t in Ai(e)},ownKeys(e){return Reflect.ownKeys(Ai(e))},set(e,t,r){const n=RT(Ai(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=rg(Ai(e),t),i=s==null?void 0:s[Wr];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(tH(r,s)&&(r!==void 0||uy(e.base_,t)))return!0;ng(e),my(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return rg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ng(e),my(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ai(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){wn(11)},getPrototypeOf(e){return Ic(e.base_)},setPrototypeOf(){wn(12)}},Rc={};Kh(cb,(e,t)=>{Rc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Rc.deleteProperty=function(e,t){return Rc.set.call(this,e,t,void 0)};Rc.set=function(e,t,r){return cb.set.call(this,e[0],t,r,e[0])};function rg(e,t){const r=e[Wr];return(r?Ai(r):e)[t]}function oH(e,t,r){var s;const n=RT(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function RT(e,t){if(!(t in e))return;let r=Ic(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ic(r)}}function my(e){e.modified_||(e.modified_=!0,e.parent_&&my(e.parent_))}function ng(e){e.copy_||(e.copy_=dy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const a=this;return function(c=i,...u){return a.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&wn(6),n!==void 0&&typeof n!="function"&&wn(7);let s;if(oa(t)){const i=Bj(this),a=py(t,void 0);let l=!0;try{s=r(a),l=!1}finally{l?hy(i):fy(i)}return Fj(i,n),zj(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===OT&&(s=void 0),this.autoFreeze_&&lb(s,!0),n){const i=[],a=[];la("Patches").generateReplacementPatches_(t,s,i,a),n(i,a)}return s}else wn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...l)=>this.produceWithPatches(a,c=>t(c,...l));let n,s;return[this.produce(t,r,(a,l)=>{n=a,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){oa(e)||wn(8),Co(e)&&(e=cH(e));const t=Bj(this),r=py(e,void 0);return r[Wr].isManual_=!0,fy(t),r}finishDraft(e,t){const r=e&&e[Wr];(!r||!r.isManual_)&&wn(9);const{scope_:n}=r;return Fj(n,t),zj(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=la("Patches").applyPatches_;return Co(e)?n(e,t):this.produce(e,s=>n(s,t))}};function py(e,t){const r=du(e)?la("MapSet").proxyMap_(e,t):Em(e)?la("MapSet").proxySet_(e,t):aH(e,t);return(t?t.scope_:DT()).drafts_.push(r),r}function cH(e){return Co(e)||wn(10,e),MT(e)}function MT(e){if(!oa(e)||Cm(e))return e;const t=e[Wr];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=dy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=dy(e,!0);return Kh(r,(s,i)=>{IT(r,s,MT(i))},n),t&&(t.finalized_=!1),r}var uH=new lH;uH.produce;var dH={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},LT=Ar({name:"legend",initialState:dH,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ve()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,s=kn(e).payload.indexOf(r);s>-1&&(e.payload[s]=n)},prepare:Ve()},removeLegendPayload:{reducer(e,t){var r=kn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Ve()}}}),{setLegendSize:Hne,setLegendSettings:qne,addLegendPayload:hH,replaceLegendPayload:fH,removeLegendPayload:mH}=LT.actions,pH=LT.reducer;function gy(){return gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gy.apply(null,arguments)}function Hj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hj(Object(r),!0).forEach(function(n){gH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gH(e,t,r){return(t=vH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vH(e){var t=yH(e,"string");return typeof t=="symbol"?t:t+""}function yH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xH(e){return Array.isArray(e)&&qn(e[0])&&qn(e[1])?e.join(" ~ "):e}var bH=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:a,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:f=!1}=e,m=()=>{if(i&&i.length){var j={padding:0,margin:0},N=(l?um(i,l):i).map((k,T)=>{if(k.type==="none")return null;var P=k.formatter||a||xH,{value:C,name:A}=k,S=C,E=A;if(P){var O=P(C,A,k,T,i);if(Array.isArray(O))[S,E]=O;else if(O!=null)S=O;else return null}var R=sg({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},n);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:R},qn(E)?x.createElement("span",{className:"recharts-tooltip-item-name"},E):null,qn(E)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},S),x.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},g=sg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=sg({margin:0},s),p=!Dt(d),v=p?d:"",b=qe("recharts-default-tooltip",c),w=qe("recharts-tooltip-label",u);p&&h&&i!==void 0&&i!==null&&(v=h(d,i));var _=f?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",gy({className:b,style:g},_),x.createElement("p",{className:w,style:y},x.isValidElement(v)?v:"".concat(v)),m())},pl="recharts-tooltip-wrapper",wH={visibility:"hidden"};function _H(e){var{coordinate:t,translateX:r,translateY:n}=e;return qe(pl,{["".concat(pl,"-right")]:Q(r)&&t&&Q(t.x)&&r>=t.x,["".concat(pl,"-left")]:Q(r)&&t&&Q(t.x)&&r<t.x,["".concat(pl,"-bottom")]:Q(n)&&t&&Q(t.y)&&n>=t.y,["".concat(pl,"-top")]:Q(n)&&t&&Q(t.y)&&n<t.y})}function qj(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&Q(i[n]))return i[n];var d=r[n]-l-(s>0?s:0),h=r[n]+s;if(t[n])return a[n]?d:h;var f=c[n];if(f==null)return 0;if(a[n]){var m=d,g=f;return m<g?Math.max(h,f):Math.max(d,f)}if(u==null)return 0;var y=h+l,p=f+u;return y>p?Math.max(d,f):Math.max(h,f)}function jH(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function NH(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:a,useTranslate3d:l,viewBox:c}=e,u,d,h;return a.height>0&&a.width>0&&r?(d=qj({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),h=qj({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=jH({translateX:d,translateY:h,useTranslate3d:l})):u=wH,{cssProperties:u,cssClasses:_H({translateX:d,translateY:h,coordinate:r})}}function Vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vj(Object(r),!0).forEach(function(n){vy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vy(e,t,r){return(t=SH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class CH extends x.PureComponent{constructor(){super(...arguments),vy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),vy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:a,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:g,lastBoundingBox:y,innerRef:p,hasPortalFromProps:v}=this.props,{cssClasses:b,cssProperties:w}=NH({allowEscapeViewBox:r,coordinate:a,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:{height:y.height,width:y.width},useTranslate3d:f,viewBox:m}),_=v?{}:dd(dd({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=dd(dd({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:j,ref:p},i)}}var $T=()=>{var e;return(e=ae(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yy.apply(null,arguments)}function Gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gj(Object(r),!0).forEach(function(n){kH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kH(e,t,r){return(t=AH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AH(e){var t=PH(e,"string");return typeof t=="symbol"?t:t+""}function PH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yj={curveBasisClosed:z7,curveBasisOpen:W7,curveBasis:B7,curveBumpX:C7,curveBumpY:k7,curveLinearClosed:H7,curveLinear:nm,curveMonotoneX:q7,curveMonotoneY:V7,curveNatural:G7,curveStep:K7,curveStepAfter:X7,curveStepBefore:Y7},Jh=e=>et(e.x)&&et(e.y),Xj=e=>e.base!=null&&Jh(e.base)&&Jh(e),gl=e=>e.x,vl=e=>e.y,OH=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(su(e));return(r==="curveMonotone"||r==="curveBump")&&t?Yj["".concat(r).concat(t==="vertical"?"Y":"X")]:Yj[r]||nm},TH=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,a=OH(t,s),l=i?r.filter(Jh):r,c;if(Array.isArray(n)){var u=r.map((m,g)=>Kj(Kj({},m),{},{base:n[g]}));s==="vertical"?c=nd().y(vl).x1(gl).x0(m=>m.base.x):c=nd().x(gl).y1(vl).y0(m=>m.base.y);var d=c.defined(Xj).curve(a),h=i?u.filter(Xj):u;return d(h)}s==="vertical"&&Q(n)?c=nd().y(vl).x1(gl).x0(n):Q(n)?c=nd().x(gl).y1(vl).y0(n):c=XP().x(gl).y(vl);var f=c.defined(Jh).curve(a);return f(l)},UT=e=>{var{className:t,points:r,path:n,pathRef:s}=e,i=uu();if((!r||!r.length)&&!n)return null;var a={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=r&&r.length?TH(a):n;return x.createElement("path",yy({},gs(e),yz(e),{className:qe("recharts-curve",t),d:l===null?void 0:l,ref:s}))},IH=["x","y","top","left","width","height","className"];function xy(){return xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xy.apply(null,arguments)}function Jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jj(Object(r),!0).forEach(function(n){RH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RH(e,t,r){return(t=MH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MH(e){var t=LH(e,"string");return typeof t=="symbol"?t:t+""}function LH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $H(e,t){if(e==null)return{};var r,n,s=UH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var FH=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),BH=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:a=0,className:l}=e,c=$H(e,IH),u=DH({x:t,y:r,top:n,left:s,width:i,height:a},c);return!Q(t)||!Q(r)||!Q(i)||!Q(a)||!Q(n)||!Q(s)?null:x.createElement("path",xy({},ln(u),{className:qe("recharts-cross",l),d:FH(t,r,i,a,n,s)}))};function zH(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qj(Object(r),!0).forEach(function(n){WH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WH(e,t,r){return(t=HH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e){var t=qH(e,"string");return typeof t=="symbol"?t:t+""}function qH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VH=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),FT=(e,t,r)=>e.map(n=>"".concat(VH(n)," ").concat(t,"ms ").concat(r)).join(","),GH=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Mc=(e,t)=>Object.keys(t).reduce((r,n)=>Zj(Zj({},r),{},{[n]:e(n,t[n])}),{});function eN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eN(Object(r),!0).forEach(function(n){KH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KH(e,t,r){return(t=YH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YH(e){var t=XH(e,"string");return typeof t=="symbol"?t:t+""}function XH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qh=(e,t,r)=>e+(t-e)*r,by=e=>{var{from:t,to:r}=e;return t!==r},BT=(e,t,r)=>{var n=Mc((s,i)=>{if(by(i)){var[a,l]=e(i.from,i.to,i.velocity);return vt(vt({},i),{},{from:a,velocity:l})}return i},t);return r<1?Mc((s,i)=>by(i)&&n[s]!=null?vt(vt({},i),{},{velocity:Qh(i.velocity,n[s].velocity,r),from:Qh(i.from,n[s].from,r)}):i,t):BT(e,n,r-1)};function JH(e,t,r,n,s,i){var a,l=n.reduce((f,m)=>vt(vt({},f),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Mc((f,m)=>m.from,l),u=()=>!Object.values(l).filter(by).length,d=null,h=f=>{a||(a=f);var m=f-a,g=m/r.dt;l=BT(r,l,g),s(vt(vt(vt({},e),t),c())),a=f,u()||(d=i.setTimeout(h))};return()=>(d=i.setTimeout(h),()=>{var f;(f=d)===null||f===void 0||f()})}function QH(e,t,r,n,s,i,a){var l=null,c=s.reduce((h,f)=>{var m=e[f],g=t[f];return m==null||g==null?h:vt(vt({},h),{},{[f]:[m,g]})},{}),u,d=h=>{u||(u=h);var f=(h-u)/n,m=Mc((y,p)=>Qh(...p,r(f)),c);if(i(vt(vt(vt({},e),t),m)),f<1)l=a.setTimeout(d);else{var g=Mc((y,p)=>Qh(...p,r(1)),c);i(vt(vt(vt({},e),t),g))}};return()=>(l=a.setTimeout(d),()=>{var h;(h=l)===null||h===void 0||h()})}const ZH=(e,t,r,n,s,i)=>{var a=GH(e,t);return r==null?()=>(s(vt(vt({},e),t)),()=>{}):r.isStepper===!0?JH(e,t,r,a,s,i):QH(e,t,r,n,a,s,i)};var Zh=1e-4,zT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],WT=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),tN=(e,t)=>r=>{var n=zT(e,t);return WT(n,r)},eq=(e,t)=>r=>{var n=zT(e,t),s=[...n.map((i,a)=>i*a).slice(1),0];return WT(s,r)},tq=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var s=n.map(i=>parseFloat(i));return[s[0],s[1],s[2],s[3]]},rq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=tq(r[0]);if(s)return s}}return r.length===4?r:[0,0,1,1]},nq=(e,t,r,n)=>{var s=tN(e,r),i=tN(t,n),a=eq(e,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,h=d,f=0;f<8;++f){var m=s(h)-d,g=a(h);if(Math.abs(m-d)<Zh||g<Zh)return i(h);h=l(h-m/g)}return i(h)};return c.isStepper=!1,c},rN=function(){return nq(...rq(...arguments))},sq=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(a,l,c)=>{var u=-(a-l)*r,d=c*n,h=c+(u-d)*s/1e3,f=c*s/1e3+a;return Math.abs(f-l)<Zh&&Math.abs(h)<Zh?[l,0]:[f,h]};return i.isStepper=!0,i.dt=s,i},iq=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rN(e);case"spring":return sq();default:if(e.split("(")[0]==="cubic-bezier")return rN(e)}return typeof e=="function"?e:null};function aq(e){var t,r=()=>null,n=!1,s=null,i=a=>{if(!n){if(Array.isArray(a)){if(!a.length)return;var l=a,[c,...u]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,u),c);return}i(c),s=e.setTimeout(i.bind(null,u));return}typeof a=="string"&&(t=a,r(t)),typeof a=="object"&&(t=a,r(t)),typeof a=="function"&&a()}};return{stop:()=>{n=!0},start:a=>{n=!1,s&&(s(),s=null),i(a)},subscribe:a=>(r=a,()=>{r=()=>null}),getTimeoutController:()=>e}}class oq{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=a=>{a-n>=r?t(a):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function lq(){return aq(new oq)}var cq=x.createContext(lq);function uq(e,t){var r=x.useContext(cq);return x.useMemo(()=>t??r(e),[e,t,r])}var dq=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),km={isSsr:dq()},hq={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},nN={t:0},ig={t:1};function ub(e){var t=Vr(e,hq),{isActive:r,canBegin:n,duration:s,easing:i,begin:a,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=r==="auto"?!km.isSsr:r,h=uq(t.animationId,t.animationManager),[f,m]=x.useState(d?nN:ig),g=x.useRef(null);return x.useEffect(()=>{d||m(ig)},[d]),x.useEffect(()=>{if(!d||!n)return iu;var y=ZH(nN,ig,iq(i),s,m,h.getTimeoutController()),p=()=>{g.current=y()};return h.start([c,a,p,s,l]),()=>{h.stop(),g.current&&g.current(),l()}},[d,n,s,i,a,c,l,h]),u(f.t)}function db(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(Ac(t)),n=x.useRef(e);return n.current!==e&&(r.current=Ac(t),n.current=e),r.current}var fq=["radius"],mq=["radius"],sN,iN,aN,oN,lN,cN,uN,dN,hN,fN;function mN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mN(Object(r),!0).forEach(function(n){pq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pq(e,t,r){return(t=gq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gq(e){var t=vq(e,"string");return typeof t=="symbol"?t:t+""}function vq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ef.apply(null,arguments)}function gN(e,t){if(e==null)return{};var r,n,s=yq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vN=(e,t,r,n,s)=>{var i=Ys(r),a=Ys(n),l=Math.min(Math.abs(i)/2,Math.abs(a)/2),c=a>=0?1:-1,u=i>=0?1:-1,d=a>=0&&i>=0||a<0&&i<0?1:0,h;if(l>0&&s instanceof Array){for(var f=[0,0,0,0],m=0,g=4;m<g;m++)f[m]=s[m]>l?l:s[m];h=tt(sN||(sN=Rn(["M",",",""])),e,t+c*f[0]),f[0]>0&&(h+=tt(iN||(iN=Rn(["A ",",",",0,0,",",",",",""])),f[0],f[0],d,e+u*f[0],t)),h+=tt(aN||(aN=Rn(["L ",",",""])),e+r-u*f[1],t),f[1]>0&&(h+=tt(oN||(oN=Rn(["A ",",",",0,0,",`,
        `,",",""])),f[1],f[1],d,e+r,t+c*f[1])),h+=tt(lN||(lN=Rn(["L ",",",""])),e+r,t+n-c*f[2]),f[2]>0&&(h+=tt(cN||(cN=Rn(["A ",",",",0,0,",`,
        `,",",""])),f[2],f[2],d,e+r-u*f[2],t+n)),h+=tt(uN||(uN=Rn(["L ",",",""])),e+u*f[3],t+n),f[3]>0&&(h+=tt(dN||(dN=Rn(["A ",",",",0,0,",`,
        `,",",""])),f[3],f[3],d,e,t+n-c*f[3])),h+="Z"}else if(l>0&&s===+s&&s>0){var y=Math.min(l,s);h=tt(hN||(hN=Rn(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*y,y,y,d,e+u*y,t,e+r-u*y,t,y,y,d,e+r,t+c*y,e+r,t+n-c*y,y,y,d,e+r-u*y,t+n,e+u*y,t+n,y,y,d,e,t+n-c*y)}else h=tt(fN||(fN=Rn(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return h},yN={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},HT=e=>{var t=Vr(e,yN),r=x.useRef(null),[n,s]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var I=r.current.getTotalLength();I&&s(I)}catch{}},[]);var{x:i,y:a,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:y}=t,p=x.useRef(l),v=x.useRef(c),b=x.useRef(i),w=x.useRef(a),_=x.useMemo(()=>({x:i,y:a,width:l,height:c,radius:u}),[i,a,l,c,u]),j=db(_,"rectangle-");if(i!==+i||a!==+a||l!==+l||c!==+c||l===0||c===0)return null;var N=qe("recharts-rectangle",d);if(!y){var k=ln(t),{radius:T}=k,P=gN(k,fq);return x.createElement("path",ef({},P,{x:Ys(i),y:Ys(a),width:Ys(l),height:Ys(c),radius:typeof u=="number"?u:void 0,className:N,d:vN(i,a,l,c,u)}))}var C=p.current,A=v.current,S=b.current,E=w.current,O="0px ".concat(n===-1?1:n,"px"),R="".concat(n,"px 0px"),F=FT(["strokeDasharray"],f,typeof h=="string"?h:yN.animationEasing);return x.createElement(ub,{animationId:j,key:j,canBegin:n>0,duration:f,easing:h,isActive:y,begin:m},I=>{var D=Bt(C,l,I),L=Bt(A,c,I),B=Bt(S,i,I),q=Bt(E,a,I);r.current&&(p.current=D,v.current=L,b.current=B,w.current=q);var V;g?I>0?V={transition:F,strokeDasharray:R}:V={strokeDasharray:O}:V={strokeDasharray:R};var he=ln(t),{radius:ue}=he,xe=gN(he,mq);return x.createElement("path",ef({},xe,{radius:typeof u=="number"?u:void 0,className:N,d:vN(B,q,D,L,u),ref:r,style:pN(pN({},V),t.style)}))})};function xN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(r),!0).forEach(function(n){xq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xq(e,t,r){return(t=bq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bq(e){var t=wq(e,"string");return typeof t=="symbol"?t:t+""}function wq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tf=Math.PI/180,_q=e=>e*180/Math.PI,zt=(e,t,r,n)=>({x:e+Math.cos(-tf*n)*r,y:t+Math.sin(-tf*n)*r}),jq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Nq=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},Sq=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,a=Nq({x:r,y:n},{x:s,y:i});if(a<=0)return{radius:a,angle:0};var l=(r-s)/a,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:a,angle:_q(c),angleInRadian:c}},Eq=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},Cq=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),a=Math.min(s,i);return e+a*360},kq=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=Sq({x:r,y:n},t),{innerRadius:a,outerRadius:l}=t;if(s<a||s>l||s===0)return null;var{startAngle:c,endAngle:u}=Eq(t),d=i,h;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}return h?bN(bN({},t),{},{radius:s,angle:Cq(d,t)}):null};function qT(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,a=zt(t,r,n,s),l=zt(t,r,n,i);return{points:[a,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}var wN,_N,jN,NN,SN,EN,CN;function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wy.apply(null,arguments)}function Bi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Aq=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},hd=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:a,cornerRadius:l,cornerIsExternal:c}=e,u=l*(a?1:-1)+n,d=Math.asin(l/u)/tf,h=c?s:s+i*d,f=zt(t,r,u,h),m=zt(t,r,n,h),g=c?s-i*d:s,y=zt(t,r,u*Math.cos(d*tf),g);return{center:f,circleTangency:m,lineTangency:y,theta:d}},VT=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:a}=e,l=Aq(i,a),c=i+l,u=zt(t,r,s,i),d=zt(t,r,s,c),h=tt(wN||(wN=Bi(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,s,s,+(Math.abs(l)>180),+(i>c),d.x,d.y);if(n>0){var f=zt(t,r,n,i),m=zt(t,r,n,c);h+=tt(_N||(_N=Bi(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,n,n,+(Math.abs(l)>180),+(i<=c),f.x,f.y)}else h+=tt(jN||(jN=Bi(["L ",","," Z"])),t,r);return h},Pq=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=br(u-c),{circleTangency:h,lineTangency:f,theta:m}=hd({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:g,lineTangency:y,theta:p}=hd({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-m-p;if(v<0)return a?tt(NN||(NN=Bi(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),f.x,f.y,i,i,i*2,i,i,-i*2):VT({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var b=tt(SN||(SN=Bi(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),f.x,f.y,i,i,+(d<0),h.x,h.y,s,s,+(v>180),+(d<0),g.x,g.y,i,i,+(d<0),y.x,y.y);if(n>0){var{circleTangency:w,lineTangency:_,theta:j}=hd({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:k,theta:T}=hd({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),P=l?Math.abs(c-u):Math.abs(c-u)-j-T;if(P<0&&i===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+=tt(EN||(EN=Bi(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,i,i,+(d<0),N.x,N.y,n,n,+(P>180),+(d>0),w.x,w.y,i,i,+(d<0),_.x,_.y)}else b+=tt(CN||(CN=Bi(["L",",","Z"])),t,r);return b},Oq={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},GT=e=>{var t=Vr(e,Oq),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(i<s||u===d)return null;var f=qe("recharts-sector",h),m=i-s,g=On(a,m,0,!0),y;return g>0&&Math.abs(u-d)<360?y=Pq({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=VT({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),x.createElement("path",wy({},ln(t),{className:f,d:y}))};function Tq(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(hO(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:a,angle:l}=t,c=zt(n,s,i,l),u=zt(n,s,a,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return qT(t)}}var KT={},YT={},XT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xx;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(XT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XT;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(YT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jx,r=YT;function n(s,i,a){a&&typeof a!="number"&&t.isIterateeCall(s,i,a)&&(i=a=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),a=a===void 0?s<i?1:-1:r.toFinite(a);const l=Math.max(Math.ceil((i-s)/(a||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=a;return c}e.range=n})(KT);var Iq=KT.range;const JT=Ss(Iq);function li(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Dq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hb(e){let t,r,n;e.length!==2?(t=li,r=(l,c)=>li(e(l),c),n=(l,c)=>e(l)-c):(t=e===li||e===Dq?e:Rq,r=e,n=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function a(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:a,right:i}}function Rq(){return 0}function QT(e){return e===null?NaN:+e}function*Mq(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Lq=hb(li),hu=Lq.right;hb(QT).center;class kN extends Map{constructor(t,r=Fq){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(AN(this,t))}has(t){return super.has(AN(this,t))}set(t,r){return super.set($q(this,t),r)}delete(t){return super.delete(Uq(this,t))}}function AN({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function $q({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Uq({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Fq(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Bq(e=li){if(e===li)return ZT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ZT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const zq=Math.sqrt(50),Wq=Math.sqrt(10),Hq=Math.sqrt(2);function rf(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),a=i>=zq?10:i>=Wq?5:i>=Hq?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/a,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*a,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?rf(e,t,r*2):[l,c,u]}function _y(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,a]=n?rf(t,e,r):rf(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(a<0)for(let u=0;u<l;++u)c[u]=(i-u)/-a;else for(let u=0;u<l;++u)c[u]=(i-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(s+u)/-a;else for(let u=0;u<l;++u)c[u]=(s+u)*a;return c}function jy(e,t,r){return t=+t,e=+e,r=+r,rf(e,t,r)[2]}function Ny(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?jy(t,e,r):jy(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function PN(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function ON(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function eI(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?ZT:Bq(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*h/c+f)),g=Math.min(n,Math.floor(t+(c-u)*h/c+f));eI(e,t,m,g,s)}const i=e[t];let a=r,l=n;for(yl(e,r,t),s(e[n],i)>0&&yl(e,r,n);a<l;){for(yl(e,a,l),++a,--l;s(e[a],i)<0;)++a;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?yl(e,r,l):(++l,yl(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function yl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function qq(e,t,r){if(e=Float64Array.from(Mq(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return ON(e);if(t>=1)return PN(e);var n,s=(n-1)*t,i=Math.floor(s),a=PN(eI(e,i).subarray(0,i+1)),l=ON(e.subarray(i+1));return a+(l-a)*(s-i)}}function Vq(e,t,r=QT){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),a=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return a+(l-a)*(s-i)}}function Gq(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function dn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Os(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Sy=Symbol("implicit");function fb(){var e=new kN,t=[],r=[],n=Sy;function s(i){let a=e.get(i);if(a===void 0){if(n!==Sy)return n;e.set(i,a=t.push(i)-1)}return r[a%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new kN;for(const a of i)e.has(a)||e.set(a,t.push(a)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return fb(t,r).unknown(n)},dn.apply(s,arguments),s}function mb(){var e=fb().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,a,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var f=t().length,m=s<n,g=m?s:n,y=m?n:s;i=(y-g)/Math.max(1,f-c+u*2),l&&(i=Math.floor(i)),g+=(y-g-i*(f-c))*d,a=i*(1-c),l&&(g=Math.round(g),a=Math.round(a));var p=Gq(f).map(function(v){return g+i*v});return r(m?p.reverse():p)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,l=!0,h()},e.bandwidth=function(){return a},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},e.copy=function(){return mb(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},dn.apply(h(),arguments)}function tI(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return tI(t())},e}function Kq(){return tI(mb.apply(null,arguments).paddingInner(1))}function pb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function rI(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function fu(){}var Lc=.7,nf=1/Lc,lo="\\s*([+-]?\\d+)\\s*",$c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yq=/^#([0-9a-f]{3,8})$/,Xq=new RegExp(`^rgb\\(${lo},${lo},${lo}\\)$`),Jq=new RegExp(`^rgb\\(${Wn},${Wn},${Wn}\\)$`),Qq=new RegExp(`^rgba\\(${lo},${lo},${lo},${$c}\\)$`),Zq=new RegExp(`^rgba\\(${Wn},${Wn},${Wn},${$c}\\)$`),eV=new RegExp(`^hsl\\(${$c},${Wn},${Wn}\\)$`),tV=new RegExp(`^hsla\\(${$c},${Wn},${Wn},${$c}\\)$`),TN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pb(fu,Uc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:IN,formatHex:IN,formatHex8:rV,formatHsl:nV,formatRgb:DN,toString:DN});function IN(){return this.rgb().formatHex()}function rV(){return this.rgb().formatHex8()}function nV(){return nI(this).formatHsl()}function DN(){return this.rgb().formatRgb()}function Uc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Yq.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?RN(t):r===3?new wr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?fd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?fd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xq.exec(e))?new wr(t[1],t[2],t[3],1):(t=Jq.exec(e))?new wr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Qq.exec(e))?fd(t[1],t[2],t[3],t[4]):(t=Zq.exec(e))?fd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=eV.exec(e))?$N(t[1],t[2]/100,t[3]/100,1):(t=tV.exec(e))?$N(t[1],t[2]/100,t[3]/100,t[4]):TN.hasOwnProperty(e)?RN(TN[e]):e==="transparent"?new wr(NaN,NaN,NaN,0):null}function RN(e){return new wr(e>>16&255,e>>8&255,e&255,1)}function fd(e,t,r,n){return n<=0&&(e=t=r=NaN),new wr(e,t,r,n)}function sV(e){return e instanceof fu||(e=Uc(e)),e?(e=e.rgb(),new wr(e.r,e.g,e.b,e.opacity)):new wr}function Ey(e,t,r,n){return arguments.length===1?sV(e):new wr(e,t,r,n??1)}function wr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}pb(wr,Ey,rI(fu,{brighter(e){return e=e==null?nf:Math.pow(nf,e),new wr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lc:Math.pow(Lc,e),new wr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wr(Ki(this.r),Ki(this.g),Ki(this.b),sf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MN,formatHex:MN,formatHex8:iV,formatRgb:LN,toString:LN}));function MN(){return`#${zi(this.r)}${zi(this.g)}${zi(this.b)}`}function iV(){return`#${zi(this.r)}${zi(this.g)}${zi(this.b)}${zi((isNaN(this.opacity)?1:this.opacity)*255)}`}function LN(){const e=sf(this.opacity);return`${e===1?"rgb(":"rgba("}${Ki(this.r)}, ${Ki(this.g)}, ${Ki(this.b)}${e===1?")":`, ${e})`}`}function sf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ki(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zi(e){return e=Ki(e),(e<16?"0":"")+e.toString(16)}function $N(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new _n(e,t,r,n)}function nI(e){if(e instanceof _n)return new _n(e.h,e.s,e.l,e.opacity);if(e instanceof fu||(e=Uc(e)),!e)return new _n;if(e instanceof _n)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),a=NaN,l=i-s,c=(i+s)/2;return l?(t===i?a=(r-n)/l+(r<n)*6:r===i?a=(n-t)/l+2:a=(t-r)/l+4,l/=c<.5?i+s:2-i-s,a*=60):l=c>0&&c<1?0:a,new _n(a,l,c,e.opacity)}function aV(e,t,r,n){return arguments.length===1?nI(e):new _n(e,t,r,n??1)}function _n(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}pb(_n,aV,rI(fu,{brighter(e){return e=e==null?nf:Math.pow(nf,e),new _n(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lc:Math.pow(Lc,e),new _n(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new wr(ag(e>=240?e-240:e+120,s,n),ag(e,s,n),ag(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new _n(UN(this.h),md(this.s),md(this.l),sf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sf(this.opacity);return`${e===1?"hsl(":"hsla("}${UN(this.h)}, ${md(this.s)*100}%, ${md(this.l)*100}%${e===1?")":`, ${e})`}`}}));function UN(e){return e=(e||0)%360,e<0?e+360:e}function md(e){return Math.max(0,Math.min(1,e||0))}function ag(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const gb=e=>()=>e;function oV(e,t){return function(r){return e+r*t}}function lV(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function cV(e){return(e=+e)==1?sI:function(t,r){return r-t?lV(t,r,e):gb(isNaN(t)?r:t)}}function sI(e,t){var r=t-e;return r?oV(e,r):gb(isNaN(e)?t:e)}const FN=function e(t){var r=cV(t);function n(s,i){var a=r((s=Ey(s)).r,(i=Ey(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=sI(s.opacity,i.opacity);return function(d){return s.r=a(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n}(1);function uV(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function dV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hV(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),a;for(a=0;a<n;++a)s[a]=Ko(e[a],t[a]);for(;a<r;++a)i[a]=t[a];return function(l){for(a=0;a<n;++a)i[a]=s[a](l);return i}}function fV(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function af(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function mV(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Ko(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var Cy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,og=new RegExp(Cy.source,"g");function pV(e){return function(){return e}}function gV(e){return function(t){return e(t)+""}}function vV(e,t){var r=Cy.lastIndex=og.lastIndex=0,n,s,i,a=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Cy.exec(e))&&(s=og.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,c.push({i:a,x:af(n,s)})),r=og.lastIndex;return r<t.length&&(i=t.slice(r),l[a]?l[a]+=i:l[++a]=i),l.length<2?c[0]?gV(c[0].x):pV(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Ko(e,t){var r=typeof t,n;return t==null||r==="boolean"?gb(t):(r==="number"?af:r==="string"?(n=Uc(t))?(t=n,FN):vV:t instanceof Uc?FN:t instanceof Date?fV:dV(t)?uV:Array.isArray(t)?hV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mV:af)(e,t)}function vb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function yV(e,t){t===void 0&&(t=e,e=Ko);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(a){var l=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return i[l](a-l)}}function xV(e){return function(){return e}}function of(e){return+e}var BN=[0,1];function or(e){return e}function ky(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:xV(isNaN(t)?NaN:.5)}function bV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function wV(e,t,r){var n=e[0],s=e[1],i=t[0],a=t[1];return s<n?(n=ky(s,n),i=r(a,i)):(n=ky(n,s),i=r(i,a)),function(l){return i(n(l))}}function _V(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)s[a]=ky(e[a],e[a+1]),i[a]=r(t[a],t[a+1]);return function(l){var c=hu(e,l,1,n)-1;return i[c](s[c](l))}}function mu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Am(){var e=BN,t=BN,r=Ko,n,s,i,a=or,l,c,u;function d(){var f=Math.min(e.length,t.length);return a!==or&&(a=bV(e[0],e[f-1])),l=f>2?_V:wV,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(n),t,r)))(n(a(f)))}return h.invert=function(f){return a(s((u||(u=l(t,e.map(n),af)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,of),d()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=vb,d()},h.clamp=function(f){return arguments.length?(a=f?!0:or,d()):a!==or},h.interpolate=function(f){return arguments.length?(r=f,d()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return n=f,s=m,d()}}function yb(){return Am()(or,or)}function jV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ko(e){return e=lf(Math.abs(e)),e?e[1]:NaN}function NV(e,t){return function(r,n){for(var s=r.length,i=[],a=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[a=(a+1)%e.length];return i.reverse().join(t)}}function SV(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var EV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fc(e){if(!(t=EV.exec(e)))throw new Error("invalid format: "+e);var t;return new xb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fc.prototype=xb.prototype;function xb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CV(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var iI;function kV(e,t){var r=lf(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(iI=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=n.length;return i===a?n:i>a?n+new Array(i-a+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+lf(e,Math.max(0,t+i-1))[0]}function zN(e,t){var r=lf(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const WN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:jV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zN(e*100,t),r:zN,s:kV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function HN(e){return e}var qN=Array.prototype.map,VN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function AV(e){var t=e.grouping===void 0||e.thousands===void 0?HN:NV(qN.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?HN:SV(qN.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Fc(h);var f=h.fill,m=h.align,g=h.sign,y=h.symbol,p=h.zero,v=h.width,b=h.comma,w=h.precision,_=h.trim,j=h.type;j==="n"?(b=!0,j="g"):WN[j]||(w===void 0&&(w=12),_=!0,j="g"),(p||f==="0"&&m==="=")&&(p=!0,f="0",m="=");var N=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",k=y==="$"?n:/[%p]/.test(j)?a:"",T=WN[j],P=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function C(A){var S=N,E=k,O,R,F;if(j==="c")E=T(A)+E,A="";else{A=+A;var I=A<0||1/A<0;if(A=isNaN(A)?c:T(Math.abs(A),w),_&&(A=CV(A)),I&&+A==0&&g!=="+"&&(I=!1),S=(I?g==="("?g:l:g==="-"||g==="("?"":g)+S,E=(j==="s"?VN[8+iI/3]:"")+E+(I&&g==="("?")":""),P){for(O=-1,R=A.length;++O<R;)if(F=A.charCodeAt(O),48>F||F>57){E=(F===46?s+A.slice(O+1):A.slice(O))+E,A=A.slice(0,O);break}}}b&&!p&&(A=t(A,1/0));var D=S.length+A.length+E.length,L=D<v?new Array(v-D+1).join(f):"";switch(b&&p&&(A=t(L+A,L.length?v-E.length:1/0),L=""),m){case"<":A=S+A+E+L;break;case"=":A=S+L+A+E;break;case"^":A=L.slice(0,D=L.length>>1)+S+A+E+L.slice(D);break;default:A=L+S+A+E;break}return i(A)}return C.toString=function(){return h+""},C}function d(h,f){var m=u((h=Fc(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(ko(f)/3)))*3,y=Math.pow(10,-g),p=VN[8+g/3];return function(v){return m(y*v)+p}}return{format:u,formatPrefix:d}}var pd,bb,aI;PV({thousands:",",grouping:[3],currency:["$",""]});function PV(e){return pd=AV(e),bb=pd.format,aI=pd.formatPrefix,pd}function OV(e){return Math.max(0,-ko(Math.abs(e)))}function TV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ko(t)/3)))*3-ko(Math.abs(e)))}function IV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ko(t)-ko(e))+1}function oI(e,t,r,n){var s=Ny(e,t,r),i;switch(n=Fc(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=TV(s,a))&&(n.precision=i),aI(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=IV(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=OV(s))&&(n.precision=i-(n.type==="%")*2);break}}return bb(n)}function xi(e){var t=e.domain;return e.ticks=function(r){var n=t();return _y(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return oI(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,a=n[s],l=n[i],c,u,d=10;for(l<a&&(u=a,a=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=jy(a,l,r),u===c)return n[s]=a,n[i]=l,t(n);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function lI(){var e=yb();return e.copy=function(){return mu(e,lI())},dn.apply(e,arguments),xi(e)}function cI(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,of),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return cI(e).unknown(t)},e=arguments.length?Array.from(e,of):[0,1],xi(r)}function uI(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],a;return i<s&&(a=r,r=n,n=a,a=s,s=i,i=a),e[r]=t.floor(s),e[n]=t.ceil(i),e}function GN(e){return Math.log(e)}function KN(e){return Math.exp(e)}function DV(e){return-Math.log(-e)}function RV(e){return-Math.exp(-e)}function MV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function LV(e){return e===10?MV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $V(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function YN(e){return(t,r)=>-e(-t,r)}function wb(e){const t=e(GN,KN),r=t.domain;let n=10,s,i;function a(){return s=$V(n),i=LV(n),r()[0]<0?(s=YN(s),i=YN(i),e(DV,RV)):e(GN,KN),t}return t.base=function(l){return arguments.length?(n=+l,a()):n},t.domain=function(l){return arguments.length?(r(l),a()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),m=s(d),g,y;const p=l==null?10:+l;let v=[];if(!(n%1)&&m-f<p){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(g=1;g<n;++g)if(y=f<0?g/i(-f):g*i(f),!(y<u)){if(y>d)break;v.push(y)}}else for(;f<=m;++f)for(g=n-1;g>=1;--g)if(y=f>0?g/i(-f):g*i(f),!(y<u)){if(y>d)break;v.push(y)}v.length*2<p&&(v=_y(u,d,p))}else v=_y(f,m,Math.min(m-f,p)).map(i);return h?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Fc(c)).precision==null&&(c.trim=!0),c=bb(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let h=d/i(Math.round(s(d)));return h*n<n-.5&&(h*=n),h<=u?c(d):""}},t.nice=()=>r(uI(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function dI(){const e=wb(Am()).domain([1,10]);return e.copy=()=>mu(e,dI()).base(e.base()),dn.apply(e,arguments),e}function XN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function JN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function _b(e){var t=1,r=e(XN(t),JN(t));return r.constant=function(n){return arguments.length?e(XN(t=+n),JN(t)):t},xi(r)}function hI(){var e=_b(Am());return e.copy=function(){return mu(e,hI()).constant(e.constant())},dn.apply(e,arguments)}function QN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function UV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function FV(e){return e<0?-e*e:e*e}function jb(e){var t=e(or,or),r=1;function n(){return r===1?e(or,or):r===.5?e(UV,FV):e(QN(r),QN(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},xi(t)}function Nb(){var e=jb(Am());return e.copy=function(){return mu(e,Nb()).exponent(e.exponent())},dn.apply(e,arguments),e}function BV(){return Nb.apply(null,arguments).exponent(.5)}function ZN(e){return Math.sign(e)*e*e}function zV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function fI(){var e=yb(),t=[0,1],r=!1,n;function s(i){var a=zV(e(i));return isNaN(a)?n:r?Math.round(a):a}return s.invert=function(i){return e.invert(ZN(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,of)).map(ZN)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return fI(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},dn.apply(s,arguments),xi(s)}function mI(){var e=[],t=[],r=[],n;function s(){var a=0,l=Math.max(1,t.length);for(r=new Array(l-1);++a<l;)r[a-1]=Vq(e,a/l);return i}function i(a){return a==null||isNaN(a=+a)?n:t[hu(r,a)]}return i.invertExtent=function(a){var l=t.indexOf(a);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(li),s()},i.range=function(a){return arguments.length?(t=Array.from(a),s()):t.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return mI().domain(e).range(t).unknown(n)},dn.apply(i,arguments)}function pI(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function a(c){return c!=null&&c<=c?s[hu(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},a.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},a.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},a.unknown=function(c){return arguments.length&&(i=c),a},a.thresholds=function(){return n.slice()},a.copy=function(){return pI().domain([e,t]).range(s).unknown(i)},dn.apply(xi(a),arguments)}function gI(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[hu(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var a=t.indexOf(i);return[e[a-1],e[a]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return gI().domain(e).range(t).unknown(r)},dn.apply(s,arguments)}const lg=new Date,cg=new Date;function _t(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const a=s(i),l=s.ceil(i);return i-a<l-i?a:l},s.offset=(i,a)=>(t(i=new Date(+i),a==null?1:Math.floor(a)),i),s.range=(i,a,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<a)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<a);return c},s.filter=i=>_t(a=>{if(a>=a)for(;e(a),!i(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;t(a,-1),!i(a););else for(;--l>=0;)for(;t(a,1),!i(a););}),r&&(s.count=(i,a)=>(lg.setTime(+i),cg.setTime(+a),e(lg),e(cg),Math.floor(r(lg,cg))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?a=>n(a)%i===0:a=>s.count(0,a)%i===0):s)),s}const cf=_t(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_t(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):cf);cf.range;const ss=1e3,rn=ss*60,is=rn*60,bs=is*24,Sb=bs*7,eS=bs*30,ug=bs*365,Wi=_t(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ss)},(e,t)=>(t-e)/ss,e=>e.getUTCSeconds());Wi.range;const Eb=_t(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ss)},(e,t)=>{e.setTime(+e+t*rn)},(e,t)=>(t-e)/rn,e=>e.getMinutes());Eb.range;const Cb=_t(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*rn)},(e,t)=>(t-e)/rn,e=>e.getUTCMinutes());Cb.range;const kb=_t(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ss-e.getMinutes()*rn)},(e,t)=>{e.setTime(+e+t*is)},(e,t)=>(t-e)/is,e=>e.getHours());kb.range;const Ab=_t(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*is)},(e,t)=>(t-e)/is,e=>e.getUTCHours());Ab.range;const pu=_t(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*rn)/bs,e=>e.getDate()-1);pu.range;const Pm=_t(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bs,e=>e.getUTCDate()-1);Pm.range;const vI=_t(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bs,e=>Math.floor(e/bs));vI.range;function va(e){return _t(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*rn)/Sb)}const Om=va(0),uf=va(1),WV=va(2),HV=va(3),Ao=va(4),qV=va(5),VV=va(6);Om.range;uf.range;WV.range;HV.range;Ao.range;qV.range;VV.range;function ya(e){return _t(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Sb)}const Tm=ya(0),df=ya(1),GV=ya(2),KV=ya(3),Po=ya(4),YV=ya(5),XV=ya(6);Tm.range;df.range;GV.range;KV.range;Po.range;YV.range;XV.range;const Pb=_t(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Pb.range;const Ob=_t(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ob.range;const ws=_t(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ws.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_t(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ws.range;const _s=_t(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_s.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_t(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});_s.range;function yI(e,t,r,n,s,i){const a=[[Wi,1,ss],[Wi,5,5*ss],[Wi,15,15*ss],[Wi,30,30*ss],[i,1,rn],[i,5,5*rn],[i,15,15*rn],[i,30,30*rn],[s,1,is],[s,3,3*is],[s,6,6*is],[s,12,12*is],[n,1,bs],[n,2,2*bs],[r,1,Sb],[t,1,eS],[t,3,3*eS],[e,1,ug]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),g=m?m.range(u,+d+1):[];return f?g.reverse():g}function c(u,d,h){const f=Math.abs(d-u)/h,m=hb(([,,p])=>p).right(a,f);if(m===a.length)return e.every(Ny(u/ug,d/ug,h));if(m===0)return cf.every(Math.max(Ny(u,d,h),1));const[g,y]=a[f/a[m-1][2]<a[m][2]/f?m-1:m];return g.every(y)}return[l,c]}const[JV,QV]=yI(_s,Ob,Tm,vI,Ab,Cb),[ZV,eG]=yI(ws,Pb,Om,pu,kb,Eb);function dg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function hg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xl(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function tG(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,a=e.shortDays,l=e.months,c=e.shortMonths,u=bl(s),d=wl(s),h=bl(i),f=wl(i),m=bl(a),g=wl(a),y=bl(l),p=wl(l),v=bl(c),b=wl(c),w={a:I,A:D,b:L,B,c:null,d:aS,e:aS,f:NG,g:DG,G:MG,H:wG,I:_G,j:jG,L:xI,m:SG,M:EG,p:q,q:V,Q:cS,s:uS,S:CG,u:kG,U:AG,V:PG,w:OG,W:TG,x:null,X:null,y:IG,Y:RG,Z:LG,"%":lS},_={a:he,A:ue,b:xe,B:Ae,c:null,d:oS,e:oS,f:BG,g:JG,G:ZG,H:$G,I:UG,j:FG,L:wI,m:zG,M:WG,p:ye,q:mt,Q:cS,s:uS,S:HG,u:qG,U:VG,V:GG,w:KG,W:YG,x:null,X:null,y:XG,Y:QG,Z:eK,"%":lS},j={a:C,A,b:S,B:E,c:O,d:sS,e:sS,f:vG,g:nS,G:rS,H:iS,I:iS,j:fG,L:gG,m:hG,M:mG,p:P,q:dG,Q:xG,s:bG,S:pG,u:aG,U:oG,V:lG,w:iG,W:cG,x:R,X:F,y:nS,Y:rS,Z:uG,"%":yG};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(z,ce){return function(fe){var M=[],ne=-1,Z=0,ie=z.length,$,G,re;for(fe instanceof Date||(fe=new Date(+fe));++ne<ie;)z.charCodeAt(ne)===37&&(M.push(z.slice(Z,ne)),(G=tS[$=z.charAt(++ne)])!=null?$=z.charAt(++ne):G=$==="e"?" ":"0",(re=ce[$])&&($=re(fe,G)),M.push($),Z=ne+1);return M.push(z.slice(Z,ne)),M.join("")}}function k(z,ce){return function(fe){var M=xl(1900,void 0,1),ne=T(M,z,fe+="",0),Z,ie;if(ne!=fe.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(ce&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(Z=hg(xl(M.y,0,1)),ie=Z.getUTCDay(),Z=ie>4||ie===0?df.ceil(Z):df(Z),Z=Pm.offset(Z,(M.V-1)*7),M.y=Z.getUTCFullYear(),M.m=Z.getUTCMonth(),M.d=Z.getUTCDate()+(M.w+6)%7):(Z=dg(xl(M.y,0,1)),ie=Z.getDay(),Z=ie>4||ie===0?uf.ceil(Z):uf(Z),Z=pu.offset(Z,(M.V-1)*7),M.y=Z.getFullYear(),M.m=Z.getMonth(),M.d=Z.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),ie="Z"in M?hg(xl(M.y,0,1)).getUTCDay():dg(xl(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(ie+5)%7:M.w+M.U*7-(ie+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,hg(M)):dg(M)}}function T(z,ce,fe,M){for(var ne=0,Z=ce.length,ie=fe.length,$,G;ne<Z;){if(M>=ie)return-1;if($=ce.charCodeAt(ne++),$===37){if($=ce.charAt(ne++),G=j[$ in tS?ce.charAt(ne++):$],!G||(M=G(z,fe,M))<0)return-1}else if($!=fe.charCodeAt(M++))return-1}return M}function P(z,ce,fe){var M=u.exec(ce.slice(fe));return M?(z.p=d.get(M[0].toLowerCase()),fe+M[0].length):-1}function C(z,ce,fe){var M=m.exec(ce.slice(fe));return M?(z.w=g.get(M[0].toLowerCase()),fe+M[0].length):-1}function A(z,ce,fe){var M=h.exec(ce.slice(fe));return M?(z.w=f.get(M[0].toLowerCase()),fe+M[0].length):-1}function S(z,ce,fe){var M=v.exec(ce.slice(fe));return M?(z.m=b.get(M[0].toLowerCase()),fe+M[0].length):-1}function E(z,ce,fe){var M=y.exec(ce.slice(fe));return M?(z.m=p.get(M[0].toLowerCase()),fe+M[0].length):-1}function O(z,ce,fe){return T(z,t,ce,fe)}function R(z,ce,fe){return T(z,r,ce,fe)}function F(z,ce,fe){return T(z,n,ce,fe)}function I(z){return a[z.getDay()]}function D(z){return i[z.getDay()]}function L(z){return c[z.getMonth()]}function B(z){return l[z.getMonth()]}function q(z){return s[+(z.getHours()>=12)]}function V(z){return 1+~~(z.getMonth()/3)}function he(z){return a[z.getUTCDay()]}function ue(z){return i[z.getUTCDay()]}function xe(z){return c[z.getUTCMonth()]}function Ae(z){return l[z.getUTCMonth()]}function ye(z){return s[+(z.getUTCHours()>=12)]}function mt(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var ce=N(z+="",w);return ce.toString=function(){return z},ce},parse:function(z){var ce=k(z+="",!1);return ce.toString=function(){return z},ce},utcFormat:function(z){var ce=N(z+="",_);return ce.toString=function(){return z},ce},utcParse:function(z){var ce=k(z+="",!0);return ce.toString=function(){return z},ce}}}var tS={"-":"",_:" ",0:"0"},Mt=/^\s*\d+/,rG=/^%/,nG=/[\\^$*+?|[\]().{}]/g;function _e(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function sG(e){return e.replace(nG,"\\$&")}function bl(e){return new RegExp("^(?:"+e.map(sG).join("|")+")","i")}function wl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function iG(e,t,r){var n=Mt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function aG(e,t,r){var n=Mt.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function oG(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function lG(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function cG(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function rS(e,t,r){var n=Mt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function nS(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function uG(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dG(e,t,r){var n=Mt.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function hG(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function sS(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function fG(e,t,r){var n=Mt.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function iS(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function mG(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function pG(e,t,r){var n=Mt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function gG(e,t,r){var n=Mt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function vG(e,t,r){var n=Mt.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function yG(e,t,r){var n=rG.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function xG(e,t,r){var n=Mt.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function bG(e,t,r){var n=Mt.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function aS(e,t){return _e(e.getDate(),t,2)}function wG(e,t){return _e(e.getHours(),t,2)}function _G(e,t){return _e(e.getHours()%12||12,t,2)}function jG(e,t){return _e(1+pu.count(ws(e),e),t,3)}function xI(e,t){return _e(e.getMilliseconds(),t,3)}function NG(e,t){return xI(e,t)+"000"}function SG(e,t){return _e(e.getMonth()+1,t,2)}function EG(e,t){return _e(e.getMinutes(),t,2)}function CG(e,t){return _e(e.getSeconds(),t,2)}function kG(e){var t=e.getDay();return t===0?7:t}function AG(e,t){return _e(Om.count(ws(e)-1,e),t,2)}function bI(e){var t=e.getDay();return t>=4||t===0?Ao(e):Ao.ceil(e)}function PG(e,t){return e=bI(e),_e(Ao.count(ws(e),e)+(ws(e).getDay()===4),t,2)}function OG(e){return e.getDay()}function TG(e,t){return _e(uf.count(ws(e)-1,e),t,2)}function IG(e,t){return _e(e.getFullYear()%100,t,2)}function DG(e,t){return e=bI(e),_e(e.getFullYear()%100,t,2)}function RG(e,t){return _e(e.getFullYear()%1e4,t,4)}function MG(e,t){var r=e.getDay();return e=r>=4||r===0?Ao(e):Ao.ceil(e),_e(e.getFullYear()%1e4,t,4)}function LG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_e(t/60|0,"0",2)+_e(t%60,"0",2)}function oS(e,t){return _e(e.getUTCDate(),t,2)}function $G(e,t){return _e(e.getUTCHours(),t,2)}function UG(e,t){return _e(e.getUTCHours()%12||12,t,2)}function FG(e,t){return _e(1+Pm.count(_s(e),e),t,3)}function wI(e,t){return _e(e.getUTCMilliseconds(),t,3)}function BG(e,t){return wI(e,t)+"000"}function zG(e,t){return _e(e.getUTCMonth()+1,t,2)}function WG(e,t){return _e(e.getUTCMinutes(),t,2)}function HG(e,t){return _e(e.getUTCSeconds(),t,2)}function qG(e){var t=e.getUTCDay();return t===0?7:t}function VG(e,t){return _e(Tm.count(_s(e)-1,e),t,2)}function _I(e){var t=e.getUTCDay();return t>=4||t===0?Po(e):Po.ceil(e)}function GG(e,t){return e=_I(e),_e(Po.count(_s(e),e)+(_s(e).getUTCDay()===4),t,2)}function KG(e){return e.getUTCDay()}function YG(e,t){return _e(df.count(_s(e)-1,e),t,2)}function XG(e,t){return _e(e.getUTCFullYear()%100,t,2)}function JG(e,t){return e=_I(e),_e(e.getUTCFullYear()%100,t,2)}function QG(e,t){return _e(e.getUTCFullYear()%1e4,t,4)}function ZG(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Po(e):Po.ceil(e),_e(e.getUTCFullYear()%1e4,t,4)}function eK(){return"+0000"}function lS(){return"%"}function cS(e){return+e}function uS(e){return Math.floor(+e/1e3)}var Aa,jI,NI;tK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tK(e){return Aa=tG(e),jI=Aa.format,Aa.parse,NI=Aa.utcFormat,Aa.utcParse,Aa}function rK(e){return new Date(e)}function nK(e){return e instanceof Date?+e:+new Date(+e)}function Tb(e,t,r,n,s,i,a,l,c,u){var d=yb(),h=d.invert,f=d.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),p=u("%I %p"),v=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?m:l(N)<N?g:a(N)<N?y:i(N)<N?p:n(N)<N?s(N)<N?v:b:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(h(N))},d.domain=function(N){return arguments.length?f(Array.from(N,nK)):f().map(rK)},d.ticks=function(N){var k=f();return e(k[0],k[k.length-1],N??10)},d.tickFormat=function(N,k){return k==null?j:u(k)},d.nice=function(N){var k=f();return(!N||typeof N.range!="function")&&(N=t(k[0],k[k.length-1],N??10)),N?f(uI(k,N)):d},d.copy=function(){return mu(d,Tb(e,t,r,n,s,i,a,l,c,u))},d}function sK(){return dn.apply(Tb(ZV,eG,ws,Pb,Om,pu,kb,Eb,Wi,jI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iK(){return dn.apply(Tb(JV,QV,_s,Ob,Tm,Pm,Ab,Cb,Wi,NI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Im(){var e=0,t=1,r,n,s,i,a=or,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:a(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(a=h,u):a};function d(h){return function(f){var m,g;return arguments.length?([m,g]=f,a=h(m,g),u):[a(0),a(1)]}}return u.range=d(Ko),u.rangeRound=d(vb),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),u}}function bi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function SI(){var e=xi(Im()(or));return e.copy=function(){return bi(e,SI())},Os.apply(e,arguments)}function EI(){var e=wb(Im()).domain([1,10]);return e.copy=function(){return bi(e,EI()).base(e.base())},Os.apply(e,arguments)}function CI(){var e=_b(Im());return e.copy=function(){return bi(e,CI()).constant(e.constant())},Os.apply(e,arguments)}function Ib(){var e=jb(Im());return e.copy=function(){return bi(e,Ib()).exponent(e.exponent())},Os.apply(e,arguments)}function aK(){return Ib.apply(null,arguments).exponent(.5)}function kI(){var e=[],t=or;function r(n){if(n!=null&&!isNaN(n=+n))return t((hu(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(li),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>qq(e,i/n))},r.copy=function(){return kI(t).domain(e)},Os.apply(r,arguments)}function Dm(){var e=0,t=.5,r=1,n=1,s,i,a,l,c,u=or,d,h=!1,f;function m(y){return isNaN(y=+y)?f:(y=.5+((y=+d(y))-i)*(n*y<n*i?l:c),u(h?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),i=d(t=+t),a=d(r=+r),l=s===i?0:.5/(i-s),c=i===a?0:.5/(a-i),n=i<s?-1:1,m):[e,t,r]},m.clamp=function(y){return arguments.length?(h=!!y,m):h},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(p){var v,b,w;return arguments.length?([v,b,w]=p,u=yV(y,[v,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(Ko),m.rangeRound=g(vb),m.unknown=function(y){return arguments.length?(f=y,m):f},function(y){return d=y,s=y(e),i=y(t),a=y(r),l=s===i?0:.5/(i-s),c=i===a?0:.5/(a-i),n=i<s?-1:1,m}}function AI(){var e=xi(Dm()(or));return e.copy=function(){return bi(e,AI())},Os.apply(e,arguments)}function PI(){var e=wb(Dm()).domain([.1,1,10]);return e.copy=function(){return bi(e,PI()).base(e.base())},Os.apply(e,arguments)}function OI(){var e=_b(Dm());return e.copy=function(){return bi(e,OI()).constant(e.constant())},Os.apply(e,arguments)}function Db(){var e=jb(Dm());return e.copy=function(){return bi(e,Db()).exponent(e.exponent())},Os.apply(e,arguments)}function oK(){return Db.apply(null,arguments).exponent(.5)}const Al=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mb,scaleDiverging:AI,scaleDivergingLog:PI,scaleDivergingPow:Db,scaleDivergingSqrt:oK,scaleDivergingSymlog:OI,scaleIdentity:cI,scaleImplicit:Sy,scaleLinear:lI,scaleLog:dI,scaleOrdinal:fb,scalePoint:Kq,scalePow:Nb,scaleQuantile:mI,scaleQuantize:pI,scaleRadial:fI,scaleSequential:SI,scaleSequentialLog:EI,scaleSequentialPow:Ib,scaleSequentialQuantile:kI,scaleSequentialSqrt:aK,scaleSequentialSymlog:CI,scaleSqrt:BV,scaleSymlog:hI,scaleThreshold:gI,scaleTime:sK,scaleUtc:iK,tickFormat:oI},Symbol.toStringTag,{value:"Module"}));var Ts=e=>e.chartData,TI=U([Ts],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),II=(e,t,r,n)=>n?TI(e):Ts(e),lK=(e,t,r)=>r?TI(e):Ts(e);function mi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(et(t)&&et(r))return!0}return!1}function dS(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function DI(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(et(r))s=r;else if(typeof r=="function")return;if(et(n))i=n;else if(typeof n=="function")return;var a=[s,i];if(mi(a))return a}}function cK(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(mi(n))return dS(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,a,l;if(s==="auto")t!=null&&(a=Math.min(...t));else if(Q(s))a=s;else if(typeof s=="function")try{t!=null&&(a=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&Tj.test(s)){var c=Tj.exec(s);if(c==null||c[1]==null||t==null)a=void 0;else{var u=+c[1];a=t[0]-u}}else a=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Q(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&Ij.test(i)){var d=Ij.exec(i);if(d==null||d[1]==null||t==null)l=void 0;else{var h=+d[1];l=t[1]+h}}else l=t==null?void 0:t[1];var f=[a,l];if(mi(f))return t==null?f:dS(f,t,r)}}}var Yo=1e9,uK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Mb,Ke=!0,un="[DecimalError] ",Yi=un+"Invalid argument: ",Rb=un+"Exponent out of range: ",Xo=Math.floor,Pi=Math.pow,dK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr,At=1e7,We=7,RI=9007199254740991,hf=Xo(RI/We),Y={};Y.absoluteValue=Y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Y.comparedTo=Y.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Y.decimalPlaces=Y.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*We;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Y.dividedBy=Y.div=function(e){return ls(this,new this.constructor(e))};Y.dividedToIntegerBy=Y.idiv=function(e){var t=this,r=t.constructor;return Oe(ls(t,new r(e),0,1),r.precision)};Y.equals=Y.eq=function(e){return!this.cmp(e)};Y.exponent=function(){return ft(this)};Y.greaterThan=Y.gt=function(e){return this.cmp(e)>0};Y.greaterThanOrEqualTo=Y.gte=function(e){return this.cmp(e)>=0};Y.isInteger=Y.isint=function(){return this.e>this.d.length-2};Y.isNegative=Y.isneg=function(){return this.s<0};Y.isPositive=Y.ispos=function(){return this.s>0};Y.isZero=function(){return this.s===0};Y.lessThan=Y.lt=function(e){return this.cmp(e)<0};Y.lessThanOrEqualTo=Y.lte=function(e){return this.cmp(e)<1};Y.logarithm=Y.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Mr))throw Error(un+"NaN");if(r.s<1)throw Error(un+(r.s?"NaN":"-Infinity"));return r.eq(Mr)?new n(0):(Ke=!1,t=ls(Bc(r,i),Bc(e,i),i),Ke=!0,Oe(t,s))};Y.minus=Y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$I(t,e):MI(t,(e.s=-e.s,e))};Y.modulo=Y.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(un+"NaN");return r.s?(Ke=!1,t=ls(r,e,0,1).times(e),Ke=!0,r.minus(t)):Oe(new n(r),s)};Y.naturalExponential=Y.exp=function(){return LI(this)};Y.naturalLogarithm=Y.ln=function(){return Bc(this)};Y.negated=Y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Y.plus=Y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MI(t,e):$I(t,(e.s=-e.s,e))};Y.precision=Y.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Yi+e);if(t=ft(s)+1,n=s.d.length-1,r=n*We+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Y.squareRoot=Y.sqrt=function(){var e,t,r,n,s,i,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(un+"NaN")}for(e=ft(l),Ke=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Un(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Xo((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=a=r+3;;)if(i=n,n=i.plus(ls(l,i,a+2)).times(.5),Un(i.d).slice(0,a)===(t=Un(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),s==a&&t=="4999"){if(Oe(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;a+=4}return Ke=!0,Oe(n,r)};Y.times=Y.mul=function(e){var t,r,n,s,i,a,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,c=f.length,u=m.length,c<u&&(i=f,f=m,m=i,a=c,c=u,u=a),i=[],a=c+u,n=a;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+m[n]*f[s-n-1]+t,i[s--]=l%At|0,t=l/At|0;i[s]=(i[s]+t)%At|0}for(;!i[--a];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ke?Oe(e,h.precision):e};Y.toDecimalPlaces=Y.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Gn(e,0,Yo),t===void 0?t=n.rounding:Gn(t,0,8),Oe(r,e+ft(r)+1,t))};Y.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ca(n,!0):(Gn(e,0,Yo),t===void 0?t=s.rounding:Gn(t,0,8),n=Oe(new s(n),e+1,t),r=ca(n,!0,e+1)),r};Y.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?ca(s):(Gn(e,0,Yo),t===void 0?t=i.rounding:Gn(t,0,8),n=Oe(new i(s),e+ft(s)+1,t),r=ca(n.abs(),!1,e+ft(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Y.toInteger=Y.toint=function(){var e=this,t=e.constructor;return Oe(new t(e),ft(e)+1,t.rounding)};Y.toNumber=function(){return+this};Y.toPower=Y.pow=function(e){var t,r,n,s,i,a,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Mr);if(l=new c(l),!l.s){if(e.s<1)throw Error(un+"Infinity");return l}if(l.eq(Mr))return l;if(n=c.precision,e.eq(Mr))return Oe(l,n);if(t=e.e,r=e.d.length-1,a=t>=r,i=l.s,a){if((r=d<0?-d:d)<=RI){for(s=new c(Mr),t=Math.ceil(n/We+4),Ke=!1;r%2&&(s=s.times(l),fS(s.d,t)),r=Xo(r/2),r!==0;)l=l.times(l),fS(l.d,t);return Ke=!0,e.s<0?new c(Mr).div(s):Oe(s,n)}}else if(i<0)throw Error(un+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ke=!1,s=e.times(Bc(l,n+u)),Ke=!0,s=LI(s),s.s=i,s};Y.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ft(s),n=ca(s,r<=i.toExpNeg||r>=i.toExpPos)):(Gn(e,1,Yo),t===void 0?t=i.rounding:Gn(t,0,8),s=Oe(new i(s),e,t),r=ft(s),n=ca(s,e<=r||r<=i.toExpNeg,e)),n};Y.toSignificantDigits=Y.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Gn(e,1,Yo),t===void 0?t=n.rounding:Gn(t,0,8)),Oe(new n(r),e,t)};Y.toString=Y.valueOf=Y.val=Y.toJSON=Y[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ft(e),r=e.constructor;return ca(e,t<=r.toExpNeg||t>=r.toExpPos)};function MI(e,t){var r,n,s,i,a,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ke?Oe(t,h):t;if(c=e.d,u=t.d,a=e.e,s=t.e,c=c.slice(),i=a-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=a,l=c.length),a=Math.ceil(h/We),l=a>l?a+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/At|0,c[i]%=At;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Ke?Oe(t,h):t}function Gn(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Yi+e)}function Un(e){var t,r,n,s=e.length-1,i="",a=e[0];if(s>0){for(i+=a,t=1;t<s;t++)n=e[t]+"",r=We-n.length,r&&(i+=Bs(r)),i+=n;a=e[t],n=a+"",r=We-n.length,r&&(i+=Bs(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}var ls=function(){function e(n,s){var i,a=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+a,n[l]=i%At|0,a=i/At|0;return a&&n.unshift(a),n}function t(n,s,i,a){var l,c;if(i!=a)c=i>a?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var a=0;i--;)n[i]-=a,a=n[i]<s[i]?1:0,n[i]=a*At+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,a){var l,c,u,d,h,f,m,g,y,p,v,b,w,_,j,N,k,T,P=n.constructor,C=n.s==s.s?1:-1,A=n.d,S=s.d;if(!n.s)return new P(n);if(!s.s)throw Error(un+"Division by zero");for(c=n.e-s.e,k=S.length,j=A.length,m=new P(C),g=m.d=[],u=0;S[u]==(A[u]||0);)++u;if(S[u]>(A[u]||0)&&--c,i==null?b=i=P.precision:a?b=i+(ft(n)-ft(s))+1:b=i,b<0)return new P(0);if(b=b/We+2|0,u=0,k==1)for(d=0,S=S[0],b++;(u<j||d)&&b--;u++)w=d*At+(A[u]||0),g[u]=w/S|0,d=w%S|0;else{for(d=At/(S[0]+1)|0,d>1&&(S=e(S,d),A=e(A,d),k=S.length,j=A.length),_=k,y=A.slice(0,k),p=y.length;p<k;)y[p++]=0;T=S.slice(),T.unshift(0),N=S[0],S[1]>=At/2&&++N;do d=0,l=t(S,y,k,p),l<0?(v=y[0],k!=p&&(v=v*At+(y[1]||0)),d=v/N|0,d>1?(d>=At&&(d=At-1),h=e(S,d),f=h.length,p=y.length,l=t(h,y,f,p),l==1&&(d--,r(h,k<f?T:S,f))):(d==0&&(l=d=1),h=S.slice()),f=h.length,f<p&&h.unshift(0),r(y,h,p),l==-1&&(p=y.length,l=t(S,y,k,p),l<1&&(d++,r(y,k<p?T:S,p))),p=y.length):l===0&&(d++,y=[0]),g[u++]=d,l&&y[0]?y[p++]=A[_]||0:(y=[A[_]],p=1);while((_++<j||y[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,Oe(m,a?i+ft(m)+1:i)}}();function LI(e,t){var r,n,s,i,a,l,c=0,u=0,d=e.constructor,h=d.precision;if(ft(e)>16)throw Error(Rb+ft(e));if(!e.s)return new d(Mr);for(Ke=!1,l=h,a=new d(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(n=Math.log(Pi(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(Mr),d.precision=l;;){if(s=Oe(s.times(e),l),r=r.times(++c),a=i.plus(ls(s,r,l)),Un(a.d).slice(0,l)===Un(i.d).slice(0,l)){for(;u--;)i=Oe(i.times(i),l);return d.precision=h,t==null?(Ke=!0,Oe(i,h)):i}i=a}}function ft(e){for(var t=e.e*We,r=e.d[0];r>=10;r/=10)t++;return t}function fg(e,t,r){if(t>e.LN10.sd())throw Ke=!0,r&&(e.precision=r),Error(un+"LN10 precision limit exceeded");return Oe(new e(e.LN10),t)}function Bs(e){for(var t="";e--;)t+="0";return t}function Bc(e,t){var r,n,s,i,a,l,c,u,d,h=1,f=10,m=e,g=m.d,y=m.constructor,p=y.precision;if(m.s<1)throw Error(un+(m.s?"NaN":"-Infinity"));if(m.eq(Mr))return new y(0);if(t==null?(Ke=!1,u=p):u=t,m.eq(10))return t==null&&(Ke=!0),fg(y,u);if(u+=f,y.precision=u,r=Un(g),n=r.charAt(0),i=ft(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Un(m.d),n=r.charAt(0),h++;i=ft(m),n>1?(m=new y("0."+r),i++):m=new y(n+"."+r.slice(1))}else return c=fg(y,u+2,p).times(i+""),m=Bc(new y(n+"."+r.slice(1)),u-f).plus(c),y.precision=p,t==null?(Ke=!0,Oe(m,p)):m;for(l=a=m=ls(m.minus(Mr),m.plus(Mr),u),d=Oe(m.times(m),u),s=3;;){if(a=Oe(a.times(d),u),c=l.plus(ls(a,new y(s),u)),Un(c.d).slice(0,u)===Un(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(fg(y,u+2,p).times(i+""))),l=ls(l,new y(h),u),y.precision=p,t==null?(Ke=!0,Oe(l,p)):l;l=c,s+=2}}function hS(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Xo(r/We),e.d=[],n=(r+1)%We,r<0&&(n+=We),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=We;n<s;)e.d.push(+t.slice(n,n+=We));t=t.slice(n),n=We-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ke&&(e.e>hf||e.e<-hf))throw Error(Rb+r)}else e.s=0,e.e=0,e.d=[0];return e}function Oe(e,t,r){var n,s,i,a,l,c,u,d,h=e.d;for(a=1,i=h[0];i>=10;i/=10)a++;if(n=t-a,n<0)n+=We,s=t,u=h[d=0];else{if(d=Math.ceil((n+1)/We),i=h.length,d>=i)return e;for(u=i=h[d],a=1;i>=10;i/=10)a++;n%=We,s=n-We+a}if(r!==void 0&&(i=Pi(10,a-s-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/Pi(10,a-s):0:h[d-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=ft(e),h.length=1,t=t-i-1,h[0]=Pi(10,(We-t%We)%We),e.e=Xo(-t/We)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=d,i=1,d--):(h.length=d+1,i=Pi(10,We-n),h[d]=s>0?(u/Pi(10,a-s)%Pi(10,s)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==At&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=At)break;h[d--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Ke&&(e.e>hf||e.e<-hf))throw Error(Rb+ft(e));return e}function $I(e,t){var r,n,s,i,a,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Ke?Oe(t,m):t;if(c=e.d,h=t.d,n=t.e,u=e.e,c=c.slice(),a=u-n,a){for(d=a<0,d?(r=c,a=-a,l=h.length):(r=h,n=u,l=c.length),s=Math.max(Math.ceil(m/We),l)+2,a>s&&(a=s,r.length=1),r.reverse(),s=a;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}a=0}for(d&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>a;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=At-1;--c[i],c[s]+=At}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ke?Oe(t,m):t):new f(0)}function ca(e,t,r){var n,s=ft(e),i=Un(e.d),a=i.length;return t?(r&&(n=r-a)>0?i=i.charAt(0)+"."+i.slice(1)+Bs(n):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Bs(-s-1)+i,r&&(n=r-a)>0&&(i+=Bs(n))):s>=a?(i+=Bs(s+1-a),r&&(n=r-s-1)>0&&(i=i+"."+Bs(n))):((n=s+1)<a&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-a)>0&&(s+1===a&&(i+="."),i+=Bs(n))),e.s<0?"-"+i:i}function fS(e,t){if(e.length>t)return e.length=t,!0}function UI(e){var t,r,n;function s(i){var a=this;if(!(a instanceof s))return new s(i);if(a.constructor=s,i instanceof s){a.s=i.s,a.e=i.e,a.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Yi+i);if(i>0)a.s=1;else if(i<0)i=-i,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(i===~~i&&i<1e7){a.e=0,a.d=[i];return}return hS(a,i.toString())}else if(typeof i!="string")throw Error(Yi+i);if(i.charCodeAt(0)===45?(i=i.slice(1),a.s=-1):a.s=1,dK.test(i))hS(a,i);else throw Error(Yi+i)}if(s.prototype=Y,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=UI,s.config=s.set=hK,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function hK(e){if(!e||typeof e!="object")throw Error(un+"Object expected");var t,r,n,s=["precision",1,Yo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Xo(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Yi+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Yi+r+": "+n);return this}var Mb=UI(uK);Mr=new Mb(1);const Se=Mb;var fK=e=>e,FI={},BI=e=>e===FI,mS=e=>function t(){return arguments.length===0||arguments.length===1&&BI(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},zI=(e,t)=>e===1?t:mS(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(a=>a!==FI).length;return i>=e?t(...n):zI(e-i,mS(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=n.map(d=>BI(d)?l.shift():d);return t(...u,...l)}))}),mK=e=>zI(e.length,e),Ay=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},pK=mK((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),gK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return fK;var s=r.reverse(),i=s[0],a=s.slice(1);return function(){return a.reduce((l,c)=>c(l),i(...arguments))}};function WI(e){var t;return e===0?t=1:t=Math.floor(new Se(e).abs().log(10).toNumber())+1,t}function HI(e,t,r){for(var n=new Se(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var qI=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},VI=(e,t,r)=>{if(e.lte(0))return new Se(0);var n=WI(e.toNumber()),s=new Se(10).pow(n),i=e.div(s),a=n!==1?.05:.1,l=new Se(Math.ceil(i.div(a).toNumber())).add(r).mul(a),c=l.mul(s);return t?new Se(c.toNumber()):new Se(Math.ceil(c.toNumber()))},vK=(e,t,r)=>{var n=new Se(1),s=new Se(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Se(10).pow(WI(e)-1),s=new Se(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Se(Math.floor(e)))}else e===0?s=new Se(Math.floor((t-1)/2)):r||(s=new Se(Math.floor(e)));var a=Math.floor((t-1)/2),l=gK(pK(c=>s.add(new Se(c-a).mul(n)).toNumber()),Ay);return l(0,t)},GI=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Se(0),tickMin:new Se(0),tickMax:new Se(0)};var a=VI(new Se(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new Se(0):(l=new Se(t).add(r).div(2),l=l.sub(new Se(l).mod(a)));var c=Math.ceil(l.sub(t).div(a).toNumber()),u=Math.ceil(new Se(r).sub(l).div(a).toNumber()),d=c+u+1;return d>n?GI(t,r,n,s,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:a,tickMin:l.sub(new Se(c).mul(a)),tickMax:l.add(new Se(u).mul(a))})},yK=function(t){var[r,n]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(s,2),[l,c]=qI([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...Ay(0,s-1).map(()=>1/0)]:[...Ay(0,s-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return vK(l,s,i);var{step:d,tickMin:h,tickMax:f}=GI(l,c,a,i,0),m=HI(h,f.add(new Se(.1).mul(d)),d);return r>n?m.reverse():m},xK=function(t,r){var[n,s]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=qI([n,s]);if(a===-1/0||l===1/0)return[n,s];if(a===l)return[a];var c=Math.max(r,2),u=VI(new Se(l).sub(a).div(c-1),i,0),d=[...HI(new Se(a),new Se(l),u),l];return i===!1&&(d=d.map(h=>Math.round(h))),n>s?d.reverse():d},KI=e=>e.rootProps.maxBarSize,bK=e=>e.rootProps.barGap,YI=e=>e.rootProps.barCategoryGap,wK=e=>e.rootProps.barSize,Rm=e=>e.rootProps.stackOffset,XI=e=>e.rootProps.reverseStackOrder,Lb=e=>e.options.chartName,$b=e=>e.rootProps.syncId,JI=e=>e.rootProps.syncMethod,Ub=e=>e.options.eventEmitter,lr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Zn={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ir={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Mm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},_K={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zn.angleAxisId,includeHidden:!1,name:void 0,reversed:Zn.reversed,scale:Zn.scale,tick:Zn.tick,tickCount:void 0,ticks:void 0,type:Zn.type,unit:void 0},jK={allowDataOverflow:Ir.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ir.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ir.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ir.scale,tick:Ir.tick,tickCount:Ir.tickCount,ticks:void 0,type:Ir.type,unit:void 0},NK={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zn.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zn.scale,tick:Zn.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},SK={allowDataOverflow:Ir.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ir.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ir.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ir.scale,tick:Ir.tick,tickCount:Ir.tickCount,ticks:void 0,type:"category",unit:void 0},Fb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?NK:_K,Bb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?SK:jK,Lm=e=>e.polarOptions,zb=U([As,Ps,Rt],jq),QI=U([Lm,zb],(e,t)=>{if(e!=null)return On(e.innerRadius,t,0)}),ZI=U([Lm,zb],(e,t)=>{if(e!=null)return On(e.outerRadius,t,t*.8)}),EK=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},e4=U([Lm],EK);U([Fb,e4],Mm);var t4=U([zb,QI,ZI],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});U([Bb,t4],Mm);var r4=U([Ce,Lm,QI,ZI,As,Ps],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:a,cy:l,startAngle:c,endAngle:u}=t;return{cx:On(a,s,s/2),cy:On(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),jt=(e,t)=>t,$m=(e,t,r)=>r;function Wb(e){return e==null?void 0:e.id}function n4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,a=new Map;return e.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=Wb(l);u.forEach((h,f)=>{var m=i==null||s?f:String(Ht(h,i,null)),g=Ht(h,l.dataKey,0),y;a.has(m)?y=a.get(m):y={},Object.assign(y,{[d]:g}),a.set(m,y)})}}),Array.from(a.values())}function Um(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Fm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Bm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function CK(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Nt=e=>{var t=Ce(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Jo=e=>e.tooltip.settings.axisId;function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ff(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(n){kK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kK(e,t,r){return(t=AK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AK(e){var t=PK(e,"string");return typeof t=="symbol"?t:t+""}function PK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Py=[0,"auto"],Et={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},s4=(e,t)=>e.cartesianAxis.xAxis[t],Is=(e,t)=>{var r=s4(e,t);return r??Et},Ct={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Py,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:cu},i4=(e,t)=>e.cartesianAxis.yAxis[t],Ds=(e,t)=>{var r=i4(e,t);return r??Ct},OK={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Hb=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??OK},pr=(e,t,r)=>{switch(t){case"xAxis":return Is(e,r);case"yAxis":return Ds(e,r);case"zAxis":return Hb(e,r);case"angleAxis":return Fb(e,r);case"radiusAxis":return Bb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},TK=(e,t,r)=>{switch(t){case"xAxis":return Is(e,r);case"yAxis":return Ds(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},gu=(e,t,r)=>{switch(t){case"xAxis":return Is(e,r);case"yAxis":return Ds(e,r);case"angleAxis":return Fb(e,r);case"radiusAxis":return Bb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},a4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function o4(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var qb=e=>e.graphicalItems.cartesianItems,IK=U([jt,$m],o4),l4=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),vu=U([qb,pr,IK],l4,{memoizeOptions:{resultEqualityCheck:Bm}}),c4=U([vu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Um)),u4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),DK=U([vu],u4),d4=e=>e.map(t=>t.data).filter(Boolean).flat(1),RK=U([vu],d4,{memoizeOptions:{resultEqualityCheck:Bm}}),h4=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Vb=U([RK,II],h4),f4=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ht(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ht(s,n)}))):e.map(n=>({value:n})),zm=U([Vb,pr,vu],f4);function m4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Md(e){if(qn(e)||e instanceof Date){var t=Number(e);if(et(t))return t}}function gS(e){if(Array.isArray(e)){var t=[Md(e[0]),Md(e[1])];return mi(t)?t:void 0}var r=Md(e);if(r!=null)return[r,r]}function js(e){return e.map(Md).filter(oz)}function MK(e,t,r){return!r||typeof t!="number"||Pn(t)?[]:r.length?js(r.flatMap(n=>{var s=Ht(e,n.dataKey),i,a;if(Array.isArray(s)?[i,a]=s:i=a=s,!(!et(i)||!et(a)))return[t-i,t+a]})):[]}var St=e=>{var t=Nt(e),r=Jo(e);return gu(e,t,r)},yu=U([St],e=>e==null?void 0:e.dataKey),LK=U([c4,II,St],n4),p4=(e,t,r,n)=>{var s={},i=t.reduce((a,l)=>{if(l.stackId==null)return a;var c=a[l.stackId];return c==null&&(c=[]),c.push(l),a[l.stackId]=c,a},s);return Object.fromEntries(Object.entries(i).map(a=>{var[l,c]=a,u=n?[...c].reverse():c,d=u.map(Wb);return[l,{stackedData:vW(e,d,r),graphicalItems:u}]}))},Oy=U([LK,c4,Rm,XI],p4),g4=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var a=_W(e,s,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},$K=U([pr],e=>e.allowDataOverflow),Gb=e=>{var t;if(e==null||!("domain"in e))return Py;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=js(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Py},v4=U([pr],Gb),y4=U([v4,$K],DI),UK=U([Oy,Ts,jt,y4],g4,{memoizeOptions:{resultEqualityCheck:Fm}}),Kb=e=>e.errorBars,FK=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>m4(r,n)),mf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),a=Math.min(...i),l=Math.max(...i);return[a,l]}},x4=(e,t,r,n,s)=>{var i,a;if(r.length>0&&e.forEach(l=>{r.forEach(c=>{var u,d,h=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>m4(s,v)),f=Ht(l,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),m=MK(l,f,h);if(m.length>=2){var g=Math.min(...m),y=Math.max(...m);(i==null||g<i)&&(i=g),(a==null||y>a)&&(a=y)}var p=gS(f);p!=null&&(i=i==null?p[0]:Math.min(i,p[0]),a=a==null?p[1]:Math.max(a,p[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=gS(Ht(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),a=a==null?c[1]:Math.max(a,c[1]))}),et(i)&&et(a))return[i,a]},BK=U([Vb,pr,DK,Kb,jt],x4,{memoizeOptions:{resultEqualityCheck:Fm}});function zK(e){var{value:t}=e;if(qn(t)||t instanceof Date)return t}var WK=(e,t,r)=>{var n=e.map(zK).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&cO(n))?JT(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},b4=e=>e.referenceElements.dots,Qo=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),HK=U([b4,jt,$m],Qo),w4=e=>e.referenceElements.areas,qK=U([w4,jt,$m],Qo),_4=e=>e.referenceElements.lines,VK=U([_4,jt,$m],Qo),j4=(e,t)=>{if(e!=null){var r=js(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},GK=U(HK,jt,j4),N4=(e,t)=>{if(e!=null){var r=js(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},KK=U([qK,jt],N4);function YK(e){var t;if(e.x!=null)return js([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:js(r)}function XK(e){var t;if(e.y!=null)return js([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:js(r)}var S4=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?YK(n):XK(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},JK=U([VK,jt],S4),QK=U(GK,JK,KK,(e,t,r)=>mf(e,r,t)),E4=(e,t,r,n,s,i,a,l)=>{if(r!=null)return r;var c=a==="vertical"&&l==="xAxis"||a==="horizontal"&&l==="yAxis",u=c?mf(n,i,s):mf(i,s);return cK(t,u,e.allowDataOverflow)},ZK=U([pr,v4,y4,UK,BK,QK,Ce,jt],E4,{memoizeOptions:{resultEqualityCheck:Fm}}),eY=[0,1],C4=(e,t,r,n,s,i,a)=>{if(!((e==null||r==null||r.length===0)&&a===void 0)){var{dataKey:l,type:c}=e,u=ga(t,i);if(u&&l==null){var d;return JT(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?WK(n,e,u):s==="expand"?eY:a}},Yb=U([pr,Ce,Vb,zm,Rm,jt,ZK],C4),k4=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:a}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":a==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(su(i));return l in Al?l:"point"}}},xu=U([pr,Ce,a4,Lb,jt],k4);function tY(e){if(e!=null){if(e in Al)return Al[e]();var t="scale".concat(su(e));if(t in Al)return Al[t]()}}function Xb(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=tY(t);if(s!=null){var i=s.domain(r).range(n);return hW(i),i}}}var A4=(e,t,r)=>{var n=Gb(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&mi(e))return yK(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&mi(e))return xK(e,t.tickCount,t.allowDecimals)}},Jb=U([Yb,gu,xu],A4),P4=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&mi(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],a=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(a,l)]}return t},rY=U([pr,Yb,Jb,jt],P4),nY=U(zm,pr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(js(e.map(h=>h.value))).sort((h,f)=>h-f),s=n[0],i=n[n.length-1];if(s==null||i==null)return 1/0;var a=i-s;if(a===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/a}}),O4=U(nY,Ce,YI,Rt,(e,t,r,n,s)=>s,(e,t,r,n,s)=>{if(!et(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var a=On(r,e*i),l=e*i/2;return l-a-(l-a)/i*a}return 0}),sY=(e,t,r)=>{var n=Is(e,t);return n==null||typeof n.padding!="string"?0:O4(e,"xAxis",t,r,n.padding)},iY=(e,t,r)=>{var n=Ds(e,t);return n==null||typeof n.padding!="string"?0:O4(e,"yAxis",t,r,n.padding)},aY=U(Is,sY,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),oY=U(Ds,iY,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),lY=U([Rt,aY,_m,wm,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),cY=U([Rt,Ce,oY,_m,wm,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:a}=s;return i?[n.height-a.bottom,a.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),bu=(e,t,r,n)=>{var s;switch(t){case"xAxis":return lY(e,r,n);case"yAxis":return cY(e,r,n);case"zAxis":return(s=Hb(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return e4(e);case"radiusAxis":return t4(e,r);default:return}},T4=U([pr,bu],Mm),Wm=U([pr,xu,rY,T4],Xb);U([vu,Kb,jt],FK);function I4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Hm=(e,t)=>t,qm=(e,t,r)=>r,uY=U(xm,Hm,qm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(I4)),dY=U(bm,Hm,qm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(I4)),D4=(e,t)=>({width:e.width,height:t.height}),hY=(e,t)=>{var r=typeof t.width=="number"?t.width:cu;return{width:r,height:e.height}},R4=U(Rt,Is,D4),fY=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},mY=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},pY=U(Ps,Rt,uY,Hm,qm,(e,t,r,n,s)=>{var i={},a;return r.forEach(l=>{var c=D4(t,l);a==null&&(a=fY(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=a-Number(u)*c.height,a+=(u?-1:1)*c.height}),i}),gY=U(As,Rt,dY,Hm,qm,(e,t,r,n,s)=>{var i={},a;return r.forEach(l=>{var c=hY(t,l);a==null&&(a=mY(t,n,e));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=a-Number(u)*c.width,a+=(u?-1:1)*c.width}),i}),vY=(e,t)=>{var r=Is(e,t);if(r!=null)return pY(e,r.orientation,r.mirror)},yY=U([Rt,Is,vY,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),xY=(e,t)=>{var r=Ds(e,t);if(r!=null)return gY(e,r.orientation,r.mirror)},bY=U([Rt,Ds,xY,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),M4=U(Rt,Ds,(e,t)=>{var r=typeof t.width=="number"?t.width:cu;return{width:r,height:e.height}}),vS=(e,t,r)=>{switch(t){case"xAxis":return R4(e,r).width;case"yAxis":return M4(e,r).height;default:return}},L4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:a}=r,l=ga(e,n),c=t.map(u=>u.value);if(a&&l&&i==="category"&&s&&cO(c))return c}},Qb=U([Ce,zm,pr,jt],L4),$4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,a=ga(e,n);if(a&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},Zb=U([Ce,zm,gu,jt],$4),yS=U([Ce,TK,xu,Wm,Qb,Zb,bu,Jb,jt],(e,t,r,n,s,i,a,l,c)=>{if(t!=null){var u=ga(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:a,realScaleType:r,scale:n}}}),wY=(e,t,r,n,s,i,a,l,c)=>{if(!(t==null||n==null)){var u=ga(e,c),{type:d,ticks:h,tickCount:f}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&i!=null&&i.length>=2?br(i[0]-i[1])*2*g:g;var y=h||s;if(y){var p=y.map((v,b)=>{var w=a?a.indexOf(v):v;return{index:b,coordinate:n(w)+g,value:v,offset:g}});return p.filter(v=>et(v.coordinate))}return u&&l?l.map((v,b)=>({coordinate:n(v)+g,value:v,index:b,offset:g})).filter(v=>et(v.coordinate)):n.ticks?n.ticks(f).map(v=>({coordinate:n(v)+g,value:v,offset:g})):n.domain().map((v,b)=>({coordinate:n(v)+g,value:a?a[v]:v,index:b,offset:g}))}},U4=U([Ce,gu,xu,Wm,Jb,bu,Qb,Zb,jt],wY),_Y=(e,t,r,n,s,i,a)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=ga(e,a),{tickCount:c}=t,u=0;return u=a==="angleAxis"&&(n==null?void 0:n.length)>=2?br(n[0]-n[1])*2*u:u,l&&i?i.map((d,h)=>({coordinate:r(d)+u,value:d,index:h,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,h)=>({coordinate:r(d)+u,value:s?s[d]:d,index:h,offset:u}))}},Oo=U([Ce,gu,Wm,bu,Qb,Zb,jt],_Y),To=U(pr,Wm,(e,t)=>{if(!(e==null||t==null))return ff(ff({},e),{},{scale:t})}),jY=U([pr,xu,Yb,T4],Xb);U((e,t,r)=>Hb(e,r),jY,(e,t)=>{if(!(e==null||t==null))return ff(ff({},e),{},{scale:t})});var NY=U([Ce,xm,bm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),F4=e=>e.options.defaultTooltipEventType,B4=e=>e.options.validateTooltipEventTypes;function z4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function ew(e,t){var r=F4(e),n=B4(e);return z4(t,r,n)}function SY(e){return ae(t=>ew(t,e))}var W4=(e,t)=>{var r,n=Number(t);if(!(Pn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},EY=e=>e.tooltip.settings,Vs={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},CY={itemInteraction:{click:Vs,hover:Vs},axisInteraction:{click:Vs,hover:Vs},keyboardInteraction:Vs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},H4=Ar({name:"tooltip",initialState:CY,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ve()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,s=kn(e).tooltipItemPayloads.indexOf(r);s>-1&&(e.tooltipItemPayloads[s]=n)},prepare:Ve()},removeTooltipEntrySettings:{reducer(e,t){var r=kn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Ve()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:kY,replaceTooltipEntrySettings:AY,removeTooltipEntrySettings:PY,setTooltipSettingsState:OY,setActiveMouseOverItemIndex:q4,mouseLeaveItem:TY,mouseLeaveChart:V4,setActiveClickItemIndex:IY,setMouseOverAxisIndex:G4,setMouseClickAxisIndex:DY,setSyncInteraction:Ty,setKeyboardInteraction:Iy}=H4.actions,RY=H4.reducer;function xS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xS(Object(r),!0).forEach(function(n){MY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MY(e,t,r){return(t=LY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LY(e){var t=$Y(e,"string");return typeof t=="symbol"?t:t+""}function $Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UY(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function FY(e){return e.index!=null}var K4=(e,t,r,n)=>{if(t==null)return Vs;var s=UY(e,t,r);if(s==null)return Vs;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(FY(s)){if(i)return gd(gd({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return gd(gd({},Vs),{},{coordinate:s.coordinate})};function BY(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function zY(e,t){var r=BY(e),n=t[0],s=t[1];if(r===void 0)return!1;var i=Math.min(n,s),a=Math.max(n,s);return r>=i&&r<=a}function WY(e,t,r){if(r==null||t==null)return!0;var n=Ht(e,t);return n==null||!mi(r)?!0:zY(n,r)}var tw=(e,t,r,n)=>{var s=e==null?void 0:e.index;if(s==null)return null;var i=Number(s);if(!et(i))return s;var a=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(a,Math.min(i,l)),u=t[c];return u==null||WY(u,r,n)?String(c):null},Y4=(e,t,r,n,s,i,a,l)=>{if(!(i==null||l==null)){var c=a[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},X4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;if(r==="hover"?s=e.itemInteraction.hover.graphicalItemId:s=e.itemInteraction.click.graphicalItemId,s==null&&n!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.graphicalItemId)===s})},wu=e=>e.options.tooltipPayloadSearcher,Zo=e=>e.tooltip;function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(n){HY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HY(e,t,r){return(t=qY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GY(e,t){return e??t}var J4=(e,t,r,n,s,i,a)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,h=[];return e.reduce((f,m)=>{var g,{dataDefinedOnItem:y,settings:p}=m,v=GY(y,l),b=Array.isArray(v)?gT(v,u,d):v,w=(g=p==null?void 0:p.dataKey)!==null&&g!==void 0?g:n,_=p==null?void 0:p.nameKey,j;if(n&&Array.isArray(b)&&!Array.isArray(b[0])&&a==="axis"?j=az(b,n,s):j=i(b,t,c,_),Array.isArray(j))j.forEach(k=>{var T=wS(wS({},p),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});f.push(Dj({tooltipEntrySettings:T,dataKey:k.dataKey,payload:k.payload,value:Ht(k.payload,k.dataKey),name:k.name}))});else{var N;f.push(Dj({tooltipEntrySettings:p,dataKey:w,payload:j,value:Ht(j,w),name:(N=Ht(j,_))!==null&&N!==void 0?N:p==null?void 0:p.name}))}return f},h)}},rw=U([St,Ce,a4,Lb,Nt],k4),KY=U([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),YY=U([Nt,Jo],o4),el=U([KY,St,YY],l4,{memoizeOptions:{resultEqualityCheck:Bm}}),XY=U([el],e=>e.filter(Um)),JY=U([el],d4,{memoizeOptions:{resultEqualityCheck:Bm}}),tl=U([JY,Ts],h4),QY=U([XY,Ts,St],n4),nw=U([tl,St,el],f4),Q4=U([St],Gb),ZY=U([St],e=>e.allowDataOverflow),Z4=U([Q4,ZY],DI),eX=U([el],e=>e.filter(Um)),tX=U([QY,eX,Rm,XI],p4),rX=U([tX,Ts,Nt,Z4],g4),nX=U([el],u4),sX=U([tl,St,nX,Kb,Nt],x4,{memoizeOptions:{resultEqualityCheck:Fm}}),iX=U([b4,Nt,Jo],Qo),aX=U([iX,Nt],j4),oX=U([w4,Nt,Jo],Qo),lX=U([oX,Nt],N4),cX=U([_4,Nt,Jo],Qo),uX=U([cX,Nt],S4),dX=U([aX,uX,lX],mf),hX=U([St,Q4,Z4,rX,sX,dX,Ce,Nt],E4),_u=U([St,Ce,tl,nw,Rm,Nt,hX],C4),fX=U([_u,St,rw],A4),mX=U([St,_u,fX,Nt],P4),eD=e=>{var t=Nt(e),r=Jo(e),n=!1;return bu(e,t,r,n)},tD=U([St,eD],Mm),rD=U([St,rw,mX,tD],Xb),pX=U([Ce,nw,St,Nt],L4),gX=U([Ce,nw,St,Nt],$4),vX=(e,t,r,n,s,i,a,l)=>{if(t){var{type:c}=t,u=ga(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return h=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?br(s[0]-s[1])*2*h:h,u&&a?a.map((f,m)=>({coordinate:n(f)+h,value:f,index:m,offset:h})):n.domain().map((f,m)=>({coordinate:n(f)+h,value:i?i[f]:f,index:m,offset:h}))}}},Rs=U([Ce,St,rw,rD,eD,pX,gX,Nt],vX),sw=U([F4,B4,EY],(e,t,r)=>z4(r.shared,e,t)),nD=e=>e.tooltip.settings.trigger,iw=e=>e.tooltip.settings.defaultIndex,ju=U([Zo,sw,nD,iw],K4),Io=U([ju,tl,yu,_u],tw),sD=U([Rs,Io],W4),iD=U([ju],e=>{if(e)return e.dataKey});U([ju],e=>{if(e)return e.graphicalItemId});var aD=U([Zo,sw,nD,iw],X4),yX=U([As,Ps,Ce,Rt,Rs,iw,aD,wu],Y4),xX=U([ju,yX],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),bX=U([ju],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),wX=U([aD,Io,Ts,yu,sD,wu,sw],J4);U([wX],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function _S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_S(Object(r),!0).forEach(function(n){_X(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _X(e,t,r){return(t=jX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jX(e){var t=NX(e,"string");return typeof t=="symbol"?t:t+""}function NX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SX=()=>ae(St),EX=()=>{var e=SX(),t=ae(Rs),r=ae(rD);return Vh(!e||!r?void 0:jS(jS({},e),{},{scale:r}),t)};function NS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(r),!0).forEach(function(n){CX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CX(e,t,r){return(t=kX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=AX(e,"string");return typeof t=="symbol"?t:t+""}function AX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PX=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},OX=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:a}=n;return Pa(Pa(Pa({},n),zt(n.cx,n.cy,a,i)),{},{angle:i,radius:a})}var l=s.coordinate,{angle:c}=n;return Pa(Pa(Pa({},n),zt(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function TX(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var oD=(e,t,r,n,s)=>{var i,a=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(a<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<a;l++){var c,u,d,h,f,m=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[a-1])===null||u===void 0?void 0:u.coordinate,g=(d=r[l])===null||d===void 0?void 0:d.coordinate,y=l>=a-1?(h=r[0])===null||h===void 0?void 0:h.coordinate:(f=r[l+1])===null||f===void 0?void 0:f.coordinate,p=void 0;if(!(m==null||g==null||y==null))if(br(g-m)!==br(y-g)){var v=[];if(br(y-g)===br(s[1]-s[0])){p=y;var b=g+s[1]-s[0];v[0]=Math.min(b,(b+m)/2),v[1]=Math.max(b,(b+m)/2)}else{p=m;var w=y+s[1]-s[0];v[0]=Math.min(g,(w+g)/2),v[1]=Math.max(g,(w+g)/2)}var _=[Math.min(g,(p+g)/2),Math.max(g,(p+g)/2)];if(e>_[0]&&e<=_[1]||e>=v[0]&&e<=v[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var N=Math.min(m,y),k=Math.max(m,y);if(e>(N+g)/2&&e<=(k+g)/2){var T;return(T=r[l])===null||T===void 0?void 0:T.index}}}else if(t)for(var P=0;P<a;P++){var C=t[P];if(C!=null){var A=t[P+1],S=t[P-1];if(P===0&&A!=null&&e<=(C.coordinate+A.coordinate)/2||P===a-1&&S!=null&&e>(C.coordinate+S.coordinate)/2||P>0&&P<a-1&&S!=null&&A!=null&&e>(C.coordinate+S.coordinate)/2&&e<=(C.coordinate+A.coordinate)/2)return C.index}}return-1},IX=()=>ae(Lb),aw=(e,t)=>t,lD=(e,t,r)=>r,ow=(e,t,r,n)=>n,DX=U(Rs,e=>um(e,t=>t.coordinate)),lw=U([Zo,aw,lD,ow],K4),cw=U([lw,tl,yu,_u],tw),RX=(e,t,r)=>{if(t!=null){var n=Zo(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},cD=U([Zo,aw,lD,ow],X4),pf=U([As,Ps,Ce,Rt,Rs,ow,cD,wu],Y4),MX=U([lw,pf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),uD=U([Rs,cw],W4),LX=U([cD,cw,Ts,yu,uD,wu,aw],J4),$X=U([lw,cw],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),UX=(e,t,r,n,s,i,a)=>{if(!(!e||!r||!n||!s)&&TX(e,a)){var l=jW(e,t),c=oD(l,i,s,r,n),u=PX(t,s,c,e);return{activeIndex:String(c),activeCoordinate:u}}},FX=(e,t,r,n,s,i,a)=>{if(!(!e||!n||!s||!i||!r)){var l=kq(e,r);if(l){var c=NW(l,t),u=oD(c,a,i,n,s),d=OX(t,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},BX=(e,t,r,n,s,i,a,l)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?UX(e,t,n,s,i,a,l):FX(e,t,r,n,s,i,a)},zX=U(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),WX=U(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(lr)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:CK}});function SS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ES(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(r),!0).forEach(function(n){HX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HX(e,t,r){return(t=qX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qX(e){var t=VX(e,"string");return typeof t=="symbol"?t:t+""}function VX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GX={},KX={zIndexMap:Object.values(lr).reduce((e,t)=>ES(ES({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),GX)},YX=new Set(Object.values(lr));function XX(e){return YX.has(e)}var dD=Ar({name:"zIndex",initialState:KX,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ve()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!XX(r)&&delete e.zIndexMap[r])},prepare:Ve()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:s?void 0:n,panoramaElement:s?n:void 0}},prepare:Ve()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Ve()}}}),{registerZIndexPortal:JX,unregisterZIndexPortal:QX,registerZIndexPortalElement:ZX,unregisterZIndexPortalElement:eJ}=dD.actions,tJ=dD.reducer;function Ms(e){var{zIndex:t,children:r}=e,n=ZW(),s=n&&t!==void 0&&t!==0,i=Pr(),a=lt();x.useLayoutEffect(()=>s?(a(JX({zIndex:t})),()=>{a(QX({zIndex:t}))}):iu,[a,t,s]);var l=ae(c=>zX(c,t,i));return s?l?$0.createPortal(r,l):null:r}function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dy.apply(null,arguments)}function CS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CS(Object(r),!0).forEach(function(n){rJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rJ(e,t,r){return(t=nJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nJ(e){var t=sJ(e,"string");return typeof t=="symbol"?t:t+""}function sJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iJ(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return x.isValidElement(t)?x.cloneElement(t,n):x.createElement(r,n)}function aJ(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:a,layout:l,cursor:c,tooltipEventType:u,chartName:d}=e,h=r,f=n,m=s;if(!c||!h||d!=="ScatterChart"&&u!=="axis")return null;var g,y,p;if(d==="ScatterChart")g=h,y=BH,p=lr.cursorLine;else if(d==="BarChart")g=zH(l,h,i,a),y=HT,p=lr.cursorRectangle;else if(l==="radial"&&hO(h)){var{cx:v,cy:b,radius:w,startAngle:_,endAngle:j}=qT(h);g={cx:v,cy:b,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},y=GT,p=lr.cursorLine}else g={points:Tq(l,h,i)},y=UT,p=lr.cursorLine;var N=typeof c=="object"&&"className"in c?c.className:void 0,k=vd(vd(vd(vd({stroke:"#ccc",pointerEvents:"none"},i),g),Dx(c)),{},{payload:f,payloadIndex:m,className:qe("recharts-tooltip-cursor",N)});return x.createElement(Ms,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:p},x.createElement(iJ,{cursor:c,cursorComp:y,cursorProps:k}))}function oJ(e){var t=EX(),r=kT(),n=uu(),s=IX();return t==null||r==null||n==null||s==null?null:x.createElement(aJ,Dy({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var hD=x.createContext(null),lJ=()=>x.useContext(hD),fD={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,g=new Array(m);f<m;f++)g[f]=h[f].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,g){var y=r?r+u:u;if(!this._events[y])return!1;var p=this._events[y],v=arguments.length,b,w;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,d),!0;case 3:return p.fn.call(p.context,d,h),!0;case 4:return p.fn.call(p.context,d,h,f),!0;case 5:return p.fn.call(p.context,d,h,f,m),!0;case 6:return p.fn.call(p.context,d,h,f,m,g),!0}for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];p.fn.apply(p.context,b)}else{var _=p.length,j;for(w=0;w<_;w++)switch(p[w].once&&this.removeListener(u,p[w].fn,void 0,!0),v){case 1:p[w].fn.call(p[w].context);break;case 2:p[w].fn.call(p[w].context,d);break;case 3:p[w].fn.call(p[w].context,d,h);break;case 4:p[w].fn.call(p[w].context,d,h,f);break;default:if(!b)for(j=1,b=new Array(v-1);j<v;j++)b[j-1]=arguments[j];p[w].fn.apply(p[w].context,b)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return a(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!f||g.once)&&(!h||g.context===h)&&a(this,m);else{for(var y=0,p=[],v=g.length;y<v;y++)(g[y].fn!==d||f&&!g[y].once||h&&g[y].context!==h)&&p.push(g[y]);p.length?this._events[m]=p.length===1?p[0]:p:a(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(fD);var cJ=fD.exports;const uJ=Ss(cJ);var zc=new uJ,Ry="recharts.syncEvent.tooltip",kS="recharts.syncEvent.brush";function dJ(e,t){if(t){var r=Number.parseInt(t,10);if(!Pn(r))return e==null?void 0:e[r]}}var hJ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},mD=Ar({name:"options",initialState:hJ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),fJ=mD.reducer,{createEventEmitter:mJ}=mD.actions;function pJ(e){return e.tooltip.syncInteraction}var gJ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},pD=Ar({name:"chartData",initialState:gJ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:AS,setDataStartEndIndexes:vJ,setComputedData:Vne}=pD.actions,yJ=pD.reducer,xJ=["x","y"];function PS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PS(Object(r),!0).forEach(function(n){bJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bJ(e,t,r){return(t=wJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wJ(e){var t=_J(e,"string");return typeof t=="symbol"?t:t+""}function _J(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jJ(e,t){if(e==null)return{};var r,n,s=NJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SJ(){var e=ae($b),t=ae(Ub),r=lt(),n=ae(JI),s=ae(Rs),i=uu(),a=jm(),l=ae(c=>c.rootProps.className);x.useEffect(()=>{if(e==null)return iu;var c=(u,d,h)=>{if(t!==h&&e===u){if(n==="index"){var f;if(a&&d!==null&&d!==void 0&&(f=d.payload)!==null&&f!==void 0&&f.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:g,y}=m,p=jJ(m,xJ),{x:v,y:b,width:w,height:_}=d.payload.sourceViewBox,j=Oa(Oa({},p),{},{x:a.x+(w?(g-v)/w:0)*a.width,y:a.y+(_?(y-b)/_:0)*a.height});r(Oa(Oa({},d),{},{payload:Oa(Oa({},d.payload),{},{coordinate:j})}))}else r(d);return}if(s!=null){var N;if(typeof n=="function"){var k={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},T=n(s,k);N=s[T]}else n==="value"&&(N=s.find(F=>String(F.value)===d.payload.label));var{coordinate:P}=d.payload;if(N==null||d.payload.active===!1||P==null||a==null){r(Ty({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:C,y:A}=P,S=Math.min(C,a.x+a.width),E=Math.min(A,a.y+a.height),O={x:i==="horizontal"?N.coordinate:S,y:i==="horizontal"?E:N.coordinate},R=Ty({active:d.payload.active,coordinate:O,dataKey:d.payload.dataKey,index:String(N.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(R)}}};return zc.on(Ry,c),()=>{zc.off(Ry,c)}},[l,r,t,e,n,s,i,a])}function EJ(){var e=ae($b),t=ae(Ub),r=lt();x.useEffect(()=>{if(e==null)return iu;var n=(s,i,a)=>{t!==a&&e===s&&r(vJ(i))};return zc.on(kS,n),()=>{zc.off(kS,n)}},[r,t,e])}function CJ(){var e=lt();x.useEffect(()=>{e(mJ())},[e]),SJ(),EJ()}function kJ(e,t,r,n,s,i){var a=ae(m=>RX(m,e,t)),l=ae(Ub),c=ae($b),u=ae(JI),d=ae(pJ),h=d==null?void 0:d.active,f=jm();x.useEffect(()=>{if(!h&&c!=null&&l!=null){var m=Ty({active:i,coordinate:r,dataKey:a,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:f,graphicalItemId:void 0});zc.emit(Ry,c,m,l)}},[h,r,a,s,n,l,c,u,i,f])}function OS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OS(Object(r),!0).forEach(function(n){AJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AJ(e,t,r){return(t=PJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PJ(e){var t=OJ(e,"string");return typeof t=="symbol"?t:t+""}function OJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TJ(e){return e.dataKey}function IJ(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(bH,t)}var IS=[],DJ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function RJ(e){var t,r,n=Vr(e,DJ),{active:s,allowEscapeViewBox:i,animationDuration:a,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:f,position:m,reverseDirection:g,useTranslate3d:y,wrapperStyle:p,cursor:v,shared:b,trigger:w,defaultIndex:_,portal:j,axisId:N}=n,k=lt(),T=typeof _=="number"?String(_):_;x.useEffect(()=>{k(OY({shared:b,trigger:w,axisId:N,active:s,defaultIndex:T}))},[k,b,w,N,s,T]);var P=jm(),C=$T(),A=SY(b),{activeIndex:S,isActive:E}=(t=ae(ye=>$X(ye,A,w,T)))!==null&&t!==void 0?t:{},O=ae(ye=>LX(ye,A,w,T)),R=ae(ye=>uD(ye,A,w,T)),F=ae(ye=>MX(ye,A,w,T)),I=O,D=lJ(),L=(r=s??E)!==null&&r!==void 0?r:!1,[B,q]=o9([I,L]),V=A==="axis"?R:void 0;kJ(A,w,F,V,S,L);var he=j??D;if(he==null||P==null||A==null)return null;var ue=I??IS;L||(ue=IS),u&&ue.length&&(ue=Sz(ue.filter(ye=>ye.value!=null&&(ye.hide!==!0||n.includeHidden)),f,TJ));var xe=ue.length>0,Ae=x.createElement(CH,{allowEscapeViewBox:i,animationDuration:a,animationEasing:l,isAnimationActive:d,active:L,coordinate:F,hasPayload:xe,offset:h,position:m,reverseDirection:g,useTranslate3d:y,viewBox:P,wrapperStyle:p,lastBoundingBox:B,innerRef:q,hasPortalFromProps:!!j},IJ(c,TS(TS({},n),{},{payload:ue,label:V,active:L,activeIndex:S,coordinate:F,accessibilityLayer:C})));return x.createElement(x.Fragment,null,$0.createPortal(Ae,he),L&&x.createElement(oJ,{cursor:v,tooltipEventType:A,coordinate:F,payload:ue,index:S}))}var uw=e=>null;uw.displayName="Cell";function MJ(e,t,r){return(t=LJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJ(e){var t=$J(e,"string");return typeof t=="symbol"?t:t+""}function $J(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class UJ{constructor(t){MJ(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function DS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DS(Object(r),!0).forEach(function(n){BJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BJ(e,t,r){return(t=zJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zJ(e){var t=WJ(e,"string");return typeof t=="symbol"?t:t+""}function WJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HJ={cacheSize:2e3,enableCache:!0},gD=FJ({},HJ),RS=new UJ(gD.cacheSize),qJ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MS="recharts_measurement_span";function VJ(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",a=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(a,"|").concat(l)}var LS=(e,t)=>{try{var r=document.getElementById(MS);r||(r=document.createElement("span"),r.setAttribute("id",MS),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,qJ,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Kl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||km.isSsr)return{width:0,height:0};if(!gD.enableCache)return LS(t,r);var n=VJ(t,r),s=RS.get(n);if(s)return s;var i=LS(t,r);return RS.set(n,i),i},vD;function GJ(e,t,r){return(t=KJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KJ(e){var t=YJ(e,"string");return typeof t=="symbol"?t:t+""}function YJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $S=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,US=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,XJ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JJ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,QJ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ZJ=["cm","mm","pt","pc","in","Q","px"];function eQ(e){return ZJ.includes(e)}var Xa="NaN";function tQ(e,t){return e*QJ[t]}class Ft{static parse(t){var r,[,n,s]=(r=JJ.exec(t))!==null&&r!==void 0?r:[];return n==null?Ft.NaN:new Ft(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Pn(t)&&(this.unit=""),r!==""&&!XJ.test(r)&&(this.num=NaN,this.unit=""),eQ(r)&&(this.num=tQ(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ft(NaN,""):new Ft(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ft(NaN,""):new Ft(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ft(NaN,""):new Ft(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ft(NaN,""):new Ft(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Pn(this.num)}}vD=Ft;GJ(Ft,"NaN",new vD(NaN,""));function yD(e){if(e==null||e.includes(Xa))return Xa;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=$S.exec(t))!==null&&r!==void 0?r:[],a=Ft.parse(n??""),l=Ft.parse(i??""),c=s==="*"?a.multiply(l):a.divide(l);if(c.isNaN())return Xa;t=t.replace($S,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,h,f]=(u=US.exec(t))!==null&&u!==void 0?u:[],m=Ft.parse(d??""),g=Ft.parse(f??""),y=h==="+"?m.add(g):m.subtract(g);if(y.isNaN())return Xa;t=t.replace(US,y.toString())}return t}var FS=/\(([^()]*)\)/;function rQ(e){for(var t=e,r;(r=FS.exec(t))!=null;){var[,n]=r;t=t.replace(FS,yD(n))}return t}function nQ(e){var t=e.replace(/\s+/g,"");return t=rQ(t),t=yD(t),t}function sQ(e){try{return nQ(e)}catch{return Xa}}function mg(e){var t=sQ(e.slice(5,-1));return t===Xa?"":t}var iQ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],aQ=["dx","dy","angle","className","breakAll"];function My(){return My=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},My.apply(null,arguments)}function BS(e,t){if(e==null)return{};var r,n,s=oQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xD=/[ \f\n\r\t\v\u2028\u2029]+/,bD=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Dt(t)||(r?s=t.toString().split(""):s=t.toString().split(xD));var i=s.map(l=>({word:l,width:Kl(l,n).width})),a=r?0:Kl("",n).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}};function lQ(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var wD=(e,t,r,n)=>e.reduce((s,i)=>{var{word:a,width:l}=i,c=s[s.length-1];if(c&&l!=null&&(t==null||n||c.width+l+r<Number(t)))c.words.push(a),c.width+=l+r;else{var u={words:[a],width:l};s.push(u)}return s},[]),_D=e=>e.reduce((t,r)=>t.width>r.width?t:r),cQ="",zS=(e,t,r,n,s,i,a,l)=>{var c=e.slice(0,t),u=bD({breakAll:r,style:n,children:c+cQ});if(!u)return[!1,[]];var d=wD(u.wordsWithComputedWidth,i,a,l),h=d.length>s||_D(d).width>Number(i);return[h,d]},uQ=(e,t,r,n,s)=>{var{maxLines:i,children:a,style:l,breakAll:c}=e,u=Q(i),d=String(a),h=wD(t,n,r,s);if(!u||s)return h;var f=h.length>i||_D(h).width>Number(n);if(!f)return h;for(var m=0,g=d.length-1,y=0,p;m<=g&&y<=d.length-1;){var v=Math.floor((m+g)/2),b=v-1,[w,_]=zS(d,b,c,l,i,n,r,s),[j]=zS(d,v,c,l,i,n,r,s);if(!w&&!j&&(m=v+1),w&&j&&(g=v-1),!w&&j){p=_;break}y++}return p||h},WS=e=>{var t=Dt(e)?[]:e.toString().split(xD);return[{words:t,width:void 0}]},dQ=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:a}=e;if((t||r)&&!km.isSsr){var l,c,u=bD({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:h}=u;l=d,c=h}else return WS(n);return uQ({breakAll:i,children:n,maxLines:a,style:s},l,c,t,!!r)}return WS(n)},jD="#808080",hQ={angle:0,breakAll:!1,capHeight:"0.71em",fill:jD,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},dw=x.forwardRef((e,t)=>{var r=Vr(e,hQ),{x:n,y:s,lineHeight:i,capHeight:a,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,h=BS(r,iQ),f=x.useMemo(()=>dQ({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:m,dy:g,angle:y,className:p,breakAll:v}=h,b=BS(h,aQ);if(!qn(n)||!qn(s)||f.length===0)return null;var w=Number(n)+(Q(m)?m:0),_=Number(s)+(Q(g)?g:0);if(!et(w)||!et(_))return null;var j;switch(d){case"start":j=mg("calc(".concat(a,")"));break;case"middle":j=mg("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:j=mg("calc(".concat(f.length-1," * -").concat(i,")"));break}var N=[];if(c){var k=f[0].width,{width:T}=h;N.push("scale(".concat(Q(T)&&Q(k)?T/k:1,")"))}return y&&N.push("rotate(".concat(y,", ").concat(w,", ").concat(_,")")),N.length&&(b.transform=N.join(" ")),x.createElement("text",My({},ln(b),{ref:t,x:w,y:_,className:qe("recharts-text",p),textAnchor:u,fill:l.includes("url")?jD:l}),f.map((P,C)=>{var A=P.words.join(v?"":" ");return x.createElement("tspan",{x:w,dy:C===0?j:i,key:"".concat(A,"-").concat(C)},A)}))});dw.displayName="Text";var fQ=["labelRef"],mQ=["content"];function HS(e,t){if(e==null)return{};var r,n,s=pQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qS(Object(r),!0).forEach(function(n){gQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gQ(e,t,r){return(t=vQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vQ(e){var t=yQ(e,"string");return typeof t=="symbol"?t:t+""}function yQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function es(){return es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},es.apply(null,arguments)}var ND=x.createContext(null),xQ=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:a,children:l}=e,c=x.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:a}),[t,r,n,s,i,a]);return x.createElement(ND.Provider,{value:c},l)},SD=()=>{var e=x.useContext(ND),t=jm();return e||CT(t)},bQ=x.createContext(null),wQ=()=>{var e=x.useContext(bQ),t=ae(r4);return e||t},_Q=e=>{var{value:t,formatter:r}=e,n=Dt(e.children)?t:e.children;return typeof r=="function"?r(n):n},hw=e=>e!=null&&typeof e=="function",jQ=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),360);return r*n},NQ=(e,t,r,n,s)=>{var{offset:i,className:a}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:h,endAngle:f,clockWise:m}=s,g=(u+d)/2,y=jQ(h,f),p=y>=0?1:-1,v,b;switch(t){case"insideStart":v=h+p*i,b=m;break;case"insideEnd":v=f-p*i,b=!m;break;case"end":v=f+p*i,b=m;break;default:throw new Error("Unsupported position ".concat(t))}b=y<=0?b:!b;var w=zt(l,c,g,v),_=zt(l,c,g,v+(b?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(_.x,",").concat(_.y),N=Dt(e.id)?Ac("recharts-radial-line-"):e.id;return x.createElement("text",es({},n,{dominantBaseline:"central",className:qe("recharts-radial-bar-label",a)}),x.createElement("defs",null,x.createElement("path",{id:N,d:j})),x.createElement("textPath",{xlinkHref:"#".concat(N)},r))},SQ=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:a,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:h}=zt(n,s,a+t,u);return{x:d,y:h,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+a)/2,{x:m,y:g}=zt(n,s,f,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},Ly=e=>"cx"in e&&Q(e.cx),EQ=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!Ly(r)&&(i=r);var{x:a,y:l,upperWidth:c,lowerWidth:u,height:d}=t,h=a,f=a+(c-u)/2,m=(h+f)/2,g=(c+u)/2,y=h+c/2,p=d>=0?1:-1,v=p*n,b=p>0?"end":"start",w=p>0?"start":"end",_=c>=0?1:-1,j=_*n,N=_>0?"end":"start",k=_>0?"start":"end";if(s==="top"){var T={x:h+c/2,y:l-v,textAnchor:"middle",verticalAnchor:b};return st(st({},T),i?{height:Math.max(l-i.y,0),width:c}:{})}if(s==="bottom"){var P={x:f+u/2,y:l+d+v,textAnchor:"middle",verticalAnchor:w};return st(st({},P),i?{height:Math.max(i.y+i.height-(l+d),0),width:u}:{})}if(s==="left"){var C={x:m-j,y:l+d/2,textAnchor:N,verticalAnchor:"middle"};return st(st({},C),i?{width:Math.max(C.x-i.x,0),height:d}:{})}if(s==="right"){var A={x:m+g+j,y:l+d/2,textAnchor:k,verticalAnchor:"middle"};return st(st({},A),i?{width:Math.max(i.x+i.width-A.x,0),height:d}:{})}var S=i?{width:g,height:d}:{};return s==="insideLeft"?st({x:m+j,y:l+d/2,textAnchor:k,verticalAnchor:"middle"},S):s==="insideRight"?st({x:m+g-j,y:l+d/2,textAnchor:N,verticalAnchor:"middle"},S):s==="insideTop"?st({x:h+c/2,y:l+v,textAnchor:"middle",verticalAnchor:w},S):s==="insideBottom"?st({x:f+u/2,y:l+d-v,textAnchor:"middle",verticalAnchor:b},S):s==="insideTopLeft"?st({x:h+j,y:l+v,textAnchor:k,verticalAnchor:w},S):s==="insideTopRight"?st({x:h+c-j,y:l+v,textAnchor:N,verticalAnchor:w},S):s==="insideBottomLeft"?st({x:f+j,y:l+d-v,textAnchor:k,verticalAnchor:b},S):s==="insideBottomRight"?st({x:f+u-j,y:l+d-v,textAnchor:N,verticalAnchor:b},S):s&&typeof s=="object"&&(Q(s.x)||ys(s.x))&&(Q(s.y)||ys(s.y))?st({x:a+On(s.x,g),y:l+On(s.y,d),textAnchor:"end",verticalAnchor:"end"},S):st({x:y,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},CQ={angle:0,offset:5,zIndex:lr.label,position:"middle",textBreakAll:!1};function zs(e){var t=Vr(e,CQ),{viewBox:r,position:n,value:s,children:i,content:a,className:l="",textBreakAll:c,labelRef:u}=t,d=wQ(),h=SD(),f=n==="center"?h:d??h,m,g,y;if(r==null?m=f:Ly(r)?m=r:m=CT(r),!m||Dt(s)&&Dt(i)&&!x.isValidElement(a)&&typeof a!="function")return null;var p=st(st({},t),{},{viewBox:m});if(x.isValidElement(a)){var{labelRef:v}=p,b=HS(p,fQ);return x.cloneElement(a,b)}if(typeof a=="function"){var{content:w}=p,_=HS(p,mQ);if(g=x.createElement(a,_),x.isValidElement(g))return g}else g=_Q(t);var j=ln(t);if(Ly(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return NQ(t,n,g,j,m);y=SQ(m,t.offset,t.position)}else y=EQ(t,m);return x.createElement(Ms,{zIndex:t.zIndex},x.createElement(dw,es({ref:u,className:qe("recharts-label",l)},j,y,{textAnchor:lQ(j.textAnchor)?j.textAnchor:y.textAnchor,breakAll:c}),g))}zs.displayName="Label";var kQ=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?x.createElement(zs,es({key:"label-implicit"},n)):qn(e)?x.createElement(zs,es({key:"label-implicit",value:e},n)):x.isValidElement(e)?e.type===zs?x.cloneElement(e,st({key:"label-implicit"},n)):x.createElement(zs,es({key:"label-implicit",content:e},n)):hw(e)?x.createElement(zs,es({key:"label-implicit",content:e},n)):e&&typeof e=="object"?x.createElement(zs,es({},e,{key:"label-implicit"},n)):null};function AQ(e){var{label:t,labelRef:r}=e,n=SD();return kQ(t,n,r)||null}var ED={},CD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(CD);var kD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(kD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CD,r=kD,n=lm;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(ED);var PQ=ED.last;const OQ=Ss(PQ);var TQ=["valueAccessor"],IQ=["dataKey","clockWise","id","textBreakAll","zIndex"];function gf(){return gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gf.apply(null,arguments)}function VS(e,t){if(e==null)return{};var r,n,s=DQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RQ=e=>Array.isArray(e.value)?OQ(e.value):e.value,AD=x.createContext(void 0),MQ=AD.Provider,PD=x.createContext(void 0);PD.Provider;function LQ(){return x.useContext(AD)}function $Q(){return x.useContext(PD)}function Ld(e){var{valueAccessor:t=RQ}=e,r=VS(e,TQ),{dataKey:n,clockWise:s,id:i,textBreakAll:a,zIndex:l}=r,c=VS(r,IQ),u=LQ(),d=$Q(),h=u||d;return!h||!h.length?null:x.createElement(Ms,{zIndex:l??lr.label},x.createElement(vs,{className:"recharts-label-list"},h.map((f,m)=>{var g,y=Dt(n)?t(f,m):Ht(f&&f.payload,n),p=Dt(i)?{}:{id:"".concat(i,"-").concat(m)};return x.createElement(zs,gf({key:"label-".concat(m)},ln(f),c,p,{fill:(g=r.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:y,textBreakAll:a,viewBox:f.viewBox,index:m,zIndex:0}))})))}Ld.displayName="LabelList";function UQ(e){var{label:t}=e;return t?t===!0?x.createElement(Ld,{key:"labelList-implicit"}):x.isValidElement(t)||hw(t)?x.createElement(Ld,{key:"labelList-implicit",content:t}):typeof t=="object"?x.createElement(Ld,gf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var FQ={radiusAxis:{},angleAxis:{}},OD=Ar({name:"polarAxis",initialState:FQ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Gne,removeRadiusAxis:Kne,addAngleAxis:Yne,removeAngleAxis:Xne}=OD.actions,BQ=OD.reducer,TD={exports:{}},Ie={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw=Symbol.for("react.transitional.element"),mw=Symbol.for("react.portal"),Vm=Symbol.for("react.fragment"),Gm=Symbol.for("react.strict_mode"),Km=Symbol.for("react.profiler"),Ym=Symbol.for("react.consumer"),Xm=Symbol.for("react.context"),Jm=Symbol.for("react.forward_ref"),Qm=Symbol.for("react.suspense"),Zm=Symbol.for("react.suspense_list"),ep=Symbol.for("react.memo"),tp=Symbol.for("react.lazy"),zQ=Symbol.for("react.view_transition"),WQ=Symbol.for("react.client.reference");function hn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fw:switch(e=e.type,e){case Vm:case Km:case Gm:case Qm:case Zm:case zQ:return e;default:switch(e=e&&e.$$typeof,e){case Xm:case Jm:case tp:case ep:return e;case Ym:return e;default:return t}}case mw:return t}}}Ie.ContextConsumer=Ym;Ie.ContextProvider=Xm;Ie.Element=fw;Ie.ForwardRef=Jm;Ie.Fragment=Vm;Ie.Lazy=tp;Ie.Memo=ep;Ie.Portal=mw;Ie.Profiler=Km;Ie.StrictMode=Gm;Ie.Suspense=Qm;Ie.SuspenseList=Zm;Ie.isContextConsumer=function(e){return hn(e)===Ym};Ie.isContextProvider=function(e){return hn(e)===Xm};Ie.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fw};Ie.isForwardRef=function(e){return hn(e)===Jm};Ie.isFragment=function(e){return hn(e)===Vm};Ie.isLazy=function(e){return hn(e)===tp};Ie.isMemo=function(e){return hn(e)===ep};Ie.isPortal=function(e){return hn(e)===mw};Ie.isProfiler=function(e){return hn(e)===Km};Ie.isStrictMode=function(e){return hn(e)===Gm};Ie.isSuspense=function(e){return hn(e)===Qm};Ie.isSuspenseList=function(e){return hn(e)===Zm};Ie.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vm||e===Km||e===Gm||e===Qm||e===Zm||typeof e=="object"&&e!==null&&(e.$$typeof===tp||e.$$typeof===ep||e.$$typeof===Xm||e.$$typeof===Ym||e.$$typeof===Jm||e.$$typeof===WQ||e.getModuleId!==void 0)};Ie.typeOf=hn;TD.exports=Ie;var HQ=TD.exports,GS=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",KS=null,pg=null,ID=e=>{if(e===KS&&Array.isArray(pg))return pg;var t=[];return x.Children.forEach(e,r=>{Dt(r)||(HQ.isFragment(r)?t=t.concat(ID(r.props.children)):t.push(r))}),pg=t,KS=e,t};function qQ(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>GS(s)):n=[GS(t)],ID(e).forEach(s=>{var i=jo(s,"type.displayName")||jo(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var DD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(DD);var VQ=DD.isPlainObject;const GQ=Ss(VQ);var YS,XS,JS,QS,ZS;function eE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eE(Object(r),!0).forEach(function(n){KQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KQ(e,t,r){return(t=YQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YQ(e){var t=XQ(e,"string");return typeof t=="symbol"?t:t+""}function XQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vf(){return vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vf.apply(null,arguments)}function _l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var rE=(e,t,r,n,s)=>{var i=r-n,a;return a=tt(YS||(YS=_l(["M ",",",""])),e,t),a+=tt(XS||(XS=_l(["L ",",",""])),e+r,t),a+=tt(JS||(JS=_l(["L ",",",""])),e+r-i/2,t+s),a+=tt(QS||(QS=_l(["L ",",",""])),e+r-i/2-n,t+s),a+=tt(ZS||(ZS=_l(["L ",","," Z"])),e,t),a},JQ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QQ=e=>{var t=Vr(e,JQ),{x:r,y:n,upperWidth:s,lowerWidth:i,height:a,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=t,f=x.useRef(null),[m,g]=x.useState(-1),y=x.useRef(s),p=x.useRef(i),v=x.useRef(a),b=x.useRef(r),w=x.useRef(n),_=db(e,"trapezoid-");if(x.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var O=f.current.getTotalLength();O&&g(O)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||a!==+a||s===0&&i===0||a===0)return null;var j=qe("recharts-trapezoid",l);if(!h)return x.createElement("g",null,x.createElement("path",vf({},ln(t),{className:j,d:rE(r,n,s,i,a)})));var N=y.current,k=p.current,T=v.current,P=b.current,C=w.current,A="0px ".concat(m===-1?1:m,"px"),S="".concat(m,"px 0px"),E=FT(["strokeDasharray"],u,c);return x.createElement(ub,{animationId:_,key:_,canBegin:m>0,duration:u,easing:c,isActive:h,begin:d},O=>{var R=Bt(N,s,O),F=Bt(k,i,O),I=Bt(T,a,O),D=Bt(P,r,O),L=Bt(C,n,O);f.current&&(y.current=R,p.current=F,v.current=I,b.current=D,w.current=L);var B=O>0?{transition:E,strokeDasharray:S}:{strokeDasharray:A};return x.createElement("path",vf({},ln(t),{className:j,d:rE(D,L,R,F,I),ref:f,style:tE(tE({},B),t.style)}))})},ZQ=["option","shapeType","activeClassName"];function eZ(e,t){if(e==null)return{};var r,n,s=tZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nE(Object(r),!0).forEach(function(n){rZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rZ(e,t,r){return(t=nZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nZ(e){var t=sZ(e,"string");return typeof t=="symbol"?t:t+""}function sZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iZ(e,t){return yf(yf({},t),e)}function aZ(e,t){return e==="symbols"}function sE(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return x.createElement(HT,r);case"trapezoid":return x.createElement(QQ,r);case"sector":return x.createElement(GT,r);case"symbols":if(aZ(t))return x.createElement(dO,r);break;case"curve":return x.createElement(UT,r);default:return null}}function oZ(e){return x.isValidElement(e)?e.props:e}function lZ(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,s=eZ(e,ZQ),i;if(x.isValidElement(t))i=x.cloneElement(t,yf(yf({},s),oZ(t)));else if(typeof t=="function")i=t(s,s.index);else if(GQ(t)&&typeof t!="boolean"){var a=iZ(t,s);i=x.createElement(sE,{shapeType:r,elementProps:a})}else{var l=s;i=x.createElement(sE,{shapeType:r,elementProps:l})}return s.isActive?x.createElement(vs,{className:n},i):i}var RD=(e,t,r)=>{var n=lt();return(s,i)=>a=>{e==null||e(s,i,a),n(q4({activeIndex:String(i),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:r}))}},MD=e=>{var t=lt();return(r,n)=>s=>{e==null||e(r,n,s),t(TY())}},LD=(e,t,r)=>{var n=lt();return(s,i)=>a=>{e==null||e(s,i,a),n(IY({activeIndex:String(i),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:r}))}};function cZ(e){var{tooltipEntrySettings:t}=e,r=lt(),n=Pr(),s=x.useRef(null);return x.useLayoutEffect(()=>{n||(s.current===null?r(kY(t)):s.current!==t&&r(AY({prev:s.current,next:t})),s.current=t)},[t,r,n]),x.useLayoutEffect(()=>()=>{s.current&&(r(PY(s.current)),s.current=null)},[r]),null}function uZ(e){var{legendPayload:t}=e,r=lt(),n=Pr(),s=x.useRef(null);return x.useLayoutEffect(()=>{n||(s.current===null?r(hH(t)):s.current!==t&&r(fH({prev:s.current,next:t})),s.current=t)},[r,n,t]),x.useLayoutEffect(()=>()=>{s.current&&(r(mH(s.current)),s.current=null)},[r]),null}var gg,dZ=()=>{var[e]=x.useState(()=>Ac("uid-"));return e},hZ=(gg=OR.useId)!==null&&gg!==void 0?gg:dZ;function fZ(e,t){var r=hZ();return t||(e?"".concat(e,"-").concat(r):r)}var mZ=x.createContext(void 0),pZ=e=>{var{id:t,type:r,children:n}=e,s=fZ("recharts-".concat(r),t);return x.createElement(mZ.Provider,{value:s},n(s))},gZ={cartesianItems:[],polarItems:[]},$D=Ar({name:"graphicalItems",initialState:gZ,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ve()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=kn(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Ve()},removeCartesianGraphicalItem:{reducer(e,t){var r=kn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Ve()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ve()},removePolarGraphicalItem:{reducer(e,t){var r=kn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Ve()}}}),{addCartesianGraphicalItem:vZ,replaceCartesianGraphicalItem:yZ,removeCartesianGraphicalItem:xZ,addPolarGraphicalItem:Jne,removePolarGraphicalItem:Qne}=$D.actions,bZ=$D.reducer,wZ=e=>{var t=lt(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?t(vZ(e)):r.current!==e&&t(yZ({prev:r.current,next:e})),r.current=e},[t,e]),x.useLayoutEffect(()=>()=>{r.current&&(t(xZ(r.current)),r.current=null)},[t]),null},_Z=x.memo(wZ);function iE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function aE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(r),!0).forEach(function(n){jZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jZ(e,t,r){return(t=NZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NZ(e){var t=SZ(e,"string");return typeof t=="symbol"?t:t+""}function SZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UD=0,EZ={xAxis:{},yAxis:{},zAxis:{}},FD=Ar({name:"cartesianAxis",initialState:EZ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ve()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Ve()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ve()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ve()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Ve()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ve()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ve()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Ve()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ve()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var a=[...i,n].slice(-3);e.yAxis[r]=aE(aE({},e.yAxis[r]),{},{width:n,widthHistory:a})}}}}),{addXAxis:CZ,replaceXAxis:kZ,removeXAxis:AZ,addYAxis:PZ,replaceYAxis:OZ,removeYAxis:TZ,addZAxis:Zne,replaceZAxis:ese,removeZAxis:tse,updateYAxisWidth:IZ}=FD.actions,DZ=FD.reducer,RZ=U([Rt],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),MZ=U([RZ,As,Ps],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),BD=()=>ae(MZ),oE=(e,t,r)=>{var n=r??e;if(!Dt(n))return On(n,t,0)},LZ=(e,t,r)=>{var n={},s=e.filter(Um),i=e.filter(u=>u.stackId==null),a=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(a).map(u=>{var[d,h]=u,f=h.map(g=>g.dataKey),m=oE(t,r,h[0].barSize);return{stackId:d,dataKeys:f,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(f=>f!=null),h=oE(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...l,...c]};function lE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lE(Object(r),!0).forEach(function(n){$Z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Z(e,t,r){return(t=UZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UZ(e){var t=FZ(e,"string");return typeof t=="symbol"?t:t+""}function FZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BZ(e,t,r,n,s){var i=n.length;if(!(i<1)){var a=On(e,r,0,!0),l,c=[];if(et(n[0].barSize)){var u=!1,d=r/i,h=n.reduce((v,b)=>v+(b.barSize||0),0);h+=(i-1)*a,h>=r&&(h-=(i-1)*a,a=0),h>=r&&d>0&&(u=!0,d*=.9,h=i*d);var f=(r-h)/2>>0,m={offset:f-a,size:0};l=n.reduce((v,b)=>{var w,_={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:m.offset+m.size+a,size:u?d:(w=b.barSize)!==null&&w!==void 0?w:0}},j=[...v,_];return m=j[j.length-1].position,j},c)}else{var g=On(t,r,0,!0);r-2*g-(i-1)*a<=0&&(a=0);var y=(r-2*g-(i-1)*a)/i;y>1&&(y>>=0);var p=et(s)?Math.min(y,s):y;l=n.reduce((v,b,w)=>[...v,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:g+(y+a)*w+(y-p)/2,size:p}}],c)}return l}}var zZ=(e,t,r,n,s,i,a)=>{var l=Dt(a)?t:a,c=BZ(r,n,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(u=>yd(yd({},u),{},{position:yd(yd({},u.position),{},{offset:u.position.offset-s/2})}))),c},WZ=(e,t)=>{var r=Wb(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(a=>a.key===r)}}}};function HZ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&et(e.zIndex)?e.zIndex:t}var qZ=e=>{var{chartData:t}=e,r=lt(),n=Pr();return x.useEffect(()=>n?()=>{}:(r(AS(t)),()=>{r(AS(void 0))}),[t,r,n]),null},cE={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},zD=Ar({name:"brush",initialState:cE,reducers:{setBrushSettings(e,t){return t.payload==null?cE:t.payload}}}),{setBrushSettings:rse}=zD.actions,VZ=zD.reducer;function GZ(e,t,r){return(t=KZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KZ(e){var t=YZ(e,"string");return typeof t=="symbol"?t:t+""}function YZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pw{static create(t){return new pw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}GZ(pw,"EPS",1e-4);function XZ(e){return(e%180+180)%180}var JZ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=XZ(s),a=i*Math.PI/180,l=Math.atan(n/r),c=a>l&&a<Math.PI-l?n/Math.sin(a):r/Math.cos(a);return Math.abs(c)},QZ={dots:[],areas:[],lines:[]},WD=Ar({name:"referenceElements",initialState:QZ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=kn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=kn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=kn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:nse,removeDot:sse,addArea:ise,removeArea:ase,addLine:ose,removeLine:lse}=WD.actions,ZZ=WD.reducer,eee=x.createContext(void 0),tee=e=>{var{children:t}=e,[r]=x.useState("".concat(Ac("recharts"),"-clip")),n=BD();if(n==null)return null;var{x:s,y:i,width:a,height:l}=n;return x.createElement(eee.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:s,y:i,height:l,width:a}))),t)};function HD(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var s=e[n];s!==void 0&&r.push(s)}return r}function ree(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return JZ(n,r)}function nee(e,t,r){var n=r==="width",{x:s,y:i,width:a,height:l}=e;return t===1?{start:n?s:i,end:n?s+a:i+l}:{start:n?s+a:i+l,end:n?s:i}}function Wc(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function see(e,t){return HD(e,t+1)}function iee(e,t,r,n,s){for(var i=(n||[]).slice(),{start:a,end:l}=t,c=0,u=1,d=a,h=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:HD(n,u)};var y=c,p,v=()=>(p===void 0&&(p=r(g,y)),p),b=g.coordinate,w=c===0||Wc(e,b,v,d,l);w||(c=0,d=a,u+=1),w&&(d=b+e*(v()/2+s),c+=u)},f;u<=i.length;)if(f=h(),f)return f.v;return[]}function aee(e,t,r,n,s){var i=(n||[]).slice(),a=i.length;if(a===0)return[];for(var{start:l,end:c}=t,u=1;u<=a;u++){for(var d=(a-1)%u,h=l,f=!0,m=function(){var b=n[g],w=g,_,j=()=>(_===void 0&&(_=r(b,w)),_),N=b.coordinate,k=g===d||Wc(e,N,j,h,c);if(!k)return f=!1,1;k&&(h=N+e*(j()/2+s))},g=d;g<a&&!m();g+=u);if(f){for(var y=[],p=d;p<a;p+=u)y.push(n[p]);return y}}return[]}function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(r),!0).forEach(function(n){oee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oee(e,t,r){return(t=lee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lee(e){var t=cee(e,"string");return typeof t=="symbol"?t:t+""}function cee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uee(e,t,r,n,s){for(var i=(n||[]).slice(),a=i.length,{start:l}=t,{end:c}=t,u=function(f){var m=i[f],g,y=()=>(g===void 0&&(g=r(m,f)),g);if(f===a-1){var p=e*(m.coordinate+e*y()/2-c);i[f]=m=Xt(Xt({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate})}else i[f]=m=Xt(Xt({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var v=Wc(e,m.tickCoord,y,l,c);v&&(c=m.tickCoord-e*(y()/2+s),i[f]=Xt(Xt({},m),{},{isShow:!0}))}},d=a-1;d>=0;d--)u(d);return i}function dee(e,t,r,n,s,i){var a=(n||[]).slice(),l=a.length,{start:c,end:u}=t;if(i){var d=n[l-1],h=r(d,l-1),f=e*(d.coordinate+e*h/2-u);if(a[l-1]=d=Xt(Xt({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate}),d.tickCoord!=null){var m=Wc(e,d.tickCoord,()=>h,c,u);m&&(u=d.tickCoord-e*(h/2+s),a[l-1]=Xt(Xt({},d),{},{isShow:!0}))}}for(var g=i?l-1:l,y=function(b){var w=a[b],_,j=()=>(_===void 0&&(_=r(w,b)),_);if(b===0){var N=e*(w.coordinate-e*j()/2-c);a[b]=w=Xt(Xt({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else a[b]=w=Xt(Xt({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var k=Wc(e,w.tickCoord,j,c,u);k&&(c=w.tickCoord+e*(j()/2+s),a[b]=Xt(Xt({},w),{},{isShow:!0}))}},p=0;p<g;p++)y(p);return a}function gw(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:a,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!s||!s.length||!n)return[];if(Q(c)||km.isSsr){var f;return(f=see(s,Q(c)?c:0))!==null&&f!==void 0?f:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",y=d&&g==="width"?Kl(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=(w,_)=>{var j=typeof u=="function"?u(w.value,_):w.value;return g==="width"?ree(Kl(j,{fontSize:t,letterSpacing:r}),y,h):Kl(j,{fontSize:t,letterSpacing:r})[g]},v=s.length>=2?br(s[1].coordinate-s[0].coordinate):1,b=nee(i,v,g);return c==="equidistantPreserveStart"?iee(v,b,p,s,a):c==="equidistantPreserveEnd"?aee(v,b,p,s,a):(c==="preserveStart"||c==="preserveStartEnd"?m=dee(v,b,p,s,a,c==="preserveStartEnd"):m=uee(v,b,p,s,a),m.filter(w=>w.isShow))}var hee=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,a=0;if(t){Array.from(t).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>a&&(a=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,u=a+c+l+(r?n:0);return Math.round(u)}return 0},fee=["axisLine","width","height","className","hide","ticks","axisType"];function mee(e,t){if(e==null)return{};var r,n,s=pee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ua(){return ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ua.apply(null,arguments)}function dE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(r),!0).forEach(function(n){gee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gee(e,t,r){return(t=vee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vee(e){var t=yee(e,"string");return typeof t=="symbol"?t:t+""}function yee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:lr.axis};function xee(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:a,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=ut(ut(ut({},c),gs(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!a||i==="bottom"&&a);u=ut(ut({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var h=+(i==="left"&&!a||i==="right"&&a);u=ut(ut({},u),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+s})}return x.createElement("line",ua({},u,{className:qe("recharts-cartesian-axis-line",jo(l,"className"))}))}function bee(e,t,r,n,s,i,a,l,c){var u,d,h,f,m,g,y=l?-1:1,p=e.tickSize||a,v=Q(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,f=r+ +!l*s,h=f-y*p,g=h-y*c,m=v;break;case"left":h=f=e.coordinate,d=t+ +!l*n,u=d-y*p,m=u-y*c,g=v;break;case"right":h=f=e.coordinate,d=t+ +l*n,u=d+y*p,m=u+y*c,g=v;break;default:u=d=e.coordinate,f=r+ +l*s,h=f+y*p,g=h+y*c,m=v;break}return{line:{x1:u,y1:h,x2:d,y2:f},tick:{x:m,y:g}}}function wee(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function _ee(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function jee(e){var{option:t,tickProps:r,value:n}=e,s,i=qe(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))s=x.cloneElement(t,ut(ut({},r),{},{className:i}));else if(typeof t=="function")s=t(ut(ut({},r),{},{className:i}));else{var a="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(a=qe(a,t==null?void 0:t.className)),s=x.createElement(dw,ua({},r,{className:a}),n)}return s}var Nee=x.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:a,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:f,y:m,width:g,height:y,tickSize:p,tickMargin:v,fontSize:b,letterSpacing:w,getTicksConfig:_,events:j,axisType:N}=e,k=gw(ut(ut({},_),{},{ticks:r}),b,w),T=wee(d,h),P=_ee(d,h),C=gs(_),A=Dx(n),S={};typeof s=="object"&&(S=s);var E=ut(ut({},C),{},{fill:"none"},S),O=k.map(I=>ut({entry:I},bee(I,f,m,g,y,d,p,h,v))),R=O.map(I=>{var{entry:D,line:L}=I;return x.createElement(vs,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},s&&x.createElement("line",ua({},E,L,{className:qe("recharts-cartesian-axis-tick-line",jo(s,"className"))})))}),F=O.map((I,D)=>{var{entry:L,tick:B}=I,q=ut(ut(ut(ut({textAnchor:T,verticalAnchor:P},C),{},{stroke:"none",fill:i},A),B),{},{index:D,payload:L,visibleTicksCount:k.length,tickFormatter:a,padding:c},u);return x.createElement(vs,ua({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},Ux(j,L,D)),n&&x.createElement(jee,{option:n,tickProps:q,value:"".concat(typeof a=="function"?a(L.value,D):L.value).concat(l||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},F.length>0&&x.createElement(Ms,{zIndex:lr.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},F)),R.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},R))}),See=x.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:a,ticks:l,axisType:c}=e,u=mee(e,fee),[d,h]=x.useState(""),[f,m]=x.useState(""),g=x.useRef(null);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var p;return hee({ticks:g.current,label:(p=e.labelRef)===null||p===void 0?void 0:p.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=x.useCallback(p=>{if(p){var v=p.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=v;var b=v[0];if(b){var w=window.getComputedStyle(b),_=w.fontSize,j=w.letterSpacing;(_!==d||j!==f)&&(h(_),m(j))}}},[d,f]);return a||n!=null&&n<=0||s!=null&&s<=0?null:x.createElement(Ms,{zIndex:e.zIndex},x.createElement(vs,{className:qe("recharts-cartesian-axis",i)},x.createElement(xee,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:gs(e)}),x.createElement(Nee,{ref:y,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:f,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),x.createElement(xQ,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},x.createElement(AQ,{label:e.label,labelRef:e.labelRef}),e.children)))}),vw=x.forwardRef((e,t)=>{var r=Vr(e,cs);return x.createElement(See,ua({},r,{ref:t}))});vw.displayName="CartesianAxis";var Eee=["x1","y1","x2","y2","key"],Cee=["offset"],kee=["xAxisId","yAxisId"],Aee=["xAxisId","yAxisId"];function hE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(r),!0).forEach(function(n){Pee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pee(e,t,r){return(t=Oee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oee(e){var t=Tee(e,"string");return typeof t=="symbol"?t:t+""}function Tee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hi.apply(null,arguments)}function xf(e,t){if(e==null)return{};var r,n,s=Iee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Iee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Dee=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:a,ry:l}=e;return x.createElement("rect",{x:n,y:s,ry:l,width:i,height:a,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function qD(e){var{option:t,lineItemProps:r}=e,n;if(x.isValidElement(t))n=x.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var s,{x1:i,y1:a,x2:l,y2:c,key:u}=r,d=xf(r,Eee),h=(s=gs(d))!==null&&s!==void 0?s:{},{offset:f}=h,m=xf(h,Cee);n=x.createElement("line",Hi({},m,{x1:i,y1:a,x2:l,y2:c,fill:"none",key:u}))}return n}function Ree(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=e,l=xf(e,kee),c=s.map((u,d)=>{var h=Zt(Zt({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return x.createElement(qD,{key:"line-".concat(d),option:n,lineItemProps:h})});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Mee(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=e,l=xf(e,Aee),c=s.map((u,d)=>{var h=Zt(Zt({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return x.createElement(qD,{option:n,lineItemProps:h,key:"line-".concat(d)})});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Lee(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:a,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var u=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],g=m?s+a-h:u[f+1]-h;if(g<=0)return null;var y=f%t.length;return x.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:g,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function $ee(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:a,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],g=m?s+a-h:u[f+1]-h;if(g<=0)return null;var y=f%r.length;return x.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:g,height:l,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Uee=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return vT(gw(Zt(Zt(Zt({},cs),r),{},{ticks:yT(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},Fee=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return vT(gw(Zt(Zt(Zt({},cs),r),{},{ticks:yT(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},Bee={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:lr.grid};function VD(e){var t=AT(),r=PT(),n=kT(),s=Zt(Zt({},Vr(e,Bee)),{},{x:Q(e.x)?e.x:n.left,y:Q(e.y)?e.y:n.top,width:Q(e.width)?e.width:n.width,height:Q(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:a,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:f,verticalValues:m}=s,g=Pr(),y=ae(P=>yS(P,"xAxis",i,g)),p=ae(P=>yS(P,"yAxis",a,g));if(!Vn(u)||!Vn(d)||!Q(l)||!Q(c))return null;var v=s.verticalCoordinatesGenerator||Uee,b=s.horizontalCoordinatesGenerator||Fee,{horizontalPoints:w,verticalPoints:_}=s;if((!w||!w.length)&&typeof b=="function"){var j=f&&f.length,N=b({yAxis:p?Zt(Zt({},p),{},{ticks:j?f:p.ticks}):void 0,width:t??u,height:r??d,offset:n},j?!0:h);Gh(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!_||!_.length)&&typeof v=="function"){var k=m&&m.length,T=v({xAxis:y?Zt(Zt({},y),{},{ticks:k?m:y.ticks}):void 0,width:t??u,height:r??d,offset:n},k?!0:h);Gh(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(_=T)}return x.createElement(Ms,{zIndex:s.zIndex},x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(Dee,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),x.createElement(Lee,Hi({},s,{horizontalPoints:w})),x.createElement($ee,Hi({},s,{verticalPoints:_})),x.createElement(Ree,Hi({},s,{offset:n,horizontalPoints:w,xAxis:y,yAxis:p})),x.createElement(Mee,Hi({},s,{offset:n,verticalPoints:_,xAxis:y,yAxis:p}))))}VD.displayName="CartesianGrid";var zee={},GD=Ar({name:"errorBars",initialState:zee,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:cse,replaceErrorBar:use,removeErrorBar:dse}=GD.actions,Wee=GD.reducer,Hee=["children"];function qee(e,t){if(e==null)return{};var r,n,s=Vee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Vee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gee={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Kee=x.createContext(Gee);function Yee(e){var{children:t}=e,r=qee(e,Hee);return x.createElement(Kee.Provider,{value:r},t)}function KD(e,t){var r,n,s=ae(u=>Is(u,e)),i=ae(u=>Ds(u,t)),a=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Et.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Ct.allowDataOverflow,c=a||l;return{needClip:c,needClipX:a,needClipY:l}}function Xee(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=BD(),{needClipX:i,needClipY:a,needClip:l}=KD(t,r);if(!l||!s)return null;var{x:c,y:u,width:d,height:h}=s;return x.createElement("clipPath",{id:"clipPath-".concat(n)},x.createElement("rect",{x:i?c:c-d/2,y:a?u:u-h/2,width:i?d:d*2,height:a?h:h*2}))}var Jee={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu=x;function Qee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zee=typeof Object.is=="function"?Object.is:Qee,ete=Nu.useSyncExternalStore,tte=Nu.useRef,rte=Nu.useEffect,nte=Nu.useMemo,ste=Nu.useDebugValue;Jee.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=tte(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=nte(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&a.hasValue){var g=a.value;if(s(g,m))return h=g}return h=m}if(g=h,Zee(d,m))return g;var y=n(m);return s!==void 0&&s(g,y)?(d=m,g):(d=m,h=y)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=ete(e,i[0],i[1]);return rte(function(){a.hasValue=!0,a.value=l},[l]),ste(l),l};function ite(e){e()}function ate(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ite(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var fE={notify(){},get:()=>[]};function ote(e,t){let r,n=fE,s=0,i=!1;function a(y){d();const p=n.subscribe(y);let v=!1;return()=>{v||(v=!0,p(),h())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){s++,r||(r=e.subscribe(c),n=ate())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=fE)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const g={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>n};return g}var lte=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cte=lte(),ute=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dte=ute(),hte=()=>cte||dte?x.useLayoutEffect:x.useEffect,fte=hte();function mE(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function mte(e,t){if(mE(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!mE(e[r[s]],t[r[s]]))return!1;return!0}var vg=Symbol.for("react-redux-context"),yg=typeof globalThis<"u"?globalThis:{};function pte(){if(!x.createContext)return{};const e=yg[vg]??(yg[vg]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var gte=pte();function vte(e){const{children:t,context:r,serverState:n,store:s}=e,i=x.useMemo(()=>{const c=ote(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),a=x.useMemo(()=>s.getState(),[s]);fte(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const l=r||gte;return x.createElement(l.Provider,{value:i},t)}var yte=vte,xte=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function bte(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function yw(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(xte.has(n)){if(e[n]==null&&t[n]==null)continue;if(!mte(e[n],t[n]))return!1}else if(!bte(e[n],t[n]))return!1;return!0}function xa(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:UD}function ba(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:UD}var wte="Invariant failed";function _te(e,t){throw new Error(wte)}function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$y.apply(null,arguments)}function bf(e){return x.createElement(lZ,$y({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var jte=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Q(t))return t;var i=Q(n)||Dt(n);return i?t(n,s):(i||_te(),r)}},Nte=(e,t,r)=>r,Ste=(e,t)=>t,Su=U([qb,Ste],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Ete=U([Su],e=>e==null?void 0:e.maxBarSize),Cte=(e,t,r,n)=>n,kte=U([Ce,qb,xa,ba,Nte],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Ate=(e,t,r)=>{var n=Ce(e),s=xa(e,t),i=ba(e,t);if(!(s==null||i==null))return n==="horizontal"?Oy(e,"yAxis",i,r):Oy(e,"xAxis",s,r)},Pte=(e,t)=>{var r=Ce(e),n=xa(e,t),s=ba(e,t);if(!(n==null||s==null))return r==="horizontal"?vS(e,"xAxis",n):vS(e,"yAxis",s)},Ote=U([kte,wK,Pte],LZ),Tte=(e,t,r)=>{var n,s,i=Su(e,t);if(i!=null){var a=xa(e,t),l=ba(e,t);if(!(a==null||l==null)){var c=Ce(e),u=KI(e),{maxBarSize:d}=i,h=Dt(d)?u:d,f,m;return c==="horizontal"?(f=To(e,"xAxis",a,r),m=Oo(e,"xAxis",a,r)):(f=To(e,"yAxis",l,r),m=Oo(e,"yAxis",l,r)),(n=(s=Vh(f,m,!0))!==null&&s!==void 0?s:h)!==null&&n!==void 0?n:0}}},YD=(e,t,r)=>{var n=Ce(e),s=xa(e,t),i=ba(e,t);if(!(s==null||i==null)){var a,l;return n==="horizontal"?(a=To(e,"xAxis",s,r),l=Oo(e,"xAxis",s,r)):(a=To(e,"yAxis",i,r),l=Oo(e,"yAxis",i,r)),Vh(a,l)}},Ite=U([Ote,KI,bK,YI,Tte,YD,Ete],zZ),Dte=(e,t,r)=>{var n=xa(e,t);if(n!=null)return To(e,"xAxis",n,r)},Rte=(e,t,r)=>{var n=ba(e,t);if(n!=null)return To(e,"yAxis",n,r)},Mte=(e,t,r)=>{var n=xa(e,t);if(n!=null)return Oo(e,"xAxis",n,r)},Lte=(e,t,r)=>{var n=ba(e,t);if(n!=null)return Oo(e,"yAxis",n,r)},$te=U([Ite,Su],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Ute=U([Ate,Su],WZ),Fte=U([Rt,ab,Dte,Rte,Mte,Lte,$te,Ce,lK,YD,Ute,Su,Cte],(e,t,r,n,s,i,a,l,c,u,d,h,f)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:y}=c;if(!(h==null||a==null||t==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||s==null||i==null||u==null)){var{data:p}=h,v;if(p!=null&&p.length>0?v=p:v=m==null?void 0:m.slice(g,y+1),v!=null)return pre({layout:l,barSettings:h,pos:a,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:d,displayedData:v,offset:e,cells:f,dataStartIndex:g})}}),Bte=["index"];function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uy.apply(null,arguments)}function zte(e,t){if(e==null)return{};var r,n,s=Wte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Wte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XD=x.createContext(void 0),Hte=e=>{var t=x.useContext(XD);if(t!=null)return t.stackId;if(e!=null)return yW(e)},qte=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Vte=e=>{var t=x.useContext(XD);if(t!=null){var{stackId:r}=t;return"url(#".concat(qte(r,e),")")}},Gte=e=>{var{index:t}=e,r=zte(e,Bte),n=Vte(t);return x.createElement(vs,Uy({className:"recharts-bar-stack-layer",clipPath:n},r))},Kte=["onMouseEnter","onMouseLeave","onClick"],Yte=["value","background","tooltipPosition"],Xte=["id"],Jte=["onMouseEnter","onClick","onMouseLeave"];function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ns.apply(null,arguments)}function pE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pE(Object(r),!0).forEach(function(n){Qte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qte(e,t,r){return(t=Zte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zte(e){var t=ere(e,"string");return typeof t=="symbol"?t:t+""}function ere(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wf(e,t){if(e==null)return{};var r,n,s=tre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rre=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:xT(r,t),payload:e}]},nre=x.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:a,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:xT(i,t),hide:a,type:c,color:s,unit:l,graphicalItemId:u}};return x.createElement(cZ,{tooltipEntrySettings:d})});function sre(e){var t=ae(Io),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:a,onMouseLeave:l,onClick:c}=i,u=wf(i,Kte),d=RD(a,n,i.id),h=MD(l),f=LD(c,n,i.id);if(!s||r==null)return null;var m=Dx(s);return x.createElement(Ms,{zIndex:HZ(s,lr.barBackground)},r.map((g,y)=>{var{value:p,background:v,tooltipPosition:b}=g,w=wf(g,Yte);if(!v)return null;var _=d(g,y),j=h(g,y),N=f(g,y),k=sr(sr(sr(sr(sr({option:s,isActive:String(y)===t},w),{},{fill:"#eee"},v),m),Ux(u,g,y)),{},{onMouseEnter:_,onMouseLeave:j,onClick:N,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return x.createElement(bf,Ns({key:"background-bar-".concat(y)},k))}))}function ire(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var a={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return sr(sr({},a),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:a,fill:i.fill})});return x.createElement(MQ,{value:t?s:void 0},r)}function are(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:a}=e,l=ae(Io),c=ae(iD),u=r&&String(i)===l&&(c==null||a===c),d=u?r:t;return u?x.createElement(Ms,{zIndex:lr.activeBar},x.createElement(bf,Ns({},n,{name:String(n.name)},s,{isActive:u,option:d,index:i,dataKey:a}))):x.createElement(bf,Ns({},n,{name:String(n.name)},s,{isActive:u,option:d,index:i,dataKey:a}))}function ore(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return x.createElement(bf,Ns({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function lre(e){var t,{data:r,props:n}=e,s=(t=gs(n))!==null&&t!==void 0?t:{},{id:i}=s,a=wf(s,Xte),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:h,onMouseLeave:f}=n,m=wf(n,Jte),g=RD(d,c,i),y=MD(f),p=LD(h,c,i);return r?x.createElement(x.Fragment,null,r.map((v,b)=>x.createElement(Gte,Ns({index:b,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(b),className:"recharts-bar-rectangle"},Ux(m,v,b),{onMouseEnter:g(v,b),onMouseLeave:y(v,b),onClick:p(v,b)}),u?x.createElement(are,{shape:l,activeBar:u,baseProps:a,entry:v,index:b,dataKey:c}):x.createElement(ore,{shape:l,baseProps:a,entry:v,index:b,dataKey:c})))):null}function cre(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:a,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=r.current,f=db(t,"recharts-bar-"),[m,g]=x.useState(!1),y=!m,p=x.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=x.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return x.createElement(ire,{showLabels:y,rects:n},x.createElement(ub,{animationId:f,begin:a,duration:l,isActive:i,easing:c,onAnimationEnd:p,onAnimationStart:v,key:f},b=>{var w=b===1?n:n==null?void 0:n.map((_,j)=>{var N=h&&h[j];if(N)return sr(sr({},_),{},{x:Bt(N.x,_.x,b),y:Bt(N.y,_.y,b),width:Bt(N.width,_.width,b),height:Bt(N.height,_.height,b)});if(s==="horizontal"){var k=Bt(0,_.height,b),T=Bt(_.stackedBarStart,_.y,b);return sr(sr({},_),{},{y:T,height:k})}var P=Bt(0,_.width,b),C=Bt(_.stackedBarStart,_.x,b);return sr(sr({},_),{},{width:P,x:C})});return b>0&&(r.current=w??null),w==null?null:x.createElement(vs,null,x.createElement(lre,{props:t,data:w}))}),x.createElement(UQ,{label:t.label}),t.children)}function ure(e){var t=x.useRef(null);return x.createElement(cre,{previousRectanglesRef:t,props:e})}var JD=0,dre=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ht(e,t)}};class hre extends x.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:a,needClip:l,background:c,id:u}=this.props;if(t||r==null)return null;var d=qe("recharts-bar",s),h=u;return x.createElement(vs,{className:d,id:u},l&&x.createElement("defs",null,x.createElement(Xee,{clipPathId:h,xAxisId:i,yAxisId:a})),x.createElement(vs,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},x.createElement(sre,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),x.createElement(ure,this.props)))}}var fre={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:JD,xAxisId:0,yAxisId:0,zIndex:lr.bar};function mre(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:a,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:h}=KD(t,r),f=uu(),m=Pr(),g=qQ(e.children,uw),y=ae(b=>Fte(b,e.id,m,g));if(f!=="vertical"&&f!=="horizontal")return null;var p,v=y==null?void 0:y[0];return v==null||v.height==null||v.width==null?p=0:p=f==="vertical"?v.height/2:v.width/2,x.createElement(Yee,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:dre,errorBarOffset:p},x.createElement(hre,Ns({},e,{layout:f,needClip:h,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:a,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function pre(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:a,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:h,offset:f,cells:m,parentViewBox:g,dataStartIndex:y}=e,p=t==="horizontal"?l:a,v=d?p.scale.domain():null,b=xW({numericAxis:p}),w=p.scale(b);return h.map((_,j)=>{var N,k,T,P,C,A;if(d){var S=d[j+y];if(S==null)return null;N=fW(S,v)}else N=Ht(_,r),Array.isArray(N)||(N=[b,N]);var E=jte(n,JD)(N[1],j);if(t==="horizontal"){var O,[R,F]=[l.scale(N[0]),l.scale(N[1])];k=Oj({axis:a,ticks:c,bandSize:i,offset:s.offset,entry:_,index:j}),T=(O=F??R)!==null&&O!==void 0?O:void 0,P=s.size;var I=R-F;if(C=Pn(I)?0:I,A={x:k,y:f.top,width:P,height:f.height},Math.abs(E)>0&&Math.abs(C)<Math.abs(E)){var D=br(C||E)*(Math.abs(E)-Math.abs(C));T-=D,C+=D}}else{var[L,B]=[a.scale(N[0]),a.scale(N[1])];if(k=L,T=Oj({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:_,index:j}),P=B-L,C=s.size,A={x:f.left,y:T,width:f.width,height:C},Math.abs(E)>0&&Math.abs(P)<Math.abs(E)){var q=br(P||E)*(Math.abs(E)-Math.abs(P));P+=q}}if(k==null||T==null||P==null||C==null)return null;var V=sr(sr({},_),{},{stackedBarStart:w,x:k,y:T,width:P,height:C,value:d?N:N[1],payload:_,background:A,tooltipPosition:{x:k+P/2,y:T+C/2},parentViewBox:g},m&&m[j]&&m[j].props);return V}).filter(Boolean)}function gre(e){var t=Vr(e,fre),r=Hte(t.stackId),n=Pr();return x.createElement(pZ,{id:t.id,type:"bar"},s=>x.createElement(x.Fragment,null,x.createElement(uZ,{legendPayload:rre(t)}),x.createElement(nre,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),x.createElement(_Z,{type:"bar",id:s,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),x.createElement(Ms,{zIndex:t.zIndex},x.createElement(mre,Ns({},t,{id:s})))))}var QD=x.memo(gre,yw);QD.displayName="Bar";var vre=["domain","range"],yre=["domain","range"];function gE(e,t){if(e==null)return{};var r,n,s=xre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vE(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function ZD(e,t){if(e===t)return!0;var{domain:r,range:n}=e,s=gE(e,vre),{domain:i,range:a}=t,l=gE(t,yre);return!vE(r,i)||!vE(n,a)?!1:yw(s,l)}var bre=["dangerouslySetInnerHTML","ticks","scale"],wre=["id","scale"];function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fy.apply(null,arguments)}function yE(e,t){if(e==null)return{};var r,n,s=_re(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _re(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jre(e){var t=lt(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?t(CZ(e)):r.current!==e&&t(kZ({prev:r.current,next:e})),r.current=e},[e,t]),x.useLayoutEffect(()=>()=>{r.current&&(t(AZ(r.current)),r.current=null)},[t]),null}var Nre=e=>{var{xAxisId:t,className:r}=e,n=ae(ab),s=Pr(),i="xAxis",a=ae(v=>U4(v,i,t,s)),l=ae(v=>R4(v,t)),c=ae(v=>yY(v,t)),u=ae(v=>s4(v,t));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:f}=e,m=yE(e,bre),{id:g,scale:y}=u,p=yE(u,wre);return x.createElement(vw,Fy({},m,p,{x:c.x,y:c.y,width:l.width,height:l.height,className:qe("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:a,axisType:i}))},Sre={allowDataOverflow:Et.allowDataOverflow,allowDecimals:Et.allowDecimals,allowDuplicatedCategory:Et.allowDuplicatedCategory,angle:Et.angle,axisLine:cs.axisLine,height:Et.height,hide:!1,includeHidden:Et.includeHidden,interval:Et.interval,minTickGap:Et.minTickGap,mirror:Et.mirror,orientation:Et.orientation,padding:Et.padding,reversed:Et.reversed,scale:Et.scale,tick:Et.tick,tickCount:Et.tickCount,tickLine:cs.tickLine,tickSize:cs.tickSize,type:Et.type,xAxisId:0},Ere=e=>{var t=Vr(e,Sre);return x.createElement(x.Fragment,null,x.createElement(jre,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),x.createElement(Nre,t))},eR=x.memo(Ere,ZD);eR.displayName="XAxis";var Cre=["dangerouslySetInnerHTML","ticks","scale"],kre=["id","scale"];function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(null,arguments)}function xE(e,t){if(e==null)return{};var r,n,s=Are(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Are(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pre(e){var t=lt(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?t(PZ(e)):r.current!==e&&t(OZ({prev:r.current,next:e})),r.current=e},[e,t]),x.useLayoutEffect(()=>()=>{r.current&&(t(TZ(r.current)),r.current=null)},[t]),null}var Ore=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=x.useRef(null),a=x.useRef(null),l=ae(ab),c=Pr(),u=lt(),d="yAxis",h=ae(N=>M4(N,t)),f=ae(N=>bY(N,t)),m=ae(N=>U4(N,d,t,c)),g=ae(N=>i4(N,t));if(x.useLayoutEffect(()=>{if(!(n!=="auto"||!h||hw(s)||x.isValidElement(s)||g==null)){var N=i.current;if(N){var k=N.getCalculatedWidth();Math.round(h.width)!==Math.round(k)&&u(IZ({id:t,width:k}))}}},[m,h,u,s,t,n,g]),h==null||f==null||g==null)return null;var{dangerouslySetInnerHTML:y,ticks:p,scale:v}=e,b=xE(e,Cre),{id:w,scale:_}=g,j=xE(g,kre);return x.createElement(vw,By({},b,j,{ref:i,labelRef:a,x:f.x,y:f.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:qe("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:m,axisType:d}))},Tre={allowDataOverflow:Ct.allowDataOverflow,allowDecimals:Ct.allowDecimals,allowDuplicatedCategory:Ct.allowDuplicatedCategory,angle:Ct.angle,axisLine:cs.axisLine,hide:!1,includeHidden:Ct.includeHidden,interval:Ct.interval,minTickGap:Ct.minTickGap,mirror:Ct.mirror,orientation:Ct.orientation,padding:Ct.padding,reversed:Ct.reversed,scale:Ct.scale,tick:Ct.tick,tickCount:Ct.tickCount,tickLine:cs.tickLine,tickSize:cs.tickSize,type:Ct.type,width:Ct.width,yAxisId:0},Ire=e=>{var t=Vr(e,Tre);return x.createElement(x.Fragment,null,x.createElement(Pre,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),x.createElement(Ore,t))},tR=x.memo(Ire,ZD);tR.displayName="YAxis";var Dre=(e,t)=>t,xw=U([Dre,Ce,r4,Nt,tD,Rs,DX,Rt],BX),bw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},rR=cn("mouseClick"),nR=lu();nR.startListening({actionCreator:rR,effect:(e,t)=>{var r=e.payload,n=xw(t.getState(),bw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(DY({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var zy=cn("mouseMove"),sR=lu(),xd=null;sR.startListening({actionCreator:zy,effect:(e,t)=>{var r=e.payload;xd!==null&&cancelAnimationFrame(xd);var n=bw(r);xd=requestAnimationFrame(()=>{var s=t.getState(),i=ew(s,s.tooltip.settings.shared);if(i==="axis"){var a=xw(s,n);(a==null?void 0:a.activeIndex)!=null?t.dispatch(G4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(V4())}xd=null})}});function Rre(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var bE={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},iR=Ar({name:"rootProps",initialState:bE,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:bE.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Mre=iR.reducer,{updateOptions:Lre}=iR.actions,aR=Ar({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:hse}=aR.actions,$re=aR.reducer,oR=cn("keyDown"),lR=cn("focus"),ww=lu();ww.startListening({actionCreator:oR,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var a=tw(s,tl(r),yu(r),_u(r)),l=a==null?-1:Number(a);if(!(!Number.isFinite(l)||l<0)){var c=Rs(r);if(i==="Enter"){var u=pf(r,"axis","hover",String(s.index));t.dispatch(Iy({active:!s.active,activeIndex:s.index,activeCoordinate:u}));return}var d=NY(r),h=d==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=l+f*h;if(!(c==null||m>=c.length||m<0)){var g=pf(r,"axis","hover",String(m));t.dispatch(Iy({active:!0,activeIndex:m.toString(),activeCoordinate:g}))}}}}}});ww.startListening({actionCreator:lR,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",a=pf(r,"axis","hover",String(i));t.dispatch(Iy({active:!0,activeIndex:i,activeCoordinate:a}))}}}});var Yr=cn("externalEvent"),cR=lu(),xg=new Map;cR.startListening({actionCreator:Yr,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var s=n.type,i=xg.get(s);i!==void 0&&cancelAnimationFrame(i);var a=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:xX(l),activeDataKey:iD(l),activeIndex:Io(l),activeLabel:sD(l),activeTooltipIndex:Io(l),isTooltipActive:bX(l)};r(c,n)}finally{xg.delete(s)}});xg.set(s,a)}}});var Ure=U([Zo],e=>e.tooltipItemPayloads),Fre=U([Ure,wu,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.graphicalItemId===n);if(s!=null){var{positions:i}=s;if(i!=null){var a=t(i,r);return a}}}),uR=cn("touchMove"),dR=lu();dR.startListening({actionCreator:uR,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=ew(n,n.tooltip.settings.shared);if(s==="axis"){var i=r.touches[0];if(i==null)return;var a=xw(n,bw({clientX:i.clientX,clientY:i.clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(G4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(EW),h=(l=u.getAttribute(CW))!==null&&l!==void 0?l:void 0,f=el(n).find(y=>y.id===h);if(d==null||f==null||h==null)return;var{dataKey:m}=f,g=Fre(n,d,h);t.dispatch(q4({activeDataKey:m,activeIndex:d,activeCoordinate:g,activeGraphicalItemId:h}))}}}});var Bre=zO({brush:VZ,cartesianAxis:DZ,chartData:yJ,errorBars:Wee,graphicalItems:bZ,layout:oW,legend:pH,options:fJ,polarAxis:BQ,polarOptions:$re,referenceElements:ZZ,rootProps:Mre,tooltip:RY,zIndex:tJ}),zre=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return T9({reducer:Bre,preloadedState:t,middleware:n=>{var s;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([nR.middleware,sR.middleware,ww.middleware,cR.middleware,dR.middleware])},enhancers:n=>{var s=n;return typeof n=="function"&&(s=n()),s.concat(nT({type:"raf"}))},devTools:{serialize:{replacer:Rre},name:"recharts-".concat(r)}})};function Wre(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Pr(),i=x.useRef(null);if(s)return r;i.current==null&&(i.current=zre(t,n));var a=Yx;return x.createElement(yte,{context:a,store:i.current},r)}function Hre(e){var{layout:t,margin:r}=e,n=lt(),s=Pr();return x.useEffect(()=>{s||(n(sW(t)),n(nW(r)))},[n,s,t,r]),null}var qre=x.memo(Hre,yw);function Vre(e){var t=lt();return x.useEffect(()=>{t(Lre(e))},[t,e]),null}function wE(e){var{zIndex:t,isPanorama:r}=e,n=x.useRef(null),s=lt();return x.useLayoutEffect(()=>(n.current&&s(ZX({zIndex:t,element:n.current,isPanorama:r})),()=>{s(eJ({zIndex:t,isPanorama:r}))}),[s,t,r]),x.createElement("g",{tabIndex:-1,ref:n})}function _E(e){var{children:t,isPanorama:r}=e,n=ae(WX);if(!n||n.length===0)return t;var s=n.filter(a=>a<0),i=n.filter(a=>a>0);return x.createElement(x.Fragment,null,s.map(a=>x.createElement(wE,{key:a,zIndex:a,isPanorama:r})),t,i.map(a=>x.createElement(wE,{key:a,zIndex:a,isPanorama:r})))}var Gre=["children"];function Kre(e,t){if(e==null)return{};var r,n,s=Yre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Yre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _f(){return _f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_f.apply(null,arguments)}var Xre={width:"100%",height:"100%",display:"block"},Jre=x.forwardRef((e,t)=>{var r=AT(),n=PT(),s=$T();if(!Vn(r)||!Vn(n))return null;var{children:i,otherAttributes:a,title:l,desc:c}=e,u,d;return a!=null&&(typeof a.tabIndex=="number"?u=a.tabIndex:u=s?0:void 0,typeof a.role=="string"?d=a.role:d=s?"application":void 0),x.createElement(HP,_f({},a,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Xre,ref:t}),i)}),Qre=e=>{var{children:t}=e,r=ae(_m);if(!r)return null;var{width:n,height:s,y:i,x:a}=r;return x.createElement(HP,{width:n,height:s,x:a,y:i},t)},jE=x.forwardRef((e,t)=>{var{children:r}=e,n=Kre(e,Gre),s=Pr();return s?x.createElement(Qre,null,x.createElement(_E,{isPanorama:!0},r)):x.createElement(Jre,_f({ref:t},n),x.createElement(_E,{isPanorama:!1},r))});function Zre(){var e=lt(),[t,r]=x.useState(null),n=ae(SW);return x.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;et(i)&&i!==n&&e(aW(i))}},[t,e,n]),r}function NE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ene(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(r),!0).forEach(function(n){tne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tne(e,t,r){return(t=rne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rne(e){var t=nne(e,"string");return typeof t=="symbol"?t:t+""}function nne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function da(){return da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},da.apply(null,arguments)}var sne=()=>(CJ(),null);function jf(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var ine=x.forwardRef((e,t)=>{var r,n,s=x.useRef(null),[i,a]=x.useState({containerWidth:jf((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:jf((n=e.style)===null||n===void 0?void 0:n.height)}),l=x.useCallback((u,d)=>{a(h=>{var f=Math.round(u),m=Math.round(d);return h.containerWidth===f&&h.containerHeight===m?h:{containerWidth:f,containerHeight:m}})},[]),c=x.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=u.getBoundingClientRect();l(d,h);var f=g=>{var{width:y,height:p}=g[0].contentRect;l(y,p)},m=new ResizeObserver(f);m.observe(u),s.current=m}},[t,l]);return x.useEffect(()=>()=>{var u=s.current;u!=null&&u.disconnect()},[l]),x.createElement(x.Fragment,null,x.createElement(Nm,{width:i.containerWidth,height:i.containerHeight}),x.createElement("div",da({ref:c},e)))}),ane=x.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=x.useState({containerWidth:jf(r),containerHeight:jf(n)}),a=x.useCallback((c,u)=>{i(d=>{var h=Math.round(c),f=Math.round(u);return d.containerWidth===h&&d.containerHeight===f?d:{containerWidth:h,containerHeight:f}})},[]),l=x.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();a(u,d)}},[t,a]);return x.createElement(x.Fragment,null,x.createElement(Nm,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",da({ref:l},e)))}),one=x.forwardRef((e,t)=>{var{width:r,height:n}=e;return x.createElement(x.Fragment,null,x.createElement(Nm,{width:r,height:n}),x.createElement("div",da({ref:t},e)))}),lne=x.forwardRef((e,t)=>{var{width:r,height:n}=e;return ys(r)||ys(n)?x.createElement(ane,da({},e,{ref:t})):x.createElement(one,da({},e,{ref:t}))});function cne(e){return e===!0?ine:lne}var une=x.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:a,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:g,onTouchStart:y,style:p,width:v,responsive:b,dispatchTouchEvents:w=!0}=e,_=x.useRef(null),j=lt(),[N,k]=x.useState(null),[T,P]=x.useState(null),C=Zre(),A=ob(),S=(A==null?void 0:A.width)>0?A.width:v,E=(A==null?void 0:A.height)>0?A.height:s,O=x.useCallback(z=>{C(z),typeof t=="function"&&t(z),k(z),P(z),z!=null&&(_.current=z)},[C,t,k,P]),R=x.useCallback(z=>{j(rR(z)),j(Yr({handler:i,reactEvent:z}))},[j,i]),F=x.useCallback(z=>{j(zy(z)),j(Yr({handler:u,reactEvent:z}))},[j,u]),I=x.useCallback(z=>{j(V4()),j(Yr({handler:d,reactEvent:z}))},[j,d]),D=x.useCallback(z=>{j(zy(z)),j(Yr({handler:h,reactEvent:z}))},[j,h]),L=x.useCallback(()=>{j(lR())},[j]),B=x.useCallback(z=>{j(oR(z.key))},[j]),q=x.useCallback(z=>{j(Yr({handler:a,reactEvent:z}))},[j,a]),V=x.useCallback(z=>{j(Yr({handler:l,reactEvent:z}))},[j,l]),he=x.useCallback(z=>{j(Yr({handler:c,reactEvent:z}))},[j,c]),ue=x.useCallback(z=>{j(Yr({handler:f,reactEvent:z}))},[j,f]),xe=x.useCallback(z=>{j(Yr({handler:y,reactEvent:z}))},[j,y]),Ae=x.useCallback(z=>{w&&j(uR(z)),j(Yr({handler:g,reactEvent:z}))},[j,w,g]),ye=x.useCallback(z=>{j(Yr({handler:m,reactEvent:z}))},[j,m]),mt=cne(b);return x.createElement(hD.Provider,{value:N},x.createElement(j7.Provider,{value:T},x.createElement(mt,{width:S??(p==null?void 0:p.width),height:E??(p==null?void 0:p.height),className:qe("recharts-wrapper",n),style:ene({position:"relative",cursor:"default",width:S,height:E},p),onClick:R,onContextMenu:q,onDoubleClick:V,onFocus:L,onKeyDown:B,onMouseDown:he,onMouseEnter:F,onMouseLeave:I,onMouseMove:D,onMouseUp:ue,onTouchEnd:ye,onTouchMove:Ae,onTouchStart:xe,ref:O},x.createElement(sne,null),r)))}),dne=["width","height","responsive","children","className","style","compact","title","desc"];function hne(e,t){if(e==null)return{};var r,n,s=fne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mne=x.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:a,style:l,compact:c,title:u,desc:d}=e,h=hne(e,dne),f=gs(h);return c?x.createElement(x.Fragment,null,x.createElement(Nm,{width:r,height:n}),x.createElement(jE,{otherAttributes:f,title:u,desc:d},i)):x.createElement(une,{className:a,style:l,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(jE,{otherAttributes:f,title:u,desc:d,ref:t},x.createElement(tee,null,i)))});function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(null,arguments)}var pne={top:5,right:5,bottom:5,left:5},gne={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:pne,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},vne=x.forwardRef(function(t,r){var n,s=Vr(t.categoricalChartProps,gne),{chartName:i,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return x.createElement(Wre,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:i},x.createElement(qZ,{chartData:u.data}),x.createElement(qre,{layout:s.layout,margin:s.margin}),x.createElement(Vre,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),x.createElement(mne,Wy({},s,{ref:r})))}),yne=["axis","item"],xne=x.forwardRef((e,t)=>x.createElement(vne,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yne,tooltipPayloadSearcher:dJ,categoricalChartProps:e,ref:t}));const bne=({percentage:e,size:t=120,strokeWidth:r=8,color:n="#04ADEE",className:s="",children:i})=>{const a=(t-r)/2,l=a*2*Math.PI,c=l-e/100*l;return o.jsxs("div",{className:`relative inline-flex items-center justify-center ${s}`,children:[o.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[o.jsx("circle",{cx:t/2,cy:t/2,r:a,stroke:"#e2e8f0",strokeWidth:r,fill:"none"}),o.jsx("circle",{cx:t/2,cy:t/2,r:a,stroke:n,strokeWidth:r,fill:"none",strokeDasharray:l,strokeDashoffset:c,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i})]})},wne=[{student_id:"1",student_name:"Alexander Lee",overall_average:91,num_courses:6},{student_id:"2",student_name:"Sophia Martinez",overall_average:87,num_courses:6},{student_id:"3",student_name:"Ethan Johnson",overall_average:73,num_courses:6},{student_id:"4",student_name:"Olivia Chen",overall_average:94,num_courses:6},{student_id:"5",student_name:"Marcus Williams",overall_average:82,num_courses:6}],_ne={1:{student_id:"1",student_name:"Alexander Lee",overall_average:91,overall_syllabus_completion:87,courses:[{id:"1",course_name:"Mathematics HL",course_code:"MATH-HL",current_grade:94,syllabus_completion:88,total_assignments:12,completed_assignments:11,teacher_report:"Alexander demonstrates exceptional understanding of calculus concepts. His problem-solving approach is methodical and creative. Continue to challenge him with advanced problems.",report_date:"2024-03-15"},{id:"2",course_name:"Physics HL",course_code:"PHYS-HL",current_grade:92,syllabus_completion:85,total_assignments:14,completed_assignments:13,teacher_report:"Strong grasp of theoretical concepts and experimental design. Lab reports are thorough and well-documented. Excellent collaboration during group projects.",report_date:"2024-03-12"},{id:"3",course_name:"Chemistry HL",course_code:"CHEM-HL",current_grade:89,syllabus_completion:82,total_assignments:13,completed_assignments:12,teacher_report:"Good understanding of chemical reactions and bonding. Would benefit from more practice with complex stoichiometry problems. Lab technique is excellent.",report_date:"2024-03-10"},{id:"4",course_name:"English A SL",course_code:"ENG-SL",current_grade:91,syllabus_completion:90,total_assignments:10,completed_assignments:10,teacher_report:"Insightful literary analysis with strong critical thinking. Essays are well-structured and demonstrate deep engagement with texts. Excellent participation in discussions.",report_date:"2024-03-14"},{id:"5",course_name:"Spanish B SL",course_code:"SPAN-SL",current_grade:88,syllabus_completion:86,total_assignments:11,completed_assignments:10,teacher_report:"Strong oral proficiency and good grammatical accuracy. Written compositions show creativity. Continue practicing verb conjugations in subjunctive mood.",report_date:"2024-03-11"},{id:"6",course_name:"Economics SL",course_code:"ECON-SL",current_grade:93,syllabus_completion:89,total_assignments:12,completed_assignments:11,teacher_report:"Excellent grasp of micro and macroeconomic principles. Case study analyses are particularly strong. Shows ability to apply theory to real-world scenarios effectively.",report_date:"2024-03-13"}]},2:{student_id:"2",student_name:"Sophia Martinez",overall_average:87,overall_syllabus_completion:83,courses:[{id:"7",course_name:"Mathematics HL",course_code:"MATH-HL",current_grade:88,syllabus_completion:82,total_assignments:12,completed_assignments:10,teacher_report:"Sophia shows consistent effort and steady improvement in mathematics. Her algebra skills are strong. Recommend additional practice with trigonometric identities.",report_date:"2024-03-14"},{id:"8",course_name:"Biology HL",course_code:"BIO-HL",current_grade:90,syllabus_completion:87,total_assignments:14,completed_assignments:13,teacher_report:"Outstanding performance in cellular biology and genetics. Lab dissections demonstrate excellent attention to detail. A natural curiosity drives her learning.",report_date:"2024-03-13"},{id:"9",course_name:"Chemistry HL",course_code:"CHEM-HL",current_grade:86,syllabus_completion:80,total_assignments:13,completed_assignments:11,teacher_report:"Solid understanding of fundamental concepts. Organic chemistry assignments show promise. Would benefit from attending extra help sessions for titration calculations.",report_date:"2024-03-11"},{id:"10",course_name:"English A SL",course_code:"ENG-SL",current_grade:87,syllabus_completion:85,total_assignments:10,completed_assignments:9,teacher_report:"Good analytical skills in poetry analysis. Written expression is clear and organized. Encourage more participation during class discussions to build confidence.",report_date:"2024-03-15"},{id:"11",course_name:"French B SL",course_code:"FR-SL",current_grade:84,syllabus_completion:81,total_assignments:11,completed_assignments:9,teacher_report:"Developing strong reading comprehension skills. Pronunciation has improved significantly this term. Continue working on expanding vocabulary for more complex topics.",report_date:"2024-03-12"},{id:"12",course_name:"Psychology SL",course_code:"PSY-SL",current_grade:89,syllabus_completion:84,total_assignments:12,completed_assignments:11,teacher_report:"Excellent critical analysis of psychological theories. Research project on cognitive biases was particularly impressive. Active contributor to class discussions.",report_date:"2024-03-14"}]},3:{student_id:"3",student_name:"Ethan Johnson",overall_average:73,overall_syllabus_completion:71,courses:[{id:"13",course_name:"Mathematics SL",course_code:"MATH-SL",current_grade:75,syllabus_completion:72,total_assignments:12,completed_assignments:9,teacher_report:"Ethan is working hard to improve his mathematical skills. He benefits greatly from one-on-one tutoring sessions. Needs to stay consistent with homework completion.",report_date:"2024-03-13"},{id:"14",course_name:"Physics SL",course_code:"PHYS-SL",current_grade:71,syllabus_completion:68,total_assignments:14,completed_assignments:10,teacher_report:"Struggles with abstract concepts but shows determination. Visual demonstrations help his understanding. Recommend using online simulation tools for extra practice.",report_date:"2024-03-11"},{id:"15",course_name:"Geography HL",course_code:"GEO-HL",current_grade:76,syllabus_completion:74,total_assignments:13,completed_assignments:10,teacher_report:"Strong interest in environmental topics. Field trip notes were excellent. Map work needs improvement, particularly scale and projection concepts.",report_date:"2024-03-15"},{id:"16",course_name:"English A SL",course_code:"ENG-SL",current_grade:72,syllabus_completion:70,total_assignments:10,completed_assignments:7,teacher_report:"Creative ideas in writing but needs to work on essay structure. Missing assignments have affected grade. One-on-one conferences have been helpful for organizing thoughts.",report_date:"2024-03-12"},{id:"17",course_name:"Spanish B SL",course_code:"SPAN-SL",current_grade:70,syllabus_completion:69,total_assignments:11,completed_assignments:8,teacher_report:"Finding language acquisition challenging but maintains positive attitude. Oral presentations show improvement. Needs consistent practice with verb tenses and vocabulary.",report_date:"2024-03-10"},{id:"18",course_name:"Business SL",course_code:"BUS-SL",current_grade:74,syllabus_completion:73,total_assignments:12,completed_assignments:9,teacher_report:"Good understanding of basic business concepts. Particularly engaged during case study discussions. Written assignments would benefit from more detailed analysis and examples.",report_date:"2024-03-14"}]},4:{student_id:"4",student_name:"Olivia Chen",overall_average:94,overall_syllabus_completion:92,courses:[{id:"19",course_name:"Mathematics HL",course_code:"MATH-HL",current_grade:96,syllabus_completion:94,total_assignments:12,completed_assignments:12,teacher_report:"Olivia is an exceptional mathematics student. Her proof writing is elegant and logical. She regularly helps peers during study sessions. Consider preparing for advanced mathematics competitions.",report_date:"2024-03-15"},{id:"20",course_name:"Physics HL",course_code:"PHYS-HL",current_grade:95,syllabus_completion:93,total_assignments:14,completed_assignments:14,teacher_report:"Outstanding analytical and problem-solving abilities. Lab reports are comprehensive and show deep understanding. Quantum mechanics unit was handled with remarkable maturity.",report_date:"2024-03-14"},{id:"21",course_name:"Chemistry HL",course_code:"CHEM-HL",current_grade:94,syllabus_completion:92,total_assignments:13,completed_assignments:13,teacher_report:"Exemplary work in all areas. Demonstrates mastery of both theoretical and practical chemistry. Independent research project on catalysis was publication-quality work.",report_date:"2024-03-13"},{id:"22",course_name:"English A SL",course_code:"ENG-SL",current_grade:93,syllabus_completion:91,total_assignments:10,completed_assignments:10,teacher_report:"Sophisticated literary analysis with nuanced interpretations. Writing demonstrates exceptional clarity and depth. A consistent leader in seminar discussions.",report_date:"2024-03-15"},{id:"23",course_name:"Mandarin B SL",course_code:"MAND-SL",current_grade:95,syllabus_completion:93,total_assignments:11,completed_assignments:11,teacher_report:"Near-native fluency with excellent character recognition. Cultural presentations show deep understanding and research. Peer tutoring has been invaluable to the class.",report_date:"2024-03-12"},{id:"24",course_name:"Economics SL",course_code:"ECON-SL",current_grade:91,syllabus_completion:89,total_assignments:12,completed_assignments:11,teacher_report:"Strong analytical skills applied to economic models. Policy analysis essays demonstrate critical thinking. Particularly strong in understanding market dynamics and elasticity.",report_date:"2024-03-14"}]},5:{student_id:"5",student_name:"Marcus Williams",overall_average:82,overall_syllabus_completion:79,courses:[{id:"25",course_name:"Mathematics SL",course_code:"MATH-SL",current_grade:83,syllabus_completion:80,total_assignments:12,completed_assignments:10,teacher_report:"Marcus demonstrates solid grasp of core concepts. His problem-solving has improved steadily this term. Would benefit from completing all practice assignments for better retention.",report_date:"2024-03-14"},{id:"26",course_name:"Biology HL",course_code:"BIO-HL",current_grade:85,syllabus_completion:82,total_assignments:14,completed_assignments:12,teacher_report:"Shows particular strength in ecology and environmental science. Lab notebook is well-organized. Genetics unit requires some additional review for full mastery.",report_date:"2024-03-13"},{id:"27",course_name:"History HL",course_code:"HIST-HL",current_grade:81,syllabus_completion:78,total_assignments:13,completed_assignments:11,teacher_report:"Good analytical approach to historical events. Essays show understanding but could be more detailed with primary source analysis. Classroom discussions are insightful.",report_date:"2024-03-12"},{id:"28",course_name:"English A SL",course_code:"ENG-SL",current_grade:80,syllabus_completion:77,total_assignments:10,completed_assignments:8,teacher_report:"Developing strong analytical reading skills. Writing shows promise but needs work on thesis development. Recent essay on symbolism showed marked improvement.",report_date:"2024-03-15"},{id:"29",course_name:"Spanish B SL",course_code:"SPAN-SL",current_grade:82,syllabus_completion:79,total_assignments:11,completed_assignments:9,teacher_report:"Good conversational ability with growing confidence. Grammar exercises are generally accurate. Cultural project on Latin American literature was well-researched.",report_date:"2024-03-11"},{id:"30",course_name:"Psychology SL",course_code:"PSY-SL",current_grade:81,syllabus_completion:78,total_assignments:12,completed_assignments:10,teacher_report:"Engaged learner with good understanding of psychological principles. Research methods section was challenging but he persevered. Contribute more during group activities.",report_date:"2024-03-14"}]}},jne=()=>{const[e]=x.useState(wne),[t,r]=x.useState(null),[n,s]=x.useState(""),i=f=>{r(_ne[f])},a=()=>{r(null)},l=e.filter(f=>f.student_name.toLowerCase().includes(n.toLowerCase())).sort((f,m)=>m.overall_average-f.overall_average),c=f=>f===1?o.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-yellow-400 to-yellow-500 px-3 py-1.5 rounded-full",children:[o.jsx(kB,{className:"w-4 h-4 text-white"}),o.jsx("span",{className:"text-sm font-bold text-white",children:"1st"})]}):f===2?o.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-slate-300 to-slate-400 px-3 py-1.5 rounded-full",children:[o.jsx(Z1,{className:"w-4 h-4 text-white"}),o.jsx("span",{className:"text-sm font-bold text-white",children:"2nd"})]}):f===3?o.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-amber-600 to-amber-700 px-3 py-1.5 rounded-full",children:[o.jsx(Z1,{className:"w-4 h-4 text-white"}),o.jsx("span",{className:"text-sm font-bold text-white",children:"3rd"})]}):o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-slate-100 border border-slate-300",children:o.jsxs("span",{className:"text-base font-bold text-slate-600",children:["#",f]})}),u=f=>f>=90?"#10b981":f>=80?"#04ADEE":f>=70?"#f59e0b":"#ef4444",d=l.length>0?l.reduce((f,m)=>f+m.overall_average,0)/l.length:0,h=l.reduce((f,m)=>f+m.num_courses,0);if(t){const f=t.courses.map(m=>({name:m.course_code,grade:m.current_grade,fullName:m.course_name}));return o.jsxs("div",{className:"-mx-8 -my-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-4",children:[o.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-3 transition-colors font-medium",children:[o.jsx(Kn,{className:"w-4 h-4"}),"Back to Students"]}),o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t.student_name})]}),o.jsxs("div",{className:"px-8 py-6",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm mb-4",children:[o.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"Course Grades"}),o.jsx(JW,{width:"100%",height:240,children:o.jsxs(xne,{data:f,barSize:35,children:[o.jsx(VD,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),o.jsx(eR,{dataKey:"name",tick:{fontSize:12}}),o.jsx(tR,{domain:[0,100],tick:{fontSize:12}}),o.jsx(RJ,{content:({active:m,payload:g})=>m&&g&&g.length?o.jsxs("div",{className:"bg-white p-2 border border-slate-200 rounded-lg shadow-lg",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-800",children:g[0].payload.fullName}),o.jsxs("p",{className:"text-base font-bold text-[#04ADEE]",children:["Grade: ",g[0].value,"%"]})]}):null}),o.jsx(QD,{dataKey:"grade",radius:[6,6,0,0],children:f.map((m,g)=>{const y=["#04ADEE","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];return o.jsx(uw,{fill:y[g%y.length]},`cell-${g}`)})})]})})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"Course Details"}),o.jsx("div",{className:"space-y-2",children:t.courses.map(m=>o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200 hover:border-[#04ADEE] transition-colors",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:m.course_name}),o.jsx("p",{className:"text-xs text-slate-500",children:m.course_code})]}),o.jsxs("div",{className:"ml-3 flex flex-col items-end",children:[o.jsx("span",{className:"text-xs text-slate-500 mb-0.5",children:"Syllabus Progress"}),o.jsxs("span",{className:"text-sm font-bold text-[#04ADEE]",children:[m.syllabus_completion,"%"]})]})]}),o.jsxs("div",{className:"border-t border-slate-200 pt-2",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Teacher Report"}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(m.report_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),o.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:m.teacher_report})]})]},m.id))})]})]})]})}return o.jsxs("div",{className:"-mx-8 -my-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20",children:o.jsxs("div",{className:"px-8 py-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(er,{className:"w-6 h-6 text-[#04ADEE]"}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Academic Tracking Dashboard"})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-emerald-500 px-3 py-1.5 rounded-full",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),o.jsx("span",{className:"text-xs font-semibold text-white",children:"Live Data"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ia,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Total Students"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-3xl font-bold text-slate-900",children:o.jsx(Ye,{end:l.length,duration:1500})}),o.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(tn,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Average Grade"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-3xl font-bold text-[#04ADEE]",children:o.jsx(Ye,{end:d,duration:1500,decimals:1})}),o.jsx("span",{className:"text-sm text-slate-600",children:"%"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Er,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Total Courses"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-3xl font-bold text-slate-900",children:o.jsx(Ye,{end:h,duration:1500})}),o.jsx("span",{className:"text-sm text-slate-600",children:"Courses"})]})]})]})]})}),o.jsxs("div",{className:"px-8 py-6",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),o.jsx("input",{type:"text",placeholder:"Search students by name...",value:n,onChange:f=>s(f.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-slate-900 placeholder-slate-400"})]})}),l.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(zr,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-500 text-lg",children:"No students found"}),o.jsx("p",{className:"text-slate-400 text-sm",children:"Try adjusting your search"})]}):o.jsx("div",{className:"grid gap-3",children:l.map((f,m)=>{const g=m+1;return o.jsx("div",{onClick:()=>i(f.student_id),className:"bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-all cursor-pointer border border-slate-200 hover:border-[#04ADEE]",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex-shrink-0",children:c(g)}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-2",children:f.student_name}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Er,{className:"w-3.5 h-3.5 text-slate-500"}),o.jsxs("span",{className:"text-sm text-slate-600",children:[f.num_courses," ",f.num_courses===1?"course":"courses"]})]})})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(bne,{percentage:f.overall_average,size:80,strokeWidth:6,color:u(f.overall_average),children:o.jsxs("div",{className:"text-center",children:[o.jsxs("p",{className:"text-xl font-bold",style:{color:u(f.overall_average)},children:[f.overall_average,"%"]}),o.jsx("p",{className:"text-[10px] text-slate-500",children:"Avg"})]})})})]})},f.student_id)})})]})]})},Nne=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,i]=x.useState(null),[a,l]=x.useState([]),[c,u]=x.useState([]),[d,h]=x.useState(null),[f,m]=x.useState(""),[g,y]=x.useState(""),[p,v]=x.useState("all"),[b,w]=x.useState(""),[_,j]=x.useState(""),[N,k]=x.useState(!1),[T,P]=x.useState(!1),[C,A]=x.useState(null),S=x.useRef(null),E=Ue.getStoredUser(),O=(E==null?void 0:E.name)||"University Counselor",R=M=>{const ne=document.createElement("div");return ne.innerHTML=M,ne.querySelectorAll("*").forEach(ie=>{Array.from(ie.attributes).forEach($=>{$.name.startsWith("data-")&&ie.removeAttribute($.name)})}),ne.innerHTML};x.useEffect(()=>{s&&S.current&&a.length>0&&F()},[s,a]);const F=()=>{if(!S.current||!s)return;const M=S.current,ne=R(s.essay_content);M.innerHTML=ne,M.textContent,[...a].sort((ie,$)=>$.start_position-ie.start_position).forEach(ie=>{const $=document.createTreeWalker(M,NodeFilter.SHOW_TEXT,null);let G=0,re=null,de=0,je=null,Fe=0,Ne=!1;for(;$.nextNode();){const Vt=$.currentNode,gr=Vt.length;if(!Ne&&G+gr>=ie.start_position&&(re=Vt,de=ie.start_position-G,Ne=!0),Ne&&G+gr>=ie.end_position){je=Vt,Fe=ie.end_position-G;break}G+=gr}if(re&&je){const Vt=document.createRange();Vt.setStart(re,de),Vt.setEnd(je,Fe);const gr=document.createElement("mark");gr.className="bg-yellow-200 cursor-pointer hover:bg-yellow-300 transition-colors relative group",gr.setAttribute("data-comment-id",ie.id),gr.title=ie.comment_text;const rl=document.createElement("span");rl.className="invisible group-hover:visible absolute bottom-full left-0 mb-2 w-64 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-10 pointer-events-none",rl.innerHTML=`<div class="font-semibold mb-1">${ie.counselor_name}</div><div>${ie.comment_text}</div>`,gr.appendChild(rl);try{Vt.surroundContents(gr)}catch(rp){console.warn("Could not apply highlight",rp)}}})},I=M=>{const ne=new Date(M),Z=ne.getDate(),ie=["th","st","nd","rd"][Z%10>3||Math.floor(Z/10)===1?0:Z%10],G=["January","February","March","April","May","June","July","August","September","October","November","December"][ne.getMonth()],re=ne.getFullYear(),de=ne.getHours(),je=ne.getMinutes().toString().padStart(2,"0"),Fe=de>=12?"PM":"AM",Ne=de%12||12;return`${Z}${ie} ${G} ${re} at ${Ne}:${je} ${Fe}`};x.useEffect(()=>{const M=se(te,"University Data/Essays"),ne=Xr(M,Z=>{if(!Z.exists()){t([]),n(!1);return}const ie=[],$=Z.val();Object.keys($).forEach(G=>{const re=$[G];Object.keys(re).forEach(de=>{var Fe,Ne,Vt;const je=re[de];(je.status==="submitted"||je.status==="reviewed")&&ie.push({id:`${G}___${de}`,student_name:G,essay_type:je.essayType||"personal_statement",essay_title:de,essay_content:je.essayText||"",university_name:je.universityName||null,submission_date:je.submittedAt||je.lastModified||new Date().toISOString().split("T")[0],status:je.status||"submitted",total_points:((Fe=je.reviewData)==null?void 0:Fe.totalPoints)||null,score:((Ne=je.reviewData)==null?void 0:Ne.score)||null,font_family:je.fontFamily||"Arial",font_size:je.fontSize||14,reviewed_at:((Vt=je.reviewData)==null?void 0:Vt.reviewedAt)||void 0})})}),ie.sort((G,re)=>new Date(re.submission_date).getTime()-new Date(G.submission_date).getTime()),t(ie),n(!1)});return()=>ne()},[]),x.useEffect(()=>{if(s&&s.status==="reviewed"){const[M,ne]=s.id.split("___"),Z=se(te,`University Data/Essays/${M}/${ne}`);Xr(Z,ie=>{if(ie.exists()){const $=ie.val();$.reviewData&&(l($.reviewData.inlineComments||[]),u($.reviewData.generalComments||[]))}})}},[s==null?void 0:s.id,s==null?void 0:s.status]);const D=async M=>{const ne=e.find(Z=>Z.id===M);if(ne){i(ne);const[Z,ie]=M.split("___"),$=se(te,`University Data/Essays/${Z}/${ie}`);Xr($,G=>{if(G.exists()){const re=G.val();re.reviewData?(l(re.reviewData.inlineComments||[]),u(re.reviewData.generalComments||[])):(l([]),u([]))}})}},L=()=>{const M=window.getSelection();if(M&&M.toString().trim()&&S.current){const ne=M.toString(),Z=M.getRangeAt(0),ie=Z.cloneRange();ie.selectNodeContents(S.current),ie.setEnd(Z.startContainer,Z.startOffset);const $=ie.toString().length,G=$+ne.length,re=Z.getBoundingClientRect();A({top:re.bottom+window.scrollY+5,left:re.left+window.scrollX+re.width/2}),P(!0),h({text:ne,start:$,end:G})}else P(!1),A(null)},B=()=>{P(!1)},q=async()=>{if(!s||!d||!f.trim())return;const M={id:Date.now().toString(),counselor_name:O,highlighted_text:d.text,start_position:d.start,end_position:d.end,comment_text:f},ne=[...a,M];l(ne);const[Z,ie]=s.id.split("___"),$=se(te,`University Data/Essays/${Z}/${ie}`),G=await new Promise(re=>{Xr($,de=>re(de),{onlyOnce:!0})});if(G.exists()){const re=G.val();await ot($,{...re,reviewData:{...re.reviewData,inlineComments:ne}})}m(""),h(null)},V=async M=>{if(!s)return;const ne=a.filter(re=>re.id!==M);l(ne);const[Z,ie]=s.id.split("___"),$=se(te,`University Data/Essays/${Z}/${ie}`),G=await new Promise(re=>{Xr($,de=>re(de),{onlyOnce:!0})});if(G.exists()){const re=G.val();await ot($,{...re,reviewData:{...re.reviewData,inlineComments:ne}})}},he=async()=>{if(!s||!g.trim())return;const ne=[{id:Date.now().toString(),counselor_name:O,comment_text:g,created_at:new Date().toISOString()},...c];u(ne);const[Z,ie]=s.id.split("___"),$=se(te,`University Data/Essays/${Z}/${ie}`),G=await new Promise(re=>{Xr($,de=>re(de),{onlyOnce:!0})});if(G.exists()){const re=G.val();await ot($,{...re,reviewData:{...re.reviewData,generalComments:ne}})}y("")},ue=()=>{s&&k(!0)},xe=async()=>{if(!s)return;const M=parseInt(b),ne=parseFloat(_);if(isNaN(M)||M<=0){alert("Please enter a valid total points greater than 0");return}if(isNaN(ne)||ne<0){alert("Please enter a valid score greater than or equal to 0");return}if(ne>M){alert("Score cannot exceed total points");return}const[Z,ie]=s.id.split("___"),$=se(te,`University Data/Essays/${Z}/${ie}`),G=await new Promise(de=>{Xr($,je=>de(je),{onlyOnce:!0})});if(G.exists()){const de=G.val();await ot($,{...de,status:"reviewed",reviewData:{...de.reviewData,reviewedBy:O,reviewedAt:new Date().toISOString(),totalPoints:M,score:ne,inlineComments:a||[],generalComments:c||[]}})}const re=e.map(de=>de.id===s.id?{...de,status:"reviewed",total_points:M,score:ne}:de);t(re),i({...s,status:"reviewed",total_points:M,score:ne}),k(!1),w(""),j("")},Ae=()=>{if(e.length===0)return 0;const M=e.filter(ne=>ne.status==="reviewed");return Math.round(M.length/e.length*100)};x.useEffect(()=>{if(s&&S.current){const M=R(s.essay_content);S.current.innerHTML=M,a.length>0&&setTimeout(()=>F(),0)}},[s==null?void 0:s.id]);const ye=M=>{switch(M){case"submitted":return o.jsxs("div",{className:"flex items-center gap-1.5 bg-amber-100 text-amber-800 px-3 py-1 rounded-full",children:[o.jsx(Cr,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"text-xs font-semibold",children:"To be Reviewed"})]});case"reviewed":return o.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full",children:[o.jsx(Gl,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"text-xs font-semibold",children:"Reviewed"})]});default:return null}},mt=p==="all"?e:p==="pending"?e.filter(M=>M.status==="submitted"):e.filter(M=>M.status===p),z=e.filter(M=>M.status==="submitted").length,ce=e.filter(M=>M.status==="reviewed").length,fe=Ae();return r?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})}):s?o.jsxs("div",{className:"-mx-8 -my-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-4",children:[o.jsxs("button",{onClick:()=>i(null),className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-3 transition-colors font-medium",children:[o.jsx(Kn,{className:"w-4 h-4"}),"Back to Essays"]}),o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-1",children:s.essay_title}),o.jsxs("p",{className:"text-sm text-slate-600",children:[s.student_name,"  ",s.essay_type==="personal_statement"?"Personal Statement":s.essay_type==="supplement"?"Supplemental Essay":"Activity List",s.university_name&&`  ${s.university_name}`]}),s.status==="reviewed"&&s.total_points&&s.score!==null&&o.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-emerald-50 px-3 py-1.5 rounded-lg border border-emerald-200",children:[o.jsx(zn,{className:"w-4 h-4 text-emerald-600"}),o.jsxs("span",{className:"text-sm font-semibold text-emerald-900",children:["Grade: ",s.score,"/",s.total_points," (",(s.score/s.total_points*100).toFixed(1),"%)"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[ye(s.status),s.status!=="reviewed"&&o.jsxs("button",{onClick:ue,className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[o.jsx(Gl,{className:"w-4 h-4"}),"Mark as Reviewed"]})]})]})]}),o.jsxs("div",{className:"px-8 py-6 grid grid-cols-3 gap-6",children:[o.jsx("div",{className:"col-span-2",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-4",children:"Essay Content"}),o.jsx("div",{ref:S,contentEditable:!1,className:"prose prose-sm max-w-none text-slate-700 select-text cursor-text",style:{fontFamily:s.font_family,fontSize:`${s.font_size}pt`,lineHeight:"1.6"},onMouseUp:L})]})}),o.jsxs("div",{className:"space-y-6",children:[T&&C&&o.jsx("div",{className:"fixed z-50",style:{top:`${C.top}px`,left:`${C.left}px`,transform:"translateX(-50%)"},children:o.jsxs("button",{onClick:B,className:"bg-[#04ADEE] text-white px-4 py-2 rounded-lg shadow-lg hover:bg-[#0396d5] transition-colors font-medium text-sm flex items-center gap-2",children:[o.jsx($n,{className:"w-4 h-4"}),"Add Comment"]})}),d&&!T&&o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-700 mb-1",children:"Selected Text"}),o.jsxs("p",{className:"text-sm text-slate-600 italic",children:['"',d.text,'"']})]}),o.jsx("button",{onClick:()=>{var M;h(null),(M=window.getSelection())==null||M.removeAllRanges()},className:"text-slate-400 hover:text-slate-600",children:o.jsx(at,{className:"w-4 h-4"})})]}),o.jsx("textarea",{value:f,onChange:M=>m(M.target.value),placeholder:"Add your comment...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3}),o.jsxs("button",{onClick:q,disabled:!f.trim(),className:"mt-2 flex items-center gap-2 bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(_o,{className:"w-4 h-4"}),"Add Comment"]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[o.jsxs("h3",{className:"text-base font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[o.jsx($n,{className:"w-4 h-4"}),"Inline Comments (",a.length,")"]}),o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.length===0?o.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:'No inline comments yet. Highlight text and click "Add Comment" to add one.'}):a.map(M=>o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-700",children:M.counselor_name}),s.status!=="reviewed"&&o.jsx("button",{onClick:()=>V(M.id),className:"text-slate-400 hover:text-red-600 transition-colors",children:o.jsx(at,{className:"w-3.5 h-3.5"})})]}),o.jsxs("p",{className:"text-xs text-slate-600 italic mb-2",children:['"',M.highlighted_text,'"']}),o.jsx("p",{className:"text-xs text-slate-700",children:M.comment_text})]},M.id))})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[o.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"General Feedback"}),o.jsx("textarea",{value:g,onChange:M=>y(M.target.value),placeholder:"Write your overall feedback for this essay...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none mb-3",rows:4}),o.jsxs("button",{onClick:he,disabled:!g.trim(),className:"w-full flex items-center justify-center gap-2 bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(_o,{className:"w-4 h-4"}),"Add General Feedback"]}),o.jsx("div",{className:"mt-4 space-y-3 max-h-64 overflow-y-auto",children:c.map(M=>o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-700",children:M.counselor_name}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(M.created_at).toLocaleDateString()})]}),o.jsx("p",{className:"text-xs text-slate-700 leading-relaxed",children:M.comment_text})]},M.id))})]})]})]}),N&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Grade Essay"}),o.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Enter the grading based on your rubric"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Total Points (Maximum possible)"}),o.jsx("input",{type:"number",min:"1",value:b,onChange:M=>w(M.target.value),placeholder:"e.g., 100, 50, 20",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Score (Points earned)"}),o.jsx("input",{type:"number",min:"0",step:"0.01",value:_,onChange:M=>j(M.target.value),placeholder:"e.g., 85, 42.5, 18",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),b&&_&&o.jsx("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg",children:o.jsxs("p",{className:"text-sm text-slate-600",children:["Final Grade: ",o.jsxs("span",{className:"font-bold text-slate-900",children:[_,"/",b," (",(parseFloat(_)/parseFloat(b)*100).toFixed(1),"%)"]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{k(!1),w(""),j("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium",children:"Cancel"}),o.jsx("button",{onClick:xe,className:"flex-1 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium",children:"Save Grade"})]})]})})]}):o.jsxs("div",{className:"-mx-8 -my-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-5",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(ke,{className:"w-6 h-6 text-[#04ADEE]"}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Essay Review"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Pending Review"}),o.jsx(Cr,{className:"w-4 h-4 text-amber-500"})]}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:z})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Reviewed"}),o.jsx(Gl,{className:"w-4 h-4 text-emerald-500"})]}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:ce})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Review Progress"}),o.jsx(zn,{className:"w-4 h-4 text-amber-500"})]}),o.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[fe,"%"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>v("all"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${p==="all"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["All (",e.length,")"]}),o.jsxs("button",{onClick:()=>v("pending"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${p==="pending"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["Pending Review (",z,")"]}),o.jsxs("button",{onClick:()=>v("reviewed"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${p==="reviewed"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["Reviewed (",ce,")"]})]})]}),o.jsx("div",{className:"px-8 py-6",children:o.jsx("div",{className:"grid gap-4",children:mt.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ke,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-500 text-lg",children:"No essays found"}),o.jsx("p",{className:"text-slate-400 text-sm",children:"Try adjusting your filter"})]}):mt.map(M=>o.jsxs("div",{onClick:()=>D(M.id),className:"bg-white rounded-lg shadow-sm p-5 hover:shadow-md transition-all cursor-pointer border border-slate-200 hover:border-[#04ADEE]",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-1",children:M.essay_title}),o.jsxs("p",{className:"text-sm text-slate-600",children:[M.student_name,"  ",M.essay_type==="personal_statement"?"Personal Statement":M.essay_type==="supplement"?"Supplemental Essay":"Activity List",M.university_name&&`  ${M.university_name}`]})]}),ye(M.status)]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[M.status==="reviewed"&&M.reviewed_at?o.jsxs("span",{children:["Reviewed on: ",I(M.reviewed_at)]}):o.jsxs("span",{children:["Submitted on: ",I(M.submission_date)]}),M.status==="reviewed"&&M.total_points&&M.score!==null?o.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-700 font-semibold",children:[o.jsx(zn,{className:"w-3.5 h-3.5"}),M.score,"/",M.total_points," (",(M.score/M.total_points*100).toFixed(1),"%)"]}):o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx($n,{className:"w-3.5 h-3.5"}),"Click to review"]})]})]},M.id))})})]})},bg={async getCounselorAvailability(e){const t=se(te,`University Data/Timeslots/${e}`);try{const r=await Pe(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.keys(n).forEach(i=>{const a=n[i],[l,c]=i.split("_"),[u,d]=c.split("-");s.push({id:i,date:l,startTime:u,endTime:d,isBooked:a})}),s.sort((i,a)=>{const l=i.date.localeCompare(a.date);return l!==0?l:i.startTime.localeCompare(a.startTime)})}catch(r){return console.error("Error fetching availability:",r),[]}},async addAvailabilitySlot(e,t,r,n){const s=`${t}_${r}-${n}`,i=se(te,`University Data/Timeslots/${e}/${s}`);await ot(i,!1)},async deleteAvailabilitySlot(e,t){const r=se(te,`University Data/Timeslots/${e}/${t}`);await jc(r)},async getMeetingRequests(e){const t=se(te,`University Data/MeetingRequests/${e}`);try{const r=await Pe(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.keys(n).forEach(i=>{s.push({id:i,...n[i]})}),s}catch(r){return console.error("Error fetching meeting requests:",r),[]}},listenToCounselorAvailability(e,t){const r=se(te,`University Data/Timeslots/${e}`);return Xr(r,s=>{if(!s.exists()){t([]);return}const i=s.val(),a=[];Object.keys(i).forEach(c=>{const u=i[c],[d,h]=c.split("_"),[f,m]=h.split("-");a.push({id:c,date:d,startTime:f,endTime:m,isBooked:u})});const l=a.sort((c,u)=>{const d=c.date.localeCompare(u.date);return d!==0?d:c.startTime.localeCompare(u.startTime)});t(l)})},listenToMeetingRequests(e,t){const r=se(te,`University Data/MeetingRequests/${e}`);return Xr(r,s=>{if(!s.exists()){t([]);return}const i=s.val(),a=[];Object.keys(i).forEach(l=>{a.push({id:l,...i[l]})}),t(a)})},generateMeetingLink(e){return`https://meet.jit.si/educare-meeting-${e}`},async updateMeetingLink(e,t,r){const n=se(te,`University Data/MeetingRequests/${e}/${t}`),s=await Pe(n);s.exists()&&await ot(n,{...s.val(),meetingLink:r})}};function Sne({counselorName:e}){const[t,r]=x.useState([]),[n,s]=x.useState([]),[i,a]=x.useState(!0),[l,c]=x.useState("upcoming"),[u,d]=x.useState(!1),[h,f]=x.useState({date:"",startTime:"",endTime:""});x.useEffect(()=>{const v=bg.listenToCounselorAvailability(e,_=>{s(_),a(!1)}),b=se(te,`Upcoming meetings/${e}`),w=Xr(b,_=>{if(!_.exists()){r([]);return}const j=[],N=_.val();Object.keys(N).forEach(k=>{const T=N[k];Object.keys(T).forEach(P=>{const C=T[P],[A,S]=P.split("_");j.push({id:P,studentName:k,studentEmail:C.studentEmail||"",date:A,time:S,agenda:C.agenda||"No agenda provided",meetingLink:C.meetingLink||"",requestedAt:C.requestedAt||""})})}),j.sort((k,T)=>k.date.localeCompare(T.date)),r(j)});return()=>{v(),w()}},[e]);const m=async()=>{if(!h.date||!h.startTime||!h.endTime){alert("Please fill in all fields");return}try{await bg.addAvailabilitySlot(e,h.date,h.startTime,h.endTime),f({date:"",startTime:"",endTime:""}),d(!1)}catch(v){console.error("Error adding slot:",v),alert("Failed to add time slot. Please try again.")}},g=async v=>{if(confirm("Are you sure you want to delete this time slot?"))try{await bg.deleteAvailabilitySlot(e,v)}catch(b){console.error("Error deleting slot:",b),alert("Failed to delete time slot. Please try again.")}},y=v=>new Date(v).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),p=v=>{const[b,w]=v.split(":"),_=parseInt(b),j=_>=12?"PM":"AM";return`${_%12||12}:${w} ${j}`};return i?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})}):o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Meeting Requests"}),o.jsx("p",{className:"text-gray-600",children:"Manage student meeting requests and your availability"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsxs("div",{className:"flex",children:[o.jsx("button",{onClick:()=>c("upcoming"),className:`px-6 py-4 text-sm font-medium transition-colors ${l==="upcoming"?"text-[#04ADEE] border-b-2 border-[#04ADEE]":"text-gray-500 hover:text-gray-700"}`,children:"Upcoming Meetings"}),o.jsx("button",{onClick:()=>c("availability"),className:`px-6 py-4 text-sm font-medium transition-colors ${l==="availability"?"text-[#04ADEE] border-b-2 border-[#04ADEE]":"text-gray-500 hover:text-gray-700"}`,children:"My Availability"})]})}),l==="upcoming"?o.jsx("div",{className:"p-6",children:t.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500 text-lg",children:"No upcoming meetings"})]}):o.jsx("div",{className:"space-y-4",children:t.map(v=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow bg-green-50/50",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.studentName||"Unknown Student"}),o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Confirmed"})]}),o.jsx("p",{className:"text-sm text-gray-600",children:v.studentEmail})]})}),o.jsxs("div",{className:"flex items-center gap-6 mb-4 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wt,{className:"w-4 h-4"}),y(v.date)]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Cr,{className:"w-4 h-4"}),v.time]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 mb-3",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Meeting Agenda:"}),o.jsx("p",{className:"text-gray-600",children:v.agenda})]}),v.meetingLink&&o.jsxs("button",{onClick:()=>window.open(v.meetingLink,"_blank"),className:"w-full bg-gradient-to-r from-[#04adee] to-[#0396d5] text-white px-6 py-3 rounded-lg font-semibold hover:from-[#0396d5] hover:to-[#027fb8] transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[o.jsx(Go,{className:"w-5 h-5"}),"Join Video Meeting"]})]},v.id))})}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Available Time Slots"}),o.jsxs("button",{onClick:()=>d(!u),className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors flex items-center gap-2",children:[o.jsx(ur,{className:"w-4 h-4"}),"Add Time Slot"]})]}),u&&o.jsxs("div",{className:"bg-[#04ADEE]/10 border border-[#04ADEE]/30 rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Time Slot"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),o.jsx("input",{type:"date",value:h.date,onChange:v=>f({...h,date:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]",min:new Date().toISOString().split("T")[0]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),o.jsx("input",{type:"time",value:h.startTime,onChange:v=>f({...h,startTime:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),o.jsx("input",{type:"time",value:h.endTime,onChange:v=>f({...h,endTime:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:m,className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors",children:"Add Slot"}),o.jsx("button",{onClick:()=>{d(!1),f({date:"",startTime:"",endTime:""})},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),n.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Cr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500 text-lg",children:"No available time slots"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Add time slots for students to book meetings"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(v=>o.jsxs("div",{className:`border rounded-lg p-4 ${v.isBooked?"bg-gray-50 border-gray-300":"bg-white border-gray-200 hover:shadow-md transition-shadow"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wt,{className:"w-5 h-5 text-[#04ADEE]"}),o.jsx("span",{className:"font-medium text-gray-900",children:y(v.date)})]}),!v.isBooked&&o.jsx("button",{onClick:()=>g(v.id),className:"text-red-600 hover:text-red-700 transition-colors",children:o.jsx(at,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(Cr,{className:"w-4 h-4"}),o.jsxs("span",{children:[p(v.startTime)," - ",p(v.endTime)]})]}),v.isBooked&&o.jsx("div",{className:"mt-3 px-3 py-1 bg-gray-200 text-gray-700 text-xs font-medium rounded-full inline-block",children:"Booked"})]},v.id))})]})]})]})}const Ene=[{id:"1",student_id:"s1",date_of_birth:"2006-03-15",nationality:"United States",career_interests:"Computer Science, Artificial Intelligence, Software Engineering",financial_budget:75e3,created_at:"2024-01-15",student:{id:"s1",name:"Emma Rodriguez",email:"emma.rodriguez@email.com",composite_score:88.5,academic_performance:90,essay_activities_rating:87,academic_trend:5}},{id:"2",student_id:"s2",date_of_birth:"2006-07-22",nationality:"India",career_interests:"Biomedical Engineering, Healthcare Innovation, Medical Research",financial_budget:45e3,created_at:"2024-01-20",student:{id:"s2",name:"Arjun Patel",email:"arjun.patel@email.com",composite_score:91.2,academic_performance:93,essay_activities_rating:89,academic_trend:7}},{id:"3",student_id:"s3",date_of_birth:"2006-11-08",nationality:"United Kingdom",career_interests:"Environmental Science, Climate Policy, Sustainability",financial_budget:6e4,created_at:"2024-01-25",student:{id:"s3",name:"Sophie Chen",email:"sophie.chen@email.com",composite_score:85.8,academic_performance:84,essay_activities_rating:88,academic_trend:4}},{id:"4",student_id:"s4",date_of_birth:"2006-05-12",nationality:"Canada",career_interests:"Business Administration, Entrepreneurship, Finance",financial_budget:55e3,created_at:"2024-02-01",student:{id:"s4",name:"Marcus Johnson",email:"marcus.johnson@email.com",composite_score:82.4,academic_performance:81,essay_activities_rating:84,academic_trend:3}},{id:"5",student_id:"s5",date_of_birth:"2006-09-30",nationality:"Brazil",career_interests:"Architecture, Urban Planning, Sustainable Design",financial_budget:38e3,created_at:"2024-02-05",student:{id:"s5",name:"Isabella Santos",email:"isabella.santos@email.com",composite_score:87.6,academic_performance:86,essay_activities_rating:90,academic_trend:6}},{id:"6",student_id:"s6",date_of_birth:"2006-01-18",nationality:"South Korea",career_interests:"Mechanical Engineering, Robotics, Automation",financial_budget:5e4,created_at:"2024-02-10",student:{id:"s6",name:"David Kim",email:"david.kim@email.com",composite_score:89.3,academic_performance:91,essay_activities_rating:87,academic_trend:5}},{id:"7",student_id:"s7",date_of_birth:"2006-04-25",nationality:"Nigeria",career_interests:"International Relations, Political Science, Diplomacy",financial_budget:42e3,created_at:"2024-02-15",student:{id:"s7",name:"Amara Okonkwo",email:"amara.okonkwo@email.com",composite_score:84.7,academic_performance:83,essay_activities_rating:86,academic_trend:4}},{id:"8",student_id:"s8",date_of_birth:"2006-08-14",nationality:"Australia",career_interests:"Marine Biology, Environmental Conservation, Research",financial_budget:58e3,created_at:"2024-02-20",student:{id:"s8",name:"Olivia Thompson",email:"olivia.thompson@email.com",composite_score:86.9,academic_performance:85,essay_activities_rating:89,academic_trend:5}}];function Cne({onSelectStudent:e}){const[t]=x.useState(Ene),[r,n]=x.useState(""),s=t.filter(a=>{var l;return((l=a.student)==null?void 0:l.name.toLowerCase().includes(r.toLowerCase()))||a.nationality.toLowerCase().includes(r.toLowerCase())}),i=a=>{const l=new Date(a),c=new Date;let u=c.getFullYear()-l.getFullYear();const d=c.getMonth()-l.getMonth();return(d<0||d===0&&c.getDate()<l.getDate())&&u--,u};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Student Profiles"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage student information"})]})}),o.jsxs("div",{className:"relative",children:[o.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"Search by name or nationality...",value:r,onChange:a=>n(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.length===0?o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[o.jsx(sa,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No students found"})]}):o.jsx("div",{className:"grid gap-4",children:s.map(a=>{var l,c,u;return o.jsx("button",{onClick:()=>e(a.id),className:"bg-white rounded-lg border border-slate-200 p-6 hover:shadow-md hover:border-slate-300 transition-all text-left w-full",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:(l=a.student)==null?void 0:l.name.charAt(0)}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(c=a.student)==null?void 0:c.name}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(u=a.student)==null?void 0:u.email}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[o.jsx(sa,{className:"w-4 h-4 text-gray-400"}),o.jsxs("span",{className:"text-gray-600",children:["Age ",i(a.date_of_birth)]})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[o.jsx(OP,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-gray-600",children:a.nationality})]})]})]})]})})},a.id)})})]})}const wg=[{id:"1",essay_title:"Why This Major?",university_name:"Stanford University",submission_date:"2024-11-15",status:"reviewed",score:92},{id:"2",essay_title:"Community Impact",university_name:"MIT",submission_date:"2024-11-20",status:"reviewed",score:88},{id:"3",essay_title:"Overcoming Challenges",university_name:"UC Berkeley",submission_date:"2024-12-01",status:"in_review",score:null},{id:"4",essay_title:"Leadership Experience",university_name:"Harvard University",submission_date:"2024-12-10",status:"pending",score:null}],kne={1:{id:"1",student_id:"s1",date_of_birth:"2006-03-15",nationality:"United States",career_interests:"Computer Science, Artificial Intelligence, Software Engineering",financial_budget:75e3,personal_statement:`From a young age, I've been fascinated by the power of technology to solve real-world problems. Growing up in a small town with limited resources, I witnessed firsthand how digital innovation could bridge gaps in education and healthcare. This inspired me to pursue computer science, with a particular focus on artificial intelligence and machine learning.

During my high school years, I've dedicated myself to learning programming languages and frameworks, participating in hackathons, and developing applications that serve my community. One of my proudest achievements was creating a mobile app that helps local farmers optimize their crop yields using predictive analytics.

I believe that technology should be accessible and beneficial to all, and I'm committed to using my skills to create solutions that make a positive impact on society. I'm particularly interested in exploring how AI can be used ethically and responsibly to address challenges in healthcare, education, and environmental sustainability.`,extracurricular_activities:` President of Computer Science Club (3 years) - Led workshops on web development and organized coding competitions
 Varsity Soccer Team Captain (2 years) - Balanced athletic commitment with academic excellence
 Volunteer Coding Instructor - Taught programming basics to middle school students every Saturday
 Winner of State Hackathon 2023 - Developed an AI-powered tutoring platform
 National Honor Society Member - Maintained 4.0 GPA while contributing to community service projects
 Founded Tech for Good Initiative - Created a team that develops free apps for local non-profits`,special_circumstances:null,created_at:"2024-01-15",student:{id:"s1",name:"Emma Rodriguez",email:"emma.rodriguez@email.com",composite_score:88.5,academic_performance:90,essay_activities_rating:87,academic_trend:5}},2:{id:"2",student_id:"s2",date_of_birth:"2006-07-22",nationality:"India",career_interests:"Biomedical Engineering, Healthcare Innovation, Medical Research",financial_budget:45e3,personal_statement:`The intersection of engineering and medicine has always captivated me. When my grandmother suffered from a debilitating illness that required constant monitoring, I realized how technology could transform patient care and improve quality of life. This experience ignited my passion for biomedical engineering and healthcare innovation.

I've spent countless hours researching medical devices, studying anatomy and physiology, and learning about the latest advances in biotechnology. My goal is to develop accessible, affordable medical solutions that can benefit patients in underserved communities around the world.

Through internships at local hospitals and research projects, I've gained hands-on experience in understanding the practical challenges healthcare professionals face. I'm particularly interested in developing low-cost diagnostic tools and remote monitoring systems that can bring quality healthcare to rural areas. I believe that innovation in healthcare should not be a luxury but a fundamental right for all.`,extracurricular_activities:` Founder of Biomedical Innovation Club - Organized workshops and guest lectures from medical professionals
 Hospital Volunteer (300+ hours) - Assisted in patient care and observed medical procedures
 Science Olympiad Team - Gold medalist in Anatomy and Physiology division
 Research Assistant at University Lab - Studied tissue engineering and regenerative medicine
 TEDx Speaker - Presented on 'The Future of Affordable Healthcare Technology'
 Cricket Team Vice-Captain - Demonstrated leadership and teamwork skills`,special_circumstances:"As an international student from India, I come from a middle-class family where education is highly valued. My parents have made significant sacrifices to support my educational aspirations. I am actively seeking scholarships and financial aid to pursue my dream of studying biomedical engineering in the United States.",created_at:"2024-01-20",student:{id:"s2",name:"Arjun Patel",email:"arjun.patel@email.com",composite_score:91.2,academic_performance:93,essay_activities_rating:89,academic_trend:7}},3:{id:"3",student_id:"s3",date_of_birth:"2006-11-08",nationality:"United Kingdom",career_interests:"Environmental Science, Climate Policy, Sustainability",financial_budget:6e4,personal_statement:`Climate change is the defining challenge of our generation, and I am committed to being part of the solution. Growing up in a coastal town in the UK, I've witnessed the tangible effects of rising sea levels and extreme weather events. These experiences have shaped my determination to pursue environmental science and contribute to creating a sustainable future.

My academic journey has been driven by a deep curiosity about ecological systems and a desire to understand the complex relationships between human activity and environmental health. I've conducted independent research on local biodiversity, participated in beach cleanups, and engaged with community leaders to promote sustainable practices.

I believe that addressing climate change requires both scientific innovation and policy change. I'm eager to study environmental science at a university where I can develop the technical skills and interdisciplinary knowledge needed to tackle this global crisis. My ultimate goal is to work on developing and implementing evidence-based climate policies that can make a real difference.`,extracurricular_activities:` Environmental Club President - Led campus-wide sustainability initiatives and reduced school waste by 40%
 Youth Climate Council Member - Advised local government on environmental policies
 Marine Conservation Volunteer - Participated in coral reef restoration projects
 Science Fair Winner - Research project on microplastics in local water systems
 Debate Team Captain - Competed nationally, specializing in environmental policy topics
 Outdoor Adventure Club - Organized eco-friendly hiking and camping trips`,special_circumstances:null,created_at:"2024-01-25",student:{id:"s3",name:"Sophie Chen",email:"sophie.chen@email.com",composite_score:85.8,academic_performance:84,essay_activities_rating:88,academic_trend:4}},4:{id:"4",student_id:"s4",date_of_birth:"2006-05-12",nationality:"Canada",career_interests:"Business Administration, Entrepreneurship, Finance",financial_budget:55e3,personal_statement:`Entrepreneurship isn't just about building businesses; it's about solving problems and creating value for communities. My journey into business began when I started a small lawn care service at age 14, which taught me invaluable lessons about customer service, financial management, and perseverance.

What started as a summer job evolved into a passion for understanding how businesses operate and grow. I became fascinated by the strategic decisions that successful entrepreneurs make and the economic principles that drive markets. Through various business competitions and internships, I've developed skills in financial analysis, marketing strategy, and leadership.

I'm particularly interested in social entrepreneurship and how businesses can be forces for positive change while remaining profitable. I believe that the next generation of business leaders must balance profit with purpose, and I'm committed to developing the skills and knowledge necessary to build sustainable, ethical enterprises that benefit both shareholders and society.`,extracurricular_activities:` DECA International Finalist - Placed top 10 in Entrepreneurship category
 Founded 'Green Clean' Business - Student-run eco-friendly cleaning service employing 12 peers
 Junior Achievement Company Program - Served as CEO of award-winning student company
 Business Club Treasurer - Managed $15,000 budget and organized networking events
 Volunteer Financial Literacy Instructor - Taught personal finance basics to underserved youth
 Varsity Basketball Team - Demonstrated teamwork and leadership as point guard`,special_circumstances:null,created_at:"2024-02-01",student:{id:"s4",name:"Marcus Johnson",email:"marcus.johnson@email.com",composite_score:82.4,academic_performance:81,essay_activities_rating:84,academic_trend:3}},5:{id:"5",student_id:"s5",date_of_birth:"2006-09-30",nationality:"Brazil",career_interests:"Architecture, Urban Planning, Sustainable Design",financial_budget:38e3,personal_statement:`Architecture has the power to shape not just buildings, but communities and lives. Growing up in So Paulo, one of the world's largest cities, I've experienced both the beauty of thoughtful urban design and the challenges of rapid, unplanned development. This duality has inspired my passion for architecture and sustainable urban planning.

I believe that great architecture goes beyond aestheticsit must be functional, sustainable, and accessible to all members of society. Through my studies and volunteer work in underserved neighborhoods, I've learned that good design can improve quality of life, foster community connections, and address environmental challenges.

My goal is to become an architect who creates spaces that honor cultural heritage while embracing innovation and sustainability. I'm particularly interested in designing affordable housing solutions and public spaces that bring communities together. I want to use architecture as a tool for social change, creating built environments that are beautiful, sustainable, and equitable.`,extracurricular_activities:` Architecture Summer Program at Local University - Top student recognition
 Volunteer with Habitat for Humanity - Helped build homes for low-income families
 Art Club Vice President - Organized exhibitions showcasing student work
 Model UN Delegate - Represented Brazil in sustainable development committees
 Community Design Workshop Leader - Taught basic architectural principles to children
 Photography Club Member - Documented urban landscapes and architectural heritage`,special_circumstances:"I come from a working-class family in Brazil where my parents work multiple jobs to support my education. The economic challenges in my country have limited my access to advanced resources, but they have also taught me resilience and creativity. I am seeking financial aid to pursue my architectural education and bring valuable perspectives from my background to contribute to campus diversity.",created_at:"2024-02-05",student:{id:"s5",name:"Isabella Santos",email:"isabella.santos@email.com",composite_score:87.6,academic_performance:86,essay_activities_rating:90,academic_trend:6}},6:{id:"6",student_id:"s6",date_of_birth:"2006-01-18",nationality:"South Korea",career_interests:"Mechanical Engineering, Robotics, Automation",financial_budget:5e4,personal_statement:`Robotics represents the future of how humans interact with technology and solve complex problems. My fascination with mechanical systems began in elementary school when I dismantled my first toy robot to understand how it worked. That curiosity has evolved into a serious pursuit of mechanical engineering and robotics.

Throughout high school, I've dedicated myself to learning the principles of mechanics, electronics, and programming. I've participated in numerous robotics competitions, where I've not only honed my technical skills but also learned the importance of teamwork, iterative design, and creative problem-solving.

I'm particularly interested in how robotics and automation can be used to improve manufacturing efficiency, assist in healthcare, and explore environments that are dangerous or inaccessible to humans. My dream is to contribute to developing robotic systems that can make meaningful improvements in people's lives, whether through assistive technologies for individuals with disabilities or robots that can perform critical tasks in extreme environments.`,extracurricular_activities:` Robotics Team Captain - Led team to national championships, won Innovation Award
 FIRST Robotics Competition Participant (4 years) - Served as lead mechanical designer
 Founded Maker Space Club - Created hands-on learning environment for engineering projects
 Volunteer Mentor for Junior Robotics Teams - Coached elementary and middle school teams
 Math Olympiad Competitor - Regional gold medalist
 Taekwondo Black Belt - Demonstrated discipline and perseverance`,special_circumstances:null,created_at:"2024-02-10",student:{id:"s6",name:"David Kim",email:"david.kim@email.com",composite_score:89.3,academic_performance:91,essay_activities_rating:87,academic_trend:5}},7:{id:"7",student_id:"s7",date_of_birth:"2006-04-25",nationality:"Nigeria",career_interests:"International Relations, Political Science, Diplomacy",financial_budget:42e3,personal_statement:`In an increasingly interconnected world, the ability to build bridges between cultures and nations is more important than ever. Coming from Nigeria, a country rich in diversity and complex in its challenges, I've developed a deep appreciation for the power of diplomacy and international cooperation.

My interest in international relations stems from witnessing how global events directly impact local communities. I've been fascinated by the intricate web of economic, political, and social factors that shape our world. Through Model UN conferences, research projects, and engagement with current affairs, I've developed a nuanced understanding of international dynamics.

I aspire to work in diplomacy or international development, where I can contribute to building more equitable relationships between nations and addressing global challenges such as poverty, conflict, and climate change. I believe that with empathy, cultural intelligence, and strong negotiation skills, we can create a more peaceful and prosperous world for all.`,extracurricular_activities:` Model United Nations Team Leader - Won Best Delegate awards at multiple conferences
 Student Government President - Represented 2,000+ students and implemented policy changes
 Youth Ambassador for African Leadership Initiative - Represented Nigeria at international youth summit
 Debate Team Member - National finalist in foreign policy debates
 Volunteer with Refugee Support Organization - Tutored and mentored displaced youth
 Editor of School Newspaper - Covered international affairs and social justice issues`,special_circumstances:"As a student from Nigeria, I have faced challenges including inconsistent electricity, limited internet access, and economic instability. Despite these obstacles, I have maintained academic excellence and pursued my passions. I am seeking financial assistance to achieve my educational goals and eventually give back to my community in Nigeria.",created_at:"2024-02-15",student:{id:"s7",name:"Amara Okonkwo",email:"amara.okonkwo@email.com",composite_score:84.7,academic_performance:83,essay_activities_rating:86,academic_trend:4}},8:{id:"8",student_id:"s8",date_of_birth:"2006-08-14",nationality:"Australia",career_interests:"Marine Biology, Environmental Conservation, Research",financial_budget:58e3,personal_statement:`The ocean has always been my greatest teacher. Growing up along Australia's coast, I spent countless hours exploring tide pools, snorkeling in coral reefs, and marveling at the incredible diversity of marine life. These experiences sparked a lifelong passion for marine biology and ocean conservation.

What began as childhood curiosity has evolved into a serious commitment to understanding and protecting our oceans. Through research projects, volunteer work, and field studies, I've learned about the critical threats facing marine ecosystemsfrom climate change and pollution to overfishing and habitat destruction.

I'm particularly interested in coral reef ecology and the development of innovative conservation strategies. My goal is to pursue research that can inform policy decisions and contribute to the preservation of marine biodiversity. I believe that through rigorous scientific study and effective communication of research findings, we can inspire action to protect our oceans for future generations.`,extracurricular_activities:` Marine Conservation Volunteer - 400+ hours with Great Barrier Reef Foundation
 Science Research Project - Published findings on coral bleaching in local scientific journal
 Environmental Youth Council Member - Advocated for marine protection policies
 Certified Scuba Diver - Advanced Open Water certification, underwater research training
 Science Olympiad Marine Biology Team Captain - State champions 2023
 Swimming Team Member - Competed at state level while maintaining academic excellence`,special_circumstances:null,created_at:"2024-02-20",student:{id:"s8",name:"Olivia Thompson",email:"olivia.thompson@email.com",composite_score:86.9,academic_performance:85,essay_activities_rating:89,academic_trend:5}}};function Ane({studentId:e,onBack:t}){var d,h,f,m,g,y,p;const[r,n]=x.useState(null),[s,i]=x.useState(!1);x.useEffect(()=>{const v=kne[e];n(v||null),i(!1)},[e]);const a=v=>{const b=new Date(v),w=new Date;let _=w.getFullYear()-b.getFullYear();const j=w.getMonth()-b.getMonth();return(j<0||j===0&&w.getDate()<b.getDate())&&_--,_},l=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),c=v=>v.length<=300?v:v.substring(0,300)+"...",u=v=>v.split(`
`).filter(b=>b.trim()).map(b=>b.replace(/^\s*/,"").trim());return r?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[o.jsx(Kn,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Student Profiles"})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:o.jsxs("div",{className:"flex items-start space-x-6",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-3xl",children:(d=r.student)==null?void 0:d.name.charAt(0)}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:(h=r.student)==null?void 0:h.name}),o.jsx("p",{className:"text-gray-600 mt-1",children:(f=r.student)==null?void 0:f.email}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(wt,{className:"w-5 h-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Age"}),o.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[a(r.date_of_birth)," years"]}),o.jsxs("p",{className:"text-xs text-gray-400",children:["DOB: ",l(r.date_of_birth)]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(OP,{className:"w-5 h-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Nationality"}),o.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r.nationality})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qo,{className:"w-5 h-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Budget"}),o.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",r.financial_budget.toLocaleString()]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Er,{className:"w-5 h-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Essays Score"}),o.jsx("p",{className:"text-sm font-semibold text-gray-900",children:((g=(m=r.student)==null?void 0:m.essay_activities_rating)==null?void 0:g.toFixed(1))||"N/A"})]})]})]})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ke,{className:"w-5 h-5 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),((y=r.student)==null?void 0:y.essay_activities_rating)&&o.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200",children:[o.jsx(Er,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Essay Score: ",r.student.essay_activities_rating.toFixed(1),"%"]})]})]}),o.jsxs("div",{className:"prose max-w-none",children:[o.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s?r.personal_statement:c(r.personal_statement)}),r.personal_statement.length>300&&o.jsx("button",{onClick:()=>i(!s),className:"mt-3 text-blue-600 hover:text-blue-700 font-medium text-sm",children:s?"View less":"View more"})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(dr,{className:"w-5 h-5 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Extracurricular Activities"})]}),((p=r.student)==null?void 0:p.essay_activities_rating)&&o.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200",children:[o.jsx(Er,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Essay Score: ",r.student.essay_activities_rating.toFixed(1),"%"]})]})]}),o.jsx("div",{className:"space-y-3",children:u(r.extracurricular_activities).map((v,b)=>o.jsxs("div",{className:"flex gap-3",children:[o.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-sm font-semibold",children:b+1}),o.jsx("p",{className:"text-gray-700 leading-relaxed flex-1",children:v})]},b))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx(ke,{className:"w-5 h-5 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Supplementary Essays"}),o.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[wg.length," ",wg.length===1?"essay":"essays"]})]}),o.jsx("div",{className:"space-y-3",children:wg.map(v=>o.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:border-slate-300 transition-colors",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:v.essay_title}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:v.university_name}),o.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(wt,{className:"w-3.5 h-3.5"}),new Date(v.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${v.status==="reviewed"?"bg-green-100 text-green-700":v.status==="in_review"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:[v.status==="reviewed"?o.jsx(ar,{className:"w-3.5 h-3.5"}):o.jsx(Cr,{className:"w-3.5 h-3.5"}),v.status==="reviewed"?"Reviewed":v.status==="in_review"?"In Review":"Pending"]}),v.score&&o.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[v.score,"%"]})]})]})},v.id))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx(pB,{className:"w-5 h-5 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Career Interests"})]}),o.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.career_interests})]}),r.special_circumstances&&o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx(Cc,{className:"w-5 h-5 text-amber-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Special Circumstances"})]}),o.jsx("div",{className:"prose max-w-none",children:o.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:r.special_circumstances})})]})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-500",children:"Student profile not found"}),o.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Go Back"})]})}function Pne(e,t){const[r,n]=x.useState({unreviewedEssays:2,pendingMeetings:0,unreadMessages:3}),[s,i]=x.useState(!1);return x.useEffect(()=>{const l=se(te,`University Data/Timeslots/${t}`),c=Xr(l,u=>{let d=0;if(u.exists()){const h=u.val();d=Object.values(h).filter(f=>f===!0).length}n({unreviewedEssays:2,pendingMeetings:d,unreadMessages:3}),i(!1)});return()=>c()},[t]),{counts:r,loading:s,refetch:()=>{i(!0)}}}const SE=[{id:"1",name:"Maya Rodriguez",email:"maya.rodriguez@example.com",description:"Maya is a passionate advocate for environmental justice who combines her love for science with community organizing to create sustainable solutions.",careerInterests:["Environmental Science","Public Policy","Urban Planning"],essayActivities:92,academicPerformance:84,academicTrend:3,compositeStrength:86.3,strengthLabel:"Strong",composite_score:86.3,academic_performance:84,essay_activities_rating:92,academic_trend:3},{id:"2",name:"Ayaan Patel",email:"ayaan.patel@example.com",description:"Ayaan is an innovative problem-solver with a keen interest in artificial intelligence and its applications in healthcare to improve patient outcomes.",careerInterests:["Computer Science","Biomedical Engineering","Healthcare"],essayActivities:88,academicPerformance:91,academicTrend:6,compositeStrength:88.3,strengthLabel:"Strong",composite_score:88.3,academic_performance:91,essay_activities_rating:88,academic_trend:6},{id:"3",name:"Ethan Chen",email:"ethan.chen@example.com",description:"Ethan is a creative entrepreneur who founded a social enterprise connecting local artisans with global markets while preserving cultural heritage.",careerInterests:["Business Administration","International Relations","Social Entrepreneurship"],essayActivities:75,academicPerformance:89,academicTrend:8,compositeStrength:84,strengthLabel:"Competitive",composite_score:84,academic_performance:89,essay_activities_rating:75,academic_trend:8},{id:"4",name:"Zara Khan",email:"zara.khan@example.com",description:"Zara is a talented writer and aspiring filmmaker who uses storytelling to amplify marginalized voices and spark conversations about social change.",careerInterests:["Film & Media Studies","Creative Writing","Journalism"],essayActivities:81,academicPerformance:78,academicTrend:2,compositeStrength:80.3,strengthLabel:"Competitive",composite_score:80.3,academic_performance:78,essay_activities_rating:81,academic_trend:2},{id:"5",name:"Lucas Bennett",email:"lucas.bennett@example.com",description:"Lucas is a dedicated student athlete who balances competitive swimming with a passion for physical therapy to help others achieve their athletic goals.",careerInterests:["Kinesiology","Physical Therapy","Sports Medicine"],essayActivities:68,academicPerformance:73,academicTrend:1,compositeStrength:70.3,strengthLabel:"Developing",composite_score:70.3,academic_performance:73,essay_activities_rating:68,academic_trend:1}],EE=[{id:"6",name:"Emma Wilson",email:"emma.wilson@example.com",description:"Emma is a dedicated computer science student with exceptional coding skills and a passion for developing AI solutions.",careerInterests:["Computer Science","Artificial Intelligence","Software Engineering"],essayActivities:95,academicPerformance:92,academicTrend:5,compositeStrength:91.5,strengthLabel:"Strong",composite_score:91.5,academic_performance:92,essay_activities_rating:95,academic_trend:5,universities:["Stanford University","UC Berkeley","University of Washington"],assignedDate:"2024-12-10"},{id:"7",name:"Sophie Chen",email:"sophie.chen@example.com",description:"Sophie is a robotics enthusiast who has won multiple national competitions and developed innovative solutions for accessibility.",careerInterests:["Mechanical Engineering","Robotics","Product Design"],essayActivities:89,academicPerformance:88,academicTrend:7,compositeStrength:87.8,strengthLabel:"Strong",composite_score:87.8,academic_performance:88,essay_activities_rating:89,academic_trend:7,universities:["MIT","University of Michigan","Purdue University","Georgia Tech"],assignedDate:"2024-12-12"}];function One({counselor:e,onLogout:t}){const[r,n]=x.useState("academic"),[s,i]=x.useState(SE),[a,l]=x.useState(EE),[c,u]=x.useState(null),[d,h]=x.useState("all"),[f,m]=x.useState(null),[g,y]=x.useState(null),[p,v]=x.useState(!1),[b,w]=x.useState(null),{counts:_}=Pne(e.id,e.name),j=x.useMemo(()=>{let C=[...s];return d!=="all"&&(C=C.filter(A=>{const S=A.compositeStrength;switch(d){case"90-100":return S>=90&&S<=100;case"80-89":return S>=80&&S<90;case"70-79":return S>=70&&S<80;case"below-70":return S<70;default:return!0}})),C.sort((A,S)=>S.compositeStrength-A.compositeStrength)},[s,d]),N=j.reduce((C,A)=>C+A.compositeStrength,0)/(j.length||1),k=a.length,T=SE.length+EE.length,P=()=>{c&&i(s.filter(C=>C.id!==c.id)),u(null)};return g?o.jsx(f7,{studentId:g,counselorId:e.id,onBack:()=>y(null)}):o.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[o.jsxs("aside",{className:`bg-white border-r border-slate-200 fixed left-0 top-0 bottom-0 flex flex-col transition-all duration-300 ${p?"w-20":"w-72"}`,children:[o.jsx("button",{onClick:()=>v(!p),className:"absolute -right-3 top-24 bg-white border border-slate-200 rounded-full p-1.5 shadow-md hover:bg-slate-50 transition-colors z-50",title:p?"Expand sidebar":"Collapse sidebar",children:p?o.jsx(kP,{className:"w-4 h-4 text-slate-600"}):o.jsx(CP,{className:"w-4 h-4 text-slate-600"})}),o.jsx("div",{className:`p-6 border-b border-slate-200 ${p?"p-4":""}`,children:o.jsxs("div",{className:`flex items-center gap-3 mb-2 ${p?"justify-center":""}`,children:[o.jsx("img",{src:"/white_logo.png",alt:"EduCare",className:"w-10 h-10 object-contain"}),!p&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("p",{className:"text-xl font-bold text-[#04ADEE] leading-tight",children:"EduCare"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Counselor Portal"})]})]})}),o.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[o.jsxs("div",{className:"mb-4",children:[!p&&o.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Academic"}),o.jsxs("button",{onClick:()=>n("academic"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="academic"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Academic Tracking":void 0,children:[o.jsx(er,{className:"w-5 h-5 flex-shrink-0"}),!p&&o.jsx("span",{children:"Academic Tracking"})]})]}),e.role==="pool_management"&&o.jsxs("div",{className:"mb-4",children:[!p&&o.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Pool Management"}),o.jsxs("button",{onClick:()=>n("active"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="active"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Active Pool":void 0,children:[o.jsx(ia,{className:"w-5 h-5 flex-shrink-0"}),!p&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Active Pool"}),o.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="active"?"bg-white/20 text-white":"bg-slate-100 text-slate-600"}`,children:j.length})]})]}),o.jsxs("button",{onClick:()=>n("assigned"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="assigned"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Assigned Students":void 0,children:[o.jsx(ej,{className:"w-5 h-5 flex-shrink-0"}),!p&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Assigned Students"}),o.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="assigned"?"bg-white/20 text-white":"bg-slate-100 text-slate-600"}`,children:k})]})]})]}),e.role==="essay"&&o.jsxs("div",{className:"mb-4",children:[!p&&o.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Essays and Profiles"}),o.jsxs("button",{onClick:()=>n("essays"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="essays"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Essay Review":void 0,children:[o.jsx(ke,{className:"w-5 h-5 flex-shrink-0"}),p&&_.unreviewedEssays>0&&o.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!p&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Essay Review"}),_.unreviewedEssays>0&&o.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="essays"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:_.unreviewedEssays})]})]}),o.jsxs("button",{onClick:()=>{n("student_profiles"),w(null)},className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="student_profiles"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Student Profiles":void 0,children:[o.jsx(sa,{className:"w-5 h-5 flex-shrink-0"}),!p&&o.jsx("span",{children:"Student Profiles"})]})]}),o.jsxs("div",{className:"mb-4",children:[!p&&o.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Communication"}),o.jsxs("button",{onClick:()=>n("inbox"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="inbox"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Inbox":void 0,children:[o.jsx($n,{className:"w-5 h-5 flex-shrink-0"}),p&&_.unreadMessages>0&&o.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!p&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Inbox"}),_.unreadMessages>0&&o.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="inbox"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:_.unreadMessages})]})]}),o.jsxs("button",{onClick:()=>n("meetings"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="meetings"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Meeting Requests":void 0,children:[o.jsx(wt,{className:"w-5 h-5 flex-shrink-0"}),p&&_.pendingMeetings>0&&o.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!p&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Meeting Requests"}),_.pendingMeetings>0&&o.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="meetings"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:_.pendingMeetings})]})]})]}),o.jsxs("div",{children:[!p&&o.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Resources"}),o.jsxs("button",{onClick:()=>n("scholarships"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="scholarships"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Scholarships":void 0,children:[o.jsx(dr,{className:"w-5 h-5 flex-shrink-0"}),!p&&o.jsx("span",{children:"Scholarships"})]}),o.jsxs("button",{onClick:()=>n("resources"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="resources"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Resources":void 0,children:[o.jsx(Er,{className:"w-5 h-5 flex-shrink-0"}),!p&&o.jsx("span",{children:"Resources"})]})]})]}),o.jsx("div",{className:`border-t border-slate-200 ${p?"p-2":"p-4"}`,children:p?o.jsx("button",{onClick:t,className:"w-full flex items-center justify-center p-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors",title:"Sign Out",children:o.jsx(Hv,{className:"w-5 h-5"})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("img",{src:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",alt:e.name,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-200"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:e.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Counselor"})]})]}),o.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors",children:[o.jsx(Hv,{className:"w-4 h-4"}),o.jsx("span",{children:"Sign Out"})]})]})})]}),o.jsxs("main",{className:`flex-1 overflow-y-auto transition-all duration-300 ${p?"ml-20":"ml-72"}`,children:[(r==="active"||r==="assigned")&&o.jsx("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20",children:o.jsxs("div",{className:"px-8 py-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(tn,{className:"w-6 h-6 text-[#04ADEE]"}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Pool Management Dashboard"})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-emerald-500 px-3 py-1.5 rounded-full",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),o.jsx("span",{className:"text-xs font-semibold text-white",children:"Active"})]})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ia,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Active Pool"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-3xl font-bold text-slate-900",children:o.jsx(Ye,{end:j.length,duration:1500})}),o.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ej,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Assigned"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-3xl font-bold text-slate-900",children:o.jsx(Ye,{end:k,duration:1500})}),o.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(tn,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Avg Strength"})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-3xl font-bold text-[#04ADEE]",children:o.jsx(Ye,{end:N,duration:1500,decimals:1})}),o.jsx("span",{className:"text-sm text-slate-600",children:"%"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[o.jsx("div",{className:"flex items-center gap-2 mb-2",children:o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Progress"})}),o.jsx("div",{className:"mb-2",children:o.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[o.jsx(Ye,{end:k,duration:1500})," / ",o.jsx(Ye,{end:T,duration:1500})]})}),o.jsx("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${k/T*100}%`}})})]})]})]})}),o.jsxs("div",{className:"px-8 py-6",children:[r==="academic"&&o.jsx(jne,{}),r==="inbox"&&o.jsx(FP,{userRole:"counselor"}),r==="essays"&&o.jsx(Nne,{}),r==="meetings"&&o.jsx(Sne,{counselorId:e.id,counselorName:e.name}),r==="student_profiles"&&(b?o.jsx(Ane,{studentId:b,onBack:()=>w(null)}):o.jsx(Cne,{onSelectStudent:w})),r==="scholarships"&&o.jsx(i7,{onBack:()=>n("active"),onLogout:()=>{}}),r==="resources"&&o.jsx(a7,{onBack:()=>n("active"),onLogout:()=>{}}),r==="active"&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Filter by Composite:"}),o.jsxs("select",{value:d,onChange:C=>h(C.target.value),className:"px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[o.jsx("option",{value:"all",children:"All Students"}),o.jsx("option",{value:"90-100",children:"90-100 (Excellent)"}),o.jsx("option",{value:"80-89",children:"80-89 (Strong)"}),o.jsx("option",{value:"70-79",children:"70-79 (Competitive)"}),o.jsx("option",{value:"below-70",children:"Below 70 (Developing)"})]})]}),o.jsxs("span",{className:"text-sm text-slate-500",children:["Showing ",j.length," of ",s.length," students"]})]}),j.length===0?o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[o.jsx(tn,{className:"w-12 h-12 text-emerald-500 mx-auto mb-3"}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"No Students Found"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Try adjusting your filter to see more students."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(C=>{const S=C.description.length>120,E=S?C.description.slice(0,120)+"...":C.description;return o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 hover:border-slate-300 hover:shadow-lg transition-all p-5 flex flex-col",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:C.name}),o.jsx("span",{className:`inline-block px-2.5 py-1 rounded-full text-xs font-semibold ${C.strengthLabel==="Strong"?"bg-emerald-100 text-emerald-700":C.strengthLabel==="Competitive"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:C.strengthLabel})]}),o.jsxs("div",{className:"text-center bg-slate-50 rounded-lg px-3 py-2 border border-slate-200",children:[o.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Composite"}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:o.jsx(Ye,{end:C.compositeStrength,duration:1500,decimals:1})})]})]}),o.jsxs("div",{className:"text-sm text-slate-600 leading-relaxed mb-4 flex-grow",children:[o.jsx("p",{className:"inline",children:E}),S&&o.jsx("button",{onClick:()=>m(C),className:"ml-1 text-[#04ADEE] hover:text-[#0396d5] font-medium inline",children:"Read More"})]}),o.jsxs("div",{className:"space-y-2.5 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Essay & Activities"}),o.jsxs("span",{className:"text-xs font-bold text-slate-900",children:[o.jsx(Ye,{end:C.essayActivities,duration:1500}),"%"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Current Average"}),o.jsxs("span",{className:"text-xs font-bold text-slate-900",children:[o.jsx(Ye,{end:C.academicPerformance,duration:1500}),"%"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Academic Trend"}),o.jsxs("span",{className:`text-xs font-bold ${C.academicTrend>=5?"text-emerald-600":"text-slate-900"}`,children:[C.academicTrend>0?"+":"",o.jsx(Ye,{end:C.academicTrend,duration:1500}),"%"]})]})]}),o.jsxs("div",{className:"border-t border-slate-100 pt-3 mb-4",children:[o.jsx("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Career Interests"}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:C.careerInterests.map((O,R)=>o.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-md text-xs font-medium border border-blue-200",children:O},R))})]}),o.jsx("button",{onClick:()=>u(C),className:"w-full px-4 py-2.5 bg-[#04ADEE] hover:bg-[#0396d5] text-white text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow",children:"Assign Universities"})]},C.id)})})]}),r==="assigned"&&o.jsx("div",{className:"space-y-3",children:a.length===0?o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[o.jsx(tn,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"No Assigned Students Yet"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Students will appear here once universities are assigned."})]}):a.map(C=>o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>y(C.id),children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-bold text-slate-900 mb-1",children:C.name}),o.jsx("span",{className:`inline-block px-2.5 py-1 rounded-full text-xs font-semibold ${C.strengthLabel==="Strong"?"bg-emerald-100 text-emerald-700":C.strengthLabel==="Competitive"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:C.strengthLabel})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500",children:"Composite"}),o.jsx("div",{className:"text-xl font-bold text-slate-900",children:o.jsx(Ye,{end:C.compositeStrength,duration:1500,decimals:1})})]})]}),o.jsxs("div",{className:"border-t border-slate-100 pt-3",children:[o.jsxs("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:["Assigned Universities (",C.universities.length,")"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:C.universities.map((A,S)=>o.jsx("span",{className:"px-3 py-1.5 bg-slate-50 text-slate-700 rounded-lg text-xs font-medium border border-slate-200",children:A},S))})]})]},C.id))})]})]}),c&&o.jsx(l7,{student:c,counselorId:"counselor-demo",onClose:()=>u(null),onComplete:P}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Student Details"}),o.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(at,{className:"w-5 h-5 text-slate-500"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:f.name}),o.jsx("p",{className:"text-sm text-slate-600",children:f.email}),o.jsx("span",{className:`inline-block mt-3 px-3 py-1.5 rounded-full text-sm font-semibold ${f.strengthLabel==="Strong"?"bg-emerald-100 text-emerald-700":f.strengthLabel==="Competitive"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:f.strengthLabel})]}),o.jsxs("div",{className:"text-center bg-slate-50 rounded-xl px-4 py-3 border border-slate-200",children:[o.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Composite Score"}),o.jsx("div",{className:"text-3xl font-bold text-slate-900",children:o.jsx(Ye,{end:f.compositeStrength,duration:1500,decimals:1})})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-2",children:"About"}),o.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:f.description})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[o.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Essay & Activities"}),o.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[o.jsx(Ye,{end:f.essayActivities,duration:1500}),"%"]})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[o.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Current Average"}),o.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[o.jsx(Ye,{end:f.academicPerformance,duration:1500}),"%"]})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[o.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Academic Trend"}),o.jsxs("div",{className:`text-2xl font-bold ${f.academicTrend>=5?"text-emerald-600":"text-slate-900"}`,children:[f.academicTrend>0?"+":"",o.jsx(Ye,{end:f.academicTrend,duration:1500}),"%"]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Career Interests"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:f.careerInterests.map((C,A)=>o.jsx("span",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium border border-blue-200",children:C},A))})]}),o.jsxs("button",{onClick:()=>{m(null),u(f)},className:"w-full px-4 py-3 bg-[#04ADEE] hover:bg-[#0396d5] text-white text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow",children:["Assign Universities to ",f.name]})]})]})})]})}function Tne(){const[e,t]=x.useState(null),[r,n]=x.useState(!1),[s,i]=x.useState(null),[a,l]=x.useState(null),[c,u]=x.useState(!0),d=zM();x.useEffect(()=>{(async()=>{Ue.clearUser(),J1.logout(),n(!1),i(null),t(null),u(!1)})()},[]);const h=g=>{console.log("User logged in:",g),i(g),t("student"),n(!0)},f=g=>{l(g),t("counselor"),n(!0)},m=()=>{e==="counselor"?J1.logout():BU(),i(null),n(!1),t(null)};return c?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-[#04adee] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e==="counselor"&&r&&a?o.jsx("div",{className:"App",children:o.jsx(One,{counselor:a,onLogout:m})}):e==="student"&&r?d==="mobile"?o.jsx("div",{className:"App",children:o.jsx(s7,{onLogout:m,user:s})}):o.jsx("div",{className:"App",children:o.jsx(YB,{onLogout:m})}):d==="mobile"?o.jsx("div",{className:"App",children:o.jsx(XB,{onLogin:h,onCounselorLogin:f})}):o.jsx("div",{className:"App",children:o.jsx(PB,{onLogin:h,onCounselorLogin:f})})}FC(document.getElementById("root")).render(o.jsx(x.StrictMode,{children:o.jsx(Tne,{})}));
